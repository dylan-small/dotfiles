var v0=Object.create;var Da=Object.defineProperty;var y0=Object.getOwnPropertyDescriptor;var w0=Object.getOwnPropertyNames;var C0=Object.getPrototypeOf,R0=Object.prototype.hasOwnProperty;var B=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports),S0=(r,e)=>{for(var t in e)Da(r,t,{get:e[t],enumerable:!0})},Sm=(r,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of w0(e))!R0.call(r,i)&&i!==t&&Da(r,i,{get:()=>e[i],enumerable:!(n=y0(e,i))||n.enumerable});return r};var Ce=(r,e,t)=>(t=r!=null?v0(C0(r)):{},Sm(e||!r||!r.__esModule?Da(t,"default",{value:r,enumerable:!0}):t,r)),D0=r=>Sm(Da({},"__esModule",{value:!0}),r);var ir=B(Lt=>{"use strict";Object.defineProperty(Lt,"__esModule",{value:!0});Lt.asPromise=Lt.thenable=Lt.typedArray=Lt.stringArray=Lt.array=Lt.func=Lt.error=Lt.number=Lt.string=Lt.boolean=void 0;function $0(r){return r===!0||r===!1}Lt.boolean=$0;function Um(r){return typeof r=="string"||r instanceof String}Lt.string=Um;function N0(r){return typeof r=="number"||r instanceof Number}Lt.number=N0;function q0(r){return r instanceof Error}Lt.error=q0;function Bm(r){return typeof r=="function"}Lt.func=Bm;function Vm(r){return Array.isArray(r)}Lt.array=Vm;function L0(r){return Vm(r)&&r.every(e=>Um(e))}Lt.stringArray=L0;function M0(r,e){return Array.isArray(r)&&r.every(e)}Lt.typedArray=M0;function zm(r){return r&&Bm(r.then)}Lt.thenable=zm;function F0(r){return r instanceof Promise?r:zm(r)?new Promise((e,t)=>{r.then(n=>e(n),n=>t(n))}):Promise.resolve(r)}Lt.asPromise=F0});var cs=B(bn=>{"use strict";Object.defineProperty(bn,"__esModule",{value:!0});bn.stringArray=bn.array=bn.func=bn.error=bn.number=bn.string=bn.boolean=void 0;function j0(r){return r===!0||r===!1}bn.boolean=j0;function Gm(r){return typeof r=="string"||r instanceof String}bn.string=Gm;function U0(r){return typeof r=="number"||r instanceof Number}bn.number=U0;function B0(r){return r instanceof Error}bn.error=B0;function V0(r){return typeof r=="function"}bn.func=V0;function Hm(r){return Array.isArray(r)}bn.array=Hm;function z0(r){return Hm(r)&&r.every(e=>Gm(e))}bn.stringArray=z0});var ed=B(Re=>{"use strict";Object.defineProperty(Re,"__esModule",{value:!0});Re.Message=Re.NotificationType9=Re.NotificationType8=Re.NotificationType7=Re.NotificationType6=Re.NotificationType5=Re.NotificationType4=Re.NotificationType3=Re.NotificationType2=Re.NotificationType1=Re.NotificationType0=Re.NotificationType=Re.RequestType9=Re.RequestType8=Re.RequestType7=Re.RequestType6=Re.RequestType5=Re.RequestType4=Re.RequestType3=Re.RequestType2=Re.RequestType1=Re.RequestType=Re.RequestType0=Re.AbstractMessageSignature=Re.ParameterStructures=Re.ResponseError=Re.ErrorCodes=void 0;var Ti=cs(),El;(function(r){r.ParseError=-32700,r.InvalidRequest=-32600,r.MethodNotFound=-32601,r.InvalidParams=-32602,r.InternalError=-32603,r.jsonrpcReservedErrorRangeStart=-32099,r.serverErrorStart=-32099,r.MessageWriteError=-32099,r.MessageReadError=-32098,r.PendingResponseRejected=-32097,r.ConnectionInactive=-32096,r.ServerNotInitialized=-32002,r.UnknownErrorCode=-32001,r.jsonrpcReservedErrorRangeEnd=-32e3,r.serverErrorEnd=-32e3})(El||(Re.ErrorCodes=El={}));var Il=class r extends Error{constructor(e,t,n){super(t),this.code=Ti.number(e)?e:El.UnknownErrorCode,this.data=n,Object.setPrototypeOf(this,r.prototype)}toJson(){let e={code:this.code,message:this.message};return this.data!==void 0&&(e.data=this.data),e}};Re.ResponseError=Il;var $n=class r{constructor(e){this.kind=e}static is(e){return e===r.auto||e===r.byName||e===r.byPosition}toString(){return this.kind}};Re.ParameterStructures=$n;$n.auto=new $n("auto");$n.byPosition=new $n("byPosition");$n.byName=new $n("byName");var Rt=class{constructor(e,t){this.method=e,this.numberOfParams=t}get parameterStructures(){return $n.auto}};Re.AbstractMessageSignature=Rt;var Al=class extends Rt{constructor(e){super(e,0)}};Re.RequestType0=Al;var Ol=class extends Rt{constructor(e,t=$n.auto){super(e,1),this._parameterStructures=t}get parameterStructures(){return this._parameterStructures}};Re.RequestType=Ol;var $l=class extends Rt{constructor(e,t=$n.auto){super(e,1),this._parameterStructures=t}get parameterStructures(){return this._parameterStructures}};Re.RequestType1=$l;var Nl=class extends Rt{constructor(e){super(e,2)}};Re.RequestType2=Nl;var ql=class extends Rt{constructor(e){super(e,3)}};Re.RequestType3=ql;var Ll=class extends Rt{constructor(e){super(e,4)}};Re.RequestType4=Ll;var Ml=class extends Rt{constructor(e){super(e,5)}};Re.RequestType5=Ml;var Fl=class extends Rt{constructor(e){super(e,6)}};Re.RequestType6=Fl;var jl=class extends Rt{constructor(e){super(e,7)}};Re.RequestType7=jl;var Ul=class extends Rt{constructor(e){super(e,8)}};Re.RequestType8=Ul;var Bl=class extends Rt{constructor(e){super(e,9)}};Re.RequestType9=Bl;var Vl=class extends Rt{constructor(e,t=$n.auto){super(e,1),this._parameterStructures=t}get parameterStructures(){return this._parameterStructures}};Re.NotificationType=Vl;var zl=class extends Rt{constructor(e){super(e,0)}};Re.NotificationType0=zl;var Gl=class extends Rt{constructor(e,t=$n.auto){super(e,1),this._parameterStructures=t}get parameterStructures(){return this._parameterStructures}};Re.NotificationType1=Gl;var Hl=class extends Rt{constructor(e){super(e,2)}};Re.NotificationType2=Hl;var Wl=class extends Rt{constructor(e){super(e,3)}};Re.NotificationType3=Wl;var Kl=class extends Rt{constructor(e){super(e,4)}};Re.NotificationType4=Kl;var Xl=class extends Rt{constructor(e){super(e,5)}};Re.NotificationType5=Xl;var Yl=class extends Rt{constructor(e){super(e,6)}};Re.NotificationType6=Yl;var Ql=class extends Rt{constructor(e){super(e,7)}};Re.NotificationType7=Ql;var Zl=class extends Rt{constructor(e){super(e,8)}};Re.NotificationType8=Zl;var Jl=class extends Rt{constructor(e){super(e,9)}};Re.NotificationType9=Jl;var Wm;(function(r){function e(i){let s=i;return s&&Ti.string(s.method)&&(Ti.string(s.id)||Ti.number(s.id))}r.isRequest=e;function t(i){let s=i;return s&&Ti.string(s.method)&&i.id===void 0}r.isNotification=t;function n(i){let s=i;return s&&(s.result!==void 0||!!s.error)&&(Ti.string(s.id)||Ti.number(s.id)||s.id===null)}r.isResponse=n})(Wm||(Re.Message=Wm={}))});var nd=B(ti=>{"use strict";var Km;Object.defineProperty(ti,"__esModule",{value:!0});ti.LRUCache=ti.LinkedMap=ti.Touch=void 0;var vn;(function(r){r.None=0,r.First=1,r.AsOld=r.First,r.Last=2,r.AsNew=r.Last})(vn||(ti.Touch=vn={}));var ja=class{constructor(){this[Km]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){return this._head?.value}get last(){return this._tail?.value}has(e){return this._map.has(e)}get(e,t=vn.None){let n=this._map.get(e);if(n)return t!==vn.None&&this.touch(n,t),n.value}set(e,t,n=vn.None){let i=this._map.get(e);if(i)i.value=t,n!==vn.None&&this.touch(i,n);else{switch(i={key:e,value:t,next:void 0,previous:void 0},n){case vn.None:this.addItemLast(i);break;case vn.First:this.addItemFirst(i);break;case vn.Last:this.addItemLast(i);break;default:this.addItemLast(i);break}this._map.set(e,i),this._size++}return this}delete(e){return!!this.remove(e)}remove(e){let t=this._map.get(e);if(t)return this._map.delete(e),this.removeItem(t),this._size--,t.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");let e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,t){let n=this._state,i=this._head;for(;i;){if(t?e.bind(t)(i.value,i.key,this):e(i.value,i.key,this),this._state!==n)throw new Error("LinkedMap got modified during iteration.");i=i.next}}keys(){let e=this._state,t=this._head,n={[Symbol.iterator]:()=>n,next:()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(t){let i={value:t.key,done:!1};return t=t.next,i}else return{value:void 0,done:!0}}};return n}values(){let e=this._state,t=this._head,n={[Symbol.iterator]:()=>n,next:()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(t){let i={value:t.value,done:!1};return t=t.next,i}else return{value:void 0,done:!0}}};return n}entries(){let e=this._state,t=this._head,n={[Symbol.iterator]:()=>n,next:()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(t){let i={value:[t.key,t.value],done:!1};return t=t.next,i}else return{value:void 0,done:!0}}};return n}[(Km=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(e){if(e>=this.size)return;if(e===0){this.clear();return}let t=this._head,n=this.size;for(;t&&n>e;)this._map.delete(t.key),t=t.next,n--;this._head=t,this._size=n,t&&(t.previous=void 0),this._state++}addItemFirst(e){if(!this._head&&!this._tail)this._tail=e;else if(this._head)e.next=this._head,this._head.previous=e;else throw new Error("Invalid list");this._head=e,this._state++}addItemLast(e){if(!this._head&&!this._tail)this._head=e;else if(this._tail)e.previous=this._tail,this._tail.next=e;else throw new Error("Invalid list");this._tail=e,this._state++}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{let t=e.next,n=e.previous;if(!t||!n)throw new Error("Invalid list");t.previous=n,n.next=t}e.next=void 0,e.previous=void 0,this._state++}touch(e,t){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(t!==vn.First&&t!==vn.Last)){if(t===vn.First){if(e===this._head)return;let n=e.next,i=e.previous;e===this._tail?(i.next=void 0,this._tail=i):(n.previous=i,i.next=n),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(t===vn.Last){if(e===this._tail)return;let n=e.next,i=e.previous;e===this._head?(n.previous=void 0,this._head=n):(n.previous=i,i.next=n),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}}toJSON(){let e=[];return this.forEach((t,n)=>{e.push([n,t])}),e}fromJSON(e){this.clear();for(let[t,n]of e)this.set(t,n)}};ti.LinkedMap=ja;var td=class extends ja{constructor(e,t=1){super(),this._limit=e,this._ratio=Math.min(Math.max(0,t),1)}get limit(){return this._limit}set limit(e){this._limit=e,this.checkTrim()}get ratio(){return this._ratio}set ratio(e){this._ratio=Math.min(Math.max(0,e),1),this.checkTrim()}get(e,t=vn.AsNew){return super.get(e,t)}peek(e){return super.get(e,vn.None)}set(e,t){return super.set(e,t,vn.Last),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}};ti.LRUCache=td});var Ym=B(Ua=>{"use strict";Object.defineProperty(Ua,"__esModule",{value:!0});Ua.Disposable=void 0;var Xm;(function(r){function e(t){return{dispose:t}}r.create=e})(Xm||(Ua.Disposable=Xm={}))});var ni=B(sd=>{"use strict";Object.defineProperty(sd,"__esModule",{value:!0});var rd;function id(){if(rd===void 0)throw new Error("No runtime abstraction layer installed");return rd}(function(r){function e(t){if(t===void 0)throw new Error("No runtime abstraction layer provided");rd=t}r.install=e})(id||(id={}));sd.default=id});var ls=B(us=>{"use strict";Object.defineProperty(us,"__esModule",{value:!0});us.Emitter=us.Event=void 0;var G0=ni(),Qm;(function(r){let e={dispose(){}};r.None=function(){return e}})(Qm||(us.Event=Qm={}));var od=class{add(e,t=null,n){this._callbacks||(this._callbacks=[],this._contexts=[]),this._callbacks.push(e),this._contexts.push(t),Array.isArray(n)&&n.push({dispose:()=>this.remove(e,t)})}remove(e,t=null){if(!this._callbacks)return;let n=!1;for(let i=0,s=this._callbacks.length;i<s;i++)if(this._callbacks[i]===e)if(this._contexts[i]===t){this._callbacks.splice(i,1),this._contexts.splice(i,1);return}else n=!0;if(n)throw new Error("When adding a listener with a context, you should remove it with the same context")}invoke(...e){if(!this._callbacks)return[];let t=[],n=this._callbacks.slice(0),i=this._contexts.slice(0);for(let s=0,a=n.length;s<a;s++)try{t.push(n[s].apply(i[s],e))}catch(o){(0,G0.default)().console.error(o)}return t}isEmpty(){return!this._callbacks||this._callbacks.length===0}dispose(){this._callbacks=void 0,this._contexts=void 0}},Ba=class r{constructor(e){this._options=e}get event(){return this._event||(this._event=(e,t,n)=>{this._callbacks||(this._callbacks=new od),this._options&&this._options.onFirstListenerAdd&&this._callbacks.isEmpty()&&this._options.onFirstListenerAdd(this),this._callbacks.add(e,t);let i={dispose:()=>{this._callbacks&&(this._callbacks.remove(e,t),i.dispose=r._noop,this._options&&this._options.onLastListenerRemove&&this._callbacks.isEmpty()&&this._options.onLastListenerRemove(this))}};return Array.isArray(n)&&n.push(i),i}),this._event}fire(e){this._callbacks&&this._callbacks.invoke.call(this._callbacks,e)}dispose(){this._callbacks&&(this._callbacks.dispose(),this._callbacks=void 0)}};us.Emitter=Ba;Ba._noop=function(){}});var Ga=B(ds=>{"use strict";Object.defineProperty(ds,"__esModule",{value:!0});ds.CancellationTokenSource=ds.CancellationToken=void 0;var H0=ni(),W0=cs(),ad=ls(),Va;(function(r){r.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:ad.Event.None}),r.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:ad.Event.None});function e(t){let n=t;return n&&(n===r.None||n===r.Cancelled||W0.boolean(n.isCancellationRequested)&&!!n.onCancellationRequested)}r.is=e})(Va||(ds.CancellationToken=Va={}));var K0=Object.freeze(function(r,e){let t=(0,H0.default)().timer.setTimeout(r.bind(e),0);return{dispose(){t.dispose()}}}),za=class{constructor(){this._isCancelled=!1}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?K0:(this._emitter||(this._emitter=new ad.Emitter),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=void 0)}},cd=class{get token(){return this._token||(this._token=new za),this._token}cancel(){this._token?this._token.cancel():this._token=Va.Cancelled}dispose(){this._token?this._token instanceof za&&this._token.dispose():this._token=Va.None}};ds.CancellationTokenSource=cd});var Zm=B(fs=>{"use strict";Object.defineProperty(fs,"__esModule",{value:!0});fs.SharedArrayReceiverStrategy=fs.SharedArraySenderStrategy=void 0;var X0=Ga(),yo;(function(r){r.Continue=0,r.Cancelled=1})(yo||(yo={}));var ud=class{constructor(){this.buffers=new Map}enableCancellation(e){if(e.id===null)return;let t=new SharedArrayBuffer(4),n=new Int32Array(t,0,1);n[0]=yo.Continue,this.buffers.set(e.id,t),e.$cancellationData=t}async sendCancellation(e,t){let n=this.buffers.get(t);if(n===void 0)return;let i=new Int32Array(n,0,1);Atomics.store(i,0,yo.Cancelled)}cleanup(e){this.buffers.delete(e)}dispose(){this.buffers.clear()}};fs.SharedArraySenderStrategy=ud;var ld=class{constructor(e){this.data=new Int32Array(e,0,1)}get isCancellationRequested(){return Atomics.load(this.data,0)===yo.Cancelled}get onCancellationRequested(){throw new Error("Cancellation over SharedArrayBuffer doesn't support cancellation events")}},dd=class{constructor(e){this.token=new ld(e)}cancel(){}dispose(){}},fd=class{constructor(){this.kind="request"}createCancellationTokenSource(e){let t=e.$cancellationData;return t===void 0?new X0.CancellationTokenSource:new dd(t)}};fs.SharedArrayReceiverStrategy=fd});var pd=B(Ha=>{"use strict";Object.defineProperty(Ha,"__esModule",{value:!0});Ha.Semaphore=void 0;var Y0=ni(),hd=class{constructor(e=1){if(e<=0)throw new Error("Capacity must be greater than 0");this._capacity=e,this._active=0,this._waiting=[]}lock(e){return new Promise((t,n)=>{this._waiting.push({thunk:e,resolve:t,reject:n}),this.runNext()})}get active(){return this._active}runNext(){this._waiting.length===0||this._active===this._capacity||(0,Y0.default)().timer.setImmediate(()=>this.doRunNext())}doRunNext(){if(this._waiting.length===0||this._active===this._capacity)return;let e=this._waiting.shift();if(this._active++,this._active>this._capacity)throw new Error("To many thunks active");try{let t=e.thunk();t instanceof Promise?t.then(n=>{this._active--,e.resolve(n),this.runNext()},n=>{this._active--,e.reject(n),this.runNext()}):(this._active--,e.resolve(t),this.runNext())}catch(t){this._active--,e.reject(t),this.runNext()}}};Ha.Semaphore=hd});var e_=B(ri=>{"use strict";Object.defineProperty(ri,"__esModule",{value:!0});ri.ReadableStreamMessageReader=ri.AbstractMessageReader=ri.MessageReader=void 0;var md=ni(),hs=cs(),gd=ls(),Q0=pd(),Jm;(function(r){function e(t){let n=t;return n&&hs.func(n.listen)&&hs.func(n.dispose)&&hs.func(n.onError)&&hs.func(n.onClose)&&hs.func(n.onPartialMessage)}r.is=e})(Jm||(ri.MessageReader=Jm={}));var Wa=class{constructor(){this.errorEmitter=new gd.Emitter,this.closeEmitter=new gd.Emitter,this.partialMessageEmitter=new gd.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e){this.errorEmitter.fire(this.asError(e))}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}get onPartialMessage(){return this.partialMessageEmitter.event}firePartialMessage(e){this.partialMessageEmitter.fire(e)}asError(e){return e instanceof Error?e:new Error(`Reader received error. Reason: ${hs.string(e.message)?e.message:"unknown"}`)}};ri.AbstractMessageReader=Wa;var _d;(function(r){function e(t){let n,i,s,a=new Map,o,c=new Map;if(t===void 0||typeof t=="string")n=t??"utf-8";else{if(n=t.charset??"utf-8",t.contentDecoder!==void 0&&(s=t.contentDecoder,a.set(s.name,s)),t.contentDecoders!==void 0)for(let u of t.contentDecoders)a.set(u.name,u);if(t.contentTypeDecoder!==void 0&&(o=t.contentTypeDecoder,c.set(o.name,o)),t.contentTypeDecoders!==void 0)for(let u of t.contentTypeDecoders)c.set(u.name,u)}return o===void 0&&(o=(0,md.default)().applicationJson.decoder,c.set(o.name,o)),{charset:n,contentDecoder:s,contentDecoders:a,contentTypeDecoder:o,contentTypeDecoders:c}}r.fromOptions=e})(_d||(_d={}));var bd=class extends Wa{constructor(e,t){super(),this.readable=e,this.options=_d.fromOptions(t),this.buffer=(0,md.default)().messageBuffer.create(this.options.charset),this._partialMessageTimeout=1e4,this.nextMessageLength=-1,this.messageToken=0,this.readSemaphore=new Q0.Semaphore(1)}set partialMessageTimeout(e){this._partialMessageTimeout=e}get partialMessageTimeout(){return this._partialMessageTimeout}listen(e){this.nextMessageLength=-1,this.messageToken=0,this.partialMessageTimer=void 0,this.callback=e;let t=this.readable.onData(n=>{this.onData(n)});return this.readable.onError(n=>this.fireError(n)),this.readable.onClose(()=>this.fireClose()),t}onData(e){try{for(this.buffer.append(e);;){if(this.nextMessageLength===-1){let n=this.buffer.tryReadHeaders(!0);if(!n)return;let i=n.get("content-length");if(!i){this.fireError(new Error(`Header must provide a Content-Length property.
${JSON.stringify(Object.fromEntries(n))}`));return}let s=parseInt(i);if(isNaN(s)){this.fireError(new Error(`Content-Length value must be a number. Got ${i}`));return}this.nextMessageLength=s}let t=this.buffer.tryReadBody(this.nextMessageLength);if(t===void 0){this.setPartialMessageTimer();return}this.clearPartialMessageTimer(),this.nextMessageLength=-1,this.readSemaphore.lock(async()=>{let n=this.options.contentDecoder!==void 0?await this.options.contentDecoder.decode(t):t,i=await this.options.contentTypeDecoder.decode(n,this.options);this.callback(i)}).catch(n=>{this.fireError(n)})}}catch(t){this.fireError(t)}}clearPartialMessageTimer(){this.partialMessageTimer&&(this.partialMessageTimer.dispose(),this.partialMessageTimer=void 0)}setPartialMessageTimer(){this.clearPartialMessageTimer(),!(this._partialMessageTimeout<=0)&&(this.partialMessageTimer=(0,md.default)().timer.setTimeout((e,t)=>{this.partialMessageTimer=void 0,e===this.messageToken&&(this.firePartialMessage({messageToken:e,waitingTime:t}),this.setPartialMessageTimer())},this._partialMessageTimeout,this.messageToken,this._partialMessageTimeout))}};ri.ReadableStreamMessageReader=bd});var s_=B(ii=>{"use strict";Object.defineProperty(ii,"__esModule",{value:!0});ii.WriteableStreamMessageWriter=ii.AbstractMessageWriter=ii.MessageWriter=void 0;var t_=ni(),wo=cs(),Z0=pd(),n_=ls(),J0="Content-Length: ",r_=`\r
`,i_;(function(r){function e(t){let n=t;return n&&wo.func(n.dispose)&&wo.func(n.onClose)&&wo.func(n.onError)&&wo.func(n.write)}r.is=e})(i_||(ii.MessageWriter=i_={}));var Ka=class{constructor(){this.errorEmitter=new n_.Emitter,this.closeEmitter=new n_.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e,t,n){this.errorEmitter.fire([this.asError(e),t,n])}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}asError(e){return e instanceof Error?e:new Error(`Writer received error. Reason: ${wo.string(e.message)?e.message:"unknown"}`)}};ii.AbstractMessageWriter=Ka;var vd;(function(r){function e(t){return t===void 0||typeof t=="string"?{charset:t??"utf-8",contentTypeEncoder:(0,t_.default)().applicationJson.encoder}:{charset:t.charset??"utf-8",contentEncoder:t.contentEncoder,contentTypeEncoder:t.contentTypeEncoder??(0,t_.default)().applicationJson.encoder}}r.fromOptions=e})(vd||(vd={}));var yd=class extends Ka{constructor(e,t){super(),this.writable=e,this.options=vd.fromOptions(t),this.errorCount=0,this.writeSemaphore=new Z0.Semaphore(1),this.writable.onError(n=>this.fireError(n)),this.writable.onClose(()=>this.fireClose())}async write(e){return this.writeSemaphore.lock(async()=>this.options.contentTypeEncoder.encode(e,this.options).then(n=>this.options.contentEncoder!==void 0?this.options.contentEncoder.encode(n):n).then(n=>{let i=[];return i.push(J0,n.byteLength.toString(),r_),i.push(r_),this.doWrite(e,i,n)},n=>{throw this.fireError(n),n}))}async doWrite(e,t,n){try{return await this.writable.write(t.join(""),"ascii"),this.writable.write(n)}catch(i){return this.handleError(i,e),Promise.reject(i)}}handleError(e,t){this.errorCount++,this.fireError(e,t,this.errorCount)}end(){this.writable.end()}};ii.WriteableStreamMessageWriter=yd});var o_=B(Xa=>{"use strict";Object.defineProperty(Xa,"__esModule",{value:!0});Xa.AbstractMessageBuffer=void 0;var eS=13,tS=10,nS=`\r
`,wd=class{constructor(e="utf-8"){this._encoding=e,this._chunks=[],this._totalLength=0}get encoding(){return this._encoding}append(e){let t=typeof e=="string"?this.fromString(e,this._encoding):e;this._chunks.push(t),this._totalLength+=t.byteLength}tryReadHeaders(e=!1){if(this._chunks.length===0)return;let t=0,n=0,i=0,s=0;e:for(;n<this._chunks.length;){let u=this._chunks[n];for(i=0;i<u.length;){switch(u[i]){case eS:switch(t){case 0:t=1;break;case 2:t=3;break;default:t=0}break;case tS:switch(t){case 1:t=2;break;case 3:t=4,i++;break e;default:t=0}break;default:t=0}i++}s+=u.byteLength,n++}if(t!==4)return;let a=this._read(s+i),o=new Map,c=this.toString(a,"ascii").split(nS);if(c.length<2)return o;for(let u=0;u<c.length-2;u++){let l=c[u],b=l.indexOf(":");if(b===-1)throw new Error(`Message header must separate key and value using ':'
${l}`);let f=l.substr(0,b),_=l.substr(b+1).trim();o.set(e?f.toLowerCase():f,_)}return o}tryReadBody(e){if(!(this._totalLength<e))return this._read(e)}get numberOfBytes(){return this._totalLength}_read(e){if(e===0)return this.emptyBuffer();if(e>this._totalLength)throw new Error("Cannot read so many bytes!");if(this._chunks[0].byteLength===e){let s=this._chunks[0];return this._chunks.shift(),this._totalLength-=e,this.asNative(s)}if(this._chunks[0].byteLength>e){let s=this._chunks[0],a=this.asNative(s,e);return this._chunks[0]=s.slice(e),this._totalLength-=e,a}let t=this.allocNative(e),n=0,i=0;for(;e>0;){let s=this._chunks[i];if(s.byteLength>e){let a=s.slice(0,e);t.set(a,n),n+=e,this._chunks[i]=s.slice(e),this._totalLength-=e,e-=e}else t.set(s,n),n+=s.byteLength,this._chunks.shift(),this._totalLength-=s.byteLength,e-=s.byteLength}return t}};Xa.AbstractMessageBuffer=wd});var d_=B(Me=>{"use strict";Object.defineProperty(Me,"__esModule",{value:!0});Me.createMessageConnection=Me.ConnectionOptions=Me.MessageStrategy=Me.CancellationStrategy=Me.CancellationSenderStrategy=Me.CancellationReceiverStrategy=Me.RequestCancellationReceiverStrategy=Me.IdCancellationReceiverStrategy=Me.ConnectionStrategy=Me.ConnectionError=Me.ConnectionErrors=Me.LogTraceNotification=Me.SetTraceNotification=Me.TraceFormat=Me.TraceValues=Me.Trace=Me.NullLogger=Me.ProgressType=Me.ProgressToken=void 0;var a_=ni(),It=cs(),Te=ed(),c_=nd(),Co=ls(),Cd=Ga(),Do;(function(r){r.type=new Te.NotificationType("$/cancelRequest")})(Do||(Do={}));var Rd;(function(r){function e(t){return typeof t=="string"||typeof t=="number"}r.is=e})(Rd||(Me.ProgressToken=Rd={}));var Ro;(function(r){r.type=new Te.NotificationType("$/progress")})(Ro||(Ro={}));var Sd=class{constructor(){}};Me.ProgressType=Sd;var Dd;(function(r){function e(t){return It.func(t)}r.is=e})(Dd||(Dd={}));Me.NullLogger=Object.freeze({error:()=>{},warn:()=>{},info:()=>{},log:()=>{}});var it;(function(r){r[r.Off=0]="Off",r[r.Messages=1]="Messages",r[r.Compact=2]="Compact",r[r.Verbose=3]="Verbose"})(it||(Me.Trace=it={}));var u_;(function(r){r.Off="off",r.Messages="messages",r.Compact="compact",r.Verbose="verbose"})(u_||(Me.TraceValues=u_={}));(function(r){function e(n){if(!It.string(n))return r.Off;switch(n=n.toLowerCase(),n){case"off":return r.Off;case"messages":return r.Messages;case"compact":return r.Compact;case"verbose":return r.Verbose;default:return r.Off}}r.fromString=e;function t(n){switch(n){case r.Off:return"off";case r.Messages:return"messages";case r.Compact:return"compact";case r.Verbose:return"verbose";default:return"off"}}r.toString=t})(it||(Me.Trace=it={}));var Wn;(function(r){r.Text="text",r.JSON="json"})(Wn||(Me.TraceFormat=Wn={}));(function(r){function e(t){return It.string(t)?(t=t.toLowerCase(),t==="json"?r.JSON:r.Text):r.Text}r.fromString=e})(Wn||(Me.TraceFormat=Wn={}));var xd;(function(r){r.type=new Te.NotificationType("$/setTrace")})(xd||(Me.SetTraceNotification=xd={}));var Ya;(function(r){r.type=new Te.NotificationType("$/logTrace")})(Ya||(Me.LogTraceNotification=Ya={}));var So;(function(r){r[r.Closed=1]="Closed",r[r.Disposed=2]="Disposed",r[r.AlreadyListening=3]="AlreadyListening"})(So||(Me.ConnectionErrors=So={}));var ps=class r extends Error{constructor(e,t){super(t),this.code=e,Object.setPrototypeOf(this,r.prototype)}};Me.ConnectionError=ps;var kd;(function(r){function e(t){let n=t;return n&&It.func(n.cancelUndispatched)}r.is=e})(kd||(Me.ConnectionStrategy=kd={}));var Qa;(function(r){function e(t){let n=t;return n&&(n.kind===void 0||n.kind==="id")&&It.func(n.createCancellationTokenSource)&&(n.dispose===void 0||It.func(n.dispose))}r.is=e})(Qa||(Me.IdCancellationReceiverStrategy=Qa={}));var Pd;(function(r){function e(t){let n=t;return n&&n.kind==="request"&&It.func(n.createCancellationTokenSource)&&(n.dispose===void 0||It.func(n.dispose))}r.is=e})(Pd||(Me.RequestCancellationReceiverStrategy=Pd={}));var Za;(function(r){r.Message=Object.freeze({createCancellationTokenSource(t){return new Cd.CancellationTokenSource}});function e(t){return Qa.is(t)||Pd.is(t)}r.is=e})(Za||(Me.CancellationReceiverStrategy=Za={}));var Ja;(function(r){r.Message=Object.freeze({sendCancellation(t,n){return t.sendNotification(Do.type,{id:n})},cleanup(t){}});function e(t){let n=t;return n&&It.func(n.sendCancellation)&&It.func(n.cleanup)}r.is=e})(Ja||(Me.CancellationSenderStrategy=Ja={}));var ec;(function(r){r.Message=Object.freeze({receiver:Za.Message,sender:Ja.Message});function e(t){let n=t;return n&&Za.is(n.receiver)&&Ja.is(n.sender)}r.is=e})(ec||(Me.CancellationStrategy=ec={}));var tc;(function(r){function e(t){let n=t;return n&&It.func(n.handleMessage)}r.is=e})(tc||(Me.MessageStrategy=tc={}));var l_;(function(r){function e(t){let n=t;return n&&(ec.is(n.cancellationStrategy)||kd.is(n.connectionStrategy)||tc.is(n.messageStrategy))}r.is=e})(l_||(Me.ConnectionOptions=l_={}));var mr;(function(r){r[r.New=1]="New",r[r.Listening=2]="Listening",r[r.Closed=3]="Closed",r[r.Disposed=4]="Disposed"})(mr||(mr={}));function rS(r,e,t,n){let i=t!==void 0?t:Me.NullLogger,s=0,a=0,o=0,c="2.0",u,l=new Map,b,f=new Map,_=new Map,m,p=new c_.LinkedMap,g=new Map,R=new Set,D=new Map,y=it.Off,d=Wn.Text,x,k=mr.New,S=new Co.Emitter,T=new Co.Emitter,E=new Co.Emitter,M=new Co.Emitter,V=new Co.Emitter,Y=n&&n.cancellationStrategy?n.cancellationStrategy:ec.Message;function te($){if($===null)throw new Error("Can't send requests with id null since the response can't be correlated.");return"req-"+$.toString()}function se($){return $===null?"res-unknown-"+(++o).toString():"res-"+$.toString()}function le(){return"not-"+(++a).toString()}function be($,G){Te.Message.isRequest(G)?$.set(te(G.id),G):Te.Message.isResponse(G)?$.set(se(G.id),G):$.set(le(),G)}function we($){}function Le(){return k===mr.Listening}function ue(){return k===mr.Closed}function Pe(){return k===mr.Disposed}function ve(){(k===mr.New||k===mr.Listening)&&(k=mr.Closed,T.fire(void 0))}function he($){S.fire([$,void 0,void 0])}function Ae($){S.fire($)}r.onClose(ve),r.onError(he),e.onClose(ve),e.onError(Ae);function at(){m||p.size===0||(m=(0,a_.default)().timer.setImmediate(()=>{m=void 0,He()}))}function Z($){Te.Message.isRequest($)?ft($):Te.Message.isNotification($)?ct($):Te.Message.isResponse($)?Ut($):Yt($)}function He(){if(p.size===0)return;let $=p.shift();try{let G=n?.messageStrategy;tc.is(G)?G.handleMessage($,Z):Z($)}finally{at()}}let Oe=$=>{try{if(Te.Message.isNotification($)&&$.method===Do.type.method){let G=$.params.id,re=te(G),oe=p.get(re);if(Te.Message.isRequest(oe)){let ze=n?.connectionStrategy,$e=ze&&ze.cancelUndispatched?ze.cancelUndispatched(oe,we):void 0;if($e&&($e.error!==void 0||$e.result!==void 0)){p.delete(re),D.delete(G),$e.id=oe.id,Ht($e,$.method,Date.now()),e.write($e).catch(()=>i.error("Sending response for canceled message failed."));return}}let Be=D.get(G);if(Be!==void 0){Be.cancel(),Bt($);return}else R.add(G)}be(p,$)}finally{at()}};function ft($){if(Pe())return;function G(xe,Ye,q){let U={jsonrpc:c,id:$.id};xe instanceof Te.ResponseError?U.error=xe.toJson():U.result=xe===void 0?null:xe,Ht(U,Ye,q),e.write(U).catch(()=>i.error("Sending response failed."))}function re(xe,Ye,q){let U={jsonrpc:c,id:$.id,error:xe.toJson()};Ht(U,Ye,q),e.write(U).catch(()=>i.error("Sending response failed."))}function oe(xe,Ye,q){xe===void 0&&(xe=null);let U={jsonrpc:c,id:$.id,result:xe};Ht(U,Ye,q),e.write(U).catch(()=>i.error("Sending response failed."))}un($);let Be=l.get($.method),ze,$e;Be&&(ze=Be.type,$e=Be.handler);let nt=Date.now();if($e||u){let xe=$.id??String(Date.now()),Ye=Qa.is(Y.receiver)?Y.receiver.createCancellationTokenSource(xe):Y.receiver.createCancellationTokenSource($);$.id!==null&&R.has($.id)&&Ye.cancel(),$.id!==null&&D.set(xe,Ye);try{let q;if($e)if($.params===void 0){if(ze!==void 0&&ze.numberOfParams!==0){re(new Te.ResponseError(Te.ErrorCodes.InvalidParams,`Request ${$.method} defines ${ze.numberOfParams} params but received none.`),$.method,nt);return}q=$e(Ye.token)}else if(Array.isArray($.params)){if(ze!==void 0&&ze.parameterStructures===Te.ParameterStructures.byName){re(new Te.ResponseError(Te.ErrorCodes.InvalidParams,`Request ${$.method} defines parameters by name but received parameters by position`),$.method,nt);return}q=$e(...$.params,Ye.token)}else{if(ze!==void 0&&ze.parameterStructures===Te.ParameterStructures.byPosition){re(new Te.ResponseError(Te.ErrorCodes.InvalidParams,`Request ${$.method} defines parameters by position but received parameters by name`),$.method,nt);return}q=$e($.params,Ye.token)}else u&&(q=u($.method,$.params,Ye.token));let U=q;q?U.then?U.then(X=>{D.delete(xe),G(X,$.method,nt)},X=>{D.delete(xe),X instanceof Te.ResponseError?re(X,$.method,nt):X&&It.string(X.message)?re(new Te.ResponseError(Te.ErrorCodes.InternalError,`Request ${$.method} failed with message: ${X.message}`),$.method,nt):re(new Te.ResponseError(Te.ErrorCodes.InternalError,`Request ${$.method} failed unexpectedly without providing any details.`),$.method,nt)}):(D.delete(xe),G(q,$.method,nt)):(D.delete(xe),oe(q,$.method,nt))}catch(q){D.delete(xe),q instanceof Te.ResponseError?G(q,$.method,nt):q&&It.string(q.message)?re(new Te.ResponseError(Te.ErrorCodes.InternalError,`Request ${$.method} failed with message: ${q.message}`),$.method,nt):re(new Te.ResponseError(Te.ErrorCodes.InternalError,`Request ${$.method} failed unexpectedly without providing any details.`),$.method,nt)}}else re(new Te.ResponseError(Te.ErrorCodes.MethodNotFound,`Unhandled method ${$.method}`),$.method,nt)}function Ut($){if(!Pe())if($.id===null)$.error?i.error(`Received response message without id: Error is: 
${JSON.stringify($.error,void 0,4)}`):i.error("Received response message without id. No further error information provided.");else{let G=$.id,re=g.get(G);if(Tt($,re),re!==void 0){g.delete(G);try{if($.error){let oe=$.error;re.reject(new Te.ResponseError(oe.code,oe.message,oe.data))}else if($.result!==void 0)re.resolve($.result);else throw new Error("Should never happen.")}catch(oe){oe.message?i.error(`Response handler '${re.method}' failed with message: ${oe.message}`):i.error(`Response handler '${re.method}' failed unexpectedly.`)}}}}function ct($){if(Pe())return;let G,re;if($.method===Do.type.method){let oe=$.params.id;R.delete(oe),Bt($);return}else{let oe=f.get($.method);oe&&(re=oe.handler,G=oe.type)}if(re||b)try{if(Bt($),re)if($.params===void 0)G!==void 0&&G.numberOfParams!==0&&G.parameterStructures!==Te.ParameterStructures.byName&&i.error(`Notification ${$.method} defines ${G.numberOfParams} params but received none.`),re();else if(Array.isArray($.params)){let oe=$.params;$.method===Ro.type.method&&oe.length===2&&Rd.is(oe[0])?re({token:oe[0],value:oe[1]}):(G!==void 0&&(G.parameterStructures===Te.ParameterStructures.byName&&i.error(`Notification ${$.method} defines parameters by name but received parameters by position`),G.numberOfParams!==$.params.length&&i.error(`Notification ${$.method} defines ${G.numberOfParams} params but received ${oe.length} arguments`)),re(...oe))}else G!==void 0&&G.parameterStructures===Te.ParameterStructures.byPosition&&i.error(`Notification ${$.method} defines parameters by position but received parameters by name`),re($.params);else b&&b($.method,$.params)}catch(oe){oe.message?i.error(`Notification handler '${$.method}' failed with message: ${oe.message}`):i.error(`Notification handler '${$.method}' failed unexpectedly.`)}else E.fire($)}function Yt($){if(!$){i.error("Received empty message.");return}i.error(`Received message which is neither a response nor a notification message:
${JSON.stringify($,null,4)}`);let G=$;if(It.string(G.id)||It.number(G.id)){let re=G.id,oe=g.get(re);oe&&oe.reject(new Error("The received response has neither a result nor an error property."))}}function Ue($){if($!=null)switch(y){case it.Verbose:return JSON.stringify($,null,4);case it.Compact:return JSON.stringify($);default:return}}function gn($){if(!(y===it.Off||!x))if(d===Wn.Text){let G;(y===it.Verbose||y===it.Compact)&&$.params&&(G=`Params: ${Ue($.params)}

`),x.log(`Sending request '${$.method} - (${$.id})'.`,G)}else ht("send-request",$)}function Qt($){if(!(y===it.Off||!x))if(d===Wn.Text){let G;(y===it.Verbose||y===it.Compact)&&($.params?G=`Params: ${Ue($.params)}

`:G=`No parameters provided.

`),x.log(`Sending notification '${$.method}'.`,G)}else ht("send-notification",$)}function Ht($,G,re){if(!(y===it.Off||!x))if(d===Wn.Text){let oe;(y===it.Verbose||y===it.Compact)&&($.error&&$.error.data?oe=`Error data: ${Ue($.error.data)}

`:$.result?oe=`Result: ${Ue($.result)}

`:$.error===void 0&&(oe=`No result returned.

`)),x.log(`Sending response '${G} - (${$.id})'. Processing request took ${Date.now()-re}ms`,oe)}else ht("send-response",$)}function un($){if(!(y===it.Off||!x))if(d===Wn.Text){let G;(y===it.Verbose||y===it.Compact)&&$.params&&(G=`Params: ${Ue($.params)}

`),x.log(`Received request '${$.method} - (${$.id})'.`,G)}else ht("receive-request",$)}function Bt($){if(!(y===it.Off||!x||$.method===Ya.type.method))if(d===Wn.Text){let G;(y===it.Verbose||y===it.Compact)&&($.params?G=`Params: ${Ue($.params)}

`:G=`No parameters provided.

`),x.log(`Received notification '${$.method}'.`,G)}else ht("receive-notification",$)}function Tt($,G){if(!(y===it.Off||!x))if(d===Wn.Text){let re;if((y===it.Verbose||y===it.Compact)&&($.error&&$.error.data?re=`Error data: ${Ue($.error.data)}

`:$.result?re=`Result: ${Ue($.result)}

`:$.error===void 0&&(re=`No result returned.

`)),G){let oe=$.error?` Request failed: ${$.error.message} (${$.error.code}).`:"";x.log(`Received response '${G.method} - (${$.id})' in ${Date.now()-G.timerStart}ms.${oe}`,re)}else x.log(`Received response ${$.id} without active response promise.`,re)}else ht("receive-response",$)}function ht($,G){if(!x||y===it.Off)return;let re={isLSPMessage:!0,type:$,message:G,timestamp:Date.now()};x.log(re)}function Et(){if(ue())throw new ps(So.Closed,"Connection is closed.");if(Pe())throw new ps(So.Disposed,"Connection is disposed.")}function Nt(){if(Le())throw new ps(So.AlreadyListening,"Connection is already listening")}function Vt(){if(!Le())throw new Error("Call listen() first.")}function Zt($){return $===void 0?null:$}function mn($){if($!==null)return $}function zn($){return $!=null&&!Array.isArray($)&&typeof $=="object"}function en($,G){switch($){case Te.ParameterStructures.auto:return zn(G)?mn(G):[Zt(G)];case Te.ParameterStructures.byName:if(!zn(G))throw new Error("Received parameters by name but param is not an object literal.");return mn(G);case Te.ParameterStructures.byPosition:return[Zt(G)];default:throw new Error(`Unknown parameter structure ${$.toString()}`)}}function An($,G){let re,oe=$.numberOfParams;switch(oe){case 0:re=void 0;break;case 1:re=en($.parameterStructures,G[0]);break;default:re=[];for(let Be=0;Be<G.length&&Be<oe;Be++)re.push(Zt(G[Be]));if(G.length<oe)for(let Be=G.length;Be<oe;Be++)re.push(null);break}return re}let ln={sendNotification:($,...G)=>{Et();let re,oe;if(It.string($)){re=$;let ze=G[0],$e=0,nt=Te.ParameterStructures.auto;Te.ParameterStructures.is(ze)&&($e=1,nt=ze);let xe=G.length,Ye=xe-$e;switch(Ye){case 0:oe=void 0;break;case 1:oe=en(nt,G[$e]);break;default:if(nt===Te.ParameterStructures.byName)throw new Error(`Received ${Ye} parameters for 'by Name' notification parameter structure.`);oe=G.slice($e,xe).map(q=>Zt(q));break}}else{let ze=G;re=$.method,oe=An($,ze)}let Be={jsonrpc:c,method:re,params:oe};return Qt(Be),e.write(Be).catch(ze=>{throw i.error("Sending notification failed."),ze})},onNotification:($,G)=>{Et();let re;return It.func($)?b=$:G&&(It.string($)?(re=$,f.set($,{type:void 0,handler:G})):(re=$.method,f.set($.method,{type:$,handler:G}))),{dispose:()=>{re!==void 0?f.delete(re):b=void 0}}},onProgress:($,G,re)=>{if(_.has(G))throw new Error(`Progress handler for token ${G} already registered`);return _.set(G,re),{dispose:()=>{_.delete(G)}}},sendProgress:($,G,re)=>ln.sendNotification(Ro.type,{token:G,value:re}),onUnhandledProgress:M.event,sendRequest:($,...G)=>{Et(),Vt();let re,oe,Be;if(It.string($)){re=$;let xe=G[0],Ye=G[G.length-1],q=0,U=Te.ParameterStructures.auto;Te.ParameterStructures.is(xe)&&(q=1,U=xe);let X=G.length;Cd.CancellationToken.is(Ye)&&(X=X-1,Be=Ye);let H=X-q;switch(H){case 0:oe=void 0;break;case 1:oe=en(U,G[q]);break;default:if(U===Te.ParameterStructures.byName)throw new Error(`Received ${H} parameters for 'by Name' request parameter structure.`);oe=G.slice(q,X).map(J=>Zt(J));break}}else{let xe=G;re=$.method,oe=An($,xe);let Ye=$.numberOfParams;Be=Cd.CancellationToken.is(xe[Ye])?xe[Ye]:void 0}let ze=s++,$e;Be&&($e=Be.onCancellationRequested(()=>{let xe=Y.sender.sendCancellation(ln,ze);return xe===void 0?(i.log(`Received no promise from cancellation strategy when cancelling id ${ze}`),Promise.resolve()):xe.catch(()=>{i.log(`Sending cancellation messages for id ${ze} failed`)})}));let nt={jsonrpc:c,id:ze,method:re,params:oe};return gn(nt),typeof Y.sender.enableCancellation=="function"&&Y.sender.enableCancellation(nt),new Promise(async(xe,Ye)=>{let q=H=>{xe(H),Y.sender.cleanup(ze),$e?.dispose()},U=H=>{Ye(H),Y.sender.cleanup(ze),$e?.dispose()},X={method:re,timerStart:Date.now(),resolve:q,reject:U};try{await e.write(nt),g.set(ze,X)}catch(H){throw i.error("Sending request failed."),X.reject(new Te.ResponseError(Te.ErrorCodes.MessageWriteError,H.message?H.message:"Unknown reason")),H}})},onRequest:($,G)=>{Et();let re=null;return Dd.is($)?(re=void 0,u=$):It.string($)?(re=null,G!==void 0&&(re=$,l.set($,{handler:G,type:void 0}))):G!==void 0&&(re=$.method,l.set($.method,{type:$,handler:G})),{dispose:()=>{re!==null&&(re!==void 0?l.delete(re):u=void 0)}}},hasPendingResponse:()=>g.size>0,trace:async($,G,re)=>{let oe=!1,Be=Wn.Text;re!==void 0&&(It.boolean(re)?oe=re:(oe=re.sendNotification||!1,Be=re.traceFormat||Wn.Text)),y=$,d=Be,y===it.Off?x=void 0:x=G,oe&&!ue()&&!Pe()&&await ln.sendNotification(xd.type,{value:it.toString($)})},onError:S.event,onClose:T.event,onUnhandledNotification:E.event,onDispose:V.event,end:()=>{e.end()},dispose:()=>{if(Pe())return;k=mr.Disposed,V.fire(void 0);let $=new Te.ResponseError(Te.ErrorCodes.PendingResponseRejected,"Pending response rejected since connection got disposed");for(let G of g.values())G.reject($);g=new Map,D=new Map,R=new Set,p=new c_.LinkedMap,It.func(e.dispose)&&e.dispose(),It.func(r.dispose)&&r.dispose()},listen:()=>{Et(),Nt(),k=mr.Listening,r.listen(Oe)},inspect:()=>{(0,a_.default)().console.log("inspect")}};return ln.onNotification(Ya.type,$=>{if(y===it.Off||!x)return;let G=y===it.Verbose||y===it.Compact;x.log($.message,G?$.verbose:void 0)}),ln.onNotification(Ro.type,$=>{let G=_.get($.token);G?G($.value):M.fire($)}),ln}Me.createMessageConnection=rS});var nc=B(z=>{"use strict";Object.defineProperty(z,"__esModule",{value:!0});z.ProgressType=z.ProgressToken=z.createMessageConnection=z.NullLogger=z.ConnectionOptions=z.ConnectionStrategy=z.AbstractMessageBuffer=z.WriteableStreamMessageWriter=z.AbstractMessageWriter=z.MessageWriter=z.ReadableStreamMessageReader=z.AbstractMessageReader=z.MessageReader=z.SharedArrayReceiverStrategy=z.SharedArraySenderStrategy=z.CancellationToken=z.CancellationTokenSource=z.Emitter=z.Event=z.Disposable=z.LRUCache=z.Touch=z.LinkedMap=z.ParameterStructures=z.NotificationType9=z.NotificationType8=z.NotificationType7=z.NotificationType6=z.NotificationType5=z.NotificationType4=z.NotificationType3=z.NotificationType2=z.NotificationType1=z.NotificationType0=z.NotificationType=z.ErrorCodes=z.ResponseError=z.RequestType9=z.RequestType8=z.RequestType7=z.RequestType6=z.RequestType5=z.RequestType4=z.RequestType3=z.RequestType2=z.RequestType1=z.RequestType0=z.RequestType=z.Message=z.RAL=void 0;z.MessageStrategy=z.CancellationStrategy=z.CancellationSenderStrategy=z.CancellationReceiverStrategy=z.ConnectionError=z.ConnectionErrors=z.LogTraceNotification=z.SetTraceNotification=z.TraceFormat=z.TraceValues=z.Trace=void 0;var yt=ed();Object.defineProperty(z,"Message",{enumerable:!0,get:function(){return yt.Message}});Object.defineProperty(z,"RequestType",{enumerable:!0,get:function(){return yt.RequestType}});Object.defineProperty(z,"RequestType0",{enumerable:!0,get:function(){return yt.RequestType0}});Object.defineProperty(z,"RequestType1",{enumerable:!0,get:function(){return yt.RequestType1}});Object.defineProperty(z,"RequestType2",{enumerable:!0,get:function(){return yt.RequestType2}});Object.defineProperty(z,"RequestType3",{enumerable:!0,get:function(){return yt.RequestType3}});Object.defineProperty(z,"RequestType4",{enumerable:!0,get:function(){return yt.RequestType4}});Object.defineProperty(z,"RequestType5",{enumerable:!0,get:function(){return yt.RequestType5}});Object.defineProperty(z,"RequestType6",{enumerable:!0,get:function(){return yt.RequestType6}});Object.defineProperty(z,"RequestType7",{enumerable:!0,get:function(){return yt.RequestType7}});Object.defineProperty(z,"RequestType8",{enumerable:!0,get:function(){return yt.RequestType8}});Object.defineProperty(z,"RequestType9",{enumerable:!0,get:function(){return yt.RequestType9}});Object.defineProperty(z,"ResponseError",{enumerable:!0,get:function(){return yt.ResponseError}});Object.defineProperty(z,"ErrorCodes",{enumerable:!0,get:function(){return yt.ErrorCodes}});Object.defineProperty(z,"NotificationType",{enumerable:!0,get:function(){return yt.NotificationType}});Object.defineProperty(z,"NotificationType0",{enumerable:!0,get:function(){return yt.NotificationType0}});Object.defineProperty(z,"NotificationType1",{enumerable:!0,get:function(){return yt.NotificationType1}});Object.defineProperty(z,"NotificationType2",{enumerable:!0,get:function(){return yt.NotificationType2}});Object.defineProperty(z,"NotificationType3",{enumerable:!0,get:function(){return yt.NotificationType3}});Object.defineProperty(z,"NotificationType4",{enumerable:!0,get:function(){return yt.NotificationType4}});Object.defineProperty(z,"NotificationType5",{enumerable:!0,get:function(){return yt.NotificationType5}});Object.defineProperty(z,"NotificationType6",{enumerable:!0,get:function(){return yt.NotificationType6}});Object.defineProperty(z,"NotificationType7",{enumerable:!0,get:function(){return yt.NotificationType7}});Object.defineProperty(z,"NotificationType8",{enumerable:!0,get:function(){return yt.NotificationType8}});Object.defineProperty(z,"NotificationType9",{enumerable:!0,get:function(){return yt.NotificationType9}});Object.defineProperty(z,"ParameterStructures",{enumerable:!0,get:function(){return yt.ParameterStructures}});var Td=nd();Object.defineProperty(z,"LinkedMap",{enumerable:!0,get:function(){return Td.LinkedMap}});Object.defineProperty(z,"LRUCache",{enumerable:!0,get:function(){return Td.LRUCache}});Object.defineProperty(z,"Touch",{enumerable:!0,get:function(){return Td.Touch}});var iS=Ym();Object.defineProperty(z,"Disposable",{enumerable:!0,get:function(){return iS.Disposable}});var f_=ls();Object.defineProperty(z,"Event",{enumerable:!0,get:function(){return f_.Event}});Object.defineProperty(z,"Emitter",{enumerable:!0,get:function(){return f_.Emitter}});var h_=Ga();Object.defineProperty(z,"CancellationTokenSource",{enumerable:!0,get:function(){return h_.CancellationTokenSource}});Object.defineProperty(z,"CancellationToken",{enumerable:!0,get:function(){return h_.CancellationToken}});var p_=Zm();Object.defineProperty(z,"SharedArraySenderStrategy",{enumerable:!0,get:function(){return p_.SharedArraySenderStrategy}});Object.defineProperty(z,"SharedArrayReceiverStrategy",{enumerable:!0,get:function(){return p_.SharedArrayReceiverStrategy}});var Ed=e_();Object.defineProperty(z,"MessageReader",{enumerable:!0,get:function(){return Ed.MessageReader}});Object.defineProperty(z,"AbstractMessageReader",{enumerable:!0,get:function(){return Ed.AbstractMessageReader}});Object.defineProperty(z,"ReadableStreamMessageReader",{enumerable:!0,get:function(){return Ed.ReadableStreamMessageReader}});var Id=s_();Object.defineProperty(z,"MessageWriter",{enumerable:!0,get:function(){return Id.MessageWriter}});Object.defineProperty(z,"AbstractMessageWriter",{enumerable:!0,get:function(){return Id.AbstractMessageWriter}});Object.defineProperty(z,"WriteableStreamMessageWriter",{enumerable:!0,get:function(){return Id.WriteableStreamMessageWriter}});var sS=o_();Object.defineProperty(z,"AbstractMessageBuffer",{enumerable:!0,get:function(){return sS.AbstractMessageBuffer}});var fn=d_();Object.defineProperty(z,"ConnectionStrategy",{enumerable:!0,get:function(){return fn.ConnectionStrategy}});Object.defineProperty(z,"ConnectionOptions",{enumerable:!0,get:function(){return fn.ConnectionOptions}});Object.defineProperty(z,"NullLogger",{enumerable:!0,get:function(){return fn.NullLogger}});Object.defineProperty(z,"createMessageConnection",{enumerable:!0,get:function(){return fn.createMessageConnection}});Object.defineProperty(z,"ProgressToken",{enumerable:!0,get:function(){return fn.ProgressToken}});Object.defineProperty(z,"ProgressType",{enumerable:!0,get:function(){return fn.ProgressType}});Object.defineProperty(z,"Trace",{enumerable:!0,get:function(){return fn.Trace}});Object.defineProperty(z,"TraceValues",{enumerable:!0,get:function(){return fn.TraceValues}});Object.defineProperty(z,"TraceFormat",{enumerable:!0,get:function(){return fn.TraceFormat}});Object.defineProperty(z,"SetTraceNotification",{enumerable:!0,get:function(){return fn.SetTraceNotification}});Object.defineProperty(z,"LogTraceNotification",{enumerable:!0,get:function(){return fn.LogTraceNotification}});Object.defineProperty(z,"ConnectionErrors",{enumerable:!0,get:function(){return fn.ConnectionErrors}});Object.defineProperty(z,"ConnectionError",{enumerable:!0,get:function(){return fn.ConnectionError}});Object.defineProperty(z,"CancellationReceiverStrategy",{enumerable:!0,get:function(){return fn.CancellationReceiverStrategy}});Object.defineProperty(z,"CancellationSenderStrategy",{enumerable:!0,get:function(){return fn.CancellationSenderStrategy}});Object.defineProperty(z,"CancellationStrategy",{enumerable:!0,get:function(){return fn.CancellationStrategy}});Object.defineProperty(z,"MessageStrategy",{enumerable:!0,get:function(){return fn.MessageStrategy}});var oS=ni();z.RAL=oS.default});var __=B(Nd=>{"use strict";Object.defineProperty(Nd,"__esModule",{value:!0});var g_=require("util"),Mr=nc(),rc=class r extends Mr.AbstractMessageBuffer{constructor(e="utf-8"){super(e)}emptyBuffer(){return r.emptyBuffer}fromString(e,t){return Buffer.from(e,t)}toString(e,t){return e instanceof Buffer?e.toString(t):new g_.TextDecoder(t).decode(e)}asNative(e,t){return t===void 0?e instanceof Buffer?e:Buffer.from(e):e instanceof Buffer?e.slice(0,t):Buffer.from(e,0,t)}allocNative(e){return Buffer.allocUnsafe(e)}};rc.emptyBuffer=Buffer.allocUnsafe(0);var Ad=class{constructor(e){this.stream=e}onClose(e){return this.stream.on("close",e),Mr.Disposable.create(()=>this.stream.off("close",e))}onError(e){return this.stream.on("error",e),Mr.Disposable.create(()=>this.stream.off("error",e))}onEnd(e){return this.stream.on("end",e),Mr.Disposable.create(()=>this.stream.off("end",e))}onData(e){return this.stream.on("data",e),Mr.Disposable.create(()=>this.stream.off("data",e))}},Od=class{constructor(e){this.stream=e}onClose(e){return this.stream.on("close",e),Mr.Disposable.create(()=>this.stream.off("close",e))}onError(e){return this.stream.on("error",e),Mr.Disposable.create(()=>this.stream.off("error",e))}onEnd(e){return this.stream.on("end",e),Mr.Disposable.create(()=>this.stream.off("end",e))}write(e,t){return new Promise((n,i)=>{let s=a=>{a==null?n():i(a)};typeof e=="string"?this.stream.write(e,t,s):this.stream.write(e,s)})}end(){this.stream.end()}},m_=Object.freeze({messageBuffer:Object.freeze({create:r=>new rc(r)}),applicationJson:Object.freeze({encoder:Object.freeze({name:"application/json",encode:(r,e)=>{try{return Promise.resolve(Buffer.from(JSON.stringify(r,void 0,0),e.charset))}catch(t){return Promise.reject(t)}}}),decoder:Object.freeze({name:"application/json",decode:(r,e)=>{try{return r instanceof Buffer?Promise.resolve(JSON.parse(r.toString(e.charset))):Promise.resolve(JSON.parse(new g_.TextDecoder(e.charset).decode(r)))}catch(t){return Promise.reject(t)}}})}),stream:Object.freeze({asReadableStream:r=>new Ad(r),asWritableStream:r=>new Od(r)}),console,timer:Object.freeze({setTimeout(r,e,...t){let n=setTimeout(r,e,...t);return{dispose:()=>clearTimeout(n)}},setImmediate(r,...e){let t=setImmediate(r,...e);return{dispose:()=>clearImmediate(t)}},setInterval(r,e,...t){let n=setInterval(r,e,...t);return{dispose:()=>clearInterval(n)}}})});function $d(){return m_}(function(r){function e(){Mr.RAL.install(m_)}r.install=e})($d||($d={}));Nd.default=$d});var si=B(Qe=>{"use strict";var aS=Qe&&Qe.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(r,n,i)}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),cS=Qe&&Qe.__exportStar||function(r,e){for(var t in r)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&aS(e,r,t)};Object.defineProperty(Qe,"__esModule",{value:!0});Qe.createMessageConnection=Qe.createServerSocketTransport=Qe.createClientSocketTransport=Qe.createServerPipeTransport=Qe.createClientPipeTransport=Qe.generateRandomPipeName=Qe.StreamMessageWriter=Qe.StreamMessageReader=Qe.SocketMessageWriter=Qe.SocketMessageReader=Qe.PortMessageWriter=Qe.PortMessageReader=Qe.IPCMessageWriter=Qe.IPCMessageReader=void 0;var gs=__();gs.default.install();var b_=require("path"),uS=require("os"),lS=require("crypto"),oc=require("net"),Kn=nc();cS(nc(),Qe);var qd=class extends Kn.AbstractMessageReader{constructor(e){super(),this.process=e;let t=this.process;t.on("error",n=>this.fireError(n)),t.on("close",()=>this.fireClose())}listen(e){return this.process.on("message",e),Kn.Disposable.create(()=>this.process.off("message",e))}};Qe.IPCMessageReader=qd;var Ld=class extends Kn.AbstractMessageWriter{constructor(e){super(),this.process=e,this.errorCount=0;let t=this.process;t.on("error",n=>this.fireError(n)),t.on("close",()=>this.fireClose)}write(e){try{return typeof this.process.send=="function"&&this.process.send(e,void 0,void 0,t=>{t?(this.errorCount++,this.handleError(t,e)):this.errorCount=0}),Promise.resolve()}catch(t){return this.handleError(t,e),Promise.reject(t)}}handleError(e,t){this.errorCount++,this.fireError(e,t,this.errorCount)}end(){}};Qe.IPCMessageWriter=Ld;var Md=class extends Kn.AbstractMessageReader{constructor(e){super(),this.onData=new Kn.Emitter,e.on("close",()=>this.fireClose),e.on("error",t=>this.fireError(t)),e.on("message",t=>{this.onData.fire(t)})}listen(e){return this.onData.event(e)}};Qe.PortMessageReader=Md;var Fd=class extends Kn.AbstractMessageWriter{constructor(e){super(),this.port=e,this.errorCount=0,e.on("close",()=>this.fireClose()),e.on("error",t=>this.fireError(t))}write(e){try{return this.port.postMessage(e),Promise.resolve()}catch(t){return this.handleError(t,e),Promise.reject(t)}}handleError(e,t){this.errorCount++,this.fireError(e,t,this.errorCount)}end(){}};Qe.PortMessageWriter=Fd;var Ei=class extends Kn.ReadableStreamMessageReader{constructor(e,t="utf-8"){super((0,gs.default)().stream.asReadableStream(e),t)}};Qe.SocketMessageReader=Ei;var Ii=class extends Kn.WriteableStreamMessageWriter{constructor(e,t){super((0,gs.default)().stream.asWritableStream(e),t),this.socket=e}dispose(){super.dispose(),this.socket.destroy()}};Qe.SocketMessageWriter=Ii;var ic=class extends Kn.ReadableStreamMessageReader{constructor(e,t){super((0,gs.default)().stream.asReadableStream(e),t)}};Qe.StreamMessageReader=ic;var sc=class extends Kn.WriteableStreamMessageWriter{constructor(e,t){super((0,gs.default)().stream.asWritableStream(e),t)}};Qe.StreamMessageWriter=sc;var v_=process.env.XDG_RUNTIME_DIR,dS=new Map([["linux",107],["darwin",103]]);function fS(){let r=(0,lS.randomBytes)(21).toString("hex");if(process.platform==="win32")return`\\\\.\\pipe\\vscode-jsonrpc-${r}-sock`;let e;v_?e=b_.join(v_,`vscode-ipc-${r}.sock`):e=b_.join(uS.tmpdir(),`vscode-${r}.sock`);let t=dS.get(process.platform);return t!==void 0&&e.length>t&&(0,gs.default)().console.warn(`WARNING: IPC handle "${e}" is longer than ${t} characters.`),e}Qe.generateRandomPipeName=fS;function hS(r,e="utf-8"){let t,n=new Promise((i,s)=>{t=i});return new Promise((i,s)=>{let a=(0,oc.createServer)(o=>{a.close(),t([new Ei(o,e),new Ii(o,e)])});a.on("error",s),a.listen(r,()=>{a.removeListener("error",s),i({onConnected:()=>n})})})}Qe.createClientPipeTransport=hS;function pS(r,e="utf-8"){let t=(0,oc.createConnection)(r);return[new Ei(t,e),new Ii(t,e)]}Qe.createServerPipeTransport=pS;function gS(r,e="utf-8"){let t,n=new Promise((i,s)=>{t=i});return new Promise((i,s)=>{let a=(0,oc.createServer)(o=>{a.close(),t([new Ei(o,e),new Ii(o,e)])});a.on("error",s),a.listen(r,"127.0.0.1",()=>{a.removeListener("error",s),i({onConnected:()=>n})})})}Qe.createClientSocketTransport=gS;function mS(r,e="utf-8"){let t=(0,oc.createConnection)(r,"127.0.0.1");return[new Ei(t,e),new Ii(t,e)]}Qe.createServerSocketTransport=mS;function _S(r){let e=r;return e.read!==void 0&&e.addListener!==void 0}function bS(r){let e=r;return e.write!==void 0&&e.addListener!==void 0}function vS(r,e,t,n){t||(t=Kn.NullLogger);let i=_S(r)?new ic(r):r,s=bS(e)?new sc(e):e;return Kn.ConnectionStrategy.is(n)&&(n={connectionStrategy:n}),(0,Kn.createMessageConnection)(i,s,t,n)}Qe.createMessageConnection=vS});var jd=B((dI,y_)=>{"use strict";y_.exports=si()});var cc=B((w_,ac)=>{(function(r){if(typeof ac=="object"&&typeof ac.exports=="object"){var e=r(require,w_);e!==void 0&&(ac.exports=e)}else typeof define=="function"&&define.amd&&define(["require","exports"],r)})(function(r,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TextDocument=e.EOL=e.WorkspaceFolder=e.InlineCompletionContext=e.SelectedCompletionInfo=e.InlineCompletionTriggerKind=e.InlineCompletionList=e.InlineCompletionItem=e.StringValue=e.InlayHint=e.InlayHintLabelPart=e.InlayHintKind=e.InlineValueContext=e.InlineValueEvaluatableExpression=e.InlineValueVariableLookup=e.InlineValueText=e.SemanticTokens=e.SemanticTokenModifiers=e.SemanticTokenTypes=e.SelectionRange=e.DocumentLink=e.FormattingOptions=e.CodeLens=e.CodeAction=e.CodeActionContext=e.CodeActionTriggerKind=e.CodeActionKind=e.DocumentSymbol=e.WorkspaceSymbol=e.SymbolInformation=e.SymbolTag=e.SymbolKind=e.DocumentHighlight=e.DocumentHighlightKind=e.SignatureInformation=e.ParameterInformation=e.Hover=e.MarkedString=e.CompletionList=e.CompletionItem=e.CompletionItemLabelDetails=e.InsertTextMode=e.InsertReplaceEdit=e.CompletionItemTag=e.InsertTextFormat=e.CompletionItemKind=e.MarkupContent=e.MarkupKind=e.TextDocumentItem=e.OptionalVersionedTextDocumentIdentifier=e.VersionedTextDocumentIdentifier=e.TextDocumentIdentifier=e.WorkspaceChange=e.WorkspaceEdit=e.DeleteFile=e.RenameFile=e.CreateFile=e.TextDocumentEdit=e.AnnotatedTextEdit=e.ChangeAnnotationIdentifier=e.ChangeAnnotation=e.TextEdit=e.Command=e.Diagnostic=e.CodeDescription=e.DiagnosticTag=e.DiagnosticSeverity=e.DiagnosticRelatedInformation=e.FoldingRange=e.FoldingRangeKind=e.ColorPresentation=e.ColorInformation=e.Color=e.LocationLink=e.Location=e.Range=e.Position=e.uinteger=e.integer=e.URI=e.DocumentUri=void 0;var t;(function(C){function A(O){return typeof O=="string"}C.is=A})(t||(e.DocumentUri=t={}));var n;(function(C){function A(O){return typeof O=="string"}C.is=A})(n||(e.URI=n={}));var i;(function(C){C.MIN_VALUE=-2147483648,C.MAX_VALUE=2147483647;function A(O){return typeof O=="number"&&C.MIN_VALUE<=O&&O<=C.MAX_VALUE}C.is=A})(i||(e.integer=i={}));var s;(function(C){C.MIN_VALUE=0,C.MAX_VALUE=2147483647;function A(O){return typeof O=="number"&&C.MIN_VALUE<=O&&O<=C.MAX_VALUE}C.is=A})(s||(e.uinteger=s={}));var a;(function(C){function A(P,w){return P===Number.MAX_VALUE&&(P=s.MAX_VALUE),w===Number.MAX_VALUE&&(w=s.MAX_VALUE),{line:P,character:w}}C.create=A;function O(P){var w=P;return N.objectLiteral(w)&&N.uinteger(w.line)&&N.uinteger(w.character)}C.is=O})(a||(e.Position=a={}));var o;(function(C){function A(P,w,j,W){if(N.uinteger(P)&&N.uinteger(w)&&N.uinteger(j)&&N.uinteger(W))return{start:a.create(P,w),end:a.create(j,W)};if(a.is(P)&&a.is(w))return{start:P,end:w};throw new Error("Range#create called with invalid arguments[".concat(P,", ").concat(w,", ").concat(j,", ").concat(W,"]"))}C.create=A;function O(P){var w=P;return N.objectLiteral(w)&&a.is(w.start)&&a.is(w.end)}C.is=O})(o||(e.Range=o={}));var c;(function(C){function A(P,w){return{uri:P,range:w}}C.create=A;function O(P){var w=P;return N.objectLiteral(w)&&o.is(w.range)&&(N.string(w.uri)||N.undefined(w.uri))}C.is=O})(c||(e.Location=c={}));var u;(function(C){function A(P,w,j,W){return{targetUri:P,targetRange:w,targetSelectionRange:j,originSelectionRange:W}}C.create=A;function O(P){var w=P;return N.objectLiteral(w)&&o.is(w.targetRange)&&N.string(w.targetUri)&&o.is(w.targetSelectionRange)&&(o.is(w.originSelectionRange)||N.undefined(w.originSelectionRange))}C.is=O})(u||(e.LocationLink=u={}));var l;(function(C){function A(P,w,j,W){return{red:P,green:w,blue:j,alpha:W}}C.create=A;function O(P){var w=P;return N.objectLiteral(w)&&N.numberRange(w.red,0,1)&&N.numberRange(w.green,0,1)&&N.numberRange(w.blue,0,1)&&N.numberRange(w.alpha,0,1)}C.is=O})(l||(e.Color=l={}));var b;(function(C){function A(P,w){return{range:P,color:w}}C.create=A;function O(P){var w=P;return N.objectLiteral(w)&&o.is(w.range)&&l.is(w.color)}C.is=O})(b||(e.ColorInformation=b={}));var f;(function(C){function A(P,w,j){return{label:P,textEdit:w,additionalTextEdits:j}}C.create=A;function O(P){var w=P;return N.objectLiteral(w)&&N.string(w.label)&&(N.undefined(w.textEdit)||x.is(w))&&(N.undefined(w.additionalTextEdits)||N.typedArray(w.additionalTextEdits,x.is))}C.is=O})(f||(e.ColorPresentation=f={}));var _;(function(C){C.Comment="comment",C.Imports="imports",C.Region="region"})(_||(e.FoldingRangeKind=_={}));var m;(function(C){function A(P,w,j,W,pe,Dt){var pt={startLine:P,endLine:w};return N.defined(j)&&(pt.startCharacter=j),N.defined(W)&&(pt.endCharacter=W),N.defined(pe)&&(pt.kind=pe),N.defined(Dt)&&(pt.collapsedText=Dt),pt}C.create=A;function O(P){var w=P;return N.objectLiteral(w)&&N.uinteger(w.startLine)&&N.uinteger(w.startLine)&&(N.undefined(w.startCharacter)||N.uinteger(w.startCharacter))&&(N.undefined(w.endCharacter)||N.uinteger(w.endCharacter))&&(N.undefined(w.kind)||N.string(w.kind))}C.is=O})(m||(e.FoldingRange=m={}));var p;(function(C){function A(P,w){return{location:P,message:w}}C.create=A;function O(P){var w=P;return N.defined(w)&&c.is(w.location)&&N.string(w.message)}C.is=O})(p||(e.DiagnosticRelatedInformation=p={}));var g;(function(C){C.Error=1,C.Warning=2,C.Information=3,C.Hint=4})(g||(e.DiagnosticSeverity=g={}));var R;(function(C){C.Unnecessary=1,C.Deprecated=2})(R||(e.DiagnosticTag=R={}));var D;(function(C){function A(O){var P=O;return N.objectLiteral(P)&&N.string(P.href)}C.is=A})(D||(e.CodeDescription=D={}));var y;(function(C){function A(P,w,j,W,pe,Dt){var pt={range:P,message:w};return N.defined(j)&&(pt.severity=j),N.defined(W)&&(pt.code=W),N.defined(pe)&&(pt.source=pe),N.defined(Dt)&&(pt.relatedInformation=Dt),pt}C.create=A;function O(P){var w,j=P;return N.defined(j)&&o.is(j.range)&&N.string(j.message)&&(N.number(j.severity)||N.undefined(j.severity))&&(N.integer(j.code)||N.string(j.code)||N.undefined(j.code))&&(N.undefined(j.codeDescription)||N.string((w=j.codeDescription)===null||w===void 0?void 0:w.href))&&(N.string(j.source)||N.undefined(j.source))&&(N.undefined(j.relatedInformation)||N.typedArray(j.relatedInformation,p.is))}C.is=O})(y||(e.Diagnostic=y={}));var d;(function(C){function A(P,w){for(var j=[],W=2;W<arguments.length;W++)j[W-2]=arguments[W];var pe={title:P,command:w};return N.defined(j)&&j.length>0&&(pe.arguments=j),pe}C.create=A;function O(P){var w=P;return N.defined(w)&&N.string(w.title)&&N.string(w.command)}C.is=O})(d||(e.Command=d={}));var x;(function(C){function A(j,W){return{range:j,newText:W}}C.replace=A;function O(j,W){return{range:{start:j,end:j},newText:W}}C.insert=O;function P(j){return{range:j,newText:""}}C.del=P;function w(j){var W=j;return N.objectLiteral(W)&&N.string(W.newText)&&o.is(W.range)}C.is=w})(x||(e.TextEdit=x={}));var k;(function(C){function A(P,w,j){var W={label:P};return w!==void 0&&(W.needsConfirmation=w),j!==void 0&&(W.description=j),W}C.create=A;function O(P){var w=P;return N.objectLiteral(w)&&N.string(w.label)&&(N.boolean(w.needsConfirmation)||w.needsConfirmation===void 0)&&(N.string(w.description)||w.description===void 0)}C.is=O})(k||(e.ChangeAnnotation=k={}));var S;(function(C){function A(O){var P=O;return N.string(P)}C.is=A})(S||(e.ChangeAnnotationIdentifier=S={}));var T;(function(C){function A(j,W,pe){return{range:j,newText:W,annotationId:pe}}C.replace=A;function O(j,W,pe){return{range:{start:j,end:j},newText:W,annotationId:pe}}C.insert=O;function P(j,W){return{range:j,newText:"",annotationId:W}}C.del=P;function w(j){var W=j;return x.is(W)&&(k.is(W.annotationId)||S.is(W.annotationId))}C.is=w})(T||(e.AnnotatedTextEdit=T={}));var E;(function(C){function A(P,w){return{textDocument:P,edits:w}}C.create=A;function O(P){var w=P;return N.defined(w)&&ue.is(w.textDocument)&&Array.isArray(w.edits)}C.is=O})(E||(e.TextDocumentEdit=E={}));var M;(function(C){function A(P,w,j){var W={kind:"create",uri:P};return w!==void 0&&(w.overwrite!==void 0||w.ignoreIfExists!==void 0)&&(W.options=w),j!==void 0&&(W.annotationId=j),W}C.create=A;function O(P){var w=P;return w&&w.kind==="create"&&N.string(w.uri)&&(w.options===void 0||(w.options.overwrite===void 0||N.boolean(w.options.overwrite))&&(w.options.ignoreIfExists===void 0||N.boolean(w.options.ignoreIfExists)))&&(w.annotationId===void 0||S.is(w.annotationId))}C.is=O})(M||(e.CreateFile=M={}));var V;(function(C){function A(P,w,j,W){var pe={kind:"rename",oldUri:P,newUri:w};return j!==void 0&&(j.overwrite!==void 0||j.ignoreIfExists!==void 0)&&(pe.options=j),W!==void 0&&(pe.annotationId=W),pe}C.create=A;function O(P){var w=P;return w&&w.kind==="rename"&&N.string(w.oldUri)&&N.string(w.newUri)&&(w.options===void 0||(w.options.overwrite===void 0||N.boolean(w.options.overwrite))&&(w.options.ignoreIfExists===void 0||N.boolean(w.options.ignoreIfExists)))&&(w.annotationId===void 0||S.is(w.annotationId))}C.is=O})(V||(e.RenameFile=V={}));var Y;(function(C){function A(P,w,j){var W={kind:"delete",uri:P};return w!==void 0&&(w.recursive!==void 0||w.ignoreIfNotExists!==void 0)&&(W.options=w),j!==void 0&&(W.annotationId=j),W}C.create=A;function O(P){var w=P;return w&&w.kind==="delete"&&N.string(w.uri)&&(w.options===void 0||(w.options.recursive===void 0||N.boolean(w.options.recursive))&&(w.options.ignoreIfNotExists===void 0||N.boolean(w.options.ignoreIfNotExists)))&&(w.annotationId===void 0||S.is(w.annotationId))}C.is=O})(Y||(e.DeleteFile=Y={}));var te;(function(C){function A(O){var P=O;return P&&(P.changes!==void 0||P.documentChanges!==void 0)&&(P.documentChanges===void 0||P.documentChanges.every(function(w){return N.string(w.kind)?M.is(w)||V.is(w)||Y.is(w):E.is(w)}))}C.is=A})(te||(e.WorkspaceEdit=te={}));var se=function(){function C(A,O){this.edits=A,this.changeAnnotations=O}return C.prototype.insert=function(A,O,P){var w,j;if(P===void 0?w=x.insert(A,O):S.is(P)?(j=P,w=T.insert(A,O,P)):(this.assertChangeAnnotations(this.changeAnnotations),j=this.changeAnnotations.manage(P),w=T.insert(A,O,j)),this.edits.push(w),j!==void 0)return j},C.prototype.replace=function(A,O,P){var w,j;if(P===void 0?w=x.replace(A,O):S.is(P)?(j=P,w=T.replace(A,O,P)):(this.assertChangeAnnotations(this.changeAnnotations),j=this.changeAnnotations.manage(P),w=T.replace(A,O,j)),this.edits.push(w),j!==void 0)return j},C.prototype.delete=function(A,O){var P,w;if(O===void 0?P=x.del(A):S.is(O)?(w=O,P=T.del(A,O)):(this.assertChangeAnnotations(this.changeAnnotations),w=this.changeAnnotations.manage(O),P=T.del(A,w)),this.edits.push(P),w!==void 0)return w},C.prototype.add=function(A){this.edits.push(A)},C.prototype.all=function(){return this.edits},C.prototype.clear=function(){this.edits.splice(0,this.edits.length)},C.prototype.assertChangeAnnotations=function(A){if(A===void 0)throw new Error("Text edit change is not configured to manage change annotations.")},C}(),le=function(){function C(A){this._annotations=A===void 0?Object.create(null):A,this._counter=0,this._size=0}return C.prototype.all=function(){return this._annotations},Object.defineProperty(C.prototype,"size",{get:function(){return this._size},enumerable:!1,configurable:!0}),C.prototype.manage=function(A,O){var P;if(S.is(A)?P=A:(P=this.nextId(),O=A),this._annotations[P]!==void 0)throw new Error("Id ".concat(P," is already in use."));if(O===void 0)throw new Error("No annotation provided for id ".concat(P));return this._annotations[P]=O,this._size++,P},C.prototype.nextId=function(){return this._counter++,this._counter.toString()},C}(),be=function(){function C(A){var O=this;this._textEditChanges=Object.create(null),A!==void 0?(this._workspaceEdit=A,A.documentChanges?(this._changeAnnotations=new le(A.changeAnnotations),A.changeAnnotations=this._changeAnnotations.all(),A.documentChanges.forEach(function(P){if(E.is(P)){var w=new se(P.edits,O._changeAnnotations);O._textEditChanges[P.textDocument.uri]=w}})):A.changes&&Object.keys(A.changes).forEach(function(P){var w=new se(A.changes[P]);O._textEditChanges[P]=w})):this._workspaceEdit={}}return Object.defineProperty(C.prototype,"edit",{get:function(){return this.initDocumentChanges(),this._changeAnnotations!==void 0&&(this._changeAnnotations.size===0?this._workspaceEdit.changeAnnotations=void 0:this._workspaceEdit.changeAnnotations=this._changeAnnotations.all()),this._workspaceEdit},enumerable:!1,configurable:!0}),C.prototype.getTextEditChange=function(A){if(ue.is(A)){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var O={uri:A.uri,version:A.version},P=this._textEditChanges[O.uri];if(!P){var w=[],j={textDocument:O,edits:w};this._workspaceEdit.documentChanges.push(j),P=new se(w,this._changeAnnotations),this._textEditChanges[O.uri]=P}return P}else{if(this.initChanges(),this._workspaceEdit.changes===void 0)throw new Error("Workspace edit is not configured for normal text edit changes.");var P=this._textEditChanges[A];if(!P){var w=[];this._workspaceEdit.changes[A]=w,P=new se(w),this._textEditChanges[A]=P}return P}},C.prototype.initDocumentChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._changeAnnotations=new le,this._workspaceEdit.documentChanges=[],this._workspaceEdit.changeAnnotations=this._changeAnnotations.all())},C.prototype.initChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._workspaceEdit.changes=Object.create(null))},C.prototype.createFile=function(A,O,P){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var w;k.is(O)||S.is(O)?w=O:P=O;var j,W;if(w===void 0?j=M.create(A,P):(W=S.is(w)?w:this._changeAnnotations.manage(w),j=M.create(A,P,W)),this._workspaceEdit.documentChanges.push(j),W!==void 0)return W},C.prototype.renameFile=function(A,O,P,w){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var j;k.is(P)||S.is(P)?j=P:w=P;var W,pe;if(j===void 0?W=V.create(A,O,w):(pe=S.is(j)?j:this._changeAnnotations.manage(j),W=V.create(A,O,w,pe)),this._workspaceEdit.documentChanges.push(W),pe!==void 0)return pe},C.prototype.deleteFile=function(A,O,P){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var w;k.is(O)||S.is(O)?w=O:P=O;var j,W;if(w===void 0?j=Y.create(A,P):(W=S.is(w)?w:this._changeAnnotations.manage(w),j=Y.create(A,P,W)),this._workspaceEdit.documentChanges.push(j),W!==void 0)return W},C}();e.WorkspaceChange=be;var we;(function(C){function A(P){return{uri:P}}C.create=A;function O(P){var w=P;return N.defined(w)&&N.string(w.uri)}C.is=O})(we||(e.TextDocumentIdentifier=we={}));var Le;(function(C){function A(P,w){return{uri:P,version:w}}C.create=A;function O(P){var w=P;return N.defined(w)&&N.string(w.uri)&&N.integer(w.version)}C.is=O})(Le||(e.VersionedTextDocumentIdentifier=Le={}));var ue;(function(C){function A(P,w){return{uri:P,version:w}}C.create=A;function O(P){var w=P;return N.defined(w)&&N.string(w.uri)&&(w.version===null||N.integer(w.version))}C.is=O})(ue||(e.OptionalVersionedTextDocumentIdentifier=ue={}));var Pe;(function(C){function A(P,w,j,W){return{uri:P,languageId:w,version:j,text:W}}C.create=A;function O(P){var w=P;return N.defined(w)&&N.string(w.uri)&&N.string(w.languageId)&&N.integer(w.version)&&N.string(w.text)}C.is=O})(Pe||(e.TextDocumentItem=Pe={}));var ve;(function(C){C.PlainText="plaintext",C.Markdown="markdown";function A(O){var P=O;return P===C.PlainText||P===C.Markdown}C.is=A})(ve||(e.MarkupKind=ve={}));var he;(function(C){function A(O){var P=O;return N.objectLiteral(O)&&ve.is(P.kind)&&N.string(P.value)}C.is=A})(he||(e.MarkupContent=he={}));var Ae;(function(C){C.Text=1,C.Method=2,C.Function=3,C.Constructor=4,C.Field=5,C.Variable=6,C.Class=7,C.Interface=8,C.Module=9,C.Property=10,C.Unit=11,C.Value=12,C.Enum=13,C.Keyword=14,C.Snippet=15,C.Color=16,C.File=17,C.Reference=18,C.Folder=19,C.EnumMember=20,C.Constant=21,C.Struct=22,C.Event=23,C.Operator=24,C.TypeParameter=25})(Ae||(e.CompletionItemKind=Ae={}));var at;(function(C){C.PlainText=1,C.Snippet=2})(at||(e.InsertTextFormat=at={}));var Z;(function(C){C.Deprecated=1})(Z||(e.CompletionItemTag=Z={}));var He;(function(C){function A(P,w,j){return{newText:P,insert:w,replace:j}}C.create=A;function O(P){var w=P;return w&&N.string(w.newText)&&o.is(w.insert)&&o.is(w.replace)}C.is=O})(He||(e.InsertReplaceEdit=He={}));var Oe;(function(C){C.asIs=1,C.adjustIndentation=2})(Oe||(e.InsertTextMode=Oe={}));var ft;(function(C){function A(O){var P=O;return P&&(N.string(P.detail)||P.detail===void 0)&&(N.string(P.description)||P.description===void 0)}C.is=A})(ft||(e.CompletionItemLabelDetails=ft={}));var Ut;(function(C){function A(O){return{label:O}}C.create=A})(Ut||(e.CompletionItem=Ut={}));var ct;(function(C){function A(O,P){return{items:O||[],isIncomplete:!!P}}C.create=A})(ct||(e.CompletionList=ct={}));var Yt;(function(C){function A(P){return P.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}C.fromPlainText=A;function O(P){var w=P;return N.string(w)||N.objectLiteral(w)&&N.string(w.language)&&N.string(w.value)}C.is=O})(Yt||(e.MarkedString=Yt={}));var Ue;(function(C){function A(O){var P=O;return!!P&&N.objectLiteral(P)&&(he.is(P.contents)||Yt.is(P.contents)||N.typedArray(P.contents,Yt.is))&&(O.range===void 0||o.is(O.range))}C.is=A})(Ue||(e.Hover=Ue={}));var gn;(function(C){function A(O,P){return P?{label:O,documentation:P}:{label:O}}C.create=A})(gn||(e.ParameterInformation=gn={}));var Qt;(function(C){function A(O,P){for(var w=[],j=2;j<arguments.length;j++)w[j-2]=arguments[j];var W={label:O};return N.defined(P)&&(W.documentation=P),N.defined(w)?W.parameters=w:W.parameters=[],W}C.create=A})(Qt||(e.SignatureInformation=Qt={}));var Ht;(function(C){C.Text=1,C.Read=2,C.Write=3})(Ht||(e.DocumentHighlightKind=Ht={}));var un;(function(C){function A(O,P){var w={range:O};return N.number(P)&&(w.kind=P),w}C.create=A})(un||(e.DocumentHighlight=un={}));var Bt;(function(C){C.File=1,C.Module=2,C.Namespace=3,C.Package=4,C.Class=5,C.Method=6,C.Property=7,C.Field=8,C.Constructor=9,C.Enum=10,C.Interface=11,C.Function=12,C.Variable=13,C.Constant=14,C.String=15,C.Number=16,C.Boolean=17,C.Array=18,C.Object=19,C.Key=20,C.Null=21,C.EnumMember=22,C.Struct=23,C.Event=24,C.Operator=25,C.TypeParameter=26})(Bt||(e.SymbolKind=Bt={}));var Tt;(function(C){C.Deprecated=1})(Tt||(e.SymbolTag=Tt={}));var ht;(function(C){function A(O,P,w,j,W){var pe={name:O,kind:P,location:{uri:j,range:w}};return W&&(pe.containerName=W),pe}C.create=A})(ht||(e.SymbolInformation=ht={}));var Et;(function(C){function A(O,P,w,j){return j!==void 0?{name:O,kind:P,location:{uri:w,range:j}}:{name:O,kind:P,location:{uri:w}}}C.create=A})(Et||(e.WorkspaceSymbol=Et={}));var Nt;(function(C){function A(P,w,j,W,pe,Dt){var pt={name:P,detail:w,kind:j,range:W,selectionRange:pe};return Dt!==void 0&&(pt.children=Dt),pt}C.create=A;function O(P){var w=P;return w&&N.string(w.name)&&N.number(w.kind)&&o.is(w.range)&&o.is(w.selectionRange)&&(w.detail===void 0||N.string(w.detail))&&(w.deprecated===void 0||N.boolean(w.deprecated))&&(w.children===void 0||Array.isArray(w.children))&&(w.tags===void 0||Array.isArray(w.tags))}C.is=O})(Nt||(e.DocumentSymbol=Nt={}));var Vt;(function(C){C.Empty="",C.QuickFix="quickfix",C.Refactor="refactor",C.RefactorExtract="refactor.extract",C.RefactorInline="refactor.inline",C.RefactorRewrite="refactor.rewrite",C.Source="source",C.SourceOrganizeImports="source.organizeImports",C.SourceFixAll="source.fixAll"})(Vt||(e.CodeActionKind=Vt={}));var Zt;(function(C){C.Invoked=1,C.Automatic=2})(Zt||(e.CodeActionTriggerKind=Zt={}));var mn;(function(C){function A(P,w,j){var W={diagnostics:P};return w!=null&&(W.only=w),j!=null&&(W.triggerKind=j),W}C.create=A;function O(P){var w=P;return N.defined(w)&&N.typedArray(w.diagnostics,y.is)&&(w.only===void 0||N.typedArray(w.only,N.string))&&(w.triggerKind===void 0||w.triggerKind===Zt.Invoked||w.triggerKind===Zt.Automatic)}C.is=O})(mn||(e.CodeActionContext=mn={}));var zn;(function(C){function A(P,w,j){var W={title:P},pe=!0;return typeof w=="string"?(pe=!1,W.kind=w):d.is(w)?W.command=w:W.edit=w,pe&&j!==void 0&&(W.kind=j),W}C.create=A;function O(P){var w=P;return w&&N.string(w.title)&&(w.diagnostics===void 0||N.typedArray(w.diagnostics,y.is))&&(w.kind===void 0||N.string(w.kind))&&(w.edit!==void 0||w.command!==void 0)&&(w.command===void 0||d.is(w.command))&&(w.isPreferred===void 0||N.boolean(w.isPreferred))&&(w.edit===void 0||te.is(w.edit))}C.is=O})(zn||(e.CodeAction=zn={}));var en;(function(C){function A(P,w){var j={range:P};return N.defined(w)&&(j.data=w),j}C.create=A;function O(P){var w=P;return N.defined(w)&&o.is(w.range)&&(N.undefined(w.command)||d.is(w.command))}C.is=O})(en||(e.CodeLens=en={}));var An;(function(C){function A(P,w){return{tabSize:P,insertSpaces:w}}C.create=A;function O(P){var w=P;return N.defined(w)&&N.uinteger(w.tabSize)&&N.boolean(w.insertSpaces)}C.is=O})(An||(e.FormattingOptions=An={}));var ln;(function(C){function A(P,w,j){return{range:P,target:w,data:j}}C.create=A;function O(P){var w=P;return N.defined(w)&&o.is(w.range)&&(N.undefined(w.target)||N.string(w.target))}C.is=O})(ln||(e.DocumentLink=ln={}));var $;(function(C){function A(P,w){return{range:P,parent:w}}C.create=A;function O(P){var w=P;return N.objectLiteral(w)&&o.is(w.range)&&(w.parent===void 0||C.is(w.parent))}C.is=O})($||(e.SelectionRange=$={}));var G;(function(C){C.namespace="namespace",C.type="type",C.class="class",C.enum="enum",C.interface="interface",C.struct="struct",C.typeParameter="typeParameter",C.parameter="parameter",C.variable="variable",C.property="property",C.enumMember="enumMember",C.event="event",C.function="function",C.method="method",C.macro="macro",C.keyword="keyword",C.modifier="modifier",C.comment="comment",C.string="string",C.number="number",C.regexp="regexp",C.operator="operator",C.decorator="decorator"})(G||(e.SemanticTokenTypes=G={}));var re;(function(C){C.declaration="declaration",C.definition="definition",C.readonly="readonly",C.static="static",C.deprecated="deprecated",C.abstract="abstract",C.async="async",C.modification="modification",C.documentation="documentation",C.defaultLibrary="defaultLibrary"})(re||(e.SemanticTokenModifiers=re={}));var oe;(function(C){function A(O){var P=O;return N.objectLiteral(P)&&(P.resultId===void 0||typeof P.resultId=="string")&&Array.isArray(P.data)&&(P.data.length===0||typeof P.data[0]=="number")}C.is=A})(oe||(e.SemanticTokens=oe={}));var Be;(function(C){function A(P,w){return{range:P,text:w}}C.create=A;function O(P){var w=P;return w!=null&&o.is(w.range)&&N.string(w.text)}C.is=O})(Be||(e.InlineValueText=Be={}));var ze;(function(C){function A(P,w,j){return{range:P,variableName:w,caseSensitiveLookup:j}}C.create=A;function O(P){var w=P;return w!=null&&o.is(w.range)&&N.boolean(w.caseSensitiveLookup)&&(N.string(w.variableName)||w.variableName===void 0)}C.is=O})(ze||(e.InlineValueVariableLookup=ze={}));var $e;(function(C){function A(P,w){return{range:P,expression:w}}C.create=A;function O(P){var w=P;return w!=null&&o.is(w.range)&&(N.string(w.expression)||w.expression===void 0)}C.is=O})($e||(e.InlineValueEvaluatableExpression=$e={}));var nt;(function(C){function A(P,w){return{frameId:P,stoppedLocation:w}}C.create=A;function O(P){var w=P;return N.defined(w)&&o.is(P.stoppedLocation)}C.is=O})(nt||(e.InlineValueContext=nt={}));var xe;(function(C){C.Type=1,C.Parameter=2;function A(O){return O===1||O===2}C.is=A})(xe||(e.InlayHintKind=xe={}));var Ye;(function(C){function A(P){return{value:P}}C.create=A;function O(P){var w=P;return N.objectLiteral(w)&&(w.tooltip===void 0||N.string(w.tooltip)||he.is(w.tooltip))&&(w.location===void 0||c.is(w.location))&&(w.command===void 0||d.is(w.command))}C.is=O})(Ye||(e.InlayHintLabelPart=Ye={}));var q;(function(C){function A(P,w,j){var W={position:P,label:w};return j!==void 0&&(W.kind=j),W}C.create=A;function O(P){var w=P;return N.objectLiteral(w)&&a.is(w.position)&&(N.string(w.label)||N.typedArray(w.label,Ye.is))&&(w.kind===void 0||xe.is(w.kind))&&w.textEdits===void 0||N.typedArray(w.textEdits,x.is)&&(w.tooltip===void 0||N.string(w.tooltip)||he.is(w.tooltip))&&(w.paddingLeft===void 0||N.boolean(w.paddingLeft))&&(w.paddingRight===void 0||N.boolean(w.paddingRight))}C.is=O})(q||(e.InlayHint=q={}));var U;(function(C){function A(O){return{kind:"snippet",value:O}}C.createSnippet=A})(U||(e.StringValue=U={}));var X;(function(C){function A(O,P,w,j){return{insertText:O,filterText:P,range:w,command:j}}C.create=A})(X||(e.InlineCompletionItem=X={}));var H;(function(C){function A(O){return{items:O}}C.create=A})(H||(e.InlineCompletionList=H={}));var J;(function(C){C.Invoked=0,C.Automatic=1})(J||(e.InlineCompletionTriggerKind=J={}));var ce;(function(C){function A(O,P){return{range:O,text:P}}C.create=A})(ce||(e.SelectedCompletionInfo=ce={}));var v;(function(C){function A(O,P){return{triggerKind:O,selectedCompletionInfo:P}}C.create=A})(v||(e.InlineCompletionContext=v={}));var F;(function(C){function A(O){var P=O;return N.objectLiteral(P)&&n.is(P.uri)&&N.string(P.name)}C.is=A})(F||(e.WorkspaceFolder=F={})),e.EOL=[`
`,`\r
`,"\r"];var K;(function(C){function A(j,W,pe,Dt){return new ae(j,W,pe,Dt)}C.create=A;function O(j){var W=j;return!!(N.defined(W)&&N.string(W.uri)&&(N.undefined(W.languageId)||N.string(W.languageId))&&N.uinteger(W.lineCount)&&N.func(W.getText)&&N.func(W.positionAt)&&N.func(W.offsetAt))}C.is=O;function P(j,W){for(var pe=j.getText(),Dt=w(W,function(Dr,h){var L=Dr.range.start.line-h.range.start.line;return L===0?Dr.range.start.character-h.range.start.character:L}),pt=pe.length,On=Dt.length-1;On>=0;On--){var Gn=Dt[On],pr=j.offsetAt(Gn.range.start),Ge=j.offsetAt(Gn.range.end);if(Ge<=pt)pe=pe.substring(0,pr)+Gn.newText+pe.substring(Ge,pe.length);else throw new Error("Overlapping edit");pt=pr}return pe}C.applyEdits=P;function w(j,W){if(j.length<=1)return j;var pe=j.length/2|0,Dt=j.slice(0,pe),pt=j.slice(pe);w(Dt,W),w(pt,W);for(var On=0,Gn=0,pr=0;On<Dt.length&&Gn<pt.length;){var Ge=W(Dt[On],pt[Gn]);Ge<=0?j[pr++]=Dt[On++]:j[pr++]=pt[Gn++]}for(;On<Dt.length;)j[pr++]=Dt[On++];for(;Gn<pt.length;)j[pr++]=pt[Gn++];return j}})(K||(e.TextDocument=K={}));var ae=function(){function C(A,O,P,w){this._uri=A,this._languageId=O,this._version=P,this._content=w,this._lineOffsets=void 0}return Object.defineProperty(C.prototype,"uri",{get:function(){return this._uri},enumerable:!1,configurable:!0}),Object.defineProperty(C.prototype,"languageId",{get:function(){return this._languageId},enumerable:!1,configurable:!0}),Object.defineProperty(C.prototype,"version",{get:function(){return this._version},enumerable:!1,configurable:!0}),C.prototype.getText=function(A){if(A){var O=this.offsetAt(A.start),P=this.offsetAt(A.end);return this._content.substring(O,P)}return this._content},C.prototype.update=function(A,O){this._content=A.text,this._version=O,this._lineOffsets=void 0},C.prototype.getLineOffsets=function(){if(this._lineOffsets===void 0){for(var A=[],O=this._content,P=!0,w=0;w<O.length;w++){P&&(A.push(w),P=!1);var j=O.charAt(w);P=j==="\r"||j===`
`,j==="\r"&&w+1<O.length&&O.charAt(w+1)===`
`&&w++}P&&O.length>0&&A.push(O.length),this._lineOffsets=A}return this._lineOffsets},C.prototype.positionAt=function(A){A=Math.max(Math.min(A,this._content.length),0);var O=this.getLineOffsets(),P=0,w=O.length;if(w===0)return a.create(0,A);for(;P<w;){var j=Math.floor((P+w)/2);O[j]>A?w=j:P=j+1}var W=P-1;return a.create(W,A-O[W])},C.prototype.offsetAt=function(A){var O=this.getLineOffsets();if(A.line>=O.length)return this._content.length;if(A.line<0)return 0;var P=O[A.line],w=A.line+1<O.length?O[A.line+1]:this._content.length;return Math.max(Math.min(P+A.character,w),P)},Object.defineProperty(C.prototype,"lineCount",{get:function(){return this.getLineOffsets().length},enumerable:!1,configurable:!0}),C}(),N;(function(C){var A=Object.prototype.toString;function O(Ge){return typeof Ge<"u"}C.defined=O;function P(Ge){return typeof Ge>"u"}C.undefined=P;function w(Ge){return Ge===!0||Ge===!1}C.boolean=w;function j(Ge){return A.call(Ge)==="[object String]"}C.string=j;function W(Ge){return A.call(Ge)==="[object Number]"}C.number=W;function pe(Ge,Dr,h){return A.call(Ge)==="[object Number]"&&Dr<=Ge&&Ge<=h}C.numberRange=pe;function Dt(Ge){return A.call(Ge)==="[object Number]"&&-2147483648<=Ge&&Ge<=2147483647}C.integer=Dt;function pt(Ge){return A.call(Ge)==="[object Number]"&&0<=Ge&&Ge<=2147483647}C.uinteger=pt;function On(Ge){return A.call(Ge)==="[object Function]"}C.func=On;function Gn(Ge){return Ge!==null&&typeof Ge=="object"}C.objectLiteral=Gn;function pr(Ge,Dr){return Array.isArray(Ge)&&Ge.every(Dr)}C.typedArray=pr})(N||(N={}))})});var xt=B(Nn=>{"use strict";Object.defineProperty(Nn,"__esModule",{value:!0});Nn.ProtocolNotificationType=Nn.ProtocolNotificationType0=Nn.ProtocolRequestType=Nn.ProtocolRequestType0=Nn.RegistrationType=Nn.MessageDirection=void 0;var ms=si(),C_;(function(r){r.clientToServer="clientToServer",r.serverToClient="serverToClient",r.both="both"})(C_||(Nn.MessageDirection=C_={}));var Ud=class{constructor(e){this.method=e}};Nn.RegistrationType=Ud;var Bd=class extends ms.RequestType0{constructor(e){super(e)}};Nn.ProtocolRequestType0=Bd;var Vd=class extends ms.RequestType{constructor(e){super(e,ms.ParameterStructures.byName)}};Nn.ProtocolRequestType=Vd;var zd=class extends ms.NotificationType0{constructor(e){super(e)}};Nn.ProtocolNotificationType0=zd;var Gd=class extends ms.NotificationType{constructor(e){super(e,ms.ParameterStructures.byName)}};Nn.ProtocolNotificationType=Gd});var uc=B(Kt=>{"use strict";Object.defineProperty(Kt,"__esModule",{value:!0});Kt.objectLiteral=Kt.typedArray=Kt.stringArray=Kt.array=Kt.func=Kt.error=Kt.number=Kt.string=Kt.boolean=void 0;function yS(r){return r===!0||r===!1}Kt.boolean=yS;function R_(r){return typeof r=="string"||r instanceof String}Kt.string=R_;function wS(r){return typeof r=="number"||r instanceof Number}Kt.number=wS;function CS(r){return r instanceof Error}Kt.error=CS;function RS(r){return typeof r=="function"}Kt.func=RS;function S_(r){return Array.isArray(r)}Kt.array=S_;function SS(r){return S_(r)&&r.every(e=>R_(e))}Kt.stringArray=SS;function DS(r,e){return Array.isArray(r)&&r.every(e)}Kt.typedArray=DS;function xS(r){return r!==null&&typeof r=="object"}Kt.objectLiteral=xS});var k_=B(lc=>{"use strict";Object.defineProperty(lc,"__esModule",{value:!0});lc.ImplementationRequest=void 0;var D_=xt(),x_;(function(r){r.method="textDocument/implementation",r.messageDirection=D_.MessageDirection.clientToServer,r.type=new D_.ProtocolRequestType(r.method)})(x_||(lc.ImplementationRequest=x_={}))});var E_=B(dc=>{"use strict";Object.defineProperty(dc,"__esModule",{value:!0});dc.TypeDefinitionRequest=void 0;var P_=xt(),T_;(function(r){r.method="textDocument/typeDefinition",r.messageDirection=P_.MessageDirection.clientToServer,r.type=new P_.ProtocolRequestType(r.method)})(T_||(dc.TypeDefinitionRequest=T_={}))});var O_=B(_s=>{"use strict";Object.defineProperty(_s,"__esModule",{value:!0});_s.DidChangeWorkspaceFoldersNotification=_s.WorkspaceFoldersRequest=void 0;var fc=xt(),I_;(function(r){r.method="workspace/workspaceFolders",r.messageDirection=fc.MessageDirection.serverToClient,r.type=new fc.ProtocolRequestType0(r.method)})(I_||(_s.WorkspaceFoldersRequest=I_={}));var A_;(function(r){r.method="workspace/didChangeWorkspaceFolders",r.messageDirection=fc.MessageDirection.clientToServer,r.type=new fc.ProtocolNotificationType(r.method)})(A_||(_s.DidChangeWorkspaceFoldersNotification=A_={}))});var q_=B(hc=>{"use strict";Object.defineProperty(hc,"__esModule",{value:!0});hc.ConfigurationRequest=void 0;var $_=xt(),N_;(function(r){r.method="workspace/configuration",r.messageDirection=$_.MessageDirection.serverToClient,r.type=new $_.ProtocolRequestType(r.method)})(N_||(hc.ConfigurationRequest=N_={}))});var F_=B(bs=>{"use strict";Object.defineProperty(bs,"__esModule",{value:!0});bs.ColorPresentationRequest=bs.DocumentColorRequest=void 0;var pc=xt(),L_;(function(r){r.method="textDocument/documentColor",r.messageDirection=pc.MessageDirection.clientToServer,r.type=new pc.ProtocolRequestType(r.method)})(L_||(bs.DocumentColorRequest=L_={}));var M_;(function(r){r.method="textDocument/colorPresentation",r.messageDirection=pc.MessageDirection.clientToServer,r.type=new pc.ProtocolRequestType(r.method)})(M_||(bs.ColorPresentationRequest=M_={}))});var B_=B(vs=>{"use strict";Object.defineProperty(vs,"__esModule",{value:!0});vs.FoldingRangeRefreshRequest=vs.FoldingRangeRequest=void 0;var gc=xt(),j_;(function(r){r.method="textDocument/foldingRange",r.messageDirection=gc.MessageDirection.clientToServer,r.type=new gc.ProtocolRequestType(r.method)})(j_||(vs.FoldingRangeRequest=j_={}));var U_;(function(r){r.method="workspace/foldingRange/refresh",r.messageDirection=gc.MessageDirection.serverToClient,r.type=new gc.ProtocolRequestType0(r.method)})(U_||(vs.FoldingRangeRefreshRequest=U_={}))});var G_=B(mc=>{"use strict";Object.defineProperty(mc,"__esModule",{value:!0});mc.DeclarationRequest=void 0;var V_=xt(),z_;(function(r){r.method="textDocument/declaration",r.messageDirection=V_.MessageDirection.clientToServer,r.type=new V_.ProtocolRequestType(r.method)})(z_||(mc.DeclarationRequest=z_={}))});var K_=B(_c=>{"use strict";Object.defineProperty(_c,"__esModule",{value:!0});_c.SelectionRangeRequest=void 0;var H_=xt(),W_;(function(r){r.method="textDocument/selectionRange",r.messageDirection=H_.MessageDirection.clientToServer,r.type=new H_.ProtocolRequestType(r.method)})(W_||(_c.SelectionRangeRequest=W_={}))});var Z_=B(oi=>{"use strict";Object.defineProperty(oi,"__esModule",{value:!0});oi.WorkDoneProgressCancelNotification=oi.WorkDoneProgressCreateRequest=oi.WorkDoneProgress=void 0;var kS=si(),bc=xt(),X_;(function(r){r.type=new kS.ProgressType;function e(t){return t===r.type}r.is=e})(X_||(oi.WorkDoneProgress=X_={}));var Y_;(function(r){r.method="window/workDoneProgress/create",r.messageDirection=bc.MessageDirection.serverToClient,r.type=new bc.ProtocolRequestType(r.method)})(Y_||(oi.WorkDoneProgressCreateRequest=Y_={}));var Q_;(function(r){r.method="window/workDoneProgress/cancel",r.messageDirection=bc.MessageDirection.clientToServer,r.type=new bc.ProtocolNotificationType(r.method)})(Q_||(oi.WorkDoneProgressCancelNotification=Q_={}))});var nb=B(ai=>{"use strict";Object.defineProperty(ai,"__esModule",{value:!0});ai.CallHierarchyOutgoingCallsRequest=ai.CallHierarchyIncomingCallsRequest=ai.CallHierarchyPrepareRequest=void 0;var ys=xt(),J_;(function(r){r.method="textDocument/prepareCallHierarchy",r.messageDirection=ys.MessageDirection.clientToServer,r.type=new ys.ProtocolRequestType(r.method)})(J_||(ai.CallHierarchyPrepareRequest=J_={}));var eb;(function(r){r.method="callHierarchy/incomingCalls",r.messageDirection=ys.MessageDirection.clientToServer,r.type=new ys.ProtocolRequestType(r.method)})(eb||(ai.CallHierarchyIncomingCallsRequest=eb={}));var tb;(function(r){r.method="callHierarchy/outgoingCalls",r.messageDirection=ys.MessageDirection.clientToServer,r.type=new ys.ProtocolRequestType(r.method)})(tb||(ai.CallHierarchyOutgoingCallsRequest=tb={}))});var cb=B(qn=>{"use strict";Object.defineProperty(qn,"__esModule",{value:!0});qn.SemanticTokensRefreshRequest=qn.SemanticTokensRangeRequest=qn.SemanticTokensDeltaRequest=qn.SemanticTokensRequest=qn.SemanticTokensRegistrationType=qn.TokenFormat=void 0;var Fr=xt(),rb;(function(r){r.Relative="relative"})(rb||(qn.TokenFormat=rb={}));var xo;(function(r){r.method="textDocument/semanticTokens",r.type=new Fr.RegistrationType(r.method)})(xo||(qn.SemanticTokensRegistrationType=xo={}));var ib;(function(r){r.method="textDocument/semanticTokens/full",r.messageDirection=Fr.MessageDirection.clientToServer,r.type=new Fr.ProtocolRequestType(r.method),r.registrationMethod=xo.method})(ib||(qn.SemanticTokensRequest=ib={}));var sb;(function(r){r.method="textDocument/semanticTokens/full/delta",r.messageDirection=Fr.MessageDirection.clientToServer,r.type=new Fr.ProtocolRequestType(r.method),r.registrationMethod=xo.method})(sb||(qn.SemanticTokensDeltaRequest=sb={}));var ob;(function(r){r.method="textDocument/semanticTokens/range",r.messageDirection=Fr.MessageDirection.clientToServer,r.type=new Fr.ProtocolRequestType(r.method),r.registrationMethod=xo.method})(ob||(qn.SemanticTokensRangeRequest=ob={}));var ab;(function(r){r.method="workspace/semanticTokens/refresh",r.messageDirection=Fr.MessageDirection.serverToClient,r.type=new Fr.ProtocolRequestType0(r.method)})(ab||(qn.SemanticTokensRefreshRequest=ab={}))});var db=B(vc=>{"use strict";Object.defineProperty(vc,"__esModule",{value:!0});vc.ShowDocumentRequest=void 0;var ub=xt(),lb;(function(r){r.method="window/showDocument",r.messageDirection=ub.MessageDirection.serverToClient,r.type=new ub.ProtocolRequestType(r.method)})(lb||(vc.ShowDocumentRequest=lb={}))});var pb=B(yc=>{"use strict";Object.defineProperty(yc,"__esModule",{value:!0});yc.LinkedEditingRangeRequest=void 0;var fb=xt(),hb;(function(r){r.method="textDocument/linkedEditingRange",r.messageDirection=fb.MessageDirection.clientToServer,r.type=new fb.ProtocolRequestType(r.method)})(hb||(yc.LinkedEditingRangeRequest=hb={}))});var Cb=B(yn=>{"use strict";Object.defineProperty(yn,"__esModule",{value:!0});yn.WillDeleteFilesRequest=yn.DidDeleteFilesNotification=yn.DidRenameFilesNotification=yn.WillRenameFilesRequest=yn.DidCreateFilesNotification=yn.WillCreateFilesRequest=yn.FileOperationPatternKind=void 0;var sr=xt(),gb;(function(r){r.file="file",r.folder="folder"})(gb||(yn.FileOperationPatternKind=gb={}));var mb;(function(r){r.method="workspace/willCreateFiles",r.messageDirection=sr.MessageDirection.clientToServer,r.type=new sr.ProtocolRequestType(r.method)})(mb||(yn.WillCreateFilesRequest=mb={}));var _b;(function(r){r.method="workspace/didCreateFiles",r.messageDirection=sr.MessageDirection.clientToServer,r.type=new sr.ProtocolNotificationType(r.method)})(_b||(yn.DidCreateFilesNotification=_b={}));var bb;(function(r){r.method="workspace/willRenameFiles",r.messageDirection=sr.MessageDirection.clientToServer,r.type=new sr.ProtocolRequestType(r.method)})(bb||(yn.WillRenameFilesRequest=bb={}));var vb;(function(r){r.method="workspace/didRenameFiles",r.messageDirection=sr.MessageDirection.clientToServer,r.type=new sr.ProtocolNotificationType(r.method)})(vb||(yn.DidRenameFilesNotification=vb={}));var yb;(function(r){r.method="workspace/didDeleteFiles",r.messageDirection=sr.MessageDirection.clientToServer,r.type=new sr.ProtocolNotificationType(r.method)})(yb||(yn.DidDeleteFilesNotification=yb={}));var wb;(function(r){r.method="workspace/willDeleteFiles",r.messageDirection=sr.MessageDirection.clientToServer,r.type=new sr.ProtocolRequestType(r.method)})(wb||(yn.WillDeleteFilesRequest=wb={}))});var kb=B(ci=>{"use strict";Object.defineProperty(ci,"__esModule",{value:!0});ci.MonikerRequest=ci.MonikerKind=ci.UniquenessLevel=void 0;var Rb=xt(),Sb;(function(r){r.document="document",r.project="project",r.group="group",r.scheme="scheme",r.global="global"})(Sb||(ci.UniquenessLevel=Sb={}));var Db;(function(r){r.$import="import",r.$export="export",r.local="local"})(Db||(ci.MonikerKind=Db={}));var xb;(function(r){r.method="textDocument/moniker",r.messageDirection=Rb.MessageDirection.clientToServer,r.type=new Rb.ProtocolRequestType(r.method)})(xb||(ci.MonikerRequest=xb={}))});var Ib=B(ui=>{"use strict";Object.defineProperty(ui,"__esModule",{value:!0});ui.TypeHierarchySubtypesRequest=ui.TypeHierarchySupertypesRequest=ui.TypeHierarchyPrepareRequest=void 0;var ws=xt(),Pb;(function(r){r.method="textDocument/prepareTypeHierarchy",r.messageDirection=ws.MessageDirection.clientToServer,r.type=new ws.ProtocolRequestType(r.method)})(Pb||(ui.TypeHierarchyPrepareRequest=Pb={}));var Tb;(function(r){r.method="typeHierarchy/supertypes",r.messageDirection=ws.MessageDirection.clientToServer,r.type=new ws.ProtocolRequestType(r.method)})(Tb||(ui.TypeHierarchySupertypesRequest=Tb={}));var Eb;(function(r){r.method="typeHierarchy/subtypes",r.messageDirection=ws.MessageDirection.clientToServer,r.type=new ws.ProtocolRequestType(r.method)})(Eb||(ui.TypeHierarchySubtypesRequest=Eb={}))});var $b=B(Cs=>{"use strict";Object.defineProperty(Cs,"__esModule",{value:!0});Cs.InlineValueRefreshRequest=Cs.InlineValueRequest=void 0;var wc=xt(),Ab;(function(r){r.method="textDocument/inlineValue",r.messageDirection=wc.MessageDirection.clientToServer,r.type=new wc.ProtocolRequestType(r.method)})(Ab||(Cs.InlineValueRequest=Ab={}));var Ob;(function(r){r.method="workspace/inlineValue/refresh",r.messageDirection=wc.MessageDirection.serverToClient,r.type=new wc.ProtocolRequestType0(r.method)})(Ob||(Cs.InlineValueRefreshRequest=Ob={}))});var Mb=B(li=>{"use strict";Object.defineProperty(li,"__esModule",{value:!0});li.InlayHintRefreshRequest=li.InlayHintResolveRequest=li.InlayHintRequest=void 0;var Rs=xt(),Nb;(function(r){r.method="textDocument/inlayHint",r.messageDirection=Rs.MessageDirection.clientToServer,r.type=new Rs.ProtocolRequestType(r.method)})(Nb||(li.InlayHintRequest=Nb={}));var qb;(function(r){r.method="inlayHint/resolve",r.messageDirection=Rs.MessageDirection.clientToServer,r.type=new Rs.ProtocolRequestType(r.method)})(qb||(li.InlayHintResolveRequest=qb={}));var Lb;(function(r){r.method="workspace/inlayHint/refresh",r.messageDirection=Rs.MessageDirection.serverToClient,r.type=new Rs.ProtocolRequestType0(r.method)})(Lb||(li.InlayHintRefreshRequest=Lb={}))});var Gb=B(or=>{"use strict";Object.defineProperty(or,"__esModule",{value:!0});or.DiagnosticRefreshRequest=or.WorkspaceDiagnosticRequest=or.DocumentDiagnosticRequest=or.DocumentDiagnosticReportKind=or.DiagnosticServerCancellationData=void 0;var zb=si(),PS=uc(),Ss=xt(),Fb;(function(r){function e(t){let n=t;return n&&PS.boolean(n.retriggerRequest)}r.is=e})(Fb||(or.DiagnosticServerCancellationData=Fb={}));var jb;(function(r){r.Full="full",r.Unchanged="unchanged"})(jb||(or.DocumentDiagnosticReportKind=jb={}));var Ub;(function(r){r.method="textDocument/diagnostic",r.messageDirection=Ss.MessageDirection.clientToServer,r.type=new Ss.ProtocolRequestType(r.method),r.partialResult=new zb.ProgressType})(Ub||(or.DocumentDiagnosticRequest=Ub={}));var Bb;(function(r){r.method="workspace/diagnostic",r.messageDirection=Ss.MessageDirection.clientToServer,r.type=new Ss.ProtocolRequestType(r.method),r.partialResult=new zb.ProgressType})(Bb||(or.WorkspaceDiagnosticRequest=Bb={}));var Vb;(function(r){r.method="workspace/diagnostic/refresh",r.messageDirection=Ss.MessageDirection.serverToClient,r.type=new Ss.ProtocolRequestType0(r.method)})(Vb||(or.DiagnosticRefreshRequest=Vb={}))});var Zb=B(Mt=>{"use strict";Object.defineProperty(Mt,"__esModule",{value:!0});Mt.DidCloseNotebookDocumentNotification=Mt.DidSaveNotebookDocumentNotification=Mt.DidChangeNotebookDocumentNotification=Mt.NotebookCellArrayChange=Mt.DidOpenNotebookDocumentNotification=Mt.NotebookDocumentSyncRegistrationType=Mt.NotebookDocument=Mt.NotebookCell=Mt.ExecutionSummary=Mt.NotebookCellKind=void 0;var ko=cc(),_r=uc(),Ir=xt(),Hd;(function(r){r.Markup=1,r.Code=2;function e(t){return t===1||t===2}r.is=e})(Hd||(Mt.NotebookCellKind=Hd={}));var Wd;(function(r){function e(i,s){let a={executionOrder:i};return(s===!0||s===!1)&&(a.success=s),a}r.create=e;function t(i){let s=i;return _r.objectLiteral(s)&&ko.uinteger.is(s.executionOrder)&&(s.success===void 0||_r.boolean(s.success))}r.is=t;function n(i,s){return i===s?!0:i==null||s===null||s===void 0?!1:i.executionOrder===s.executionOrder&&i.success===s.success}r.equals=n})(Wd||(Mt.ExecutionSummary=Wd={}));var Cc;(function(r){function e(s,a){return{kind:s,document:a}}r.create=e;function t(s){let a=s;return _r.objectLiteral(a)&&Hd.is(a.kind)&&ko.DocumentUri.is(a.document)&&(a.metadata===void 0||_r.objectLiteral(a.metadata))}r.is=t;function n(s,a){let o=new Set;return s.document!==a.document&&o.add("document"),s.kind!==a.kind&&o.add("kind"),s.executionSummary!==a.executionSummary&&o.add("executionSummary"),(s.metadata!==void 0||a.metadata!==void 0)&&!i(s.metadata,a.metadata)&&o.add("metadata"),(s.executionSummary!==void 0||a.executionSummary!==void 0)&&!Wd.equals(s.executionSummary,a.executionSummary)&&o.add("executionSummary"),o}r.diff=n;function i(s,a){if(s===a)return!0;if(s==null||a===null||a===void 0||typeof s!=typeof a||typeof s!="object")return!1;let o=Array.isArray(s),c=Array.isArray(a);if(o!==c)return!1;if(o&&c){if(s.length!==a.length)return!1;for(let u=0;u<s.length;u++)if(!i(s[u],a[u]))return!1}if(_r.objectLiteral(s)&&_r.objectLiteral(a)){let u=Object.keys(s),l=Object.keys(a);if(u.length!==l.length||(u.sort(),l.sort(),!i(u,l)))return!1;for(let b=0;b<u.length;b++){let f=u[b];if(!i(s[f],a[f]))return!1}}return!0}})(Cc||(Mt.NotebookCell=Cc={}));var Hb;(function(r){function e(n,i,s,a){return{uri:n,notebookType:i,version:s,cells:a}}r.create=e;function t(n){let i=n;return _r.objectLiteral(i)&&_r.string(i.uri)&&ko.integer.is(i.version)&&_r.typedArray(i.cells,Cc.is)}r.is=t})(Hb||(Mt.NotebookDocument=Hb={}));var Ds;(function(r){r.method="notebookDocument/sync",r.messageDirection=Ir.MessageDirection.clientToServer,r.type=new Ir.RegistrationType(r.method)})(Ds||(Mt.NotebookDocumentSyncRegistrationType=Ds={}));var Wb;(function(r){r.method="notebookDocument/didOpen",r.messageDirection=Ir.MessageDirection.clientToServer,r.type=new Ir.ProtocolNotificationType(r.method),r.registrationMethod=Ds.method})(Wb||(Mt.DidOpenNotebookDocumentNotification=Wb={}));var Kb;(function(r){function e(n){let i=n;return _r.objectLiteral(i)&&ko.uinteger.is(i.start)&&ko.uinteger.is(i.deleteCount)&&(i.cells===void 0||_r.typedArray(i.cells,Cc.is))}r.is=e;function t(n,i,s){let a={start:n,deleteCount:i};return s!==void 0&&(a.cells=s),a}r.create=t})(Kb||(Mt.NotebookCellArrayChange=Kb={}));var Xb;(function(r){r.method="notebookDocument/didChange",r.messageDirection=Ir.MessageDirection.clientToServer,r.type=new Ir.ProtocolNotificationType(r.method),r.registrationMethod=Ds.method})(Xb||(Mt.DidChangeNotebookDocumentNotification=Xb={}));var Yb;(function(r){r.method="notebookDocument/didSave",r.messageDirection=Ir.MessageDirection.clientToServer,r.type=new Ir.ProtocolNotificationType(r.method),r.registrationMethod=Ds.method})(Yb||(Mt.DidSaveNotebookDocumentNotification=Yb={}));var Qb;(function(r){r.method="notebookDocument/didClose",r.messageDirection=Ir.MessageDirection.clientToServer,r.type=new Ir.ProtocolNotificationType(r.method),r.registrationMethod=Ds.method})(Qb||(Mt.DidCloseNotebookDocumentNotification=Qb={}))});var tv=B(Rc=>{"use strict";Object.defineProperty(Rc,"__esModule",{value:!0});Rc.InlineCompletionRequest=void 0;var Jb=xt(),ev;(function(r){r.method="textDocument/inlineCompletion",r.messageDirection=Jb.MessageDirection.clientToServer,r.type=new Jb.ProtocolRequestType(r.method)})(ev||(Rc.InlineCompletionRequest=ev={}))});var py=B(I=>{"use strict";Object.defineProperty(I,"__esModule",{value:!0});I.WorkspaceSymbolRequest=I.CodeActionResolveRequest=I.CodeActionRequest=I.DocumentSymbolRequest=I.DocumentHighlightRequest=I.ReferencesRequest=I.DefinitionRequest=I.SignatureHelpRequest=I.SignatureHelpTriggerKind=I.HoverRequest=I.CompletionResolveRequest=I.CompletionRequest=I.CompletionTriggerKind=I.PublishDiagnosticsNotification=I.WatchKind=I.RelativePattern=I.FileChangeType=I.DidChangeWatchedFilesNotification=I.WillSaveTextDocumentWaitUntilRequest=I.WillSaveTextDocumentNotification=I.TextDocumentSaveReason=I.DidSaveTextDocumentNotification=I.DidCloseTextDocumentNotification=I.DidChangeTextDocumentNotification=I.TextDocumentContentChangeEvent=I.DidOpenTextDocumentNotification=I.TextDocumentSyncKind=I.TelemetryEventNotification=I.LogMessageNotification=I.ShowMessageRequest=I.ShowMessageNotification=I.MessageType=I.DidChangeConfigurationNotification=I.ExitNotification=I.ShutdownRequest=I.InitializedNotification=I.InitializeErrorCodes=I.InitializeRequest=I.WorkDoneProgressOptions=I.TextDocumentRegistrationOptions=I.StaticRegistrationOptions=I.PositionEncodingKind=I.FailureHandlingKind=I.ResourceOperationKind=I.UnregistrationRequest=I.RegistrationRequest=I.DocumentSelector=I.NotebookCellTextDocumentFilter=I.NotebookDocumentFilter=I.TextDocumentFilter=void 0;I.MonikerRequest=I.MonikerKind=I.UniquenessLevel=I.WillDeleteFilesRequest=I.DidDeleteFilesNotification=I.WillRenameFilesRequest=I.DidRenameFilesNotification=I.WillCreateFilesRequest=I.DidCreateFilesNotification=I.FileOperationPatternKind=I.LinkedEditingRangeRequest=I.ShowDocumentRequest=I.SemanticTokensRegistrationType=I.SemanticTokensRefreshRequest=I.SemanticTokensRangeRequest=I.SemanticTokensDeltaRequest=I.SemanticTokensRequest=I.TokenFormat=I.CallHierarchyPrepareRequest=I.CallHierarchyOutgoingCallsRequest=I.CallHierarchyIncomingCallsRequest=I.WorkDoneProgressCancelNotification=I.WorkDoneProgressCreateRequest=I.WorkDoneProgress=I.SelectionRangeRequest=I.DeclarationRequest=I.FoldingRangeRefreshRequest=I.FoldingRangeRequest=I.ColorPresentationRequest=I.DocumentColorRequest=I.ConfigurationRequest=I.DidChangeWorkspaceFoldersNotification=I.WorkspaceFoldersRequest=I.TypeDefinitionRequest=I.ImplementationRequest=I.ApplyWorkspaceEditRequest=I.ExecuteCommandRequest=I.PrepareRenameRequest=I.RenameRequest=I.PrepareSupportDefaultBehavior=I.DocumentOnTypeFormattingRequest=I.DocumentRangesFormattingRequest=I.DocumentRangeFormattingRequest=I.DocumentFormattingRequest=I.DocumentLinkResolveRequest=I.DocumentLinkRequest=I.CodeLensRefreshRequest=I.CodeLensResolveRequest=I.CodeLensRequest=I.WorkspaceSymbolResolveRequest=void 0;I.InlineCompletionRequest=I.DidCloseNotebookDocumentNotification=I.DidSaveNotebookDocumentNotification=I.DidChangeNotebookDocumentNotification=I.NotebookCellArrayChange=I.DidOpenNotebookDocumentNotification=I.NotebookDocumentSyncRegistrationType=I.NotebookDocument=I.NotebookCell=I.ExecutionSummary=I.NotebookCellKind=I.DiagnosticRefreshRequest=I.WorkspaceDiagnosticRequest=I.DocumentDiagnosticRequest=I.DocumentDiagnosticReportKind=I.DiagnosticServerCancellationData=I.InlayHintRefreshRequest=I.InlayHintResolveRequest=I.InlayHintRequest=I.InlineValueRefreshRequest=I.InlineValueRequest=I.TypeHierarchySupertypesRequest=I.TypeHierarchySubtypesRequest=I.TypeHierarchyPrepareRequest=void 0;var ne=xt(),nv=cc(),rn=uc(),TS=k_();Object.defineProperty(I,"ImplementationRequest",{enumerable:!0,get:function(){return TS.ImplementationRequest}});var ES=E_();Object.defineProperty(I,"TypeDefinitionRequest",{enumerable:!0,get:function(){return ES.TypeDefinitionRequest}});var ly=O_();Object.defineProperty(I,"WorkspaceFoldersRequest",{enumerable:!0,get:function(){return ly.WorkspaceFoldersRequest}});Object.defineProperty(I,"DidChangeWorkspaceFoldersNotification",{enumerable:!0,get:function(){return ly.DidChangeWorkspaceFoldersNotification}});var IS=q_();Object.defineProperty(I,"ConfigurationRequest",{enumerable:!0,get:function(){return IS.ConfigurationRequest}});var dy=F_();Object.defineProperty(I,"DocumentColorRequest",{enumerable:!0,get:function(){return dy.DocumentColorRequest}});Object.defineProperty(I,"ColorPresentationRequest",{enumerable:!0,get:function(){return dy.ColorPresentationRequest}});var fy=B_();Object.defineProperty(I,"FoldingRangeRequest",{enumerable:!0,get:function(){return fy.FoldingRangeRequest}});Object.defineProperty(I,"FoldingRangeRefreshRequest",{enumerable:!0,get:function(){return fy.FoldingRangeRefreshRequest}});var AS=G_();Object.defineProperty(I,"DeclarationRequest",{enumerable:!0,get:function(){return AS.DeclarationRequest}});var OS=K_();Object.defineProperty(I,"SelectionRangeRequest",{enumerable:!0,get:function(){return OS.SelectionRangeRequest}});var Zd=Z_();Object.defineProperty(I,"WorkDoneProgress",{enumerable:!0,get:function(){return Zd.WorkDoneProgress}});Object.defineProperty(I,"WorkDoneProgressCreateRequest",{enumerable:!0,get:function(){return Zd.WorkDoneProgressCreateRequest}});Object.defineProperty(I,"WorkDoneProgressCancelNotification",{enumerable:!0,get:function(){return Zd.WorkDoneProgressCancelNotification}});var Jd=nb();Object.defineProperty(I,"CallHierarchyIncomingCallsRequest",{enumerable:!0,get:function(){return Jd.CallHierarchyIncomingCallsRequest}});Object.defineProperty(I,"CallHierarchyOutgoingCallsRequest",{enumerable:!0,get:function(){return Jd.CallHierarchyOutgoingCallsRequest}});Object.defineProperty(I,"CallHierarchyPrepareRequest",{enumerable:!0,get:function(){return Jd.CallHierarchyPrepareRequest}});var xs=cb();Object.defineProperty(I,"TokenFormat",{enumerable:!0,get:function(){return xs.TokenFormat}});Object.defineProperty(I,"SemanticTokensRequest",{enumerable:!0,get:function(){return xs.SemanticTokensRequest}});Object.defineProperty(I,"SemanticTokensDeltaRequest",{enumerable:!0,get:function(){return xs.SemanticTokensDeltaRequest}});Object.defineProperty(I,"SemanticTokensRangeRequest",{enumerable:!0,get:function(){return xs.SemanticTokensRangeRequest}});Object.defineProperty(I,"SemanticTokensRefreshRequest",{enumerable:!0,get:function(){return xs.SemanticTokensRefreshRequest}});Object.defineProperty(I,"SemanticTokensRegistrationType",{enumerable:!0,get:function(){return xs.SemanticTokensRegistrationType}});var $S=db();Object.defineProperty(I,"ShowDocumentRequest",{enumerable:!0,get:function(){return $S.ShowDocumentRequest}});var NS=pb();Object.defineProperty(I,"LinkedEditingRangeRequest",{enumerable:!0,get:function(){return NS.LinkedEditingRangeRequest}});var Ai=Cb();Object.defineProperty(I,"FileOperationPatternKind",{enumerable:!0,get:function(){return Ai.FileOperationPatternKind}});Object.defineProperty(I,"DidCreateFilesNotification",{enumerable:!0,get:function(){return Ai.DidCreateFilesNotification}});Object.defineProperty(I,"WillCreateFilesRequest",{enumerable:!0,get:function(){return Ai.WillCreateFilesRequest}});Object.defineProperty(I,"DidRenameFilesNotification",{enumerable:!0,get:function(){return Ai.DidRenameFilesNotification}});Object.defineProperty(I,"WillRenameFilesRequest",{enumerable:!0,get:function(){return Ai.WillRenameFilesRequest}});Object.defineProperty(I,"DidDeleteFilesNotification",{enumerable:!0,get:function(){return Ai.DidDeleteFilesNotification}});Object.defineProperty(I,"WillDeleteFilesRequest",{enumerable:!0,get:function(){return Ai.WillDeleteFilesRequest}});var ef=kb();Object.defineProperty(I,"UniquenessLevel",{enumerable:!0,get:function(){return ef.UniquenessLevel}});Object.defineProperty(I,"MonikerKind",{enumerable:!0,get:function(){return ef.MonikerKind}});Object.defineProperty(I,"MonikerRequest",{enumerable:!0,get:function(){return ef.MonikerRequest}});var tf=Ib();Object.defineProperty(I,"TypeHierarchyPrepareRequest",{enumerable:!0,get:function(){return tf.TypeHierarchyPrepareRequest}});Object.defineProperty(I,"TypeHierarchySubtypesRequest",{enumerable:!0,get:function(){return tf.TypeHierarchySubtypesRequest}});Object.defineProperty(I,"TypeHierarchySupertypesRequest",{enumerable:!0,get:function(){return tf.TypeHierarchySupertypesRequest}});var hy=$b();Object.defineProperty(I,"InlineValueRequest",{enumerable:!0,get:function(){return hy.InlineValueRequest}});Object.defineProperty(I,"InlineValueRefreshRequest",{enumerable:!0,get:function(){return hy.InlineValueRefreshRequest}});var nf=Mb();Object.defineProperty(I,"InlayHintRequest",{enumerable:!0,get:function(){return nf.InlayHintRequest}});Object.defineProperty(I,"InlayHintResolveRequest",{enumerable:!0,get:function(){return nf.InlayHintResolveRequest}});Object.defineProperty(I,"InlayHintRefreshRequest",{enumerable:!0,get:function(){return nf.InlayHintRefreshRequest}});var Po=Gb();Object.defineProperty(I,"DiagnosticServerCancellationData",{enumerable:!0,get:function(){return Po.DiagnosticServerCancellationData}});Object.defineProperty(I,"DocumentDiagnosticReportKind",{enumerable:!0,get:function(){return Po.DocumentDiagnosticReportKind}});Object.defineProperty(I,"DocumentDiagnosticRequest",{enumerable:!0,get:function(){return Po.DocumentDiagnosticRequest}});Object.defineProperty(I,"WorkspaceDiagnosticRequest",{enumerable:!0,get:function(){return Po.WorkspaceDiagnosticRequest}});Object.defineProperty(I,"DiagnosticRefreshRequest",{enumerable:!0,get:function(){return Po.DiagnosticRefreshRequest}});var Ar=Zb();Object.defineProperty(I,"NotebookCellKind",{enumerable:!0,get:function(){return Ar.NotebookCellKind}});Object.defineProperty(I,"ExecutionSummary",{enumerable:!0,get:function(){return Ar.ExecutionSummary}});Object.defineProperty(I,"NotebookCell",{enumerable:!0,get:function(){return Ar.NotebookCell}});Object.defineProperty(I,"NotebookDocument",{enumerable:!0,get:function(){return Ar.NotebookDocument}});Object.defineProperty(I,"NotebookDocumentSyncRegistrationType",{enumerable:!0,get:function(){return Ar.NotebookDocumentSyncRegistrationType}});Object.defineProperty(I,"DidOpenNotebookDocumentNotification",{enumerable:!0,get:function(){return Ar.DidOpenNotebookDocumentNotification}});Object.defineProperty(I,"NotebookCellArrayChange",{enumerable:!0,get:function(){return Ar.NotebookCellArrayChange}});Object.defineProperty(I,"DidChangeNotebookDocumentNotification",{enumerable:!0,get:function(){return Ar.DidChangeNotebookDocumentNotification}});Object.defineProperty(I,"DidSaveNotebookDocumentNotification",{enumerable:!0,get:function(){return Ar.DidSaveNotebookDocumentNotification}});Object.defineProperty(I,"DidCloseNotebookDocumentNotification",{enumerable:!0,get:function(){return Ar.DidCloseNotebookDocumentNotification}});var qS=tv();Object.defineProperty(I,"InlineCompletionRequest",{enumerable:!0,get:function(){return qS.InlineCompletionRequest}});var Kd;(function(r){function e(t){let n=t;return rn.string(n)||rn.string(n.language)||rn.string(n.scheme)||rn.string(n.pattern)}r.is=e})(Kd||(I.TextDocumentFilter=Kd={}));var Xd;(function(r){function e(t){let n=t;return rn.objectLiteral(n)&&(rn.string(n.notebookType)||rn.string(n.scheme)||rn.string(n.pattern))}r.is=e})(Xd||(I.NotebookDocumentFilter=Xd={}));var Yd;(function(r){function e(t){let n=t;return rn.objectLiteral(n)&&(rn.string(n.notebook)||Xd.is(n.notebook))&&(n.language===void 0||rn.string(n.language))}r.is=e})(Yd||(I.NotebookCellTextDocumentFilter=Yd={}));var Qd;(function(r){function e(t){if(!Array.isArray(t))return!1;for(let n of t)if(!rn.string(n)&&!Kd.is(n)&&!Yd.is(n))return!1;return!0}r.is=e})(Qd||(I.DocumentSelector=Qd={}));var rv;(function(r){r.method="client/registerCapability",r.messageDirection=ne.MessageDirection.serverToClient,r.type=new ne.ProtocolRequestType(r.method)})(rv||(I.RegistrationRequest=rv={}));var iv;(function(r){r.method="client/unregisterCapability",r.messageDirection=ne.MessageDirection.serverToClient,r.type=new ne.ProtocolRequestType(r.method)})(iv||(I.UnregistrationRequest=iv={}));var sv;(function(r){r.Create="create",r.Rename="rename",r.Delete="delete"})(sv||(I.ResourceOperationKind=sv={}));var ov;(function(r){r.Abort="abort",r.Transactional="transactional",r.TextOnlyTransactional="textOnlyTransactional",r.Undo="undo"})(ov||(I.FailureHandlingKind=ov={}));var av;(function(r){r.UTF8="utf-8",r.UTF16="utf-16",r.UTF32="utf-32"})(av||(I.PositionEncodingKind=av={}));var cv;(function(r){function e(t){let n=t;return n&&rn.string(n.id)&&n.id.length>0}r.hasId=e})(cv||(I.StaticRegistrationOptions=cv={}));var uv;(function(r){function e(t){let n=t;return n&&(n.documentSelector===null||Qd.is(n.documentSelector))}r.is=e})(uv||(I.TextDocumentRegistrationOptions=uv={}));var lv;(function(r){function e(n){let i=n;return rn.objectLiteral(i)&&(i.workDoneProgress===void 0||rn.boolean(i.workDoneProgress))}r.is=e;function t(n){let i=n;return i&&rn.boolean(i.workDoneProgress)}r.hasWorkDoneProgress=t})(lv||(I.WorkDoneProgressOptions=lv={}));var dv;(function(r){r.method="initialize",r.messageDirection=ne.MessageDirection.clientToServer,r.type=new ne.ProtocolRequestType(r.method)})(dv||(I.InitializeRequest=dv={}));var fv;(function(r){r.unknownProtocolVersion=1})(fv||(I.InitializeErrorCodes=fv={}));var hv;(function(r){r.method="initialized",r.messageDirection=ne.MessageDirection.clientToServer,r.type=new ne.ProtocolNotificationType(r.method)})(hv||(I.InitializedNotification=hv={}));var pv;(function(r){r.method="shutdown",r.messageDirection=ne.MessageDirection.clientToServer,r.type=new ne.ProtocolRequestType0(r.method)})(pv||(I.ShutdownRequest=pv={}));var gv;(function(r){r.method="exit",r.messageDirection=ne.MessageDirection.clientToServer,r.type=new ne.ProtocolNotificationType0(r.method)})(gv||(I.ExitNotification=gv={}));var mv;(function(r){r.method="workspace/didChangeConfiguration",r.messageDirection=ne.MessageDirection.clientToServer,r.type=new ne.ProtocolNotificationType(r.method)})(mv||(I.DidChangeConfigurationNotification=mv={}));var _v;(function(r){r.Error=1,r.Warning=2,r.Info=3,r.Log=4,r.Debug=5})(_v||(I.MessageType=_v={}));var bv;(function(r){r.method="window/showMessage",r.messageDirection=ne.MessageDirection.serverToClient,r.type=new ne.ProtocolNotificationType(r.method)})(bv||(I.ShowMessageNotification=bv={}));var vv;(function(r){r.method="window/showMessageRequest",r.messageDirection=ne.MessageDirection.serverToClient,r.type=new ne.ProtocolRequestType(r.method)})(vv||(I.ShowMessageRequest=vv={}));var yv;(function(r){r.method="window/logMessage",r.messageDirection=ne.MessageDirection.serverToClient,r.type=new ne.ProtocolNotificationType(r.method)})(yv||(I.LogMessageNotification=yv={}));var wv;(function(r){r.method="telemetry/event",r.messageDirection=ne.MessageDirection.serverToClient,r.type=new ne.ProtocolNotificationType(r.method)})(wv||(I.TelemetryEventNotification=wv={}));var Cv;(function(r){r.None=0,r.Full=1,r.Incremental=2})(Cv||(I.TextDocumentSyncKind=Cv={}));var Rv;(function(r){r.method="textDocument/didOpen",r.messageDirection=ne.MessageDirection.clientToServer,r.type=new ne.ProtocolNotificationType(r.method)})(Rv||(I.DidOpenTextDocumentNotification=Rv={}));var Sv;(function(r){function e(n){let i=n;return i!=null&&typeof i.text=="string"&&i.range!==void 0&&(i.rangeLength===void 0||typeof i.rangeLength=="number")}r.isIncremental=e;function t(n){let i=n;return i!=null&&typeof i.text=="string"&&i.range===void 0&&i.rangeLength===void 0}r.isFull=t})(Sv||(I.TextDocumentContentChangeEvent=Sv={}));var Dv;(function(r){r.method="textDocument/didChange",r.messageDirection=ne.MessageDirection.clientToServer,r.type=new ne.ProtocolNotificationType(r.method)})(Dv||(I.DidChangeTextDocumentNotification=Dv={}));var xv;(function(r){r.method="textDocument/didClose",r.messageDirection=ne.MessageDirection.clientToServer,r.type=new ne.ProtocolNotificationType(r.method)})(xv||(I.DidCloseTextDocumentNotification=xv={}));var kv;(function(r){r.method="textDocument/didSave",r.messageDirection=ne.MessageDirection.clientToServer,r.type=new ne.ProtocolNotificationType(r.method)})(kv||(I.DidSaveTextDocumentNotification=kv={}));var Pv;(function(r){r.Manual=1,r.AfterDelay=2,r.FocusOut=3})(Pv||(I.TextDocumentSaveReason=Pv={}));var Tv;(function(r){r.method="textDocument/willSave",r.messageDirection=ne.MessageDirection.clientToServer,r.type=new ne.ProtocolNotificationType(r.method)})(Tv||(I.WillSaveTextDocumentNotification=Tv={}));var Ev;(function(r){r.method="textDocument/willSaveWaitUntil",r.messageDirection=ne.MessageDirection.clientToServer,r.type=new ne.ProtocolRequestType(r.method)})(Ev||(I.WillSaveTextDocumentWaitUntilRequest=Ev={}));var Iv;(function(r){r.method="workspace/didChangeWatchedFiles",r.messageDirection=ne.MessageDirection.clientToServer,r.type=new ne.ProtocolNotificationType(r.method)})(Iv||(I.DidChangeWatchedFilesNotification=Iv={}));var Av;(function(r){r.Created=1,r.Changed=2,r.Deleted=3})(Av||(I.FileChangeType=Av={}));var Ov;(function(r){function e(t){let n=t;return rn.objectLiteral(n)&&(nv.URI.is(n.baseUri)||nv.WorkspaceFolder.is(n.baseUri))&&rn.string(n.pattern)}r.is=e})(Ov||(I.RelativePattern=Ov={}));var $v;(function(r){r.Create=1,r.Change=2,r.Delete=4})($v||(I.WatchKind=$v={}));var Nv;(function(r){r.method="textDocument/publishDiagnostics",r.messageDirection=ne.MessageDirection.serverToClient,r.type=new ne.ProtocolNotificationType(r.method)})(Nv||(I.PublishDiagnosticsNotification=Nv={}));var qv;(function(r){r.Invoked=1,r.TriggerCharacter=2,r.TriggerForIncompleteCompletions=3})(qv||(I.CompletionTriggerKind=qv={}));var Lv;(function(r){r.method="textDocument/completion",r.messageDirection=ne.MessageDirection.clientToServer,r.type=new ne.ProtocolRequestType(r.method)})(Lv||(I.CompletionRequest=Lv={}));var Mv;(function(r){r.method="completionItem/resolve",r.messageDirection=ne.MessageDirection.clientToServer,r.type=new ne.ProtocolRequestType(r.method)})(Mv||(I.CompletionResolveRequest=Mv={}));var Fv;(function(r){r.method="textDocument/hover",r.messageDirection=ne.MessageDirection.clientToServer,r.type=new ne.ProtocolRequestType(r.method)})(Fv||(I.HoverRequest=Fv={}));var jv;(function(r){r.Invoked=1,r.TriggerCharacter=2,r.ContentChange=3})(jv||(I.SignatureHelpTriggerKind=jv={}));var Uv;(function(r){r.method="textDocument/signatureHelp",r.messageDirection=ne.MessageDirection.clientToServer,r.type=new ne.ProtocolRequestType(r.method)})(Uv||(I.SignatureHelpRequest=Uv={}));var Bv;(function(r){r.method="textDocument/definition",r.messageDirection=ne.MessageDirection.clientToServer,r.type=new ne.ProtocolRequestType(r.method)})(Bv||(I.DefinitionRequest=Bv={}));var Vv;(function(r){r.method="textDocument/references",r.messageDirection=ne.MessageDirection.clientToServer,r.type=new ne.ProtocolRequestType(r.method)})(Vv||(I.ReferencesRequest=Vv={}));var zv;(function(r){r.method="textDocument/documentHighlight",r.messageDirection=ne.MessageDirection.clientToServer,r.type=new ne.ProtocolRequestType(r.method)})(zv||(I.DocumentHighlightRequest=zv={}));var Gv;(function(r){r.method="textDocument/documentSymbol",r.messageDirection=ne.MessageDirection.clientToServer,r.type=new ne.ProtocolRequestType(r.method)})(Gv||(I.DocumentSymbolRequest=Gv={}));var Hv;(function(r){r.method="textDocument/codeAction",r.messageDirection=ne.MessageDirection.clientToServer,r.type=new ne.ProtocolRequestType(r.method)})(Hv||(I.CodeActionRequest=Hv={}));var Wv;(function(r){r.method="codeAction/resolve",r.messageDirection=ne.MessageDirection.clientToServer,r.type=new ne.ProtocolRequestType(r.method)})(Wv||(I.CodeActionResolveRequest=Wv={}));var Kv;(function(r){r.method="workspace/symbol",r.messageDirection=ne.MessageDirection.clientToServer,r.type=new ne.ProtocolRequestType(r.method)})(Kv||(I.WorkspaceSymbolRequest=Kv={}));var Xv;(function(r){r.method="workspaceSymbol/resolve",r.messageDirection=ne.MessageDirection.clientToServer,r.type=new ne.ProtocolRequestType(r.method)})(Xv||(I.WorkspaceSymbolResolveRequest=Xv={}));var Yv;(function(r){r.method="textDocument/codeLens",r.messageDirection=ne.MessageDirection.clientToServer,r.type=new ne.ProtocolRequestType(r.method)})(Yv||(I.CodeLensRequest=Yv={}));var Qv;(function(r){r.method="codeLens/resolve",r.messageDirection=ne.MessageDirection.clientToServer,r.type=new ne.ProtocolRequestType(r.method)})(Qv||(I.CodeLensResolveRequest=Qv={}));var Zv;(function(r){r.method="workspace/codeLens/refresh",r.messageDirection=ne.MessageDirection.serverToClient,r.type=new ne.ProtocolRequestType0(r.method)})(Zv||(I.CodeLensRefreshRequest=Zv={}));var Jv;(function(r){r.method="textDocument/documentLink",r.messageDirection=ne.MessageDirection.clientToServer,r.type=new ne.ProtocolRequestType(r.method)})(Jv||(I.DocumentLinkRequest=Jv={}));var ey;(function(r){r.method="documentLink/resolve",r.messageDirection=ne.MessageDirection.clientToServer,r.type=new ne.ProtocolRequestType(r.method)})(ey||(I.DocumentLinkResolveRequest=ey={}));var ty;(function(r){r.method="textDocument/formatting",r.messageDirection=ne.MessageDirection.clientToServer,r.type=new ne.ProtocolRequestType(r.method)})(ty||(I.DocumentFormattingRequest=ty={}));var ny;(function(r){r.method="textDocument/rangeFormatting",r.messageDirection=ne.MessageDirection.clientToServer,r.type=new ne.ProtocolRequestType(r.method)})(ny||(I.DocumentRangeFormattingRequest=ny={}));var ry;(function(r){r.method="textDocument/rangesFormatting",r.messageDirection=ne.MessageDirection.clientToServer,r.type=new ne.ProtocolRequestType(r.method)})(ry||(I.DocumentRangesFormattingRequest=ry={}));var iy;(function(r){r.method="textDocument/onTypeFormatting",r.messageDirection=ne.MessageDirection.clientToServer,r.type=new ne.ProtocolRequestType(r.method)})(iy||(I.DocumentOnTypeFormattingRequest=iy={}));var sy;(function(r){r.Identifier=1})(sy||(I.PrepareSupportDefaultBehavior=sy={}));var oy;(function(r){r.method="textDocument/rename",r.messageDirection=ne.MessageDirection.clientToServer,r.type=new ne.ProtocolRequestType(r.method)})(oy||(I.RenameRequest=oy={}));var ay;(function(r){r.method="textDocument/prepareRename",r.messageDirection=ne.MessageDirection.clientToServer,r.type=new ne.ProtocolRequestType(r.method)})(ay||(I.PrepareRenameRequest=ay={}));var cy;(function(r){r.method="workspace/executeCommand",r.messageDirection=ne.MessageDirection.clientToServer,r.type=new ne.ProtocolRequestType(r.method)})(cy||(I.ExecuteCommandRequest=cy={}));var uy;(function(r){r.method="workspace/applyEdit",r.messageDirection=ne.MessageDirection.serverToClient,r.type=new ne.ProtocolRequestType("workspace/applyEdit")})(uy||(I.ApplyWorkspaceEditRequest=uy={}))});var my=B(Sc=>{"use strict";Object.defineProperty(Sc,"__esModule",{value:!0});Sc.createProtocolConnection=void 0;var gy=si();function LS(r,e,t,n){return gy.ConnectionStrategy.is(n)&&(n={connectionStrategy:n}),(0,gy.createMessageConnection)(r,e,t,n)}Sc.createProtocolConnection=LS});var by=B(Ln=>{"use strict";var MS=Ln&&Ln.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(r,n,i)}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),Dc=Ln&&Ln.__exportStar||function(r,e){for(var t in r)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&MS(e,r,t)};Object.defineProperty(Ln,"__esModule",{value:!0});Ln.LSPErrorCodes=Ln.createProtocolConnection=void 0;Dc(si(),Ln);Dc(cc(),Ln);Dc(xt(),Ln);Dc(py(),Ln);var FS=my();Object.defineProperty(Ln,"createProtocolConnection",{enumerable:!0,get:function(){return FS.createProtocolConnection}});var _y;(function(r){r.lspReservedErrorRangeStart=-32899,r.RequestFailed=-32803,r.ServerCancelled=-32802,r.ContentModified=-32801,r.RequestCancelled=-32800,r.lspReservedErrorRangeEnd=-32800})(_y||(Ln.LSPErrorCodes=_y={}))});var Ne=B(Or=>{"use strict";var jS=Or&&Or.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(r,n,i)}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),vy=Or&&Or.__exportStar||function(r,e){for(var t in r)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&jS(e,r,t)};Object.defineProperty(Or,"__esModule",{value:!0});Or.createProtocolConnection=void 0;var US=jd();vy(jd(),Or);vy(by(),Or);function BS(r,e,t,n){return(0,US.createMessageConnection)(r,e,t,n)}Or.createProtocolConnection=BS});var xc=B(wn=>{"use strict";Object.defineProperty(wn,"__esModule",{value:!0});wn.forEach=wn.mapAsync=wn.map=wn.clearTestMode=wn.setTestMode=wn.Semaphore=wn.Delayer=void 0;var Eo=Ne(),rf=class{constructor(e){this.defaultDelay=e,this.timeout=void 0,this.completionPromise=void 0,this.onSuccess=void 0,this.task=void 0}trigger(e,t=this.defaultDelay){return this.task=e,t>=0&&this.cancelTimeout(),this.completionPromise||(this.completionPromise=new Promise(n=>{this.onSuccess=n}).then(()=>{this.completionPromise=void 0,this.onSuccess=void 0;var n=this.task();return this.task=void 0,n})),(t>=0||this.timeout===void 0)&&(this.timeout=(0,Eo.RAL)().timer.setTimeout(()=>{this.timeout=void 0,this.onSuccess(void 0)},t>=0?t:this.defaultDelay)),this.completionPromise}forceDelivery(){if(!this.completionPromise)return;this.cancelTimeout();let e=this.task();return this.completionPromise=void 0,this.onSuccess=void 0,this.task=void 0,e}isTriggered(){return this.timeout!==void 0}cancel(){this.cancelTimeout(),this.completionPromise=void 0}cancelTimeout(){this.timeout!==void 0&&(this.timeout.dispose(),this.timeout=void 0)}};wn.Delayer=rf;var sf=class{constructor(e=1){if(e<=0)throw new Error("Capacity must be greater than 0");this._capacity=e,this._active=0,this._waiting=[]}lock(e){return new Promise((t,n)=>{this._waiting.push({thunk:e,resolve:t,reject:n}),this.runNext()})}get active(){return this._active}runNext(){this._waiting.length===0||this._active===this._capacity||(0,Eo.RAL)().timer.setImmediate(()=>this.doRunNext())}doRunNext(){if(this._waiting.length===0||this._active===this._capacity)return;let e=this._waiting.shift();if(this._active++,this._active>this._capacity)throw new Error("To many thunks active");try{let t=e.thunk();t instanceof Promise?t.then(n=>{this._active--,e.resolve(n),this.runNext()},n=>{this._active--,e.reject(n),this.runNext()}):(this._active--,e.resolve(t),this.runNext())}catch(t){this._active--,e.reject(t),this.runNext()}}};wn.Semaphore=sf;var of=!1;function VS(){of=!0}wn.setTestMode=VS;function zS(){of=!1}wn.clearTestMode=zS;var yy=15,To=class{constructor(e=yy){this.yieldAfter=of===!0?Math.max(e,2):Math.max(e,yy),this.startTime=Date.now(),this.counter=0,this.total=0,this.counterInterval=1}start(){this.counter=0,this.total=0,this.counterInterval=1,this.startTime=Date.now()}shouldYield(){if(++this.counter>=this.counterInterval){let e=Date.now()-this.startTime,t=Math.max(0,this.yieldAfter-e);if(this.total+=this.counter,this.counter=0,e>=this.yieldAfter||t<=1)return this.counterInterval=1,this.total=0,!0;switch(e){case 0:case 1:this.counterInterval=this.total*2;break}}return!1}};async function GS(r,e,t,n){if(r.length===0)return[];let i=new Array(r.length),s=new To(n?.yieldAfter);function a(c){s.start();for(let u=c;u<r.length;u++)if(i[u]=e(r[u]),s.shouldYield())return n?.yieldCallback&&n.yieldCallback(),u+1;return-1}let o=a(0);for(;o!==-1&&!(t!==void 0&&t.isCancellationRequested);)o=await new Promise(c=>{(0,Eo.RAL)().timer.setImmediate(()=>{c(a(o))})});return i}wn.map=GS;async function HS(r,e,t,n){if(r.length===0)return[];let i=new Array(r.length),s=new To(n?.yieldAfter);async function a(c){s.start();for(let u=c;u<r.length;u++)if(i[u]=await e(r[u],t),s.shouldYield())return n?.yieldCallback&&n.yieldCallback(),u+1;return-1}let o=await a(0);for(;o!==-1&&!(t!==void 0&&t.isCancellationRequested);)o=await new Promise(c=>{(0,Eo.RAL)().timer.setImmediate(()=>{c(a(o))})});return i}wn.mapAsync=HS;async function WS(r,e,t,n){if(r.length===0)return;let i=new To(n?.yieldAfter);function s(o){i.start();for(let c=o;c<r.length;c++)if(e(r[c]),i.shouldYield())return n?.yieldCallback&&n.yieldCallback(),c+1;return-1}let a=s(0);for(;a!==-1&&!(t!==void 0&&t.isCancellationRequested);)a=await new Promise(o=>{(0,Eo.RAL)().timer.setImmediate(()=>{o(s(a))})})}wn.forEach=WS});var uf=B(cf=>{"use strict";Object.defineProperty(cf,"__esModule",{value:!0});var KS=require("vscode"),af=class extends KS.CompletionItem{constructor(e){super(e)}};cf.default=af});var ff=B(df=>{"use strict";Object.defineProperty(df,"__esModule",{value:!0});var XS=require("vscode"),lf=class extends XS.CodeLens{constructor(e){super(e)}};df.default=lf});var gf=B(pf=>{"use strict";Object.defineProperty(pf,"__esModule",{value:!0});var YS=require("vscode"),hf=class extends YS.DocumentLink{constructor(e,t){super(e,t)}};pf.default=hf});var bf=B(_f=>{"use strict";Object.defineProperty(_f,"__esModule",{value:!0});var QS=require("vscode"),mf=class extends QS.CodeAction{constructor(e,t){super(e),this.data=t}};_f.default=mf});var wf=B(ks=>{"use strict";Object.defineProperty(ks,"__esModule",{value:!0});ks.ProtocolDiagnostic=ks.DiagnosticCode=void 0;var ZS=require("vscode"),vf=ir(),wy;(function(r){function e(t){let n=t;return n!=null&&(vf.number(n.value)||vf.string(n.value))&&vf.string(n.target)}r.is=e})(wy||(ks.DiagnosticCode=wy={}));var yf=class extends ZS.Diagnostic{constructor(e,t,n,i){super(e,t,n),this.data=i,this.hasDiagnosticCode=!1}};ks.ProtocolDiagnostic=yf});var Sf=B(Rf=>{"use strict";Object.defineProperty(Rf,"__esModule",{value:!0});var JS=require("vscode"),Cf=class extends JS.CallHierarchyItem{constructor(e,t,n,i,s,a,o){super(e,t,n,i,s,a),o!==void 0&&(this.data=o)}};Rf.default=Cf});var kf=B(xf=>{"use strict";Object.defineProperty(xf,"__esModule",{value:!0});var eD=require("vscode"),Df=class extends eD.TypeHierarchyItem{constructor(e,t,n,i,s,a,o){super(e,t,n,i,s,a),o!==void 0&&(this.data=o)}};xf.default=Df});var Ef=B(Tf=>{"use strict";Object.defineProperty(Tf,"__esModule",{value:!0});var kc=require("vscode"),Pf=class extends kc.SymbolInformation{constructor(e,t,n,i,s){let a=!(i instanceof kc.Uri);super(e,t,n,a?i:new kc.Location(i,new kc.Range(0,0,0,0))),this.hasRange=a,s!==void 0&&(this.data=s)}};Tf.default=Pf});var Of=B(Af=>{"use strict";Object.defineProperty(Af,"__esModule",{value:!0});var tD=require("vscode"),If=class extends tD.InlayHint{constructor(e,t,n){super(e,t,n)}};Af.default=If});var Dy=B(Pc=>{"use strict";Object.defineProperty(Pc,"__esModule",{value:!0});Pc.createConverter=void 0;var Xt=require("vscode"),qe=Ne(),Oi=ir(),Cy=xc(),nD=uf(),rD=ff(),iD=gf(),Ry=bf(),Sy=wf(),sD=Sf(),oD=kf(),aD=Ef(),cD=Of(),$f;(function(r){function e(t){let n=t;return n&&!!n.inserting&&!!n.replacing}r.is=e})($f||($f={}));function uD(r){let t=r||(v=>v.toString());function n(v){return t(v)}function i(v){return{uri:t(v.uri)}}function s(v){return{uri:t(v.uri),languageId:v.languageId,version:v.version,text:v.getText()}}function a(v){return{uri:t(v.uri),version:v.version}}function o(v){return{textDocument:s(v)}}function c(v){let F=v;return!!F.document&&!!F.contentChanges}function u(v){let F=v;return!!F.uri&&!!F.version}function l(v,F,K){if(u(v))return{textDocument:{uri:t(v.uri),version:v.version},contentChanges:[{text:v.getText()}]};if(c(v)){let ae=F,N=K;return{textDocument:{uri:t(ae),version:N},contentChanges:v.contentChanges.map(A=>{let O=A.range;return{range:{start:{line:O.start.line,character:O.start.character},end:{line:O.end.line,character:O.end.character}},rangeLength:A.rangeLength,text:A.text}})}}else throw Error("Unsupported text document change parameter")}function b(v){return{textDocument:i(v)}}function f(v,F=!1){let K={textDocument:i(v)};return F&&(K.text=v.getText()),K}function _(v){switch(v){case Xt.TextDocumentSaveReason.Manual:return qe.TextDocumentSaveReason.Manual;case Xt.TextDocumentSaveReason.AfterDelay:return qe.TextDocumentSaveReason.AfterDelay;case Xt.TextDocumentSaveReason.FocusOut:return qe.TextDocumentSaveReason.FocusOut}return qe.TextDocumentSaveReason.Manual}function m(v){return{textDocument:i(v.document),reason:_(v.reason)}}function p(v){return{files:v.files.map(F=>({uri:t(F)}))}}function g(v){return{files:v.files.map(F=>({oldUri:t(F.oldUri),newUri:t(F.newUri)}))}}function R(v){return{files:v.files.map(F=>({uri:t(F)}))}}function D(v){return{files:v.files.map(F=>({uri:t(F)}))}}function y(v){return{files:v.files.map(F=>({oldUri:t(F.oldUri),newUri:t(F.newUri)}))}}function d(v){return{files:v.files.map(F=>({uri:t(F)}))}}function x(v,F){return{textDocument:i(v),position:le(F)}}function k(v){switch(v){case Xt.CompletionTriggerKind.TriggerCharacter:return qe.CompletionTriggerKind.TriggerCharacter;case Xt.CompletionTriggerKind.TriggerForIncompleteCompletions:return qe.CompletionTriggerKind.TriggerForIncompleteCompletions;default:return qe.CompletionTriggerKind.Invoked}}function S(v,F,K){return{textDocument:i(v),position:le(F),context:{triggerKind:k(K.triggerKind),triggerCharacter:K.triggerCharacter}}}function T(v){switch(v){case Xt.SignatureHelpTriggerKind.Invoke:return qe.SignatureHelpTriggerKind.Invoked;case Xt.SignatureHelpTriggerKind.TriggerCharacter:return qe.SignatureHelpTriggerKind.TriggerCharacter;case Xt.SignatureHelpTriggerKind.ContentChange:return qe.SignatureHelpTriggerKind.ContentChange}}function E(v){return{label:v.label}}function M(v){return v.map(E)}function V(v){return{label:v.label,parameters:M(v.parameters)}}function Y(v){return v.map(V)}function te(v){return v===void 0?v:{signatures:Y(v.signatures),activeSignature:v.activeSignature,activeParameter:v.activeParameter}}function se(v,F,K){return{textDocument:i(v),position:le(F),context:{isRetrigger:K.isRetrigger,triggerCharacter:K.triggerCharacter,triggerKind:T(K.triggerKind),activeSignatureHelp:te(K.activeSignatureHelp)}}}function le(v){return{line:v.line,character:v.character}}function be(v){return v==null?v:{line:v.line>qe.uinteger.MAX_VALUE?qe.uinteger.MAX_VALUE:v.line,character:v.character>qe.uinteger.MAX_VALUE?qe.uinteger.MAX_VALUE:v.character}}function we(v,F){return Cy.map(v,be,F)}function Le(v){return v.map(be)}function ue(v){return v==null?v:{start:be(v.start),end:be(v.end)}}function Pe(v){return v.map(ue)}function ve(v){return v==null?v:qe.Location.create(n(v.uri),ue(v.range))}function he(v){switch(v){case Xt.DiagnosticSeverity.Error:return qe.DiagnosticSeverity.Error;case Xt.DiagnosticSeverity.Warning:return qe.DiagnosticSeverity.Warning;case Xt.DiagnosticSeverity.Information:return qe.DiagnosticSeverity.Information;case Xt.DiagnosticSeverity.Hint:return qe.DiagnosticSeverity.Hint}}function Ae(v){if(!v)return;let F=[];for(let K of v){let ae=at(K);ae!==void 0&&F.push(ae)}return F.length>0?F:void 0}function at(v){switch(v){case Xt.DiagnosticTag.Unnecessary:return qe.DiagnosticTag.Unnecessary;case Xt.DiagnosticTag.Deprecated:return qe.DiagnosticTag.Deprecated;default:return}}function Z(v){return{message:v.message,location:ve(v.location)}}function He(v){return v.map(Z)}function Oe(v){if(v!=null)return Oi.number(v)||Oi.string(v)?v:{value:v.value,target:n(v.target)}}function ft(v){let F=qe.Diagnostic.create(ue(v.range),v.message),K=v instanceof Sy.ProtocolDiagnostic?v:void 0;K!==void 0&&K.data!==void 0&&(F.data=K.data);let ae=Oe(v.code);return Sy.DiagnosticCode.is(ae)?K!==void 0&&K.hasDiagnosticCode?F.code=ae:(F.code=ae.value,F.codeDescription={href:ae.target}):F.code=ae,Oi.number(v.severity)&&(F.severity=he(v.severity)),Array.isArray(v.tags)&&(F.tags=Ae(v.tags)),v.relatedInformation&&(F.relatedInformation=He(v.relatedInformation)),v.source&&(F.source=v.source),F}function Ut(v,F){return v==null?v:Cy.map(v,ft,F)}function ct(v){return v==null?v:v.map(ft)}function Yt(v,F){switch(v){case"$string":return F;case qe.MarkupKind.PlainText:return{kind:v,value:F};case qe.MarkupKind.Markdown:return{kind:v,value:F.value};default:return`Unsupported Markup content received. Kind is: ${v}`}}function Ue(v){switch(v){case Xt.CompletionItemTag.Deprecated:return qe.CompletionItemTag.Deprecated}}function gn(v){if(v===void 0)return v;let F=[];for(let K of v){let ae=Ue(K);ae!==void 0&&F.push(ae)}return F}function Qt(v,F){return F!==void 0?F:v+1}function Ht(v,F=!1){let K,ae;Oi.string(v.label)?K=v.label:(K=v.label.label,F&&(v.label.detail!==void 0||v.label.description!==void 0)&&(ae={detail:v.label.detail,description:v.label.description}));let N={label:K};ae!==void 0&&(N.labelDetails=ae);let C=v instanceof nD.default?v:void 0;v.detail&&(N.detail=v.detail),v.documentation&&(!C||C.documentationFormat==="$string"?N.documentation=v.documentation:N.documentation=Yt(C.documentationFormat,v.documentation)),v.filterText&&(N.filterText=v.filterText),un(N,v),Oi.number(v.kind)&&(N.kind=Qt(v.kind,C&&C.originalItemKind)),v.sortText&&(N.sortText=v.sortText),v.additionalTextEdits&&(N.additionalTextEdits=ht(v.additionalTextEdits)),v.commitCharacters&&(N.commitCharacters=v.commitCharacters.slice()),v.command&&(N.command=oe(v.command)),(v.preselect===!0||v.preselect===!1)&&(N.preselect=v.preselect);let A=gn(v.tags);if(C){if(C.data!==void 0&&(N.data=C.data),C.deprecated===!0||C.deprecated===!1){if(C.deprecated===!0&&A!==void 0&&A.length>0){let O=A.indexOf(Xt.CompletionItemTag.Deprecated);O!==-1&&A.splice(O,1)}N.deprecated=C.deprecated}C.insertTextMode!==void 0&&(N.insertTextMode=C.insertTextMode)}return A!==void 0&&A.length>0&&(N.tags=A),N.insertTextMode===void 0&&v.keepWhitespace===!0&&(N.insertTextMode=qe.InsertTextMode.adjustIndentation),N}function un(v,F){let K=qe.InsertTextFormat.PlainText,ae,N;F.textEdit?(ae=F.textEdit.newText,N=F.textEdit.range):F.insertText instanceof Xt.SnippetString?(K=qe.InsertTextFormat.Snippet,ae=F.insertText.value):ae=F.insertText,F.range&&(N=F.range),v.insertTextFormat=K,F.fromEdit&&ae!==void 0&&N!==void 0?v.textEdit=Bt(ae,N):v.insertText=ae}function Bt(v,F){return $f.is(F)?qe.InsertReplaceEdit.create(v,ue(F.inserting),ue(F.replacing)):{newText:v,range:ue(F)}}function Tt(v){return{range:ue(v.range),newText:v.newText}}function ht(v){return v==null?v:v.map(Tt)}function Et(v){return v<=Xt.SymbolKind.TypeParameter?v+1:qe.SymbolKind.Property}function Nt(v){return v}function Vt(v){return v.map(Nt)}function Zt(v,F,K){return{textDocument:i(v),position:le(F),context:{includeDeclaration:K.includeDeclaration}}}async function mn(v,F){let K=qe.CodeAction.create(v.title);if(v instanceof Ry.default&&v.data!==void 0&&(K.data=v.data),v.kind!==void 0&&(K.kind=$(v.kind)),v.diagnostics!==void 0&&(K.diagnostics=await Ut(v.diagnostics,F)),v.edit!==void 0)throw new Error("VS Code code actions can only be converted to a protocol code action without an edit.");return v.command!==void 0&&(K.command=oe(v.command)),v.isPreferred!==void 0&&(K.isPreferred=v.isPreferred),v.disabled!==void 0&&(K.disabled={reason:v.disabled.reason}),K}function zn(v){let F=qe.CodeAction.create(v.title);if(v instanceof Ry.default&&v.data!==void 0&&(F.data=v.data),v.kind!==void 0&&(F.kind=$(v.kind)),v.diagnostics!==void 0&&(F.diagnostics=ct(v.diagnostics)),v.edit!==void 0)throw new Error("VS Code code actions can only be converted to a protocol code action without an edit.");return v.command!==void 0&&(F.command=oe(v.command)),v.isPreferred!==void 0&&(F.isPreferred=v.isPreferred),v.disabled!==void 0&&(F.disabled={reason:v.disabled.reason}),F}async function en(v,F){if(v==null)return v;let K;return v.only&&Oi.string(v.only.value)&&(K=[v.only.value]),qe.CodeActionContext.create(await Ut(v.diagnostics,F),K,ln(v.triggerKind))}function An(v){if(v==null)return v;let F;return v.only&&Oi.string(v.only.value)&&(F=[v.only.value]),qe.CodeActionContext.create(ct(v.diagnostics),F,ln(v.triggerKind))}function ln(v){switch(v){case Xt.CodeActionTriggerKind.Invoke:return qe.CodeActionTriggerKind.Invoked;case Xt.CodeActionTriggerKind.Automatic:return qe.CodeActionTriggerKind.Automatic;default:return}}function $(v){if(v!=null)return v.value}function G(v){return v==null?v:qe.InlineValueContext.create(v.frameId,ue(v.stoppedLocation))}function re(v,F,K){return{context:qe.InlineCompletionContext.create(K.triggerKind,K.selectedCompletionInfo),textDocument:i(v),position:be(F)}}function oe(v){let F=qe.Command.create(v.title,v.command);return v.arguments&&(F.arguments=v.arguments),F}function Be(v){let F=qe.CodeLens.create(ue(v.range));return v.command&&(F.command=oe(v.command)),v instanceof rD.default&&v.data&&(F.data=v.data),F}function ze(v,F){let K={tabSize:v.tabSize,insertSpaces:v.insertSpaces};return F.trimTrailingWhitespace&&(K.trimTrailingWhitespace=!0),F.trimFinalNewlines&&(K.trimFinalNewlines=!0),F.insertFinalNewline&&(K.insertFinalNewline=!0),K}function $e(v){return{textDocument:i(v)}}function nt(v){return{textDocument:i(v)}}function xe(v){let F=qe.DocumentLink.create(ue(v.range));v.target&&(F.target=n(v.target)),v.tooltip!==void 0&&(F.tooltip=v.tooltip);let K=v instanceof iD.default?v:void 0;return K&&K.data&&(F.data=K.data),F}function Ye(v){return{textDocument:i(v)}}function q(v){let F={name:v.name,kind:Et(v.kind),uri:n(v.uri),range:ue(v.range),selectionRange:ue(v.selectionRange)};return v.detail!==void 0&&v.detail.length>0&&(F.detail=v.detail),v.tags!==void 0&&(F.tags=Vt(v.tags)),v instanceof sD.default&&v.data!==void 0&&(F.data=v.data),F}function U(v){let F={name:v.name,kind:Et(v.kind),uri:n(v.uri),range:ue(v.range),selectionRange:ue(v.selectionRange)};return v.detail!==void 0&&v.detail.length>0&&(F.detail=v.detail),v.tags!==void 0&&(F.tags=Vt(v.tags)),v instanceof oD.default&&v.data!==void 0&&(F.data=v.data),F}function X(v){let F=v instanceof aD.default?{name:v.name,kind:Et(v.kind),location:v.hasRange?ve(v.location):{uri:t(v.location.uri)},data:v.data}:{name:v.name,kind:Et(v.kind),location:ve(v.location)};return v.tags!==void 0&&(F.tags=Vt(v.tags)),v.containerName!==""&&(F.containerName=v.containerName),F}function H(v){let F=typeof v.label=="string"?v.label:v.label.map(J),K=qe.InlayHint.create(be(v.position),F);return v.kind!==void 0&&(K.kind=v.kind),v.textEdits!==void 0&&(K.textEdits=ht(v.textEdits)),v.tooltip!==void 0&&(K.tooltip=ce(v.tooltip)),v.paddingLeft!==void 0&&(K.paddingLeft=v.paddingLeft),v.paddingRight!==void 0&&(K.paddingRight=v.paddingRight),v instanceof cD.default&&v.data!==void 0&&(K.data=v.data),K}function J(v){let F=qe.InlayHintLabelPart.create(v.value);return v.location!==void 0&&(F.location=ve(v.location)),v.command!==void 0&&(F.command=oe(v.command)),v.tooltip!==void 0&&(F.tooltip=ce(v.tooltip)),F}function ce(v){return typeof v=="string"?v:{kind:qe.MarkupKind.Markdown,value:v.value}}return{asUri:n,asTextDocumentIdentifier:i,asTextDocumentItem:s,asVersionedTextDocumentIdentifier:a,asOpenTextDocumentParams:o,asChangeTextDocumentParams:l,asCloseTextDocumentParams:b,asSaveTextDocumentParams:f,asWillSaveTextDocumentParams:m,asDidCreateFilesParams:p,asDidRenameFilesParams:g,asDidDeleteFilesParams:R,asWillCreateFilesParams:D,asWillRenameFilesParams:y,asWillDeleteFilesParams:d,asTextDocumentPositionParams:x,asCompletionParams:S,asSignatureHelpParams:se,asWorkerPosition:le,asRange:ue,asRanges:Pe,asPosition:be,asPositions:we,asPositionsSync:Le,asLocation:ve,asDiagnosticSeverity:he,asDiagnosticTag:at,asDiagnostic:ft,asDiagnostics:Ut,asDiagnosticsSync:ct,asCompletionItem:Ht,asTextEdit:Tt,asSymbolKind:Et,asSymbolTag:Nt,asSymbolTags:Vt,asReferenceParams:Zt,asCodeAction:mn,asCodeActionSync:zn,asCodeActionContext:en,asCodeActionContextSync:An,asInlineValueContext:G,asCommand:oe,asCodeLens:Be,asFormattingOptions:ze,asDocumentSymbolParams:$e,asCodeLensParams:nt,asDocumentLink:xe,asDocumentLinkParams:Ye,asCallHierarchyItem:q,asTypeHierarchyItem:U,asInlayHint:H,asWorkspaceSymbol:X,asInlineCompletionParams:re}}Pc.createConverter=uD});var Py=B(Ec=>{"use strict";Object.defineProperty(Ec,"__esModule",{value:!0});Ec.createConverter=void 0;var ie=require("vscode"),Ee=Ne(),ar=ir(),et=xc(),lD=uf(),dD=ff(),fD=gf(),hD=bf(),xy=wf(),pD=Sf(),gD=kf(),mD=Ef(),_D=Of(),ky=Ne(),Tc;(function(r){function e(t){let n=t;return n&&ar.string(n.language)&&ar.string(n.value)}r.is=e})(Tc||(Tc={}));function bD(r,e,t){let i=r||(h=>ie.Uri.parse(h));function s(h){return i(h)}function a(h){let L=[];for(let Q of h)if(typeof Q=="string")L.push(Q);else if(ky.NotebookCellTextDocumentFilter.is(Q))if(typeof Q.notebook=="string")L.push({notebookType:Q.notebook,language:Q.language});else{let _e=Q.notebook.notebookType??"*";L.push({notebookType:_e,scheme:Q.notebook.scheme,pattern:Q.notebook.pattern,language:Q.language})}else ky.TextDocumentFilter.is(Q)&&L.push({language:Q.language,scheme:Q.scheme,pattern:Q.pattern});return L}async function o(h,L){return et.map(h,u,L)}function c(h){let L=new Array(h.length);for(let Q=0;Q<h.length;Q++)L[Q]=u(h[Q]);return L}function u(h){let L=new xy.ProtocolDiagnostic(m(h.range),h.message,g(h.severity),h.data);if(h.code!==void 0){if(typeof h.code=="string"||typeof h.code=="number")Ee.CodeDescription.is(h.codeDescription)?L.code={value:h.code,target:s(h.codeDescription.href)}:L.code=h.code;else if(xy.DiagnosticCode.is(h.code)){L.hasDiagnosticCode=!0;let Q=h.code;L.code={value:Q.value,target:s(Q.target)}}}return h.source&&(L.source=h.source),h.relatedInformation&&(L.relatedInformation=l(h.relatedInformation)),Array.isArray(h.tags)&&(L.tags=b(h.tags)),L}function l(h){let L=new Array(h.length);for(let Q=0;Q<h.length;Q++){let _e=h[Q];L[Q]=new ie.DiagnosticRelatedInformation(he(_e.location),_e.message)}return L}function b(h){if(!h)return;let L=[];for(let Q of h){let _e=f(Q);_e!==void 0&&L.push(_e)}return L.length>0?L:void 0}function f(h){switch(h){case Ee.DiagnosticTag.Unnecessary:return ie.DiagnosticTag.Unnecessary;case Ee.DiagnosticTag.Deprecated:return ie.DiagnosticTag.Deprecated;default:return}}function _(h){return h?new ie.Position(h.line,h.character):void 0}function m(h){return h?new ie.Range(h.start.line,h.start.character,h.end.line,h.end.character):void 0}async function p(h,L){return et.map(h,Q=>new ie.Range(Q.start.line,Q.start.character,Q.end.line,Q.end.character),L)}function g(h){if(h==null)return ie.DiagnosticSeverity.Error;switch(h){case Ee.DiagnosticSeverity.Error:return ie.DiagnosticSeverity.Error;case Ee.DiagnosticSeverity.Warning:return ie.DiagnosticSeverity.Warning;case Ee.DiagnosticSeverity.Information:return ie.DiagnosticSeverity.Information;case Ee.DiagnosticSeverity.Hint:return ie.DiagnosticSeverity.Hint}return ie.DiagnosticSeverity.Error}function R(h){if(ar.string(h))return y(h);if(Tc.is(h))return y().appendCodeblock(h.value,h.language);if(Array.isArray(h)){let L=[];for(let Q of h){let _e=y();Tc.is(Q)?_e.appendCodeblock(Q.value,Q.language):_e.appendMarkdown(Q),L.push(_e)}return L}else return y(h)}function D(h){if(ar.string(h))return h;switch(h.kind){case Ee.MarkupKind.Markdown:return y(h.value);case Ee.MarkupKind.PlainText:return h.value;default:return`Unsupported Markup content received. Kind is: ${h.kind}`}}function y(h){let L;if(h===void 0||typeof h=="string")L=new ie.MarkdownString(h);else switch(h.kind){case Ee.MarkupKind.Markdown:L=new ie.MarkdownString(h.value);break;case Ee.MarkupKind.PlainText:L=new ie.MarkdownString,L.appendText(h.value);break;default:L=new ie.MarkdownString,L.appendText(`Unsupported Markup content received. Kind is: ${h.kind}`);break}return L.isTrusted=e,L.supportHtml=t,L}function d(h){if(h)return new ie.Hover(R(h.contents),m(h.range))}async function x(h,L,Q){if(!h)return;if(Array.isArray(h))return et.map(h,xr=>M(xr,L),Q);let _e=h,{defaultRange:tn,commitCharacters:dn}=k(_e,L),ut=await et.map(_e.items,xr=>M(xr,dn,tn,_e.itemDefaults?.insertTextMode,_e.itemDefaults?.insertTextFormat,_e.itemDefaults?.data),Q);return new ie.CompletionList(ut,_e.isIncomplete)}function k(h,L){let Q=h.itemDefaults?.editRange,_e=h.itemDefaults?.commitCharacters??L;return Ee.Range.is(Q)?{defaultRange:m(Q),commitCharacters:_e}:Q!==void 0?{defaultRange:{inserting:m(Q.insert),replacing:m(Q.replace)},commitCharacters:_e}:{defaultRange:void 0,commitCharacters:_e}}function S(h){return Ee.CompletionItemKind.Text<=h&&h<=Ee.CompletionItemKind.TypeParameter?[h-1,void 0]:[ie.CompletionItemKind.Text,h]}function T(h){switch(h){case Ee.CompletionItemTag.Deprecated:return ie.CompletionItemTag.Deprecated}}function E(h){if(h==null)return[];let L=[];for(let Q of h){let _e=T(Q);_e!==void 0&&L.push(_e)}return L}function M(h,L,Q,_e,tn,dn){let ut=E(h.tags),xr=V(h),mt=new lD.default(xr);h.detail&&(mt.detail=h.detail),h.documentation&&(mt.documentation=D(h.documentation),mt.documentationFormat=ar.string(h.documentation)?"$string":h.documentation.kind),h.filterText&&(mt.filterText=h.filterText);let Sa=Y(h,Q,tn);if(Sa&&(mt.insertText=Sa.text,mt.range=Sa.range,mt.fromEdit=Sa.fromEdit),ar.number(h.kind)){let[b0,Rm]=S(h.kind);mt.kind=b0,Rm&&(mt.originalItemKind=Rm)}h.sortText&&(mt.sortText=h.sortText),h.additionalTextEdits&&(mt.additionalTextEdits=be(h.additionalTextEdits));let wm=h.commitCharacters!==void 0?ar.stringArray(h.commitCharacters)?h.commitCharacters:void 0:L;wm&&(mt.commitCharacters=wm.slice()),h.command&&(mt.command=ht(h.command)),(h.deprecated===!0||h.deprecated===!1)&&(mt.deprecated=h.deprecated,h.deprecated===!0&&ut.push(ie.CompletionItemTag.Deprecated)),(h.preselect===!0||h.preselect===!1)&&(mt.preselect=h.preselect);let Cm=h.data??dn;Cm!==void 0&&(mt.data=Cm),ut.length>0&&(mt.tags=ut);let wl=h.insertTextMode??_e;return wl!==void 0&&(mt.insertTextMode=wl,wl===Ee.InsertTextMode.asIs&&(mt.keepWhitespace=!0)),mt}function V(h){return Ee.CompletionItemLabelDetails.is(h.labelDetails)?{label:h.label,detail:h.labelDetails.detail,description:h.labelDetails.description}:h.label}function Y(h,L,Q){let _e=h.insertTextFormat??Q;if(h.textEdit!==void 0||L!==void 0){let[tn,dn]=h.textEdit!==void 0?te(h.textEdit):[L,h.textEditText??h.label];return _e===Ee.InsertTextFormat.Snippet?{text:new ie.SnippetString(dn),range:tn,fromEdit:!0}:{text:dn,range:tn,fromEdit:!0}}else return h.insertText?_e===Ee.InsertTextFormat.Snippet?{text:new ie.SnippetString(h.insertText),fromEdit:!1}:{text:h.insertText,fromEdit:!1}:void 0}function te(h){return Ee.InsertReplaceEdit.is(h)?[{inserting:m(h.insert),replacing:m(h.replace)},h.newText]:[m(h.range),h.newText]}function se(h){if(h)return new ie.TextEdit(m(h.range),h.newText)}async function le(h,L){if(h)return et.map(h,se,L)}function be(h){if(!h)return;let L=new Array(h.length);for(let Q=0;Q<h.length;Q++)L[Q]=se(h[Q]);return L}async function we(h,L){if(!h)return;let Q=new ie.SignatureHelp;return ar.number(h.activeSignature)?Q.activeSignature=h.activeSignature:Q.activeSignature=0,ar.number(h.activeParameter)?Q.activeParameter=h.activeParameter:Q.activeParameter=0,h.signatures&&(Q.signatures=await Le(h.signatures,L)),Q}async function Le(h,L){return et.mapAsync(h,ue,L)}async function ue(h,L){let Q=new ie.SignatureInformation(h.label);return h.documentation!==void 0&&(Q.documentation=D(h.documentation)),h.parameters!==void 0&&(Q.parameters=await Pe(h.parameters,L)),h.activeParameter!==void 0&&(Q.activeParameter=h.activeParameter),Q}function Pe(h,L){return et.map(h,ve,L)}function ve(h){let L=new ie.ParameterInformation(h.label);return h.documentation&&(L.documentation=D(h.documentation)),L}function he(h){return h?new ie.Location(i(h.uri),m(h.range)):void 0}async function Ae(h,L){if(h)return He(h,L)}async function at(h,L){if(h)return He(h,L)}function Z(h){if(!h)return;let L={targetUri:i(h.targetUri),targetRange:m(h.targetRange),originSelectionRange:m(h.originSelectionRange),targetSelectionRange:m(h.targetSelectionRange)};if(!L.targetSelectionRange)throw new Error("targetSelectionRange must not be undefined or null");return L}async function He(h,L){if(h)if(ar.array(h)){if(h.length===0)return[];if(Ee.LocationLink.is(h[0])){let Q=h;return et.map(Q,Z,L)}else{let Q=h;return et.map(Q,he,L)}}else return Ee.LocationLink.is(h)?[Z(h)]:he(h)}async function Oe(h,L){if(h)return et.map(h,he,L)}async function ft(h,L){if(h)return et.map(h,Ut,L)}function Ut(h){let L=new ie.DocumentHighlight(m(h.range));return ar.number(h.kind)&&(L.kind=ct(h.kind)),L}function ct(h){switch(h){case Ee.DocumentHighlightKind.Text:return ie.DocumentHighlightKind.Text;case Ee.DocumentHighlightKind.Read:return ie.DocumentHighlightKind.Read;case Ee.DocumentHighlightKind.Write:return ie.DocumentHighlightKind.Write}return ie.DocumentHighlightKind.Text}async function Yt(h,L){if(h)return et.map(h,Ht,L)}function Ue(h){return h<=Ee.SymbolKind.TypeParameter?h-1:ie.SymbolKind.Property}function gn(h){switch(h){case Ee.SymbolTag.Deprecated:return ie.SymbolTag.Deprecated;default:return}}function Qt(h){if(h==null)return;let L=[];for(let Q of h){let _e=gn(Q);_e!==void 0&&L.push(_e)}return L.length===0?void 0:L}function Ht(h){let L=h.data,Q=h.location,_e=Q.range===void 0||L!==void 0?new mD.default(h.name,Ue(h.kind),h.containerName??"",Q.range===void 0?i(Q.uri):new ie.Location(i(h.location.uri),m(Q.range)),L):new ie.SymbolInformation(h.name,Ue(h.kind),h.containerName??"",new ie.Location(i(h.location.uri),m(Q.range)));return Tt(_e,h),_e}async function un(h,L){if(h!=null)return et.map(h,Bt,L)}function Bt(h){let L=new ie.DocumentSymbol(h.name,h.detail||"",Ue(h.kind),m(h.range),m(h.selectionRange));if(Tt(L,h),h.children!==void 0&&h.children.length>0){let Q=[];for(let _e of h.children)Q.push(Bt(_e));L.children=Q}return L}function Tt(h,L){h.tags=Qt(L.tags),L.deprecated&&(h.tags?h.tags.includes(ie.SymbolTag.Deprecated)||(h.tags=h.tags.concat(ie.SymbolTag.Deprecated)):h.tags=[ie.SymbolTag.Deprecated])}function ht(h){let L={title:h.title,command:h.command};return h.arguments&&(L.arguments=h.arguments),L}async function Et(h,L){if(h)return et.map(h,ht,L)}let Nt=new Map;Nt.set(Ee.CodeActionKind.Empty,ie.CodeActionKind.Empty),Nt.set(Ee.CodeActionKind.QuickFix,ie.CodeActionKind.QuickFix),Nt.set(Ee.CodeActionKind.Refactor,ie.CodeActionKind.Refactor),Nt.set(Ee.CodeActionKind.RefactorExtract,ie.CodeActionKind.RefactorExtract),Nt.set(Ee.CodeActionKind.RefactorInline,ie.CodeActionKind.RefactorInline),Nt.set(Ee.CodeActionKind.RefactorRewrite,ie.CodeActionKind.RefactorRewrite),Nt.set(Ee.CodeActionKind.Source,ie.CodeActionKind.Source),Nt.set(Ee.CodeActionKind.SourceOrganizeImports,ie.CodeActionKind.SourceOrganizeImports);function Vt(h){if(h==null)return;let L=Nt.get(h);if(L)return L;let Q=h.split(".");L=ie.CodeActionKind.Empty;for(let _e of Q)L=L.append(_e);return L}function Zt(h){if(h!=null)return h.map(L=>Vt(L))}async function mn(h,L){if(h==null)return;let Q=new hD.default(h.title,h.data);return h.kind!==void 0&&(Q.kind=Vt(h.kind)),h.diagnostics!==void 0&&(Q.diagnostics=c(h.diagnostics)),h.edit!==void 0&&(Q.edit=await ln(h.edit,L)),h.command!==void 0&&(Q.command=ht(h.command)),h.isPreferred!==void 0&&(Q.isPreferred=h.isPreferred),h.disabled!==void 0&&(Q.disabled={reason:h.disabled.reason}),Q}function zn(h,L){return et.mapAsync(h,async Q=>Ee.Command.is(Q)?ht(Q):mn(Q,L),L)}function en(h){if(!h)return;let L=new dD.default(m(h.range));return h.command&&(L.command=ht(h.command)),h.data!==void 0&&h.data!==null&&(L.data=h.data),L}async function An(h,L){if(h)return et.map(h,en,L)}async function ln(h,L){if(!h)return;let Q=new Map;if(h.changeAnnotations!==void 0){let dn=h.changeAnnotations;await et.forEach(Object.keys(dn),ut=>{let xr=$(dn[ut]);Q.set(ut,xr)},L)}let _e=dn=>{if(dn!==void 0)return Q.get(dn)},tn=new ie.WorkspaceEdit;if(h.documentChanges){let dn=h.documentChanges;await et.forEach(dn,ut=>{if(Ee.CreateFile.is(ut))tn.createFile(i(ut.uri),ut.options,_e(ut.annotationId));else if(Ee.RenameFile.is(ut))tn.renameFile(i(ut.oldUri),i(ut.newUri),ut.options,_e(ut.annotationId));else if(Ee.DeleteFile.is(ut))tn.deleteFile(i(ut.uri),ut.options,_e(ut.annotationId));else if(Ee.TextDocumentEdit.is(ut)){let xr=i(ut.textDocument.uri);for(let mt of ut.edits)Ee.AnnotatedTextEdit.is(mt)?tn.replace(xr,m(mt.range),mt.newText,_e(mt.annotationId)):tn.replace(xr,m(mt.range),mt.newText)}else throw new Error(`Unknown workspace edit change received:
${JSON.stringify(ut,void 0,4)}`)},L)}else if(h.changes){let dn=h.changes;await et.forEach(Object.keys(dn),ut=>{tn.set(i(ut),be(dn[ut]))},L)}return tn}function $(h){if(h!==void 0)return{label:h.label,needsConfirmation:!!h.needsConfirmation,description:h.description}}function G(h){let L=m(h.range),Q=h.target?s(h.target):void 0,_e=new fD.default(L,Q);return h.tooltip!==void 0&&(_e.tooltip=h.tooltip),h.data!==void 0&&h.data!==null&&(_e.data=h.data),_e}async function re(h,L){if(h)return et.map(h,G,L)}function oe(h){return new ie.Color(h.red,h.green,h.blue,h.alpha)}function Be(h){return new ie.ColorInformation(m(h.range),oe(h.color))}async function ze(h,L){if(h)return et.map(h,Be,L)}function $e(h){let L=new ie.ColorPresentation(h.label);return L.additionalTextEdits=be(h.additionalTextEdits),h.textEdit&&(L.textEdit=se(h.textEdit)),L}async function nt(h,L){if(h)return et.map(h,$e,L)}function xe(h){if(h)switch(h){case Ee.FoldingRangeKind.Comment:return ie.FoldingRangeKind.Comment;case Ee.FoldingRangeKind.Imports:return ie.FoldingRangeKind.Imports;case Ee.FoldingRangeKind.Region:return ie.FoldingRangeKind.Region}}function Ye(h){return new ie.FoldingRange(h.startLine,h.endLine,xe(h.kind))}async function q(h,L){if(h)return et.map(h,Ye,L)}function U(h){return new ie.SelectionRange(m(h.range),h.parent?U(h.parent):void 0)}async function X(h,L){return Array.isArray(h)?et.map(h,U,L):[]}function H(h){return Ee.InlineValueText.is(h)?new ie.InlineValueText(m(h.range),h.text):Ee.InlineValueVariableLookup.is(h)?new ie.InlineValueVariableLookup(m(h.range),h.variableName,h.caseSensitiveLookup):new ie.InlineValueEvaluatableExpression(m(h.range),h.expression)}async function J(h,L){return Array.isArray(h)?et.map(h,H,L):[]}async function ce(h,L){let Q=typeof h.label=="string"?h.label:await et.map(h.label,v,L),_e=new _D.default(_(h.position),Q);return h.kind!==void 0&&(_e.kind=h.kind),h.textEdits!==void 0&&(_e.textEdits=await le(h.textEdits,L)),h.tooltip!==void 0&&(_e.tooltip=F(h.tooltip)),h.paddingLeft!==void 0&&(_e.paddingLeft=h.paddingLeft),h.paddingRight!==void 0&&(_e.paddingRight=h.paddingRight),h.data!==void 0&&(_e.data=h.data),_e}function v(h){let L=new ie.InlayHintLabelPart(h.value);return h.location!==void 0&&(L.location=he(h.location)),h.tooltip!==void 0&&(L.tooltip=F(h.tooltip)),h.command!==void 0&&(L.command=ht(h.command)),L}function F(h){return typeof h=="string"?h:y(h)}async function K(h,L){if(Array.isArray(h))return et.mapAsync(h,ce,L)}function ae(h){if(h===null)return;let L=new pD.default(Ue(h.kind),h.name,h.detail||"",s(h.uri),m(h.range),m(h.selectionRange),h.data);return h.tags!==void 0&&(L.tags=Qt(h.tags)),L}async function N(h,L){if(h!==null)return et.map(h,ae,L)}async function C(h,L){return new ie.CallHierarchyIncomingCall(ae(h.from),await p(h.fromRanges,L))}async function A(h,L){if(h!==null)return et.mapAsync(h,C,L)}async function O(h,L){return new ie.CallHierarchyOutgoingCall(ae(h.to),await p(h.fromRanges,L))}async function P(h,L){if(h!==null)return et.mapAsync(h,O,L)}async function w(h,L){if(h!=null)return new ie.SemanticTokens(new Uint32Array(h.data),h.resultId)}function j(h){return new ie.SemanticTokensEdit(h.start,h.deleteCount,h.data!==void 0?new Uint32Array(h.data):void 0)}async function W(h,L){if(h!=null)return new ie.SemanticTokensEdits(h.edits.map(j),h.resultId)}function pe(h){return h}async function Dt(h,L){if(h!=null)return new ie.LinkedEditingRanges(await p(h.ranges,L),pt(h.wordPattern))}function pt(h){if(h!=null)return new RegExp(h)}function On(h){if(h===null)return;let L=new gD.default(Ue(h.kind),h.name,h.detail||"",s(h.uri),m(h.range),m(h.selectionRange),h.data);return h.tags!==void 0&&(L.tags=Qt(h.tags)),L}async function Gn(h,L){if(h!==null)return et.map(h,On,L)}function pr(h){if(ar.string(h))return h;if(Ee.RelativePattern.is(h)){if(Ee.URI.is(h.baseUri))return new ie.RelativePattern(s(h.baseUri),h.pattern);if(Ee.WorkspaceFolder.is(h.baseUri)){let L=ie.workspace.getWorkspaceFolder(s(h.baseUri.uri));return L!==void 0?new ie.RelativePattern(L,h.pattern):void 0}}}async function Ge(h,L){if(!h)return;if(Array.isArray(h))return et.map(h,tn=>Dr(tn),L);let Q=h,_e=await et.map(Q.items,tn=>Dr(tn),L);return new ie.InlineCompletionList(_e)}function Dr(h){let L;typeof h.insertText=="string"?L=h.insertText:L=new ie.SnippetString(h.insertText.value);let Q;h.command&&(Q=ht(h.command));let _e=new ie.InlineCompletionItem(L,m(h.range),Q);return h.filterText&&(_e.filterText=h.filterText),_e}return{asUri:s,asDocumentSelector:a,asDiagnostics:o,asDiagnostic:u,asRange:m,asRanges:p,asPosition:_,asDiagnosticSeverity:g,asDiagnosticTag:f,asHover:d,asCompletionResult:x,asCompletionItem:M,asTextEdit:se,asTextEdits:le,asSignatureHelp:we,asSignatureInformations:Le,asSignatureInformation:ue,asParameterInformations:Pe,asParameterInformation:ve,asDeclarationResult:Ae,asDefinitionResult:at,asLocation:he,asReferences:Oe,asDocumentHighlights:ft,asDocumentHighlight:Ut,asDocumentHighlightKind:ct,asSymbolKind:Ue,asSymbolTag:gn,asSymbolTags:Qt,asSymbolInformations:Yt,asSymbolInformation:Ht,asDocumentSymbols:un,asDocumentSymbol:Bt,asCommand:ht,asCommands:Et,asCodeAction:mn,asCodeActionKind:Vt,asCodeActionKinds:Zt,asCodeActionResult:zn,asCodeLens:en,asCodeLenses:An,asWorkspaceEdit:ln,asDocumentLink:G,asDocumentLinks:re,asFoldingRangeKind:xe,asFoldingRange:Ye,asFoldingRanges:q,asColor:oe,asColorInformation:Be,asColorInformations:ze,asColorPresentation:$e,asColorPresentations:nt,asSelectionRange:U,asSelectionRanges:X,asInlineValue:H,asInlineValues:J,asInlayHint:ce,asInlayHints:K,asSemanticTokensLegend:pe,asSemanticTokens:w,asSemanticTokensEdit:j,asSemanticTokensEdits:W,asCallHierarchyItem:ae,asCallHierarchyItems:N,asCallHierarchyIncomingCall:C,asCallHierarchyIncomingCalls:A,asCallHierarchyOutgoingCall:O,asCallHierarchyOutgoingCalls:P,asLinkedEditingRanges:Dt,asTypeHierarchyItem:On,asTypeHierarchyItems:Gn,asGlobPattern:pr,asInlineCompletionResult:Ge,asInlineCompletionItem:Dr}}Ec.createConverter=bD});var kt=B(cr=>{"use strict";Object.defineProperty(cr,"__esModule",{value:!0});cr.generateUuid=cr.parse=cr.isUUID=cr.v4=cr.empty=void 0;var Io=class{constructor(e){this._value=e}asHex(){return this._value}equals(e){return this.asHex()===e.asHex()}},Ao=class r extends Io{static _oneOf(e){return e[Math.floor(e.length*Math.random())]}static _randomHex(){return r._oneOf(r._chars)}constructor(){super([r._randomHex(),r._randomHex(),r._randomHex(),r._randomHex(),r._randomHex(),r._randomHex(),r._randomHex(),r._randomHex(),"-",r._randomHex(),r._randomHex(),r._randomHex(),r._randomHex(),"-","4",r._randomHex(),r._randomHex(),r._randomHex(),"-",r._oneOf(r._timeHighBits),r._randomHex(),r._randomHex(),r._randomHex(),"-",r._randomHex(),r._randomHex(),r._randomHex(),r._randomHex(),r._randomHex(),r._randomHex(),r._randomHex(),r._randomHex(),r._randomHex(),r._randomHex(),r._randomHex(),r._randomHex()].join(""))}};Ao._chars=["0","1","2","3","4","5","6","6","7","8","9","a","b","c","d","e","f"];Ao._timeHighBits=["8","9","a","b"];cr.empty=new Io("00000000-0000-0000-0000-000000000000");function Ty(){return new Ao}cr.v4=Ty;var vD=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;function Ey(r){return vD.test(r)}cr.isUUID=Ey;function yD(r){if(!Ey(r))throw new Error("invalid uuid");return new Io(r)}cr.parse=yD;function wD(){return Ty().asHex()}cr.generateUuid=wD});var qf=B(Ic=>{"use strict";Object.defineProperty(Ic,"__esModule",{value:!0});Ic.ProgressPart=void 0;var Iy=require("vscode"),Ay=Ne(),Oy=ir(),Nf=class{constructor(e,t,n){this._client=e,this._token=t,this._reported=0,this._infinite=!1,this._lspProgressDisposable=this._client.onProgress(Ay.WorkDoneProgress.type,this._token,i=>{switch(i.kind){case"begin":this.begin(i);break;case"report":this.report(i);break;case"end":this.done(),n&&n(this);break}})}begin(e){this._infinite=e.percentage===void 0,this._lspProgressDisposable!==void 0&&Iy.window.withProgress({location:Iy.ProgressLocation.Window,cancellable:e.cancellable,title:e.title},async(t,n)=>{if(this._lspProgressDisposable!==void 0)return this._progress=t,this._cancellationToken=n,this._tokenDisposable=this._cancellationToken.onCancellationRequested(()=>{this._client.sendNotification(Ay.WorkDoneProgressCancelNotification.type,{token:this._token})}),this.report(e),new Promise((i,s)=>{this._resolve=i,this._reject=s})})}report(e){if(this._infinite&&Oy.string(e.message))this._progress!==void 0&&this._progress.report({message:e.message});else if(Oy.number(e.percentage)){let t=Math.max(0,Math.min(e.percentage,100)),n=Math.max(0,t-this._reported);this._reported+=n,this._progress!==void 0&&this._progress.report({message:e.message,increment:n})}}cancel(){this.cleanup(),this._reject!==void 0&&(this._reject(),this._resolve=void 0,this._reject=void 0)}done(){this.cleanup(),this._resolve!==void 0&&(this._resolve(),this._resolve=void 0,this._reject=void 0)}cleanup(){this._lspProgressDisposable!==void 0&&(this._lspProgressDisposable.dispose(),this._lspProgressDisposable=void 0),this._tokenDisposable!==void 0&&(this._tokenDisposable.dispose(),this._tokenDisposable=void 0),this._progress=void 0,this._cancellationToken=void 0}};Ic.ProgressPart=Nf});var Ze=B(sn=>{"use strict";Object.defineProperty(sn,"__esModule",{value:!0});sn.WorkspaceFeature=sn.TextDocumentLanguageFeature=sn.TextDocumentEventFeature=sn.DynamicDocumentFeature=sn.DynamicFeature=sn.StaticFeature=sn.ensure=sn.LSPCancellationError=void 0;var $i=require("vscode"),Lf=Ne(),Pn=ir(),$y=kt(),Mf=class extends $i.CancellationError{constructor(e){super(),this.data=e}};sn.LSPCancellationError=Mf;function CD(r,e){return r[e]===void 0&&(r[e]={}),r[e]}sn.ensure=CD;var Ny;(function(r){function e(t){let n=t;return n!=null&&Pn.func(n.fillClientCapabilities)&&Pn.func(n.initialize)&&Pn.func(n.getState)&&Pn.func(n.clear)&&(n.fillInitializeParams===void 0||Pn.func(n.fillInitializeParams))}r.is=e})(Ny||(sn.StaticFeature=Ny={}));var qy;(function(r){function e(t){let n=t;return n!=null&&Pn.func(n.fillClientCapabilities)&&Pn.func(n.initialize)&&Pn.func(n.getState)&&Pn.func(n.clear)&&(n.fillInitializeParams===void 0||Pn.func(n.fillInitializeParams))&&Pn.func(n.register)&&Pn.func(n.unregister)&&n.registrationType!==void 0}r.is=e})(qy||(sn.DynamicFeature=qy={}));var Oo=class{constructor(e){this._client=e}getState(){let e=this.getDocumentSelectors(),t=0;for(let i of e){t++;for(let s of $i.workspace.textDocuments)if($i.languages.match(i,s)>0)return{kind:"document",id:this.registrationType.method,registrations:!0,matches:!0}}let n=t>0;return{kind:"document",id:this.registrationType.method,registrations:n,matches:!1}}};sn.DynamicDocumentFeature=Oo;var Ff=class extends Oo{static textDocumentFilter(e,t){for(let n of e)if($i.languages.match(n,t)>0)return!0;return!1}constructor(e,t,n,i,s,a,o){super(e),this._event=t,this._type=n,this._middleware=i,this._createParams=s,this._textDocument=a,this._selectorFilter=o,this._selectors=new Map,this._onNotificationSent=new $i.EventEmitter}getStateInfo(){return[this._selectors.values(),!1]}getDocumentSelectors(){return this._selectors.values()}register(e){e.registerOptions.documentSelector&&(this._listener||(this._listener=this._event(t=>{this.callback(t).catch(n=>{this._client.error(`Sending document notification ${this._type.method} failed.`,n)})})),this._selectors.set(e.id,this._client.protocol2CodeConverter.asDocumentSelector(e.registerOptions.documentSelector)))}async callback(e){let t=async n=>{let i=this._createParams(n);await this._client.sendNotification(this._type,i),this.notificationSent(this.getTextDocument(n),this._type,i)};if(this.matches(e)){let n=this._middleware();return n?n(e,i=>t(i)):t(e)}}matches(e){return this._client.hasDedicatedTextSynchronizationFeature(this._textDocument(e))?!1:!this._selectorFilter||this._selectorFilter(this._selectors.values(),e)}get onNotificationSent(){return this._onNotificationSent.event}notificationSent(e,t,n){this._onNotificationSent.fire({textDocument:e,type:t,params:n})}unregister(e){this._selectors.delete(e),this._selectors.size===0&&this._listener&&(this._listener.dispose(),this._listener=void 0)}clear(){this._selectors.clear(),this._onNotificationSent.dispose(),this._listener&&(this._listener.dispose(),this._listener=void 0)}getProvider(e){for(let t of this._selectors.values())if($i.languages.match(t,e)>0)return{send:n=>this.callback(n)}}};sn.TextDocumentEventFeature=Ff;var jf=class extends Oo{constructor(e,t){super(e),this._registrationType=t,this._registrations=new Map}*getDocumentSelectors(){for(let e of this._registrations.values()){let t=e.data.registerOptions.documentSelector;t!==null&&(yield this._client.protocol2CodeConverter.asDocumentSelector(t))}}get registrationType(){return this._registrationType}register(e){if(!e.registerOptions.documentSelector)return;let t=this.registerLanguageProvider(e.registerOptions,e.id);this._registrations.set(e.id,{disposable:t[0],data:e,provider:t[1]})}unregister(e){let t=this._registrations.get(e);t!==void 0&&t.disposable.dispose()}clear(){this._registrations.forEach(e=>{e.disposable.dispose()}),this._registrations.clear()}getRegistration(e,t){if(t){if(Lf.TextDocumentRegistrationOptions.is(t)){let n=Lf.StaticRegistrationOptions.hasId(t)?t.id:$y.generateUuid(),i=t.documentSelector??e;if(i)return[n,Object.assign({},t,{documentSelector:i})]}else if(Pn.boolean(t)&&t===!0||Lf.WorkDoneProgressOptions.is(t)){if(!e)return[void 0,void 0];let n=Pn.boolean(t)&&t===!0?{documentSelector:e}:Object.assign({},t,{documentSelector:e});return[$y.generateUuid(),n]}}else return[void 0,void 0];return[void 0,void 0]}getRegistrationOptions(e,t){if(!(!e||!t))return Pn.boolean(t)&&t===!0?{documentSelector:e}:Object.assign({},t,{documentSelector:e})}getProvider(e){for(let t of this._registrations.values()){let n=t.data.registerOptions.documentSelector;if(n!==null&&$i.languages.match(this._client.protocol2CodeConverter.asDocumentSelector(n),e)>0)return t.provider}}getAllProviders(){let e=[];for(let t of this._registrations.values())e.push(t.provider);return e}};sn.TextDocumentLanguageFeature=jf;var Uf=class{constructor(e,t){this._client=e,this._registrationType=t,this._registrations=new Map}getState(){let e=this._registrations.size>0;return{kind:"workspace",id:this._registrationType.method,registrations:e}}get registrationType(){return this._registrationType}register(e){let t=this.registerLanguageProvider(e.registerOptions);this._registrations.set(e.id,{disposable:t[0],provider:t[1]})}unregister(e){let t=this._registrations.get(e);t!==void 0&&t.disposable.dispose()}clear(){this._registrations.forEach(e=>{e.disposable.dispose()}),this._registrations.clear()}getProviders(){let e=[];for(let t of this._registrations.values())e.push(t.provider);return e}};sn.WorkspaceFeature=Uf});var My=B((e1,Ly)=>{var RD=typeof process=="object"&&process&&process.platform==="win32";Ly.exports=RD?{sep:"\\"}:{sep:"/"}});var Vy=B((t1,By)=>{"use strict";By.exports=jy;function jy(r,e,t){r instanceof RegExp&&(r=Fy(r,t)),e instanceof RegExp&&(e=Fy(e,t));var n=Uy(r,e,t);return n&&{start:n[0],end:n[1],pre:t.slice(0,n[0]),body:t.slice(n[0]+r.length,n[1]),post:t.slice(n[1]+e.length)}}function Fy(r,e){var t=e.match(r);return t?t[0]:null}jy.range=Uy;function Uy(r,e,t){var n,i,s,a,o,c=t.indexOf(r),u=t.indexOf(e,c+1),l=c;if(c>=0&&u>0){for(n=[],s=t.length;l>=0&&!o;)l==c?(n.push(l),c=t.indexOf(r,l+1)):n.length==1?o=[n.pop(),u]:(i=n.pop(),i<s&&(s=i,a=u),u=t.indexOf(e,l+1)),l=c<u&&c>=0?c:u;n.length&&(o=[s,a])}return o}});var Qy=B((n1,Yy)=>{var zy=Vy();Yy.exports=xD;var Gy="\0SLASH"+Math.random()+"\0",Hy="\0OPEN"+Math.random()+"\0",Vf="\0CLOSE"+Math.random()+"\0",Wy="\0COMMA"+Math.random()+"\0",Ky="\0PERIOD"+Math.random()+"\0";function Bf(r){return parseInt(r,10)==r?parseInt(r,10):r.charCodeAt(0)}function SD(r){return r.split("\\\\").join(Gy).split("\\{").join(Hy).split("\\}").join(Vf).split("\\,").join(Wy).split("\\.").join(Ky)}function DD(r){return r.split(Gy).join("\\").split(Hy).join("{").split(Vf).join("}").split(Wy).join(",").split(Ky).join(".")}function Xy(r){if(!r)return[""];var e=[],t=zy("{","}",r);if(!t)return r.split(",");var n=t.pre,i=t.body,s=t.post,a=n.split(",");a[a.length-1]+="{"+i+"}";var o=Xy(s);return s.length&&(a[a.length-1]+=o.shift(),a.push.apply(a,o)),e.push.apply(e,a),e}function xD(r){return r?(r.substr(0,2)==="{}"&&(r="\\{\\}"+r.substr(2)),$o(SD(r),!0).map(DD)):[]}function kD(r){return"{"+r+"}"}function PD(r){return/^-?0\d/.test(r)}function TD(r,e){return r<=e}function ED(r,e){return r>=e}function $o(r,e){var t=[],n=zy("{","}",r);if(!n)return[r];var i=n.pre,s=n.post.length?$o(n.post,!1):[""];if(/\$$/.test(n.pre))for(var a=0;a<s.length;a++){var o=i+"{"+n.body+"}"+s[a];t.push(o)}else{var c=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(n.body),u=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(n.body),l=c||u,b=n.body.indexOf(",")>=0;if(!l&&!b)return n.post.match(/,.*\}/)?(r=n.pre+"{"+n.body+Vf+n.post,$o(r)):[r];var f;if(l)f=n.body.split(/\.\./);else if(f=Xy(n.body),f.length===1&&(f=$o(f[0],!1).map(kD),f.length===1))return s.map(function(M){return n.pre+f[0]+M});var _;if(l){var m=Bf(f[0]),p=Bf(f[1]),g=Math.max(f[0].length,f[1].length),R=f.length==3?Math.abs(Bf(f[2])):1,D=TD,y=p<m;y&&(R*=-1,D=ED);var d=f.some(PD);_=[];for(var x=m;D(x,p);x+=R){var k;if(u)k=String.fromCharCode(x),k==="\\"&&(k="");else if(k=String(x),d){var S=g-k.length;if(S>0){var T=new Array(S+1).join("0");x<0?k="-"+T+k.slice(1):k=T+k}}_.push(k)}}else{_=[];for(var E=0;E<f.length;E++)_.push.apply(_,$o(f[E],!1))}for(var E=0;E<_.length;E++)for(var a=0;a<s.length;a++){var o=i+_[E]+s[a];(!e||l||o)&&t.push(o)}}return t}});var Oc=B((i1,Kf)=>{var Xn=Kf.exports=(r,e,t={})=>(Ac(e),!t.nocomment&&e.charAt(0)==="#"?!1:new Ps(e,t).match(r));Kf.exports=Xn;var Hf=My();Xn.sep=Hf.sep;var br=Symbol("globstar **");Xn.GLOBSTAR=br;var ID=Qy(),Zy={"!":{open:"(?:(?!(?:",close:"))[^/]*?)"},"?":{open:"(?:",close:")?"},"+":{open:"(?:",close:")+"},"*":{open:"(?:",close:")*"},"@":{open:"(?:",close:")"}},Wf="[^/]",zf=Wf+"*?",AD="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",OD="(?:(?!(?:\\/|^)\\.).)*?",tw=r=>r.split("").reduce((e,t)=>(e[t]=!0,e),{}),Jy=tw("().*{}+?[]^$\\!"),$D=tw("[.("),ew=/\/+/;Xn.filter=(r,e={})=>(t,n,i)=>Xn(t,r,e);var di=(r,e={})=>{let t={};return Object.keys(r).forEach(n=>t[n]=r[n]),Object.keys(e).forEach(n=>t[n]=e[n]),t};Xn.defaults=r=>{if(!r||typeof r!="object"||!Object.keys(r).length)return Xn;let e=Xn,t=(n,i,s)=>e(n,i,di(r,s));return t.Minimatch=class extends e.Minimatch{constructor(i,s){super(i,di(r,s))}},t.Minimatch.defaults=n=>e.defaults(di(r,n)).Minimatch,t.filter=(n,i)=>e.filter(n,di(r,i)),t.defaults=n=>e.defaults(di(r,n)),t.makeRe=(n,i)=>e.makeRe(n,di(r,i)),t.braceExpand=(n,i)=>e.braceExpand(n,di(r,i)),t.match=(n,i,s)=>e.match(n,i,di(r,s)),t};Xn.braceExpand=(r,e)=>nw(r,e);var nw=(r,e={})=>(Ac(r),e.nobrace||!/\{(?:(?!\{).)*\}/.test(r)?[r]:ID(r)),ND=1024*64,Ac=r=>{if(typeof r!="string")throw new TypeError("invalid pattern");if(r.length>ND)throw new TypeError("pattern is too long")},Gf=Symbol("subparse");Xn.makeRe=(r,e)=>new Ps(r,e||{}).makeRe();Xn.match=(r,e,t={})=>{let n=new Ps(e,t);return r=r.filter(i=>n.match(i)),n.options.nonull&&!r.length&&r.push(e),r};var qD=r=>r.replace(/\\(.)/g,"$1"),LD=r=>r.replace(/\\([^-\]])/g,"$1"),MD=r=>r.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),FD=r=>r.replace(/[[\]\\]/g,"\\$&"),Ps=class{constructor(e,t){Ac(e),t||(t={}),this.options=t,this.set=[],this.pattern=e,this.windowsPathsNoEscape=!!t.windowsPathsNoEscape||t.allowWindowsEscape===!1,this.windowsPathsNoEscape&&(this.pattern=this.pattern.replace(/\\/g,"/")),this.regexp=null,this.negate=!1,this.comment=!1,this.empty=!1,this.partial=!!t.partial,this.make()}debug(){}make(){let e=this.pattern,t=this.options;if(!t.nocomment&&e.charAt(0)==="#"){this.comment=!0;return}if(!e){this.empty=!0;return}this.parseNegate();let n=this.globSet=this.braceExpand();t.debug&&(this.debug=(...i)=>console.error(...i)),this.debug(this.pattern,n),n=this.globParts=n.map(i=>i.split(ew)),this.debug(this.pattern,n),n=n.map((i,s,a)=>i.map(this.parse,this)),this.debug(this.pattern,n),n=n.filter(i=>i.indexOf(!1)===-1),this.debug(this.pattern,n),this.set=n}parseNegate(){if(this.options.nonegate)return;let e=this.pattern,t=!1,n=0;for(let i=0;i<e.length&&e.charAt(i)==="!";i++)t=!t,n++;n&&(this.pattern=e.slice(n)),this.negate=t}matchOne(e,t,n){var i=this.options;this.debug("matchOne",{this:this,file:e,pattern:t}),this.debug("matchOne",e.length,t.length);for(var s=0,a=0,o=e.length,c=t.length;s<o&&a<c;s++,a++){this.debug("matchOne loop");var u=t[a],l=e[s];if(this.debug(t,u,l),u===!1)return!1;if(u===br){this.debug("GLOBSTAR",[t,u,l]);var b=s,f=a+1;if(f===c){for(this.debug("** at the end");s<o;s++)if(e[s]==="."||e[s]===".."||!i.dot&&e[s].charAt(0)===".")return!1;return!0}for(;b<o;){var _=e[b];if(this.debug(`
globstar while`,e,b,t,f,_),this.matchOne(e.slice(b),t.slice(f),n))return this.debug("globstar found match!",b,o,_),!0;if(_==="."||_===".."||!i.dot&&_.charAt(0)==="."){this.debug("dot detected!",e,b,t,f);break}this.debug("globstar swallow a segment, and continue"),b++}return!!(n&&(this.debug(`
>>> no match, partial?`,e,b,t,f),b===o))}var m;if(typeof u=="string"?(m=l===u,this.debug("string match",u,l,m)):(m=l.match(u),this.debug("pattern match",u,l,m)),!m)return!1}if(s===o&&a===c)return!0;if(s===o)return n;if(a===c)return s===o-1&&e[s]==="";throw new Error("wtf?")}braceExpand(){return nw(this.pattern,this.options)}parse(e,t){Ac(e);let n=this.options;if(e==="**")if(n.noglobstar)e="*";else return br;if(e==="")return"";let i="",s=!1,a=!1,o=[],c=[],u,l=!1,b=-1,f=-1,_,m,p,g=e.charAt(0)===".",R=n.dot||g,D=()=>g?"":R?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)",y=S=>S.charAt(0)==="."?"":n.dot?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)",d=()=>{if(u){switch(u){case"*":i+=zf,s=!0;break;case"?":i+=Wf,s=!0;break;default:i+="\\"+u;break}this.debug("clearStateChar %j %j",u,i),u=!1}};for(let S=0,T;S<e.length&&(T=e.charAt(S));S++){if(this.debug("%s	%s %s %j",e,S,i,T),a){if(T==="/")return!1;Jy[T]&&(i+="\\"),i+=T,a=!1;continue}switch(T){case"/":return!1;case"\\":if(l&&e.charAt(S+1)==="-"){i+=T;continue}d(),a=!0;continue;case"?":case"*":case"+":case"@":case"!":if(this.debug("%s	%s %s %j <-- stateChar",e,S,i,T),l){this.debug("  in class"),T==="!"&&S===f+1&&(T="^"),i+=T;continue}this.debug("call clearStateChar %j",u),d(),u=T,n.noext&&d();continue;case"(":{if(l){i+="(";continue}if(!u){i+="\\(";continue}let E={type:u,start:S-1,reStart:i.length,open:Zy[u].open,close:Zy[u].close};this.debug(this.pattern,"	",E),o.push(E),i+=E.open,E.start===0&&E.type!=="!"&&(g=!0,i+=y(e.slice(S+1))),this.debug("plType %j %j",u,i),u=!1;continue}case")":{let E=o[o.length-1];if(l||!E){i+="\\)";continue}o.pop(),d(),s=!0,m=E,i+=m.close,m.type==="!"&&c.push(Object.assign(m,{reEnd:i.length}));continue}case"|":{let E=o[o.length-1];if(l||!E){i+="\\|";continue}d(),i+="|",E.start===0&&E.type!=="!"&&(g=!0,i+=y(e.slice(S+1)));continue}case"[":if(d(),l){i+="\\"+T;continue}l=!0,f=S,b=i.length,i+=T;continue;case"]":if(S===f+1||!l){i+="\\"+T;continue}_=e.substring(f+1,S);try{RegExp("["+FD(LD(_))+"]"),i+=T}catch{i=i.substring(0,b)+"(?:$.)"}s=!0,l=!1;continue;default:d(),Jy[T]&&!(T==="^"&&l)&&(i+="\\"),i+=T;break}}for(l&&(_=e.slice(f+1),p=this.parse(_,Gf),i=i.substring(0,b)+"\\["+p[0],s=s||p[1]),m=o.pop();m;m=o.pop()){let S;S=i.slice(m.reStart+m.open.length),this.debug("setting tail",i,m),S=S.replace(/((?:\\{2}){0,64})(\\?)\|/g,(E,M,V)=>(V||(V="\\"),M+M+V+"|")),this.debug(`tail=%j
   %s`,S,S,m,i);let T=m.type==="*"?zf:m.type==="?"?Wf:"\\"+m.type;s=!0,i=i.slice(0,m.reStart)+T+"\\("+S}d(),a&&(i+="\\\\");let x=$D[i.charAt(0)];for(let S=c.length-1;S>-1;S--){let T=c[S],E=i.slice(0,T.reStart),M=i.slice(T.reStart,T.reEnd-8),V=i.slice(T.reEnd),Y=i.slice(T.reEnd-8,T.reEnd)+V,te=E.split(")").length,se=E.split("(").length-te,le=V;for(let we=0;we<se;we++)le=le.replace(/\)[+*?]?/,"");V=le;let be=V===""&&t!==Gf?"(?:$|\\/)":"";i=E+M+V+be+Y}if(i!==""&&s&&(i="(?=.)"+i),x&&(i=D()+i),t===Gf)return[i,s];if(n.nocase&&!s&&(s=e.toUpperCase()!==e.toLowerCase()),!s)return qD(e);let k=n.nocase?"i":"";try{return Object.assign(new RegExp("^"+i+"$",k),{_glob:e,_src:i})}catch{return new RegExp("$.")}}makeRe(){if(this.regexp||this.regexp===!1)return this.regexp;let e=this.set;if(!e.length)return this.regexp=!1,this.regexp;let t=this.options,n=t.noglobstar?zf:t.dot?AD:OD,i=t.nocase?"i":"",s=e.map(a=>(a=a.map(o=>typeof o=="string"?MD(o):o===br?br:o._src).reduce((o,c)=>(o[o.length-1]===br&&c===br||o.push(c),o),[]),a.forEach((o,c)=>{o!==br||a[c-1]===br||(c===0?a.length>1?a[c+1]="(?:\\/|"+n+"\\/)?"+a[c+1]:a[c]=n:c===a.length-1?a[c-1]+="(?:\\/|"+n+")?":(a[c-1]+="(?:\\/|\\/"+n+"\\/)"+a[c+1],a[c+1]=br))}),a.filter(o=>o!==br).join("/"))).join("|");s="^(?:"+s+")$",this.negate&&(s="^(?!"+s+").*$");try{this.regexp=new RegExp(s,i)}catch{this.regexp=!1}return this.regexp}match(e,t=this.partial){if(this.debug("match",e,this.pattern),this.comment)return!1;if(this.empty)return e==="";if(e==="/"&&t)return!0;let n=this.options;Hf.sep!=="/"&&(e=e.split(Hf.sep).join("/")),e=e.split(ew),this.debug(this.pattern,"split",e);let i=this.set;this.debug(this.pattern,"set",i);let s;for(let a=e.length-1;a>=0&&(s=e[a],!s);a--);for(let a=0;a<i.length;a++){let o=i[a],c=e;if(n.matchBase&&o.length===1&&(c=[s]),this.matchOne(c,o,t))return n.flipNegate?!0:!this.negate}return n.flipNegate?!1:this.negate}static defaults(e){return Xn.defaults(e).Minimatch}};Xn.Minimatch=Ps});var nh=B(fi=>{"use strict";Object.defineProperty(fi,"__esModule",{value:!0});fi.DiagnosticFeature=fi.DiagnosticPullMode=fi.vsdiag=void 0;var jD=Oc(),Ke=require("vscode"),Ft=Ne(),UD=kt(),Xf=Ze();function $c(r,e){return r[e]===void 0&&(r[e]={}),r[e]}var ur;(function(r){let e;(function(t){t.full="full",t.unChanged="unChanged"})(e=r.DocumentDiagnosticReportKind||(r.DocumentDiagnosticReportKind={}))})(ur||(fi.vsdiag=ur={}));var Nc;(function(r){r.onType="onType",r.onSave="onSave"})(Nc||(fi.DiagnosticPullMode=Nc={}));var Cn;(function(r){r.active="open",r.reschedule="reschedule",r.outDated="drop"})(Cn||(Cn={}));var Yf=class r{constructor(){this.open=new Set,this._onOpen=new Ke.EventEmitter,this._onClose=new Ke.EventEmitter,r.fillTabResources(this.open);let e=t=>{if(t.closed.length===0&&t.opened.length===0)return;let n=this.open,i=new Set;r.fillTabResources(i);let s=new Set,a=new Set(i);for(let o of n.values())i.has(o)?a.delete(o):s.add(o);if(this.open=i,s.size>0){let o=new Set;for(let c of s)o.add(Ke.Uri.parse(c));this._onClose.fire(o)}if(a.size>0){let o=new Set;for(let c of a)o.add(Ke.Uri.parse(c));this._onOpen.fire(o)}};Ke.window.tabGroups.onDidChangeTabs!==void 0?this.disposable=Ke.window.tabGroups.onDidChangeTabs(e):this.disposable={dispose:()=>{}}}get onClose(){return this._onClose.event}get onOpen(){return this._onOpen.event}dispose(){this.disposable.dispose()}isActive(e){return e instanceof Ke.Uri?Ke.window.activeTextEditor?.document.uri===e:Ke.window.activeTextEditor?.document===e}isVisible(e){let t=e instanceof Ke.Uri?e:e.uri;return this.open.has(t.toString())}getTabResources(){let e=new Set;return r.fillTabResources(new Set,e),e}static fillTabResources(e,t){let n=e??new Set;for(let i of Ke.window.tabGroups.all)for(let s of i.tabs){let a=s.input,o;a instanceof Ke.TabInputText?o=a.uri:a instanceof Ke.TabInputTextDiff?o=a.modified:a instanceof Ke.TabInputCustom&&(o=a.uri),o!==void 0&&!n.has(o.toString())&&(n.add(o.toString()),t!==void 0&&t.add(o))}}},Jt;(function(r){r[r.document=1]="document",r[r.workspace=2]="workspace"})(Jt||(Jt={}));var jr;(function(r){function e(t){return t instanceof Ke.Uri?t.toString():t.uri.toString()}r.asKey=e})(jr||(jr={}));var Qf=class{constructor(){this.documentPullStates=new Map,this.workspacePullStates=new Map}track(e,t,n){let i=e===Jt.document?this.documentPullStates:this.workspacePullStates,[s,a,o]=t instanceof Ke.Uri?[t.toString(),t,n]:[t.uri.toString(),t.uri,t.version],c=i.get(s);return c===void 0&&(c={document:a,pulledVersion:o,resultId:void 0},i.set(s,c)),c}update(e,t,n,i){let s=e===Jt.document?this.documentPullStates:this.workspacePullStates,[a,o,c,u]=t instanceof Ke.Uri?[t.toString(),t,n,i]:[t.uri.toString(),t.uri,t.version,n],l=s.get(a);l===void 0?(l={document:o,pulledVersion:c,resultId:u},s.set(a,l)):(l.pulledVersion=c,l.resultId=u)}unTrack(e,t){let n=jr.asKey(t);(e===Jt.document?this.documentPullStates:this.workspacePullStates).delete(n)}tracks(e,t){let n=jr.asKey(t);return(e===Jt.document?this.documentPullStates:this.workspacePullStates).has(n)}getResultId(e,t){let n=jr.asKey(t);return(e===Jt.document?this.documentPullStates:this.workspacePullStates).get(n)?.resultId}getAllResultIds(){let e=[];for(let[t,n]of this.workspacePullStates)this.documentPullStates.has(t)&&(n=this.documentPullStates.get(t)),n.resultId!==void 0&&e.push({uri:t,value:n.resultId});return e}},Zf=class{constructor(e,t,n){this.client=e,this.tabs=t,this.options=n,this.isDisposed=!1,this.onDidChangeDiagnosticsEmitter=new Ke.EventEmitter,this.provider=this.createProvider(),this.diagnostics=Ke.languages.createDiagnosticCollection(n.identifier),this.openRequests=new Map,this.documentStates=new Qf,this.workspaceErrorCounter=0}knows(e,t){let n=t instanceof Ke.Uri?t:t.uri;return this.documentStates.tracks(e,t)||this.openRequests.has(n.toString())}forget(e,t){this.documentStates.unTrack(e,t)}pull(e,t){if(this.isDisposed)return;let n=e instanceof Ke.Uri?e:e.uri;this.pullAsync(e).then(()=>{t&&t()},i=>{this.client.error(`Document pull failed for text document ${n.toString()}`,i,!1)})}async pullAsync(e,t){if(this.isDisposed)return;let n=e instanceof Ke.Uri,i=n?e:e.uri,s=i.toString();t=n?t:e.version;let a=this.openRequests.get(s),o=n?this.documentStates.track(Jt.document,e,t):this.documentStates.track(Jt.document,e);if(a===void 0){let c=new Ke.CancellationTokenSource;this.openRequests.set(s,{state:Cn.active,document:e,version:t,tokenSource:c});let u,l;try{u=await this.provider.provideDiagnostics(e,o.resultId,c.token)??{kind:ur.DocumentDiagnosticReportKind.full,items:[]}}catch(b){if(b instanceof Xf.LSPCancellationError&&Ft.DiagnosticServerCancellationData.is(b.data)&&b.data.retriggerRequest===!1&&(l={state:Cn.outDated,document:e}),l===void 0&&b instanceof Ke.CancellationError)l={state:Cn.reschedule,document:e};else throw b}if(l=l??this.openRequests.get(s),l===void 0){this.client.error(`Lost request state in diagnostic pull model. Clearing diagnostics for ${s}`),this.diagnostics.delete(i);return}if(this.openRequests.delete(s),!this.tabs.isVisible(e)){this.documentStates.unTrack(Jt.document,e);return}if(l.state===Cn.outDated)return;u!==void 0&&(u.kind===ur.DocumentDiagnosticReportKind.full&&this.diagnostics.set(i,u.items),o.pulledVersion=t,o.resultId=u.resultId),l.state===Cn.reschedule&&this.pull(e)}else a.state===Cn.active?(a.tokenSource.cancel(),this.openRequests.set(s,{state:Cn.reschedule,document:a.document})):a.state===Cn.outDated&&this.openRequests.set(s,{state:Cn.reschedule,document:a.document})}forgetDocument(e){let t=e instanceof Ke.Uri?e:e.uri,n=t.toString(),i=this.openRequests.get(n);this.options.workspaceDiagnostics?i!==void 0?this.openRequests.set(n,{state:Cn.reschedule,document:e}):this.pull(e,()=>{this.forget(Jt.document,e)}):(i!==void 0&&(i.state===Cn.active&&i.tokenSource.cancel(),this.openRequests.set(n,{state:Cn.outDated,document:e})),this.diagnostics.delete(t),this.forget(Jt.document,e))}pullWorkspace(){this.isDisposed||this.pullWorkspaceAsync().then(()=>{this.workspaceTimeout=(0,Ft.RAL)().timer.setTimeout(()=>{this.pullWorkspace()},2e3)},e=>{!(e instanceof Xf.LSPCancellationError)&&!Ft.DiagnosticServerCancellationData.is(e.data)&&(this.client.error("Workspace diagnostic pull failed.",e,!1),this.workspaceErrorCounter++),this.workspaceErrorCounter<=5&&(this.workspaceTimeout=(0,Ft.RAL)().timer.setTimeout(()=>{this.pullWorkspace()},2e3))})}async pullWorkspaceAsync(){if(!this.provider.provideWorkspaceDiagnostics||this.isDisposed)return;this.workspaceCancellation!==void 0&&(this.workspaceCancellation.cancel(),this.workspaceCancellation=void 0),this.workspaceCancellation=new Ke.CancellationTokenSource;let e=this.documentStates.getAllResultIds().map(t=>({uri:this.client.protocol2CodeConverter.asUri(t.uri),value:t.value}));await this.provider.provideWorkspaceDiagnostics(e,this.workspaceCancellation.token,t=>{if(!(!t||this.isDisposed))for(let n of t.items)n.kind===ur.DocumentDiagnosticReportKind.full&&(this.documentStates.tracks(Jt.document,n.uri)||this.diagnostics.set(n.uri,n.items)),this.documentStates.update(Jt.workspace,n.uri,n.version??void 0,n.resultId)})}createProvider(){let e={onDidChangeDiagnostics:this.onDidChangeDiagnosticsEmitter.event,provideDiagnostics:(t,n,i)=>{let s=(o,c,u)=>{let l={identifier:this.options.identifier,textDocument:{uri:this.client.code2ProtocolConverter.asUri(o instanceof Ke.Uri?o:o.uri)},previousResultId:c};return this.isDisposed===!0||!this.client.isRunning()?{kind:ur.DocumentDiagnosticReportKind.full,items:[]}:this.client.sendRequest(Ft.DocumentDiagnosticRequest.type,l,u).then(async b=>b==null||this.isDisposed||u.isCancellationRequested?{kind:ur.DocumentDiagnosticReportKind.full,items:[]}:b.kind===Ft.DocumentDiagnosticReportKind.Full?{kind:ur.DocumentDiagnosticReportKind.full,resultId:b.resultId,items:await this.client.protocol2CodeConverter.asDiagnostics(b.items,u)}:{kind:ur.DocumentDiagnosticReportKind.unChanged,resultId:b.resultId},b=>this.client.handleFailedRequest(Ft.DocumentDiagnosticRequest.type,u,b,{kind:ur.DocumentDiagnosticReportKind.full,items:[]}))},a=this.client.middleware;return a.provideDiagnostics?a.provideDiagnostics(t,n,i,s):s(t,n,i)}};return this.options.workspaceDiagnostics&&(e.provideWorkspaceDiagnostics=(t,n,i)=>{let s=async u=>u.kind===Ft.DocumentDiagnosticReportKind.Full?{kind:ur.DocumentDiagnosticReportKind.full,uri:this.client.protocol2CodeConverter.asUri(u.uri),resultId:u.resultId,version:u.version,items:await this.client.protocol2CodeConverter.asDiagnostics(u.items,n)}:{kind:ur.DocumentDiagnosticReportKind.unChanged,uri:this.client.protocol2CodeConverter.asUri(u.uri),resultId:u.resultId,version:u.version},a=u=>{let l=[];for(let b of u)l.push({uri:this.client.code2ProtocolConverter.asUri(b.uri),value:b.value});return l},o=(u,l)=>{let b=(0,UD.generateUuid)(),f=this.client.onProgress(Ft.WorkspaceDiagnosticRequest.partialResult,b,async m=>{if(m==null){i(null);return}let p={items:[]};for(let g of m.items)try{p.items.push(await s(g))}catch(R){this.client.error("Converting workspace diagnostics failed.",R)}i(p)}),_={identifier:this.options.identifier,previousResultIds:a(u),partialResultToken:b};return this.isDisposed===!0||!this.client.isRunning()?{items:[]}:this.client.sendRequest(Ft.WorkspaceDiagnosticRequest.type,_,l).then(async m=>{if(l.isCancellationRequested)return{items:[]};let p={items:[]};for(let g of m.items)p.items.push(await s(g));return f.dispose(),i(p),{items:[]}},m=>(f.dispose(),this.client.handleFailedRequest(Ft.DocumentDiagnosticRequest.type,l,m,{items:[]})))},c=this.client.middleware;return c.provideWorkspaceDiagnostics?c.provideWorkspaceDiagnostics(t,n,i,o):o(t,n,i)}),e}dispose(){this.isDisposed=!0,this.workspaceCancellation?.cancel(),this.workspaceTimeout?.dispose();for(let[e,t]of this.openRequests)t.state===Cn.active&&t.tokenSource.cancel(),this.openRequests.set(e,{state:Cn.outDated,document:t.document});this.diagnostics.dispose()}},Jf=class{constructor(e){this.diagnosticRequestor=e,this.documents=new Ft.LinkedMap,this.isDisposed=!1}add(e){if(this.isDisposed===!0)return;let t=jr.asKey(e);this.documents.has(t)||(this.documents.set(t,e,Ft.Touch.Last),this.trigger())}remove(e){let t=jr.asKey(e);this.documents.delete(t),this.documents.size===0?this.stop():t===this.endDocumentKey()&&(this.endDocument=this.documents.last)}trigger(){if(this.isDisposed!==!0){if(this.intervalHandle!==void 0){this.endDocument=this.documents.last;return}this.endDocument=this.documents.last,this.intervalHandle=(0,Ft.RAL)().timer.setInterval(()=>{let e=this.documents.first;if(e!==void 0){let t=jr.asKey(e);this.diagnosticRequestor.pull(e),this.documents.set(t,e,Ft.Touch.Last),t===this.endDocumentKey()&&this.stop()}},200)}}dispose(){this.isDisposed=!0,this.stop(),this.documents.clear()}stop(){this.intervalHandle?.dispose(),this.intervalHandle=void 0,this.endDocument=void 0}endDocumentKey(){return this.endDocument!==void 0?jr.asKey(this.endDocument):void 0}},eh=class{constructor(e,t,n){let i=e.clientOptions.diagnosticPullOptions??{onChange:!0,onSave:!1},s=e.protocol2CodeConverter.asDocumentSelector(n.documentSelector),a=[],o=m=>{let p=n.documentSelector;if(i.match!==void 0)return i.match(p,m);for(let g of p)if(Ft.TextDocumentFilter.is(g)){if(typeof g=="string"||g.language!==void 0&&g.language!=="*"||g.scheme!==void 0&&g.scheme!=="*"&&g.scheme!==m.scheme)return!1;if(g.pattern!==void 0){let R=new jD.Minimatch(g.pattern,{noext:!0});if(!R.makeRe()||!R.match(m.fsPath))return!1}}return!0},c=m=>m instanceof Ke.Uri?o(m):Ke.languages.match(s,m)>0&&t.isVisible(m),u=m=>m instanceof Ke.Uri?this.activeTextDocument?.uri.toString()===m.toString():this.activeTextDocument===m;this.diagnosticRequestor=new Zf(e,t,n),this.backgroundScheduler=new Jf(this.diagnosticRequestor);let l=m=>{!c(m)||!n.interFileDependencies||u(m)||this.backgroundScheduler.add(m)};this.activeTextDocument=Ke.window.activeTextEditor?.document,Ke.window.onDidChangeActiveTextEditor(m=>{let p=this.activeTextDocument;this.activeTextDocument=m?.document,p!==void 0&&l(p),this.activeTextDocument!==void 0&&this.backgroundScheduler.remove(this.activeTextDocument)});let b=e.getFeature(Ft.DidOpenTextDocumentNotification.method);a.push(b.onNotificationSent(m=>{let p=m.textDocument;this.diagnosticRequestor.knows(Jt.document,p)||c(p)&&this.diagnosticRequestor.pull(p,()=>{l(p)})})),a.push(t.onOpen(m=>{for(let p of m){if(this.diagnosticRequestor.knows(Jt.document,p))continue;let g=p.toString(),R;for(let D of Ke.workspace.textDocuments)if(g===D.uri.toString()){R=D;break}R!==void 0&&c(R)&&this.diagnosticRequestor.pull(R,()=>{l(R)})}}));let f=new Set;for(let m of Ke.workspace.textDocuments)c(m)&&(this.diagnosticRequestor.pull(m,()=>{l(m)}),f.add(m.uri.toString()));if(i.onTabs===!0)for(let m of t.getTabResources())!f.has(m.toString())&&c(m)&&this.diagnosticRequestor.pull(m,()=>{l(m)});if(i.onChange===!0){let m=e.getFeature(Ft.DidChangeTextDocumentNotification.method);a.push(m.onNotificationSent(async p=>{let g=p.textDocument;(i.filter===void 0||!i.filter(g,Nc.onType))&&this.diagnosticRequestor.knows(Jt.document,g)&&this.diagnosticRequestor.pull(g,()=>{this.backgroundScheduler.trigger()})}))}if(i.onSave===!0){let m=e.getFeature(Ft.DidSaveTextDocumentNotification.method);a.push(m.onNotificationSent(p=>{let g=p.textDocument;(i.filter===void 0||!i.filter(g,Nc.onSave))&&this.diagnosticRequestor.knows(Jt.document,g)&&this.diagnosticRequestor.pull(p.textDocument,()=>{this.backgroundScheduler.trigger()})}))}let _=e.getFeature(Ft.DidCloseTextDocumentNotification.method);a.push(_.onNotificationSent(m=>{this.cleanUpDocument(m.textDocument)})),t.onClose(m=>{for(let p of m)this.cleanUpDocument(p)}),this.diagnosticRequestor.onDidChangeDiagnosticsEmitter.event(()=>{for(let m of Ke.workspace.textDocuments)c(m)&&this.diagnosticRequestor.pull(m)}),n.workspaceDiagnostics===!0&&n.identifier!=="da348dc5-c30a-4515-9d98-31ff3be38d14"&&this.diagnosticRequestor.pullWorkspace(),this.disposable=Ke.Disposable.from(...a,this.backgroundScheduler,this.diagnosticRequestor)}get onDidChangeDiagnosticsEmitter(){return this.diagnosticRequestor.onDidChangeDiagnosticsEmitter}get diagnostics(){return this.diagnosticRequestor.provider}cleanUpDocument(e){this.diagnosticRequestor.knows(Jt.document,e)&&(this.diagnosticRequestor.forgetDocument(e),this.backgroundScheduler.remove(e))}},th=class extends Xf.TextDocumentLanguageFeature{constructor(e){super(e,Ft.DocumentDiagnosticRequest.type)}fillClientCapabilities(e){let t=$c($c(e,"textDocument"),"diagnostic");t.dynamicRegistration=!0,t.relatedDocumentSupport=!1,$c($c(e,"workspace"),"diagnostics").refreshSupport=!0}initialize(e,t){this._client.onRequest(Ft.DiagnosticRefreshRequest.type,async()=>{for(let a of this.getAllProviders())a.onDidChangeDiagnosticsEmitter.fire()});let[i,s]=this.getRegistration(t,e.diagnosticProvider);!i||!s||this.register({id:i,registerOptions:s})}clear(){this.tabs!==void 0&&(this.tabs.dispose(),this.tabs=void 0),super.clear()}registerLanguageProvider(e){this.tabs===void 0&&(this.tabs=new Yf);let t=new eh(this._client,this.tabs,e);return[t.disposable,t]}};fi.DiagnosticFeature=th});var sw=B(Fc=>{"use strict";Object.defineProperty(Fc,"__esModule",{value:!0});Fc.NotebookDocumentSyncFeature=void 0;var Rn=require("vscode"),BD=Oc(),Ur=Ne(),VD=kt(),rw=ir();function iw(r,e){return r[e]===void 0&&(r[e]={}),r[e]}var Ts;(function(r){let e;(function(t){function n(f,_){return{version:f.version,uri:_.asUri(f.uri)}}t.asVersionedNotebookDocumentIdentifier=n;function i(f,_,m){let p=Ur.NotebookDocument.create(m.asUri(f.uri),f.notebookType,f.version,s(_,m));return Object.keys(f.metadata).length>0&&(p.metadata=a(f.metadata)),p}t.asNotebookDocument=i;function s(f,_){return f.map(m=>o(m,_))}t.asNotebookCells=s;function a(f){return u(new Set,f)}t.asMetadata=a;function o(f,_){let m=Ur.NotebookCell.create(c(f.kind),_.asUri(f.document.uri));return Object.keys(f.metadata).length>0&&(m.metadata=a(f.metadata)),f.executionSummary!==void 0&&rw.number(f.executionSummary.executionOrder)&&rw.boolean(f.executionSummary.success)&&(m.executionSummary={executionOrder:f.executionSummary.executionOrder,success:f.executionSummary.success}),m}t.asNotebookCell=o;function c(f){switch(f){case Rn.NotebookCellKind.Markup:return Ur.NotebookCellKind.Markup;case Rn.NotebookCellKind.Code:return Ur.NotebookCellKind.Code}}function u(f,_){if(f.has(_))throw new Error("Can't deep copy cyclic structures.");if(Array.isArray(_)){let m=[];for(let p of _)if(p!==null&&typeof p=="object"||Array.isArray(p))m.push(u(f,p));else{if(p instanceof RegExp)throw new Error("Can't transfer regular expressions to the server");m.push(p)}return m}else{let m=Object.keys(_),p=Object.create(null);for(let g of m){let R=_[g];if(R!==null&&typeof R=="object"||Array.isArray(R))p[g]=u(f,R);else{if(R instanceof RegExp)throw new Error("Can't transfer regular expressions to the server");p[g]=R}}return p}}function l(f,_){let m=_.asChangeTextDocumentParams(f,f.document.uri,f.document.version);return{document:m.textDocument,changes:m.contentChanges}}t.asTextContentChange=l;function b(f,_){let m=Object.create(null);if(f.metadata&&(m.metadata=r.c2p.asMetadata(f.metadata)),f.cells!==void 0){let p=Object.create(null),g=f.cells;g.structure&&(p.structure={array:{start:g.structure.array.start,deleteCount:g.structure.array.deleteCount,cells:g.structure.array.cells!==void 0?g.structure.array.cells.map(R=>r.c2p.asNotebookCell(R,_)):void 0},didOpen:g.structure.didOpen!==void 0?g.structure.didOpen.map(R=>_.asOpenTextDocumentParams(R.document).textDocument):void 0,didClose:g.structure.didClose!==void 0?g.structure.didClose.map(R=>_.asCloseTextDocumentParams(R.document).textDocument):void 0}),g.data!==void 0&&(p.data=g.data.map(R=>r.c2p.asNotebookCell(R,_))),g.textContent!==void 0&&(p.textContent=g.textContent.map(R=>r.c2p.asTextContentChange(R,_))),Object.keys(p).length>0&&(m.cells=p)}return m}t.asNotebookDocumentChangeEvent=b})(e=r.c2p||(r.c2p={}))})(Ts||(Ts={}));var rh;(function(r){function e(o,c,u){let l=o.length,b=c.length,f=0;for(;f<b&&f<l&&t(o[f],c[f],u);)f++;if(f<b&&f<l){let _=l-1,m=b-1;for(;_>=0&&m>=0&&t(o[_],c[m],u);)_--,m--;let p=_+1-f,g=f===m+1?void 0:c.slice(f,m+1);return g!==void 0?{start:f,deleteCount:p,cells:g}:{start:f,deleteCount:p}}else return f<b?{start:f,deleteCount:0,cells:c.slice(f)}:f<l?{start:f,deleteCount:l-f}:void 0}r.computeDiff=e;function t(o,c,u=!0){return o.kind!==c.kind||o.document.uri.toString()!==c.document.uri.toString()||o.document.languageId!==c.document.languageId||!n(o.executionSummary,c.executionSummary)?!1:!u||u&&s(o.metadata,c.metadata)}function n(o,c){return o===c?!0:o===void 0||c===void 0?!1:o.executionOrder===c.executionOrder&&o.success===c.success&&i(o.timing,c.timing)}function i(o,c){return o===c?!0:o===void 0||c===void 0?!1:o.startTime===c.startTime&&o.endTime===c.endTime}function s(o,c){if(o===c)return!0;if(o==null||c===null||c===void 0||typeof o!=typeof c||typeof o!="object")return!1;let u=Array.isArray(o),l=Array.isArray(c);if(u!==l)return!1;if(u&&l){if(o.length!==c.length)return!1;for(let b=0;b<o.length;b++)if(!s(o[b],c[b]))return!1}if(a(o)&&a(c)){let b=Object.keys(o),f=Object.keys(c);if(b.length!==f.length||(b.sort(),f.sort(),!s(b,f)))return!1;for(let _=0;_<b.length;_++){let m=b[_];if(!s(o[m],c[m]))return!1}return!0}return!1}function a(o){return o!==null&&typeof o=="object"}r.isObjectLiteral=a})(rh||(rh={}));var ih;(function(r){function e(t,n){if(typeof t=="string")return t==="*"||n.notebookType===t;if(t.notebookType!==void 0&&t.notebookType!=="*"&&n.notebookType!==t.notebookType)return!1;let i=n.uri;if(t.scheme!==void 0&&t.scheme!=="*"&&i.scheme!==t.scheme)return!1;if(t.pattern!==void 0){let s=new BD.Minimatch(t.pattern,{noext:!0});if(!s.makeRe()||!s.match(i.fsPath))return!1}return!0}r.matchNotebook=e})(ih||(ih={}));var qc;(function(r){function e(n){let i=n.notebookSelector,s=[];for(let a of i){let o=(typeof a.notebook=="string"?a.notebook:a.notebook?.notebookType)??"*",c=typeof a.notebook=="string"?void 0:a.notebook?.scheme,u=typeof a.notebook=="string"?void 0:a.notebook?.pattern;if(a.cells!==void 0)for(let l of a.cells)s.push(t(o,c,u,l.language));else s.push(t(o,c,u,void 0))}return s}r.asDocumentSelector=e;function t(n,i,s,a){return i===void 0&&s===void 0?{notebook:n,language:a}:{notebook:{notebookType:n,scheme:i,pattern:s},language:a}}})(qc||(qc={}));var Lc;(function(r){function e(t){return{cells:t,uris:new Set(t.map(n=>n.document.uri.toString()))}}r.create=e})(Lc||(Lc={}));var Es=class{constructor(e,t){this.client=e,this.options=t,this.notebookSyncInfo=new Map,this.notebookDidOpen=new Set,this.disposables=[],this.selector=e.protocol2CodeConverter.asDocumentSelector(qc.asDocumentSelector(t)),Rn.workspace.onDidOpenNotebookDocument(n=>{this.notebookDidOpen.add(n.uri.toString()),this.didOpen(n)},void 0,this.disposables);for(let n of Rn.workspace.notebookDocuments)this.notebookDidOpen.add(n.uri.toString()),this.didOpen(n);Rn.workspace.onDidChangeNotebookDocument(n=>this.didChangeNotebookDocument(n),void 0,this.disposables),this.options.save===!0&&Rn.workspace.onDidSaveNotebookDocument(n=>this.didSave(n),void 0,this.disposables),Rn.workspace.onDidCloseNotebookDocument(n=>{this.didClose(n),this.notebookDidOpen.delete(n.uri.toString())},void 0,this.disposables)}getState(){for(let e of Rn.workspace.notebookDocuments)if(this.getMatchingCells(e)!==void 0)return{kind:"document",id:"$internal",registrations:!0,matches:!0};return{kind:"document",id:"$internal",registrations:!0,matches:!1}}get mode(){return"notebook"}handles(e){return Rn.languages.match(this.selector,e)>0}didOpenNotebookCellTextDocument(e,t){if(Rn.languages.match(this.selector,t.document)===0||!this.notebookDidOpen.has(e.uri.toString()))return;let n=this.notebookSyncInfo.get(e.uri.toString()),i=this.cellMatches(e,t);if(n!==void 0){let s=n.uris.has(t.document.uri.toString());if(i&&s||!i&&!s)return;if(i){let a=this.getMatchingCells(e);if(a!==void 0){let o=this.asNotebookDocumentChangeEvent(e,void 0,n,a);o!==void 0&&this.doSendChange(o,a).catch(()=>{})}}}else i&&this.doSendOpen(e,[t]).catch(()=>{})}didChangeNotebookCellTextDocument(e,t){Rn.languages.match(this.selector,t.document)!==0&&this.doSendChange({notebook:e,cells:{textContent:[t]}},void 0).catch(()=>{})}didCloseNotebookCellTextDocument(e,t){let n=this.notebookSyncInfo.get(e.uri.toString());if(n===void 0)return;let i=t.document.uri,s=n.cells.findIndex(a=>a.document.uri.toString()===i.toString());if(s!==-1)if(s===0&&n.cells.length===1)this.doSendClose(e,n.cells).catch(()=>{});else{let a=n.cells.slice(),o=a.splice(s,1);this.doSendChange({notebook:e,cells:{structure:{array:{start:s,deleteCount:1},didClose:o}}},a).catch(()=>{})}}dispose(){for(let e of this.disposables)e.dispose()}didOpen(e,t=this.getMatchingCells(e),n=this.notebookSyncInfo.get(e.uri.toString())){if(n!==void 0)if(t!==void 0){let i=this.asNotebookDocumentChangeEvent(e,void 0,n,t);i!==void 0&&this.doSendChange(i,t).catch(()=>{})}else this.doSendClose(e,[]).catch(()=>{});else{if(t===void 0)return;this.doSendOpen(e,t).catch(()=>{})}}didChangeNotebookDocument(e){let t=e.notebook,n=this.notebookSyncInfo.get(t.uri.toString());if(n===void 0){if(e.contentChanges.length===0)return;let i=this.getMatchingCells(t);if(i===void 0)return;this.didOpen(t,i,n)}else{let i=this.getMatchingCells(t);if(i===void 0){this.didClose(t,n);return}let s=this.asNotebookDocumentChangeEvent(e.notebook,e,n,i);s!==void 0&&this.doSendChange(s,i).catch(()=>{})}}didSave(e){this.notebookSyncInfo.get(e.uri.toString())!==void 0&&this.doSendSave(e).catch(()=>{})}didClose(e,t=this.notebookSyncInfo.get(e.uri.toString())){if(t===void 0)return;let n=e.getCells().filter(i=>t.uris.has(i.document.uri.toString()));this.doSendClose(e,n).catch(()=>{})}async sendDidOpenNotebookDocument(e){let t=this.getMatchingCells(e);if(t!==void 0)return this.doSendOpen(e,t)}async doSendOpen(e,t){let n=async(s,a)=>{let o=Ts.c2p.asNotebookDocument(s,a,this.client.code2ProtocolConverter),c=a.map(u=>this.client.code2ProtocolConverter.asTextDocumentItem(u.document));try{await this.client.sendNotification(Ur.DidOpenNotebookDocumentNotification.type,{notebookDocument:o,cellTextDocuments:c})}catch(u){throw this.client.error("Sending DidOpenNotebookDocumentNotification failed",u),u}},i=this.client.middleware?.notebooks;return this.notebookSyncInfo.set(e.uri.toString(),Lc.create(t)),i?.didOpen!==void 0?i.didOpen(e,t,n):n(e,t)}async sendDidChangeNotebookDocument(e){return this.doSendChange(e,void 0)}async doSendChange(e,t=this.getMatchingCells(e.notebook)){let n=async s=>{try{await this.client.sendNotification(Ur.DidChangeNotebookDocumentNotification.type,{notebookDocument:Ts.c2p.asVersionedNotebookDocumentIdentifier(s.notebook,this.client.code2ProtocolConverter),change:Ts.c2p.asNotebookDocumentChangeEvent(s,this.client.code2ProtocolConverter)})}catch(a){throw this.client.error("Sending DidChangeNotebookDocumentNotification failed",a),a}},i=this.client.middleware?.notebooks;return e.cells?.structure!==void 0&&this.notebookSyncInfo.set(e.notebook.uri.toString(),Lc.create(t??[])),i?.didChange!==void 0?i?.didChange(e,n):n(e)}async sendDidSaveNotebookDocument(e){return this.doSendSave(e)}async doSendSave(e){let t=async i=>{try{await this.client.sendNotification(Ur.DidSaveNotebookDocumentNotification.type,{notebookDocument:{uri:this.client.code2ProtocolConverter.asUri(i.uri)}})}catch(s){throw this.client.error("Sending DidSaveNotebookDocumentNotification failed",s),s}},n=this.client.middleware?.notebooks;return n?.didSave!==void 0?n.didSave(e,t):t(e)}async sendDidCloseNotebookDocument(e){return this.doSendClose(e,this.getMatchingCells(e)??[])}async doSendClose(e,t){let n=async(s,a)=>{try{await this.client.sendNotification(Ur.DidCloseNotebookDocumentNotification.type,{notebookDocument:{uri:this.client.code2ProtocolConverter.asUri(s.uri)},cellTextDocuments:a.map(o=>this.client.code2ProtocolConverter.asTextDocumentIdentifier(o.document))})}catch(o){throw this.client.error("Sending DidCloseNotebookDocumentNotification failed",o),o}},i=this.client.middleware?.notebooks;return this.notebookSyncInfo.delete(e.uri.toString()),i?.didClose!==void 0?i.didClose(e,t,n):n(e,t)}asNotebookDocumentChangeEvent(e,t,n,i){if(t!==void 0&&t.notebook!==e)throw new Error("Notebook must be identical");let s={notebook:e};t?.metadata!==void 0&&(s.metadata=Ts.c2p.asMetadata(t.metadata));let a;if(t?.cellChanges!==void 0&&t.cellChanges.length>0){let o=[];a=new Set(i.map(c=>c.document.uri.toString()));for(let c of t.cellChanges)a.has(c.cell.document.uri.toString())&&(c.executionSummary!==void 0||c.metadata!==void 0)&&o.push(c.cell);o.length>0&&(s.cells=s.cells??{},s.cells.data=o)}if((t?.contentChanges!==void 0&&t.contentChanges.length>0||t===void 0)&&n!==void 0&&i!==void 0){let o=n.cells,c=i,u=rh.computeDiff(o,c,!1),l,b;if(u!==void 0){l=u.cells===void 0?new Map:new Map(u.cells.map(m=>[m.document.uri.toString(),m])),b=u.deleteCount===0?new Map:new Map(o.slice(u.start,u.start+u.deleteCount).map(m=>[m.document.uri.toString(),m]));for(let m of Array.from(b.keys()))l.has(m)&&(b.delete(m),l.delete(m));s.cells=s.cells??{};let f=[],_=[];if(l.size>0||b.size>0){for(let m of l.values())f.push(m);for(let m of b.values())_.push(m)}s.cells.structure={array:u,didOpen:f,didClose:_}}}return Object.keys(s).length>1?s:void 0}getMatchingCells(e,t=e.getCells()){if(this.options.notebookSelector!==void 0){for(let n of this.options.notebookSelector)if(n.notebook===void 0||ih.matchNotebook(n.notebook,e)){let i=this.filterCells(e,t,n.cells);return i.length===0?void 0:i}}}cellMatches(e,t){let n=this.getMatchingCells(e,[t]);return n!==void 0&&n[0]===t}filterCells(e,t,n){let i=n!==void 0?t.filter(s=>{let a=s.document.languageId;return n.some(o=>o.language==="*"||a===o.language)}):t;return typeof this.client.clientOptions.notebookDocumentOptions?.filterCells=="function"?this.client.clientOptions.notebookDocumentOptions.filterCells(e,i):i}},Mc=class r{constructor(e){this.client=e,this.registrations=new Map,this.registrationType=Ur.NotebookDocumentSyncRegistrationType.type,Rn.workspace.onDidOpenTextDocument(t=>{if(t.uri.scheme!==r.CellScheme)return;let[n,i]=this.findNotebookDocumentAndCell(t);if(!(n===void 0||i===void 0))for(let s of this.registrations.values())s instanceof Es&&s.didOpenNotebookCellTextDocument(n,i)}),Rn.workspace.onDidChangeTextDocument(t=>{if(t.contentChanges.length===0)return;let n=t.document;if(n.uri.scheme!==r.CellScheme)return;let[i]=this.findNotebookDocumentAndCell(n);if(i!==void 0)for(let s of this.registrations.values())s instanceof Es&&s.didChangeNotebookCellTextDocument(i,t)}),Rn.workspace.onDidCloseTextDocument(t=>{if(t.uri.scheme!==r.CellScheme)return;let[n,i]=this.findNotebookDocumentAndCell(t);if(!(n===void 0||i===void 0))for(let s of this.registrations.values())s instanceof Es&&s.didCloseNotebookCellTextDocument(n,i)})}getState(){if(this.registrations.size===0)return{kind:"document",id:this.registrationType.method,registrations:!1,matches:!1};for(let e of this.registrations.values()){let t=e.getState();if(t.kind==="document"&&t.registrations===!0&&t.matches===!0)return{kind:"document",id:this.registrationType.method,registrations:!0,matches:!0}}return{kind:"document",id:this.registrationType.method,registrations:!0,matches:!1}}fillClientCapabilities(e){let t=iw(iw(e,"notebookDocument"),"synchronization");t.dynamicRegistration=!0,t.executionSummarySupport=!0}preInitialize(e){let t=e.notebookDocumentSync;t!==void 0&&(this.dedicatedChannel=this.client.protocol2CodeConverter.asDocumentSelector(qc.asDocumentSelector(t)))}initialize(e){let t=e.notebookDocumentSync;if(t===void 0)return;let n=t.id??VD.generateUuid();this.register({id:n,registerOptions:t})}register(e){let t=new Es(this.client,e.registerOptions);this.registrations.set(e.id,t)}unregister(e){let t=this.registrations.get(e);t&&t.dispose()}clear(){for(let e of this.registrations.values())e.dispose();this.registrations.clear()}handles(e){if(e.uri.scheme!==r.CellScheme)return!1;if(this.dedicatedChannel!==void 0&&Rn.languages.match(this.dedicatedChannel,e)>0)return!0;for(let t of this.registrations.values())if(t.handles(e))return!0;return!1}getProvider(e){for(let t of this.registrations.values())if(t.handles(e.document))return t}findNotebookDocumentAndCell(e){let t=e.uri.toString();for(let n of Rn.workspace.notebookDocuments)for(let i of n.getCells())if(i.document.uri.toString()===t)return[n,i];return[void 0,void 0]}};Fc.NotebookDocumentSyncFeature=Mc;Mc.CellScheme="vscode-notebook-cell"});var aw=B(hi=>{"use strict";Object.defineProperty(hi,"__esModule",{value:!0});hi.SyncConfigurationFeature=hi.toJSONObject=hi.ConfigurationFeature=void 0;var Is=require("vscode"),No=Ne(),zD=ir(),GD=kt(),ow=Ze(),sh=class{constructor(e){this._client=e}getState(){return{kind:"static"}}fillClientCapabilities(e){e.workspace=e.workspace||{},e.workspace.configuration=!0}initialize(){let e=this._client;e.onRequest(No.ConfigurationRequest.type,(t,n)=>{let i=a=>{let o=[];for(let c of a.items){let u=c.scopeUri!==void 0&&c.scopeUri!==null?this._client.protocol2CodeConverter.asUri(c.scopeUri):void 0;o.push(this.getConfiguration(u,c.section!==null?c.section:void 0))}return o},s=e.middleware.workspace;return s&&s.configuration?s.configuration(t,n,i):i(t,n)})}getConfiguration(e,t){let n=null;if(t){let i=t.lastIndexOf(".");if(i===-1)n=Ni(Is.workspace.getConfiguration(void 0,e).get(t));else{let s=Is.workspace.getConfiguration(t.substr(0,i),e);s&&(n=Ni(s.get(t.substr(i+1))))}}else{let i=Is.workspace.getConfiguration(void 0,e);n={};for(let s of Object.keys(i))i.has(s)&&(n[s]=Ni(i.get(s)))}return n===void 0&&(n=null),n}clear(){}};hi.ConfigurationFeature=sh;function Ni(r){if(r){if(Array.isArray(r))return r.map(Ni);if(typeof r=="object"){let e=Object.create(null);for(let t in r)Object.prototype.hasOwnProperty.call(r,t)&&(e[t]=Ni(r[t]));return e}}return r}hi.toJSONObject=Ni;var oh=class{constructor(e){this._client=e,this.isCleared=!1,this._listeners=new Map}getState(){return{kind:"workspace",id:this.registrationType.method,registrations:this._listeners.size>0}}get registrationType(){return No.DidChangeConfigurationNotification.type}fillClientCapabilities(e){(0,ow.ensure)((0,ow.ensure)(e,"workspace"),"didChangeConfiguration").dynamicRegistration=!0}initialize(){this.isCleared=!1;let e=this._client.clientOptions.synchronize?.configurationSection;e!==void 0&&this.register({id:GD.generateUuid(),registerOptions:{section:e}})}register(e){let t=Is.workspace.onDidChangeConfiguration(n=>{this.onDidChangeConfiguration(e.registerOptions.section,n)});this._listeners.set(e.id,t),e.registerOptions.section!==void 0&&this.onDidChangeConfiguration(e.registerOptions.section,void 0)}unregister(e){let t=this._listeners.get(e);t&&(this._listeners.delete(e),t.dispose())}clear(){for(let e of this._listeners.values())e.dispose();this._listeners.clear(),this.isCleared=!0}onDidChangeConfiguration(e,t){if(this.isCleared)return;let n;if(zD.string(e)?n=[e]:n=e,n!==void 0&&t!==void 0&&!n.some(o=>t.affectsConfiguration(o)))return;let i=async a=>a===void 0?this._client.sendNotification(No.DidChangeConfigurationNotification.type,{settings:null}):this._client.sendNotification(No.DidChangeConfigurationNotification.type,{settings:this.extractSettingsInformation(a)}),s=this._client.middleware.workspace?.didChangeConfiguration;(s?s(n,i):i(n)).catch(a=>{this._client.error(`Sending notification ${No.DidChangeConfigurationNotification.type.method} failed`,a)})}extractSettingsInformation(e){function t(s,a){let o=s;for(let c=0;c<a.length-1;c++){let u=o[a[c]];u||(u=Object.create(null),o[a[c]]=u),o=u}return o}let n=this._client.clientOptions.workspaceFolder?this._client.clientOptions.workspaceFolder.uri:void 0,i=Object.create(null);for(let s=0;s<e.length;s++){let a=e[s],o=a.indexOf("."),c=null;if(o>=0?c=Is.workspace.getConfiguration(a.substr(0,o),n).get(a.substr(o+1)):c=Is.workspace.getConfiguration(void 0,n).get(a),c){let u=e[s].split(".");t(i,u)[u[u.length-1]]=Ni(c)}}return i}};hi.SyncConfigurationFeature=oh});var cw=B(Mn=>{"use strict";Object.defineProperty(Mn,"__esModule",{value:!0});Mn.DidSaveTextDocumentFeature=Mn.WillSaveWaitUntilFeature=Mn.WillSaveFeature=Mn.DidChangeTextDocumentFeature=Mn.DidCloseTextDocumentFeature=Mn.DidOpenTextDocumentFeature=void 0;var Yn=require("vscode"),_t=Ne(),At=Ze(),As=kt(),ah=class extends At.TextDocumentEventFeature{constructor(e,t){super(e,Yn.workspace.onDidOpenTextDocument,_t.DidOpenTextDocumentNotification.type,()=>e.middleware.didOpen,n=>e.code2ProtocolConverter.asOpenTextDocumentParams(n),n=>n,At.TextDocumentEventFeature.textDocumentFilter),this._syncedDocuments=t}get openDocuments(){return this._syncedDocuments.values()}fillClientCapabilities(e){(0,At.ensure)((0,At.ensure)(e,"textDocument"),"synchronization").dynamicRegistration=!0}initialize(e,t){let n=e.resolvedTextDocumentSync;t&&n&&n.openClose&&this.register({id:As.generateUuid(),registerOptions:{documentSelector:t}})}get registrationType(){return _t.DidOpenTextDocumentNotification.type}register(e){if(super.register(e),!e.registerOptions.documentSelector)return;let t=this._client.protocol2CodeConverter.asDocumentSelector(e.registerOptions.documentSelector);Yn.workspace.textDocuments.forEach(n=>{let i=n.uri.toString();if(!this._syncedDocuments.has(i)&&Yn.languages.match(t,n)>0&&!this._client.hasDedicatedTextSynchronizationFeature(n)){let s=this._client.middleware,a=o=>this._client.sendNotification(this._type,this._createParams(o));(s.didOpen?s.didOpen(n,a):a(n)).catch(o=>{this._client.error(`Sending document notification ${this._type.method} failed`,o)}),this._syncedDocuments.set(i,n)}})}getTextDocument(e){return e}notificationSent(e,t,n){this._syncedDocuments.set(e.uri.toString(),e),super.notificationSent(e,t,n)}};Mn.DidOpenTextDocumentFeature=ah;var ch=class extends At.TextDocumentEventFeature{constructor(e,t,n){super(e,Yn.workspace.onDidCloseTextDocument,_t.DidCloseTextDocumentNotification.type,()=>e.middleware.didClose,i=>e.code2ProtocolConverter.asCloseTextDocumentParams(i),i=>i,At.TextDocumentEventFeature.textDocumentFilter),this._syncedDocuments=t,this._pendingTextDocumentChanges=n}get registrationType(){return _t.DidCloseTextDocumentNotification.type}fillClientCapabilities(e){(0,At.ensure)((0,At.ensure)(e,"textDocument"),"synchronization").dynamicRegistration=!0}initialize(e,t){let n=e.resolvedTextDocumentSync;t&&n&&n.openClose&&this.register({id:As.generateUuid(),registerOptions:{documentSelector:t}})}async callback(e){await super.callback(e),this._pendingTextDocumentChanges.delete(e.uri.toString())}getTextDocument(e){return e}notificationSent(e,t,n){this._syncedDocuments.delete(e.uri.toString()),super.notificationSent(e,t,n)}unregister(e){let t=this._selectors.get(e);super.unregister(e);let n=this._selectors.values();this._syncedDocuments.forEach(i=>{if(Yn.languages.match(t,i)>0&&!this._selectorFilter(n,i)&&!this._client.hasDedicatedTextSynchronizationFeature(i)){let s=this._client.middleware,a=o=>this._client.sendNotification(this._type,this._createParams(o));this._syncedDocuments.delete(i.uri.toString()),(s.didClose?s.didClose(i,a):a(i)).catch(o=>{this._client.error(`Sending document notification ${this._type.method} failed`,o)})}})}};Mn.DidCloseTextDocumentFeature=ch;var uh=class extends At.DynamicDocumentFeature{constructor(e,t){super(e),this._changeData=new Map,this._onNotificationSent=new Yn.EventEmitter,this._onPendingChangeAdded=new Yn.EventEmitter,this._pendingTextDocumentChanges=t,this._syncKind=_t.TextDocumentSyncKind.None}get onNotificationSent(){return this._onNotificationSent.event}get onPendingChangeAdded(){return this._onPendingChangeAdded.event}get syncKind(){return this._syncKind}get registrationType(){return _t.DidChangeTextDocumentNotification.type}fillClientCapabilities(e){(0,At.ensure)((0,At.ensure)(e,"textDocument"),"synchronization").dynamicRegistration=!0}initialize(e,t){let n=e.resolvedTextDocumentSync;t&&n&&n.change!==void 0&&n.change!==_t.TextDocumentSyncKind.None&&this.register({id:As.generateUuid(),registerOptions:Object.assign({},{documentSelector:t},{syncKind:n.change})})}register(e){e.registerOptions.documentSelector&&(this._listener||(this._listener=Yn.workspace.onDidChangeTextDocument(this.callback,this)),this._changeData.set(e.id,{syncKind:e.registerOptions.syncKind,documentSelector:this._client.protocol2CodeConverter.asDocumentSelector(e.registerOptions.documentSelector)}),this.updateSyncKind(e.registerOptions.syncKind))}*getDocumentSelectors(){for(let e of this._changeData.values())yield e.documentSelector}async callback(e){if(e.contentChanges.length===0)return;let t=e.document.uri,n=e.document.version,i=[];for(let s of this._changeData.values())if(Yn.languages.match(s.documentSelector,e.document)>0&&!this._client.hasDedicatedTextSynchronizationFeature(e.document)){let a=this._client.middleware;if(s.syncKind===_t.TextDocumentSyncKind.Incremental){let o=async c=>{let u=this._client.code2ProtocolConverter.asChangeTextDocumentParams(c,t,n);await this._client.sendNotification(_t.DidChangeTextDocumentNotification.type,u),this.notificationSent(c.document,_t.DidChangeTextDocumentNotification.type,u)};i.push(a.didChange?a.didChange(e,c=>o(c)):o(e))}else if(s.syncKind===_t.TextDocumentSyncKind.Full){let o=async c=>{let u=c.document.uri.toString();this._pendingTextDocumentChanges.set(u,c.document),this._onPendingChangeAdded.fire()};i.push(a.didChange?a.didChange(e,c=>o(c)):o(e))}}return Promise.all(i).then(void 0,s=>{throw this._client.error(`Sending document notification ${_t.DidChangeTextDocumentNotification.type.method} failed`,s),s})}notificationSent(e,t,n){this._onNotificationSent.fire({textDocument:e,type:t,params:n})}unregister(e){if(this._changeData.delete(e),this._changeData.size===0)this._listener&&(this._listener.dispose(),this._listener=void 0),this._syncKind=_t.TextDocumentSyncKind.None;else{this._syncKind=_t.TextDocumentSyncKind.None;for(let t of this._changeData.values())if(this.updateSyncKind(t.syncKind),this._syncKind===_t.TextDocumentSyncKind.Full)break}}clear(){this._pendingTextDocumentChanges.clear(),this._changeData.clear(),this._syncKind=_t.TextDocumentSyncKind.None,this._listener&&(this._listener.dispose(),this._listener=void 0)}getPendingDocumentChanges(e){if(this._pendingTextDocumentChanges.size===0)return[];let t;if(e.size===0)t=Array.from(this._pendingTextDocumentChanges.values()),this._pendingTextDocumentChanges.clear();else{t=[];for(let n of this._pendingTextDocumentChanges)e.has(n[0])||(t.push(n[1]),this._pendingTextDocumentChanges.delete(n[0]))}return t}getProvider(e){for(let t of this._changeData.values())if(Yn.languages.match(t.documentSelector,e)>0)return{send:n=>this.callback(n)}}updateSyncKind(e){if(this._syncKind!==_t.TextDocumentSyncKind.Full)switch(e){case _t.TextDocumentSyncKind.Full:this._syncKind=e;break;case _t.TextDocumentSyncKind.Incremental:this._syncKind===_t.TextDocumentSyncKind.None&&(this._syncKind=_t.TextDocumentSyncKind.Incremental);break}}};Mn.DidChangeTextDocumentFeature=uh;var lh=class extends At.TextDocumentEventFeature{constructor(e){super(e,Yn.workspace.onWillSaveTextDocument,_t.WillSaveTextDocumentNotification.type,()=>e.middleware.willSave,t=>e.code2ProtocolConverter.asWillSaveTextDocumentParams(t),t=>t.document,(t,n)=>At.TextDocumentEventFeature.textDocumentFilter(t,n.document))}get registrationType(){return _t.WillSaveTextDocumentNotification.type}fillClientCapabilities(e){let t=(0,At.ensure)((0,At.ensure)(e,"textDocument"),"synchronization");t.willSave=!0}initialize(e,t){let n=e.resolvedTextDocumentSync;t&&n&&n.willSave&&this.register({id:As.generateUuid(),registerOptions:{documentSelector:t}})}getTextDocument(e){return e.document}};Mn.WillSaveFeature=lh;var dh=class extends At.DynamicDocumentFeature{constructor(e){super(e),this._selectors=new Map}getDocumentSelectors(){return this._selectors.values()}get registrationType(){return _t.WillSaveTextDocumentWaitUntilRequest.type}fillClientCapabilities(e){let t=(0,At.ensure)((0,At.ensure)(e,"textDocument"),"synchronization");t.willSaveWaitUntil=!0}initialize(e,t){let n=e.resolvedTextDocumentSync;t&&n&&n.willSaveWaitUntil&&this.register({id:As.generateUuid(),registerOptions:{documentSelector:t}})}register(e){e.registerOptions.documentSelector&&(this._listener||(this._listener=Yn.workspace.onWillSaveTextDocument(this.callback,this)),this._selectors.set(e.id,this._client.protocol2CodeConverter.asDocumentSelector(e.registerOptions.documentSelector)))}callback(e){if(At.TextDocumentEventFeature.textDocumentFilter(this._selectors.values(),e.document)&&!this._client.hasDedicatedTextSynchronizationFeature(e.document)){let t=this._client.middleware,n=i=>this._client.sendRequest(_t.WillSaveTextDocumentWaitUntilRequest.type,this._client.code2ProtocolConverter.asWillSaveTextDocumentParams(i)).then(async s=>{let a=await this._client.protocol2CodeConverter.asTextEdits(s);return a===void 0?[]:a});e.waitUntil(t.willSaveWaitUntil?t.willSaveWaitUntil(e,n):n(e))}}unregister(e){this._selectors.delete(e),this._selectors.size===0&&this._listener&&(this._listener.dispose(),this._listener=void 0)}clear(){this._selectors.clear(),this._listener&&(this._listener.dispose(),this._listener=void 0)}};Mn.WillSaveWaitUntilFeature=dh;var fh=class extends At.TextDocumentEventFeature{constructor(e){super(e,Yn.workspace.onDidSaveTextDocument,_t.DidSaveTextDocumentNotification.type,()=>e.middleware.didSave,t=>e.code2ProtocolConverter.asSaveTextDocumentParams(t,this._includeText),t=>t,At.TextDocumentEventFeature.textDocumentFilter),this._includeText=!1}get registrationType(){return _t.DidSaveTextDocumentNotification.type}fillClientCapabilities(e){(0,At.ensure)((0,At.ensure)(e,"textDocument"),"synchronization").didSave=!0}initialize(e,t){let n=e.resolvedTextDocumentSync;if(t&&n&&n.save){let i=typeof n.save=="boolean"?{includeText:!1}:{includeText:!!n.save.includeText};this.register({id:As.generateUuid(),registerOptions:Object.assign({},{documentSelector:t},i)})}}register(e){this._includeText=!!e.registerOptions.includeText,super.register(e)}getTextDocument(e){return e}};Mn.DidSaveTextDocumentFeature=fh});var uw=B(jc=>{"use strict";Object.defineProperty(jc,"__esModule",{value:!0});jc.CompletionItemFeature=void 0;var HD=require("vscode"),Xe=Ne(),hh=Ze(),WD=kt(),KD=[Xe.CompletionItemKind.Text,Xe.CompletionItemKind.Method,Xe.CompletionItemKind.Function,Xe.CompletionItemKind.Constructor,Xe.CompletionItemKind.Field,Xe.CompletionItemKind.Variable,Xe.CompletionItemKind.Class,Xe.CompletionItemKind.Interface,Xe.CompletionItemKind.Module,Xe.CompletionItemKind.Property,Xe.CompletionItemKind.Unit,Xe.CompletionItemKind.Value,Xe.CompletionItemKind.Enum,Xe.CompletionItemKind.Keyword,Xe.CompletionItemKind.Snippet,Xe.CompletionItemKind.Color,Xe.CompletionItemKind.File,Xe.CompletionItemKind.Reference,Xe.CompletionItemKind.Folder,Xe.CompletionItemKind.EnumMember,Xe.CompletionItemKind.Constant,Xe.CompletionItemKind.Struct,Xe.CompletionItemKind.Event,Xe.CompletionItemKind.Operator,Xe.CompletionItemKind.TypeParameter],ph=class extends hh.TextDocumentLanguageFeature{constructor(e){super(e,Xe.CompletionRequest.type),this.labelDetailsSupport=new Map}fillClientCapabilities(e){let t=(0,hh.ensure)((0,hh.ensure)(e,"textDocument"),"completion");t.dynamicRegistration=!0,t.contextSupport=!0,t.completionItem={snippetSupport:!0,commitCharactersSupport:!0,documentationFormat:[Xe.MarkupKind.Markdown,Xe.MarkupKind.PlainText],deprecatedSupport:!0,preselectSupport:!0,tagSupport:{valueSet:[Xe.CompletionItemTag.Deprecated]},insertReplaceSupport:!0,resolveSupport:{properties:["documentation","detail","additionalTextEdits"]},insertTextModeSupport:{valueSet:[Xe.InsertTextMode.asIs,Xe.InsertTextMode.adjustIndentation]},labelDetailsSupport:!0},t.insertTextMode=Xe.InsertTextMode.adjustIndentation,t.completionItemKind={valueSet:KD},t.completionList={itemDefaults:["commitCharacters","editRange","insertTextFormat","insertTextMode","data"]}}initialize(e,t){let n=this.getRegistrationOptions(t,e.completionProvider);n&&this.register({id:WD.generateUuid(),registerOptions:n})}registerLanguageProvider(e,t){this.labelDetailsSupport.set(t,!!e.completionItem?.labelDetailsSupport);let n=e.triggerCharacters??[],i=e.allCommitCharacters,s=e.documentSelector,a={provideCompletionItems:(o,c,u,l)=>{let b=this._client,f=this._client.middleware,_=(m,p,g,R)=>b.sendRequest(Xe.CompletionRequest.type,b.code2ProtocolConverter.asCompletionParams(m,p,g),R).then(D=>R.isCancellationRequested?null:b.protocol2CodeConverter.asCompletionResult(D,i,R),D=>b.handleFailedRequest(Xe.CompletionRequest.type,R,D,null));return f.provideCompletionItem?f.provideCompletionItem(o,c,l,u,_):_(o,c,l,u)},resolveCompletionItem:e.resolveProvider?(o,c)=>{let u=this._client,l=this._client.middleware,b=(f,_)=>u.sendRequest(Xe.CompletionResolveRequest.type,u.code2ProtocolConverter.asCompletionItem(f,!!this.labelDetailsSupport.get(t)),_).then(m=>_.isCancellationRequested?null:u.protocol2CodeConverter.asCompletionItem(m),m=>u.handleFailedRequest(Xe.CompletionResolveRequest.type,_,m,f));return l.resolveCompletionItem?l.resolveCompletionItem(o,c,b):b(o,c)}:void 0};return[HD.languages.registerCompletionItemProvider(this._client.protocol2CodeConverter.asDocumentSelector(s),a,...n),a]}};jc.CompletionItemFeature=ph});var lw=B(Uc=>{"use strict";Object.defineProperty(Uc,"__esModule",{value:!0});Uc.HoverFeature=void 0;var XD=require("vscode"),qo=Ne(),gh=Ze(),YD=kt(),mh=class extends gh.TextDocumentLanguageFeature{constructor(e){super(e,qo.HoverRequest.type)}fillClientCapabilities(e){let t=(0,gh.ensure)((0,gh.ensure)(e,"textDocument"),"hover");t.dynamicRegistration=!0,t.contentFormat=[qo.MarkupKind.Markdown,qo.MarkupKind.PlainText]}initialize(e,t){let n=this.getRegistrationOptions(t,e.hoverProvider);n&&this.register({id:YD.generateUuid(),registerOptions:n})}registerLanguageProvider(e){let t=e.documentSelector,n={provideHover:(i,s,a)=>{let o=this._client,c=(l,b,f)=>o.sendRequest(qo.HoverRequest.type,o.code2ProtocolConverter.asTextDocumentPositionParams(l,b),f).then(_=>f.isCancellationRequested?null:o.protocol2CodeConverter.asHover(_),_=>o.handleFailedRequest(qo.HoverRequest.type,f,_,null)),u=o.middleware;return u.provideHover?u.provideHover(i,s,a,c):c(i,s,a)}};return[this.registerProvider(t,n),n]}registerProvider(e,t){return XD.languages.registerHoverProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),t)}};Uc.HoverFeature=mh});var dw=B(Bc=>{"use strict";Object.defineProperty(Bc,"__esModule",{value:!0});Bc.DefinitionFeature=void 0;var QD=require("vscode"),_h=Ne(),bh=Ze(),ZD=kt(),vh=class extends bh.TextDocumentLanguageFeature{constructor(e){super(e,_h.DefinitionRequest.type)}fillClientCapabilities(e){let t=(0,bh.ensure)((0,bh.ensure)(e,"textDocument"),"definition");t.dynamicRegistration=!0,t.linkSupport=!0}initialize(e,t){let n=this.getRegistrationOptions(t,e.definitionProvider);n&&this.register({id:ZD.generateUuid(),registerOptions:n})}registerLanguageProvider(e){let t=e.documentSelector,n={provideDefinition:(i,s,a)=>{let o=this._client,c=(l,b,f)=>o.sendRequest(_h.DefinitionRequest.type,o.code2ProtocolConverter.asTextDocumentPositionParams(l,b),f).then(_=>f.isCancellationRequested?null:o.protocol2CodeConverter.asDefinitionResult(_,f),_=>o.handleFailedRequest(_h.DefinitionRequest.type,f,_,null)),u=o.middleware;return u.provideDefinition?u.provideDefinition(i,s,a,c):c(i,s,a)}};return[this.registerProvider(t,n),n]}registerProvider(e,t){return QD.languages.registerDefinitionProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),t)}};Bc.DefinitionFeature=vh});var hw=B(Vc=>{"use strict";Object.defineProperty(Vc,"__esModule",{value:!0});Vc.SignatureHelpFeature=void 0;var fw=require("vscode"),Lo=Ne(),yh=Ze(),JD=kt(),wh=class extends yh.TextDocumentLanguageFeature{constructor(e){super(e,Lo.SignatureHelpRequest.type)}fillClientCapabilities(e){let t=(0,yh.ensure)((0,yh.ensure)(e,"textDocument"),"signatureHelp");t.dynamicRegistration=!0,t.signatureInformation={documentationFormat:[Lo.MarkupKind.Markdown,Lo.MarkupKind.PlainText]},t.signatureInformation.parameterInformation={labelOffsetSupport:!0},t.signatureInformation.activeParameterSupport=!0,t.contextSupport=!0}initialize(e,t){let n=this.getRegistrationOptions(t,e.signatureHelpProvider);n&&this.register({id:JD.generateUuid(),registerOptions:n})}registerLanguageProvider(e){let t={provideSignatureHelp:(n,i,s,a)=>{let o=this._client,c=(l,b,f,_)=>o.sendRequest(Lo.SignatureHelpRequest.type,o.code2ProtocolConverter.asSignatureHelpParams(l,b,f),_).then(m=>_.isCancellationRequested?null:o.protocol2CodeConverter.asSignatureHelp(m,_),m=>o.handleFailedRequest(Lo.SignatureHelpRequest.type,_,m,null)),u=o.middleware;return u.provideSignatureHelp?u.provideSignatureHelp(n,i,a,s,c):c(n,i,a,s)}};return[this.registerProvider(e,t),t]}registerProvider(e,t){let n=this._client.protocol2CodeConverter.asDocumentSelector(e.documentSelector);if(e.retriggerCharacters===void 0){let i=e.triggerCharacters||[];return fw.languages.registerSignatureHelpProvider(n,t,...i)}else{let i={triggerCharacters:e.triggerCharacters||[],retriggerCharacters:e.retriggerCharacters||[]};return fw.languages.registerSignatureHelpProvider(n,t,i)}}};Vc.SignatureHelpFeature=wh});var pw=B(zc=>{"use strict";Object.defineProperty(zc,"__esModule",{value:!0});zc.DocumentHighlightFeature=void 0;var ex=require("vscode"),Ch=Ne(),Rh=Ze(),tx=kt(),Sh=class extends Rh.TextDocumentLanguageFeature{constructor(e){super(e,Ch.DocumentHighlightRequest.type)}fillClientCapabilities(e){(0,Rh.ensure)((0,Rh.ensure)(e,"textDocument"),"documentHighlight").dynamicRegistration=!0}initialize(e,t){let n=this.getRegistrationOptions(t,e.documentHighlightProvider);n&&this.register({id:tx.generateUuid(),registerOptions:n})}registerLanguageProvider(e){let t=e.documentSelector,n={provideDocumentHighlights:(i,s,a)=>{let o=this._client,c=(l,b,f)=>o.sendRequest(Ch.DocumentHighlightRequest.type,o.code2ProtocolConverter.asTextDocumentPositionParams(l,b),f).then(_=>f.isCancellationRequested?null:o.protocol2CodeConverter.asDocumentHighlights(_,f),_=>o.handleFailedRequest(Ch.DocumentHighlightRequest.type,f,_,null)),u=o.middleware;return u.provideDocumentHighlights?u.provideDocumentHighlights(i,s,a,c):c(i,s,a)}};return[ex.languages.registerDocumentHighlightProvider(this._client.protocol2CodeConverter.asDocumentSelector(t),n),n]}};zc.DocumentHighlightFeature=Sh});var kh=B($r=>{"use strict";Object.defineProperty($r,"__esModule",{value:!0});$r.DocumentSymbolFeature=$r.SupportedSymbolTags=$r.SupportedSymbolKinds=void 0;var nx=require("vscode"),st=Ne(),Dh=Ze(),rx=kt();$r.SupportedSymbolKinds=[st.SymbolKind.File,st.SymbolKind.Module,st.SymbolKind.Namespace,st.SymbolKind.Package,st.SymbolKind.Class,st.SymbolKind.Method,st.SymbolKind.Property,st.SymbolKind.Field,st.SymbolKind.Constructor,st.SymbolKind.Enum,st.SymbolKind.Interface,st.SymbolKind.Function,st.SymbolKind.Variable,st.SymbolKind.Constant,st.SymbolKind.String,st.SymbolKind.Number,st.SymbolKind.Boolean,st.SymbolKind.Array,st.SymbolKind.Object,st.SymbolKind.Key,st.SymbolKind.Null,st.SymbolKind.EnumMember,st.SymbolKind.Struct,st.SymbolKind.Event,st.SymbolKind.Operator,st.SymbolKind.TypeParameter];$r.SupportedSymbolTags=[st.SymbolTag.Deprecated];var xh=class extends Dh.TextDocumentLanguageFeature{constructor(e){super(e,st.DocumentSymbolRequest.type)}fillClientCapabilities(e){let t=(0,Dh.ensure)((0,Dh.ensure)(e,"textDocument"),"documentSymbol");t.dynamicRegistration=!0,t.symbolKind={valueSet:$r.SupportedSymbolKinds},t.hierarchicalDocumentSymbolSupport=!0,t.tagSupport={valueSet:$r.SupportedSymbolTags},t.labelSupport=!0}initialize(e,t){let n=this.getRegistrationOptions(t,e.documentSymbolProvider);n&&this.register({id:rx.generateUuid(),registerOptions:n})}registerLanguageProvider(e){let t=e.documentSelector,n={provideDocumentSymbols:(s,a)=>{let o=this._client,c=async(l,b)=>{try{let f=await o.sendRequest(st.DocumentSymbolRequest.type,o.code2ProtocolConverter.asDocumentSymbolParams(l),b);if(b.isCancellationRequested||f===void 0||f===null)return null;if(f.length===0)return[];{let _=f[0];return st.DocumentSymbol.is(_)?await o.protocol2CodeConverter.asDocumentSymbols(f,b):await o.protocol2CodeConverter.asSymbolInformations(f,b)}}catch(f){return o.handleFailedRequest(st.DocumentSymbolRequest.type,b,f,null)}},u=o.middleware;return u.provideDocumentSymbols?u.provideDocumentSymbols(s,a,c):c(s,a)}},i=e.label!==void 0?{label:e.label}:void 0;return[nx.languages.registerDocumentSymbolProvider(this._client.protocol2CodeConverter.asDocumentSelector(t),n,i),n]}};$r.DocumentSymbolFeature=xh});var mw=B(Gc=>{"use strict";Object.defineProperty(Gc,"__esModule",{value:!0});Gc.WorkspaceSymbolFeature=void 0;var ix=require("vscode"),Mo=Ne(),Ph=Ze(),gw=kh(),sx=kt(),Th=class extends Ph.WorkspaceFeature{constructor(e){super(e,Mo.WorkspaceSymbolRequest.type)}fillClientCapabilities(e){let t=(0,Ph.ensure)((0,Ph.ensure)(e,"workspace"),"symbol");t.dynamicRegistration=!0,t.symbolKind={valueSet:gw.SupportedSymbolKinds},t.tagSupport={valueSet:gw.SupportedSymbolTags},t.resolveSupport={properties:["location.range"]}}initialize(e){e.workspaceSymbolProvider&&this.register({id:sx.generateUuid(),registerOptions:e.workspaceSymbolProvider===!0?{workDoneProgress:!1}:e.workspaceSymbolProvider})}registerLanguageProvider(e){let t={provideWorkspaceSymbols:(n,i)=>{let s=this._client,a=(c,u)=>s.sendRequest(Mo.WorkspaceSymbolRequest.type,{query:c},u).then(l=>u.isCancellationRequested?null:s.protocol2CodeConverter.asSymbolInformations(l,u),l=>s.handleFailedRequest(Mo.WorkspaceSymbolRequest.type,u,l,null)),o=s.middleware;return o.provideWorkspaceSymbols?o.provideWorkspaceSymbols(n,i,a):a(n,i)},resolveWorkspaceSymbol:e.resolveProvider===!0?(n,i)=>{let s=this._client,a=(c,u)=>s.sendRequest(Mo.WorkspaceSymbolResolveRequest.type,s.code2ProtocolConverter.asWorkspaceSymbol(c),u).then(l=>u.isCancellationRequested?null:s.protocol2CodeConverter.asSymbolInformation(l),l=>s.handleFailedRequest(Mo.WorkspaceSymbolResolveRequest.type,u,l,null)),o=s.middleware;return o.resolveWorkspaceSymbol?o.resolveWorkspaceSymbol(n,i,a):a(n,i)}:void 0};return[ix.languages.registerWorkspaceSymbolProvider(t),t]}};Gc.WorkspaceSymbolFeature=Th});var _w=B(Hc=>{"use strict";Object.defineProperty(Hc,"__esModule",{value:!0});Hc.ReferencesFeature=void 0;var ox=require("vscode"),Eh=Ne(),Ih=Ze(),ax=kt(),Ah=class extends Ih.TextDocumentLanguageFeature{constructor(e){super(e,Eh.ReferencesRequest.type)}fillClientCapabilities(e){(0,Ih.ensure)((0,Ih.ensure)(e,"textDocument"),"references").dynamicRegistration=!0}initialize(e,t){let n=this.getRegistrationOptions(t,e.referencesProvider);n&&this.register({id:ax.generateUuid(),registerOptions:n})}registerLanguageProvider(e){let t=e.documentSelector,n={provideReferences:(i,s,a,o)=>{let c=this._client,u=(b,f,_,m)=>c.sendRequest(Eh.ReferencesRequest.type,c.code2ProtocolConverter.asReferenceParams(b,f,_),m).then(p=>m.isCancellationRequested?null:c.protocol2CodeConverter.asReferences(p,m),p=>c.handleFailedRequest(Eh.ReferencesRequest.type,m,p,null)),l=c.middleware;return l.provideReferences?l.provideReferences(i,s,a,o,u):u(i,s,a,o)}};return[this.registerProvider(t,n),n]}registerProvider(e,t){return ox.languages.registerReferenceProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),t)}};Hc.ReferencesFeature=Ah});var bw=B(Wc=>{"use strict";Object.defineProperty(Wc,"__esModule",{value:!0});Wc.CodeActionFeature=void 0;var cx=require("vscode"),Qn=Ne(),ux=kt(),Oh=Ze(),$h=class extends Oh.TextDocumentLanguageFeature{constructor(e){super(e,Qn.CodeActionRequest.type)}fillClientCapabilities(e){let t=(0,Oh.ensure)((0,Oh.ensure)(e,"textDocument"),"codeAction");t.dynamicRegistration=!0,t.isPreferredSupport=!0,t.disabledSupport=!0,t.dataSupport=!0,t.resolveSupport={properties:["edit"]},t.codeActionLiteralSupport={codeActionKind:{valueSet:[Qn.CodeActionKind.Empty,Qn.CodeActionKind.QuickFix,Qn.CodeActionKind.Refactor,Qn.CodeActionKind.RefactorExtract,Qn.CodeActionKind.RefactorInline,Qn.CodeActionKind.RefactorRewrite,Qn.CodeActionKind.Source,Qn.CodeActionKind.SourceOrganizeImports]}},t.honorsChangeAnnotations=!0}initialize(e,t){let n=this.getRegistrationOptions(t,e.codeActionProvider);n&&this.register({id:ux.generateUuid(),registerOptions:n})}registerLanguageProvider(e){let t=e.documentSelector,n={provideCodeActions:(i,s,a,o)=>{let c=this._client,u=async(b,f,_,m)=>{let p={textDocument:c.code2ProtocolConverter.asTextDocumentIdentifier(b),range:c.code2ProtocolConverter.asRange(f),context:c.code2ProtocolConverter.asCodeActionContextSync(_)};return c.sendRequest(Qn.CodeActionRequest.type,p,m).then(g=>m.isCancellationRequested||g===null||g===void 0?null:c.protocol2CodeConverter.asCodeActionResult(g,m),g=>c.handleFailedRequest(Qn.CodeActionRequest.type,m,g,null))},l=c.middleware;return l.provideCodeActions?l.provideCodeActions(i,s,a,o,u):u(i,s,a,o)},resolveCodeAction:e.resolveProvider?(i,s)=>{let a=this._client,o=this._client.middleware,c=async(u,l)=>a.sendRequest(Qn.CodeActionResolveRequest.type,a.code2ProtocolConverter.asCodeActionSync(u),l).then(b=>l.isCancellationRequested?u:a.protocol2CodeConverter.asCodeAction(b,l),b=>a.handleFailedRequest(Qn.CodeActionResolveRequest.type,l,b,u));return o.resolveCodeAction?o.resolveCodeAction(i,s,c):c(i,s)}:void 0};return[cx.languages.registerCodeActionsProvider(this._client.protocol2CodeConverter.asDocumentSelector(t),n,e.codeActionKinds?{providedCodeActionKinds:this._client.protocol2CodeConverter.asCodeActionKinds(e.codeActionKinds)}:void 0),n]}};Wc.CodeActionFeature=$h});var yw=B(Kc=>{"use strict";Object.defineProperty(Kc,"__esModule",{value:!0});Kc.CodeLensFeature=void 0;var vw=require("vscode"),Os=Ne(),lx=kt(),Fo=Ze(),Nh=class extends Fo.TextDocumentLanguageFeature{constructor(e){super(e,Os.CodeLensRequest.type)}fillClientCapabilities(e){(0,Fo.ensure)((0,Fo.ensure)(e,"textDocument"),"codeLens").dynamicRegistration=!0,(0,Fo.ensure)((0,Fo.ensure)(e,"workspace"),"codeLens").refreshSupport=!0}initialize(e,t){this._client.onRequest(Os.CodeLensRefreshRequest.type,async()=>{for(let s of this.getAllProviders())s.onDidChangeCodeLensEmitter.fire()});let i=this.getRegistrationOptions(t,e.codeLensProvider);i&&this.register({id:lx.generateUuid(),registerOptions:i})}registerLanguageProvider(e){let t=e.documentSelector,n=new vw.EventEmitter,i={onDidChangeCodeLenses:n.event,provideCodeLenses:(s,a)=>{let o=this._client,c=(l,b)=>o.sendRequest(Os.CodeLensRequest.type,o.code2ProtocolConverter.asCodeLensParams(l),b).then(f=>b.isCancellationRequested?null:o.protocol2CodeConverter.asCodeLenses(f,b),f=>o.handleFailedRequest(Os.CodeLensRequest.type,b,f,null)),u=o.middleware;return u.provideCodeLenses?u.provideCodeLenses(s,a,c):c(s,a)},resolveCodeLens:e.resolveProvider?(s,a)=>{let o=this._client,c=(l,b)=>o.sendRequest(Os.CodeLensResolveRequest.type,o.code2ProtocolConverter.asCodeLens(l),b).then(f=>b.isCancellationRequested?l:o.protocol2CodeConverter.asCodeLens(f),f=>o.handleFailedRequest(Os.CodeLensResolveRequest.type,b,f,l)),u=o.middleware;return u.resolveCodeLens?u.resolveCodeLens(s,a,c):c(s,a)}:void 0};return[vw.languages.registerCodeLensProvider(this._client.protocol2CodeConverter.asDocumentSelector(t),i),{provider:i,onDidChangeCodeLensEmitter:n}]}};Kc.CodeLensFeature=Nh});var ww=B(pi=>{"use strict";Object.defineProperty(pi,"__esModule",{value:!0});pi.DocumentOnTypeFormattingFeature=pi.DocumentRangeFormattingFeature=pi.DocumentFormattingFeature=void 0;var Xc=require("vscode"),vr=Ne(),Fh=kt(),Br=Ze(),$s;(function(r){function e(t){let n=Xc.workspace.getConfiguration("files",t);return{trimTrailingWhitespace:n.get("trimTrailingWhitespace"),trimFinalNewlines:n.get("trimFinalNewlines"),insertFinalNewline:n.get("insertFinalNewline")}}r.fromConfiguration=e})($s||($s={}));var qh=class extends Br.TextDocumentLanguageFeature{constructor(e){super(e,vr.DocumentFormattingRequest.type)}fillClientCapabilities(e){(0,Br.ensure)((0,Br.ensure)(e,"textDocument"),"formatting").dynamicRegistration=!0}initialize(e,t){let n=this.getRegistrationOptions(t,e.documentFormattingProvider);n&&this.register({id:Fh.generateUuid(),registerOptions:n})}registerLanguageProvider(e){let t=e.documentSelector,n={provideDocumentFormattingEdits:(i,s,a)=>{let o=this._client,c=(l,b,f)=>{let _={textDocument:o.code2ProtocolConverter.asTextDocumentIdentifier(l),options:o.code2ProtocolConverter.asFormattingOptions(b,$s.fromConfiguration(l))};return o.sendRequest(vr.DocumentFormattingRequest.type,_,f).then(m=>f.isCancellationRequested?null:o.protocol2CodeConverter.asTextEdits(m,f),m=>o.handleFailedRequest(vr.DocumentFormattingRequest.type,f,m,null))},u=o.middleware;return u.provideDocumentFormattingEdits?u.provideDocumentFormattingEdits(i,s,a,c):c(i,s,a)}};return[Xc.languages.registerDocumentFormattingEditProvider(this._client.protocol2CodeConverter.asDocumentSelector(t),n),n]}};pi.DocumentFormattingFeature=qh;var Lh=class extends Br.TextDocumentLanguageFeature{constructor(e){super(e,vr.DocumentRangeFormattingRequest.type)}fillClientCapabilities(e){let t=(0,Br.ensure)((0,Br.ensure)(e,"textDocument"),"rangeFormatting");t.dynamicRegistration=!0,t.rangesSupport=!0}initialize(e,t){let n=this.getRegistrationOptions(t,e.documentRangeFormattingProvider);n&&this.register({id:Fh.generateUuid(),registerOptions:n})}registerLanguageProvider(e){let t=e.documentSelector,n={provideDocumentRangeFormattingEdits:(i,s,a,o)=>{let c=this._client,u=(b,f,_,m)=>{let p={textDocument:c.code2ProtocolConverter.asTextDocumentIdentifier(b),range:c.code2ProtocolConverter.asRange(f),options:c.code2ProtocolConverter.asFormattingOptions(_,$s.fromConfiguration(b))};return c.sendRequest(vr.DocumentRangeFormattingRequest.type,p,m).then(g=>m.isCancellationRequested?null:c.protocol2CodeConverter.asTextEdits(g,m),g=>c.handleFailedRequest(vr.DocumentRangeFormattingRequest.type,m,g,null))},l=c.middleware;return l.provideDocumentRangeFormattingEdits?l.provideDocumentRangeFormattingEdits(i,s,a,o,u):u(i,s,a,o)}};return e.rangesSupport&&(n.provideDocumentRangesFormattingEdits=(i,s,a,o)=>{let c=this._client,u=(b,f,_,m)=>{let p={textDocument:c.code2ProtocolConverter.asTextDocumentIdentifier(b),ranges:c.code2ProtocolConverter.asRanges(f),options:c.code2ProtocolConverter.asFormattingOptions(_,$s.fromConfiguration(b))};return c.sendRequest(vr.DocumentRangesFormattingRequest.type,p,m).then(g=>m.isCancellationRequested?null:c.protocol2CodeConverter.asTextEdits(g,m),g=>c.handleFailedRequest(vr.DocumentRangesFormattingRequest.type,m,g,null))},l=c.middleware;return l.provideDocumentRangesFormattingEdits?l.provideDocumentRangesFormattingEdits(i,s,a,o,u):u(i,s,a,o)}),[Xc.languages.registerDocumentRangeFormattingEditProvider(this._client.protocol2CodeConverter.asDocumentSelector(t),n),n]}};pi.DocumentRangeFormattingFeature=Lh;var Mh=class extends Br.TextDocumentLanguageFeature{constructor(e){super(e,vr.DocumentOnTypeFormattingRequest.type)}fillClientCapabilities(e){(0,Br.ensure)((0,Br.ensure)(e,"textDocument"),"onTypeFormatting").dynamicRegistration=!0}initialize(e,t){let n=this.getRegistrationOptions(t,e.documentOnTypeFormattingProvider);n&&this.register({id:Fh.generateUuid(),registerOptions:n})}registerLanguageProvider(e){let t=e.documentSelector,n={provideOnTypeFormattingEdits:(s,a,o,c,u)=>{let l=this._client,b=(_,m,p,g,R)=>{let D={textDocument:l.code2ProtocolConverter.asTextDocumentIdentifier(_),position:l.code2ProtocolConverter.asPosition(m),ch:p,options:l.code2ProtocolConverter.asFormattingOptions(g,$s.fromConfiguration(_))};return l.sendRequest(vr.DocumentOnTypeFormattingRequest.type,D,R).then(y=>R.isCancellationRequested?null:l.protocol2CodeConverter.asTextEdits(y,R),y=>l.handleFailedRequest(vr.DocumentOnTypeFormattingRequest.type,R,y,null))},f=l.middleware;return f.provideOnTypeFormattingEdits?f.provideOnTypeFormattingEdits(s,a,o,c,u,b):b(s,a,o,c,u)}},i=e.moreTriggerCharacter||[];return[Xc.languages.registerOnTypeFormattingEditProvider(this._client.protocol2CodeConverter.asDocumentSelector(t),n,e.firstTriggerCharacter,...i),n]}};pi.DocumentOnTypeFormattingFeature=Mh});var Rw=B(Yc=>{"use strict";Object.defineProperty(Yc,"__esModule",{value:!0});Yc.RenameFeature=void 0;var dx=require("vscode"),qi=Ne(),fx=kt(),Cw=ir(),jh=Ze(),Uh=class extends jh.TextDocumentLanguageFeature{constructor(e){super(e,qi.RenameRequest.type)}fillClientCapabilities(e){let t=(0,jh.ensure)((0,jh.ensure)(e,"textDocument"),"rename");t.dynamicRegistration=!0,t.prepareSupport=!0,t.prepareSupportDefaultBehavior=qi.PrepareSupportDefaultBehavior.Identifier,t.honorsChangeAnnotations=!0}initialize(e,t){let n=this.getRegistrationOptions(t,e.renameProvider);n&&(Cw.boolean(e.renameProvider)&&(n.prepareProvider=!1),this.register({id:fx.generateUuid(),registerOptions:n}))}registerLanguageProvider(e){let t=e.documentSelector,n={provideRenameEdits:(i,s,a,o)=>{let c=this._client,u=(b,f,_,m)=>{let p={textDocument:c.code2ProtocolConverter.asTextDocumentIdentifier(b),position:c.code2ProtocolConverter.asPosition(f),newName:_};return c.sendRequest(qi.RenameRequest.type,p,m).then(g=>m.isCancellationRequested?null:c.protocol2CodeConverter.asWorkspaceEdit(g,m),g=>c.handleFailedRequest(qi.RenameRequest.type,m,g,null,!1))},l=c.middleware;return l.provideRenameEdits?l.provideRenameEdits(i,s,a,o,u):u(i,s,a,o)},prepareRename:e.prepareProvider?(i,s,a)=>{let o=this._client,c=(l,b,f)=>{let _={textDocument:o.code2ProtocolConverter.asTextDocumentIdentifier(l),position:o.code2ProtocolConverter.asPosition(b)};return o.sendRequest(qi.PrepareRenameRequest.type,_,f).then(m=>f.isCancellationRequested?null:qi.Range.is(m)?o.protocol2CodeConverter.asRange(m):this.isDefaultBehavior(m)?m.defaultBehavior===!0?null:Promise.reject(new Error("The element can't be renamed.")):m&&qi.Range.is(m.range)?{range:o.protocol2CodeConverter.asRange(m.range),placeholder:m.placeholder}:Promise.reject(new Error("The element can't be renamed.")),m=>{throw typeof m.message=="string"?new Error(m.message):new Error("The element can't be renamed.")})},u=o.middleware;return u.prepareRename?u.prepareRename(i,s,a,c):c(i,s,a)}:void 0};return[this.registerProvider(t,n),n]}registerProvider(e,t){return dx.languages.registerRenameProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),t)}isDefaultBehavior(e){let t=e;return t&&Cw.boolean(t.defaultBehavior)}};Yc.RenameFeature=Uh});var Sw=B(Qc=>{"use strict";Object.defineProperty(Qc,"__esModule",{value:!0});Qc.DocumentLinkFeature=void 0;var hx=require("vscode"),jo=Ne(),Bh=Ze(),px=kt(),Vh=class extends Bh.TextDocumentLanguageFeature{constructor(e){super(e,jo.DocumentLinkRequest.type)}fillClientCapabilities(e){let t=(0,Bh.ensure)((0,Bh.ensure)(e,"textDocument"),"documentLink");t.dynamicRegistration=!0,t.tooltipSupport=!0}initialize(e,t){let n=this.getRegistrationOptions(t,e.documentLinkProvider);n&&this.register({id:px.generateUuid(),registerOptions:n})}registerLanguageProvider(e){let t=e.documentSelector,n={provideDocumentLinks:(i,s)=>{let a=this._client,o=(u,l)=>a.sendRequest(jo.DocumentLinkRequest.type,a.code2ProtocolConverter.asDocumentLinkParams(u),l).then(b=>l.isCancellationRequested?null:a.protocol2CodeConverter.asDocumentLinks(b,l),b=>a.handleFailedRequest(jo.DocumentLinkRequest.type,l,b,null)),c=a.middleware;return c.provideDocumentLinks?c.provideDocumentLinks(i,s,o):o(i,s)},resolveDocumentLink:e.resolveProvider?(i,s)=>{let a=this._client,o=(u,l)=>a.sendRequest(jo.DocumentLinkResolveRequest.type,a.code2ProtocolConverter.asDocumentLink(u),l).then(b=>l.isCancellationRequested?u:a.protocol2CodeConverter.asDocumentLink(b),b=>a.handleFailedRequest(jo.DocumentLinkResolveRequest.type,l,b,u)),c=a.middleware;return c.resolveDocumentLink?c.resolveDocumentLink(i,s,o):o(i,s)}:void 0};return[hx.languages.registerDocumentLinkProvider(this._client.protocol2CodeConverter.asDocumentSelector(t),n),n]}};Qc.DocumentLinkFeature=Vh});var xw=B(Zc=>{"use strict";Object.defineProperty(Zc,"__esModule",{value:!0});Zc.ExecuteCommandFeature=void 0;var gx=require("vscode"),zh=Ne(),mx=kt(),Dw=Ze(),Gh=class{constructor(e){this._client=e,this._commands=new Map}getState(){return{kind:"workspace",id:this.registrationType.method,registrations:this._commands.size>0}}get registrationType(){return zh.ExecuteCommandRequest.type}fillClientCapabilities(e){(0,Dw.ensure)((0,Dw.ensure)(e,"workspace"),"executeCommand").dynamicRegistration=!0}initialize(e){e.executeCommandProvider&&this.register({id:mx.generateUuid(),registerOptions:Object.assign({},e.executeCommandProvider)})}register(e){let t=this._client,n=t.middleware,i=(s,a)=>{let o={command:s,arguments:a};return t.sendRequest(zh.ExecuteCommandRequest.type,o).then(void 0,c=>t.handleFailedRequest(zh.ExecuteCommandRequest.type,void 0,c,void 0))};if(e.registerOptions.commands){let s=[];for(let a of e.registerOptions.commands)s.push(gx.commands.registerCommand(a,(...o)=>n.executeCommand?n.executeCommand(a,o,i):i(a,o)));this._commands.set(e.id,s)}}unregister(e){let t=this._commands.get(e);t&&t.forEach(n=>n.dispose())}clear(){this._commands.forEach(e=>{e.forEach(t=>t.dispose())}),this._commands.clear()}};Zc.ExecuteCommandFeature=Gh});var kw=B(eu=>{"use strict";Object.defineProperty(eu,"__esModule",{value:!0});eu.FileSystemWatcherFeature=void 0;var _x=require("vscode"),Li=Ne(),Jc=Ze(),Hh=class{constructor(e,t){this._client=e,this._notifyFileEvent=t,this._watchers=new Map}getState(){return{kind:"workspace",id:this.registrationType.method,registrations:this._watchers.size>0}}get registrationType(){return Li.DidChangeWatchedFilesNotification.type}fillClientCapabilities(e){(0,Jc.ensure)((0,Jc.ensure)(e,"workspace"),"didChangeWatchedFiles").dynamicRegistration=!0,(0,Jc.ensure)((0,Jc.ensure)(e,"workspace"),"didChangeWatchedFiles").relativePatternSupport=!0}initialize(e,t){}register(e){if(!Array.isArray(e.registerOptions.watchers))return;let t=[];for(let n of e.registerOptions.watchers){let i=this._client.protocol2CodeConverter.asGlobPattern(n.globPattern);if(i===void 0)continue;let s=!0,a=!0,o=!0;n.kind!==void 0&&n.kind!==null&&(s=(n.kind&Li.WatchKind.Create)!==0,a=(n.kind&Li.WatchKind.Change)!==0,o=(n.kind&Li.WatchKind.Delete)!==0);let c=_x.workspace.createFileSystemWatcher(i,!s,!a,!o);this.hookListeners(c,s,a,o,t),t.push(c)}this._watchers.set(e.id,t)}registerRaw(e,t){let n=[];for(let i of t)this.hookListeners(i,!0,!0,!0,n);this._watchers.set(e,n)}hookListeners(e,t,n,i,s){t&&e.onDidCreate(a=>this._notifyFileEvent({uri:this._client.code2ProtocolConverter.asUri(a),type:Li.FileChangeType.Created}),null,s),n&&e.onDidChange(a=>this._notifyFileEvent({uri:this._client.code2ProtocolConverter.asUri(a),type:Li.FileChangeType.Changed}),null,s),i&&e.onDidDelete(a=>this._notifyFileEvent({uri:this._client.code2ProtocolConverter.asUri(a),type:Li.FileChangeType.Deleted}),null,s)}unregister(e){let t=this._watchers.get(e);if(t)for(let n of t)n.dispose()}clear(){this._watchers.forEach(e=>{for(let t of e)t.dispose()}),this._watchers.clear()}};eu.FileSystemWatcherFeature=Hh});var Pw=B(tu=>{"use strict";Object.defineProperty(tu,"__esModule",{value:!0});tu.ColorProviderFeature=void 0;var bx=require("vscode"),Uo=Ne(),Wh=Ze(),Kh=class extends Wh.TextDocumentLanguageFeature{constructor(e){super(e,Uo.DocumentColorRequest.type)}fillClientCapabilities(e){(0,Wh.ensure)((0,Wh.ensure)(e,"textDocument"),"colorProvider").dynamicRegistration=!0}initialize(e,t){let[n,i]=this.getRegistration(t,e.colorProvider);!n||!i||this.register({id:n,registerOptions:i})}registerLanguageProvider(e){let t=e.documentSelector,n={provideColorPresentations:(i,s,a)=>{let o=this._client,c=(l,b,f)=>{let _={color:l,textDocument:o.code2ProtocolConverter.asTextDocumentIdentifier(b.document),range:o.code2ProtocolConverter.asRange(b.range)};return o.sendRequest(Uo.ColorPresentationRequest.type,_,f).then(m=>f.isCancellationRequested?null:this._client.protocol2CodeConverter.asColorPresentations(m,f),m=>o.handleFailedRequest(Uo.ColorPresentationRequest.type,f,m,null))},u=o.middleware;return u.provideColorPresentations?u.provideColorPresentations(i,s,a,c):c(i,s,a)},provideDocumentColors:(i,s)=>{let a=this._client,o=(u,l)=>{let b={textDocument:a.code2ProtocolConverter.asTextDocumentIdentifier(u)};return a.sendRequest(Uo.DocumentColorRequest.type,b,l).then(f=>l.isCancellationRequested?null:this._client.protocol2CodeConverter.asColorInformations(f,l),f=>a.handleFailedRequest(Uo.DocumentColorRequest.type,l,f,null))},c=a.middleware;return c.provideDocumentColors?c.provideDocumentColors(i,s,o):o(i,s)}};return[bx.languages.registerColorProvider(this._client.protocol2CodeConverter.asDocumentSelector(t),n),n]}};tu.ColorProviderFeature=Kh});var Tw=B(nu=>{"use strict";Object.defineProperty(nu,"__esModule",{value:!0});nu.ImplementationFeature=void 0;var vx=require("vscode"),Xh=Ne(),Yh=Ze(),Qh=class extends Yh.TextDocumentLanguageFeature{constructor(e){super(e,Xh.ImplementationRequest.type)}fillClientCapabilities(e){let t=(0,Yh.ensure)((0,Yh.ensure)(e,"textDocument"),"implementation");t.dynamicRegistration=!0,t.linkSupport=!0}initialize(e,t){let[n,i]=this.getRegistration(t,e.implementationProvider);!n||!i||this.register({id:n,registerOptions:i})}registerLanguageProvider(e){let t=e.documentSelector,n={provideImplementation:(i,s,a)=>{let o=this._client,c=(l,b,f)=>o.sendRequest(Xh.ImplementationRequest.type,o.code2ProtocolConverter.asTextDocumentPositionParams(l,b),f).then(_=>f.isCancellationRequested?null:o.protocol2CodeConverter.asDefinitionResult(_,f),_=>o.handleFailedRequest(Xh.ImplementationRequest.type,f,_,null)),u=o.middleware;return u.provideImplementation?u.provideImplementation(i,s,a,c):c(i,s,a)}};return[this.registerProvider(t,n),n]}registerProvider(e,t){return vx.languages.registerImplementationProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),t)}};nu.ImplementationFeature=Qh});var Ew=B(ru=>{"use strict";Object.defineProperty(ru,"__esModule",{value:!0});ru.TypeDefinitionFeature=void 0;var yx=require("vscode"),Zh=Ne(),Bo=Ze(),Jh=class extends Bo.TextDocumentLanguageFeature{constructor(e){super(e,Zh.TypeDefinitionRequest.type)}fillClientCapabilities(e){(0,Bo.ensure)((0,Bo.ensure)(e,"textDocument"),"typeDefinition").dynamicRegistration=!0;let t=(0,Bo.ensure)((0,Bo.ensure)(e,"textDocument"),"typeDefinition");t.dynamicRegistration=!0,t.linkSupport=!0}initialize(e,t){let[n,i]=this.getRegistration(t,e.typeDefinitionProvider);!n||!i||this.register({id:n,registerOptions:i})}registerLanguageProvider(e){let t=e.documentSelector,n={provideTypeDefinition:(i,s,a)=>{let o=this._client,c=(l,b,f)=>o.sendRequest(Zh.TypeDefinitionRequest.type,o.code2ProtocolConverter.asTextDocumentPositionParams(l,b),f).then(_=>f.isCancellationRequested?null:o.protocol2CodeConverter.asDefinitionResult(_,f),_=>o.handleFailedRequest(Zh.TypeDefinitionRequest.type,f,_,null)),u=o.middleware;return u.provideTypeDefinition?u.provideTypeDefinition(i,s,a,c):c(i,s,a)}};return[this.registerProvider(t,n),n]}registerProvider(e,t){return yx.languages.registerTypeDefinitionProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),t)}};ru.TypeDefinitionFeature=Jh});var Iw=B(Ns=>{"use strict";Object.defineProperty(Ns,"__esModule",{value:!0});Ns.WorkspaceFoldersFeature=Ns.arrayDiff=void 0;var wx=kt(),iu=require("vscode"),Vo=Ne();function ep(r,e){if(r!=null)return r[e]}function tp(r,e){return r.filter(t=>e.indexOf(t)<0)}Ns.arrayDiff=tp;var np=class{constructor(e){this._client=e,this._listeners=new Map}getState(){return{kind:"workspace",id:this.registrationType.method,registrations:this._listeners.size>0}}get registrationType(){return Vo.DidChangeWorkspaceFoldersNotification.type}fillInitializeParams(e){let t=iu.workspace.workspaceFolders;this.initializeWithFolders(t),t===void 0?e.workspaceFolders=null:e.workspaceFolders=t.map(n=>this.asProtocol(n))}initializeWithFolders(e){this._initialFolders=e}fillClientCapabilities(e){e.workspace=e.workspace||{},e.workspace.workspaceFolders=!0}initialize(e){let t=this._client;t.onRequest(Vo.WorkspaceFoldersRequest.type,s=>{let a=()=>{let c=iu.workspace.workspaceFolders;return c===void 0?null:c.map(l=>this.asProtocol(l))},o=t.middleware.workspace;return o&&o.workspaceFolders?o.workspaceFolders(s,a):a(s)});let n=ep(ep(ep(e,"workspace"),"workspaceFolders"),"changeNotifications"),i;typeof n=="string"?i=n:n===!0&&(i=wx.generateUuid()),i&&this.register({id:i,registerOptions:void 0})}sendInitialEvent(e){let t;if(this._initialFolders&&e){let n=tp(this._initialFolders,e),i=tp(e,this._initialFolders);(i.length>0||n.length>0)&&(t=this.doSendEvent(i,n))}else this._initialFolders?t=this.doSendEvent([],this._initialFolders):e&&(t=this.doSendEvent(e,[]));t!==void 0&&t.catch(n=>{this._client.error(`Sending notification ${Vo.DidChangeWorkspaceFoldersNotification.type.method} failed`,n)})}doSendEvent(e,t){let n={event:{added:e.map(i=>this.asProtocol(i)),removed:t.map(i=>this.asProtocol(i))}};return this._client.sendNotification(Vo.DidChangeWorkspaceFoldersNotification.type,n)}register(e){let t=e.id,n=this._client,i=iu.workspace.onDidChangeWorkspaceFolders(s=>{let a=u=>this.doSendEvent(u.added,u.removed),o=n.middleware.workspace;(o&&o.didChangeWorkspaceFolders?o.didChangeWorkspaceFolders(s,a):a(s)).catch(u=>{this._client.error(`Sending notification ${Vo.DidChangeWorkspaceFoldersNotification.type.method} failed`,u)})});this._listeners.set(t,i),this.sendInitialEvent(iu.workspace.workspaceFolders)}unregister(e){let t=this._listeners.get(e);t!==void 0&&(this._listeners.delete(e),t.dispose())}clear(){for(let e of this._listeners.values())e.dispose();this._listeners.clear()}asProtocol(e){return e===void 0?null:{uri:this._client.code2ProtocolConverter.asUri(e.uri),name:e.name}}};Ns.WorkspaceFoldersFeature=np});var Ow=B(su=>{"use strict";Object.defineProperty(su,"__esModule",{value:!0});su.FoldingRangeFeature=void 0;var Aw=require("vscode"),Mi=Ne(),zo=Ze(),rp=class extends zo.TextDocumentLanguageFeature{constructor(e){super(e,Mi.FoldingRangeRequest.type)}fillClientCapabilities(e){let t=(0,zo.ensure)((0,zo.ensure)(e,"textDocument"),"foldingRange");t.dynamicRegistration=!0,t.rangeLimit=5e3,t.lineFoldingOnly=!0,t.foldingRangeKind={valueSet:[Mi.FoldingRangeKind.Comment,Mi.FoldingRangeKind.Imports,Mi.FoldingRangeKind.Region]},t.foldingRange={collapsedText:!1},(0,zo.ensure)((0,zo.ensure)(e,"workspace"),"foldingRange").refreshSupport=!0}initialize(e,t){this._client.onRequest(Mi.FoldingRangeRefreshRequest.type,async()=>{for(let s of this.getAllProviders())s.onDidChangeFoldingRange.fire()});let[n,i]=this.getRegistration(t,e.foldingRangeProvider);!n||!i||this.register({id:n,registerOptions:i})}registerLanguageProvider(e){let t=e.documentSelector,n=new Aw.EventEmitter,i={onDidChangeFoldingRanges:n.event,provideFoldingRanges:(s,a,o)=>{let c=this._client,u=(b,f,_)=>{let m={textDocument:c.code2ProtocolConverter.asTextDocumentIdentifier(b)};return c.sendRequest(Mi.FoldingRangeRequest.type,m,_).then(p=>_.isCancellationRequested?null:c.protocol2CodeConverter.asFoldingRanges(p,_),p=>c.handleFailedRequest(Mi.FoldingRangeRequest.type,_,p,null))},l=c.middleware;return l.provideFoldingRanges?l.provideFoldingRanges(s,a,o,u):u(s,a,o)}};return[Aw.languages.registerFoldingRangeProvider(this._client.protocol2CodeConverter.asDocumentSelector(t),i),{provider:i,onDidChangeFoldingRange:n}]}};su.FoldingRangeFeature=rp});var $w=B(ou=>{"use strict";Object.defineProperty(ou,"__esModule",{value:!0});ou.DeclarationFeature=void 0;var Cx=require("vscode"),ip=Ne(),sp=Ze(),op=class extends sp.TextDocumentLanguageFeature{constructor(e){super(e,ip.DeclarationRequest.type)}fillClientCapabilities(e){let t=(0,sp.ensure)((0,sp.ensure)(e,"textDocument"),"declaration");t.dynamicRegistration=!0,t.linkSupport=!0}initialize(e,t){let[n,i]=this.getRegistration(t,e.declarationProvider);!n||!i||this.register({id:n,registerOptions:i})}registerLanguageProvider(e){let t=e.documentSelector,n={provideDeclaration:(i,s,a)=>{let o=this._client,c=(l,b,f)=>o.sendRequest(ip.DeclarationRequest.type,o.code2ProtocolConverter.asTextDocumentPositionParams(l,b),f).then(_=>f.isCancellationRequested?null:o.protocol2CodeConverter.asDeclarationResult(_,f),_=>o.handleFailedRequest(ip.DeclarationRequest.type,f,_,null)),u=o.middleware;return u.provideDeclaration?u.provideDeclaration(i,s,a,c):c(i,s,a)}};return[this.registerProvider(t,n),n]}registerProvider(e,t){return Cx.languages.registerDeclarationProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),t)}};ou.DeclarationFeature=op});var Nw=B(au=>{"use strict";Object.defineProperty(au,"__esModule",{value:!0});au.SelectionRangeFeature=void 0;var Rx=require("vscode"),ap=Ne(),cp=Ze(),up=class extends cp.TextDocumentLanguageFeature{constructor(e){super(e,ap.SelectionRangeRequest.type)}fillClientCapabilities(e){let t=(0,cp.ensure)((0,cp.ensure)(e,"textDocument"),"selectionRange");t.dynamicRegistration=!0}initialize(e,t){let[n,i]=this.getRegistration(t,e.selectionRangeProvider);!n||!i||this.register({id:n,registerOptions:i})}registerLanguageProvider(e){let t=e.documentSelector,n={provideSelectionRanges:(i,s,a)=>{let o=this._client,c=async(l,b,f)=>{let _={textDocument:o.code2ProtocolConverter.asTextDocumentIdentifier(l),positions:o.code2ProtocolConverter.asPositionsSync(b,f)};return o.sendRequest(ap.SelectionRangeRequest.type,_,f).then(m=>f.isCancellationRequested?null:o.protocol2CodeConverter.asSelectionRanges(m,f),m=>o.handleFailedRequest(ap.SelectionRangeRequest.type,f,m,null))},u=o.middleware;return u.provideSelectionRanges?u.provideSelectionRanges(i,s,a,c):c(i,s,a)}};return[this.registerProvider(t,n),n]}registerProvider(e,t){return Rx.languages.registerSelectionRangeProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),t)}};au.SelectionRangeFeature=up});var Lw=B(cu=>{"use strict";Object.defineProperty(cu,"__esModule",{value:!0});cu.ProgressFeature=void 0;var qw=Ne(),Sx=qf();function Dx(r,e){return r[e]===void 0&&(r[e]=Object.create(null)),r[e]}var lp=class{constructor(e){this._client=e,this.activeParts=new Set}getState(){return{kind:"window",id:qw.WorkDoneProgressCreateRequest.method,registrations:this.activeParts.size>0}}fillClientCapabilities(e){Dx(e,"window").workDoneProgress=!0}initialize(){let e=this._client,t=i=>{this.activeParts.delete(i)},n=i=>{this.activeParts.add(new Sx.ProgressPart(this._client,i.token,t))};e.onRequest(qw.WorkDoneProgressCreateRequest.type,n)}clear(){for(let e of this.activeParts)e.done();this.activeParts.clear()}};cu.ProgressFeature=lp});var Mw=B(uu=>{"use strict";Object.defineProperty(uu,"__esModule",{value:!0});uu.CallHierarchyFeature=void 0;var xx=require("vscode"),Fi=Ne(),dp=Ze(),fp=class{constructor(e){this.client=e,this.middleware=e.middleware}prepareCallHierarchy(e,t,n){let i=this.client,s=this.middleware,a=(o,c,u)=>{let l=i.code2ProtocolConverter.asTextDocumentPositionParams(o,c);return i.sendRequest(Fi.CallHierarchyPrepareRequest.type,l,u).then(b=>u.isCancellationRequested?null:i.protocol2CodeConverter.asCallHierarchyItems(b,u),b=>i.handleFailedRequest(Fi.CallHierarchyPrepareRequest.type,u,b,null))};return s.prepareCallHierarchy?s.prepareCallHierarchy(e,t,n,a):a(e,t,n)}provideCallHierarchyIncomingCalls(e,t){let n=this.client,i=this.middleware,s=(a,o)=>{let c={item:n.code2ProtocolConverter.asCallHierarchyItem(a)};return n.sendRequest(Fi.CallHierarchyIncomingCallsRequest.type,c,o).then(u=>o.isCancellationRequested?null:n.protocol2CodeConverter.asCallHierarchyIncomingCalls(u,o),u=>n.handleFailedRequest(Fi.CallHierarchyIncomingCallsRequest.type,o,u,null))};return i.provideCallHierarchyIncomingCalls?i.provideCallHierarchyIncomingCalls(e,t,s):s(e,t)}provideCallHierarchyOutgoingCalls(e,t){let n=this.client,i=this.middleware,s=(a,o)=>{let c={item:n.code2ProtocolConverter.asCallHierarchyItem(a)};return n.sendRequest(Fi.CallHierarchyOutgoingCallsRequest.type,c,o).then(u=>o.isCancellationRequested?null:n.protocol2CodeConverter.asCallHierarchyOutgoingCalls(u,o),u=>n.handleFailedRequest(Fi.CallHierarchyOutgoingCallsRequest.type,o,u,null))};return i.provideCallHierarchyOutgoingCalls?i.provideCallHierarchyOutgoingCalls(e,t,s):s(e,t)}},hp=class extends dp.TextDocumentLanguageFeature{constructor(e){super(e,Fi.CallHierarchyPrepareRequest.type)}fillClientCapabilities(e){let t=e,n=(0,dp.ensure)((0,dp.ensure)(t,"textDocument"),"callHierarchy");n.dynamicRegistration=!0}initialize(e,t){let[n,i]=this.getRegistration(t,e.callHierarchyProvider);!n||!i||this.register({id:n,registerOptions:i})}registerLanguageProvider(e){let t=this._client,n=new fp(t);return[xx.languages.registerCallHierarchyProvider(this._client.protocol2CodeConverter.asDocumentSelector(e.documentSelector),n),n]}};uu.CallHierarchyFeature=hp});var Fw=B(du=>{"use strict";Object.defineProperty(du,"__esModule",{value:!0});du.SemanticTokensFeature=void 0;var lu=require("vscode"),Fe=Ne(),Go=Ze(),kx=ir(),pp=class extends Go.TextDocumentLanguageFeature{constructor(e){super(e,Fe.SemanticTokensRegistrationType.type)}fillClientCapabilities(e){let t=(0,Go.ensure)((0,Go.ensure)(e,"textDocument"),"semanticTokens");t.dynamicRegistration=!0,t.tokenTypes=[Fe.SemanticTokenTypes.namespace,Fe.SemanticTokenTypes.type,Fe.SemanticTokenTypes.class,Fe.SemanticTokenTypes.enum,Fe.SemanticTokenTypes.interface,Fe.SemanticTokenTypes.struct,Fe.SemanticTokenTypes.typeParameter,Fe.SemanticTokenTypes.parameter,Fe.SemanticTokenTypes.variable,Fe.SemanticTokenTypes.property,Fe.SemanticTokenTypes.enumMember,Fe.SemanticTokenTypes.event,Fe.SemanticTokenTypes.function,Fe.SemanticTokenTypes.method,Fe.SemanticTokenTypes.macro,Fe.SemanticTokenTypes.keyword,Fe.SemanticTokenTypes.modifier,Fe.SemanticTokenTypes.comment,Fe.SemanticTokenTypes.string,Fe.SemanticTokenTypes.number,Fe.SemanticTokenTypes.regexp,Fe.SemanticTokenTypes.operator,Fe.SemanticTokenTypes.decorator],t.tokenModifiers=[Fe.SemanticTokenModifiers.declaration,Fe.SemanticTokenModifiers.definition,Fe.SemanticTokenModifiers.readonly,Fe.SemanticTokenModifiers.static,Fe.SemanticTokenModifiers.deprecated,Fe.SemanticTokenModifiers.abstract,Fe.SemanticTokenModifiers.async,Fe.SemanticTokenModifiers.modification,Fe.SemanticTokenModifiers.documentation,Fe.SemanticTokenModifiers.defaultLibrary],t.formats=[Fe.TokenFormat.Relative],t.requests={range:!0,full:{delta:!0}},t.multilineTokenSupport=!1,t.overlappingTokenSupport=!1,t.serverCancelSupport=!0,t.augmentsSyntaxTokens=!0,(0,Go.ensure)((0,Go.ensure)(e,"workspace"),"semanticTokens").refreshSupport=!0}initialize(e,t){this._client.onRequest(Fe.SemanticTokensRefreshRequest.type,async()=>{for(let a of this.getAllProviders())a.onDidChangeSemanticTokensEmitter.fire()});let[i,s]=this.getRegistration(t,e.semanticTokensProvider);!i||!s||this.register({id:i,registerOptions:s})}registerLanguageProvider(e){let t=e.documentSelector,n=kx.boolean(e.full)?e.full:e.full!==void 0,i=e.full!==void 0&&typeof e.full!="boolean"&&e.full.delta===!0,s=new lu.EventEmitter,a=n?{onDidChangeSemanticTokens:s.event,provideDocumentSemanticTokens:(_,m)=>{let p=this._client,g=p.middleware,R=(D,y)=>{let d={textDocument:p.code2ProtocolConverter.asTextDocumentIdentifier(D)};return p.sendRequest(Fe.SemanticTokensRequest.type,d,y).then(x=>y.isCancellationRequested?null:p.protocol2CodeConverter.asSemanticTokens(x,y),x=>p.handleFailedRequest(Fe.SemanticTokensRequest.type,y,x,null))};return g.provideDocumentSemanticTokens?g.provideDocumentSemanticTokens(_,m,R):R(_,m)},provideDocumentSemanticTokensEdits:i?(_,m,p)=>{let g=this._client,R=g.middleware,D=(y,d,x)=>{let k={textDocument:g.code2ProtocolConverter.asTextDocumentIdentifier(y),previousResultId:d};return g.sendRequest(Fe.SemanticTokensDeltaRequest.type,k,x).then(async S=>x.isCancellationRequested?null:Fe.SemanticTokens.is(S)?await g.protocol2CodeConverter.asSemanticTokens(S,x):await g.protocol2CodeConverter.asSemanticTokensEdits(S,x),S=>g.handleFailedRequest(Fe.SemanticTokensDeltaRequest.type,x,S,null))};return R.provideDocumentSemanticTokensEdits?R.provideDocumentSemanticTokensEdits(_,m,p,D):D(_,m,p)}:void 0}:void 0,c=e.range===!0?{provideDocumentRangeSemanticTokens:(_,m,p)=>{let g=this._client,R=g.middleware,D=(y,d,x)=>{let k={textDocument:g.code2ProtocolConverter.asTextDocumentIdentifier(y),range:g.code2ProtocolConverter.asRange(d)};return g.sendRequest(Fe.SemanticTokensRangeRequest.type,k,x).then(S=>x.isCancellationRequested?null:g.protocol2CodeConverter.asSemanticTokens(S,x),S=>g.handleFailedRequest(Fe.SemanticTokensRangeRequest.type,x,S,null))};return R.provideDocumentRangeSemanticTokens?R.provideDocumentRangeSemanticTokens(_,m,p,D):D(_,m,p)}}:void 0,u=[],l=this._client,b=l.protocol2CodeConverter.asSemanticTokensLegend(e.legend),f=l.protocol2CodeConverter.asDocumentSelector(t);return a!==void 0&&u.push(lu.languages.registerDocumentSemanticTokensProvider(f,a,b)),c!==void 0&&u.push(lu.languages.registerDocumentRangeSemanticTokensProvider(f,c,b)),[new lu.Disposable(()=>u.forEach(_=>_.dispose())),{range:c,full:a,onDidChangeSemanticTokensEmitter:s}]}};du.SemanticTokensFeature=pp});var Bw=B(Fn=>{"use strict";Object.defineProperty(Fn,"__esModule",{value:!0});Fn.WillDeleteFilesFeature=Fn.WillRenameFilesFeature=Fn.WillCreateFilesFeature=Fn.DidDeleteFilesFeature=Fn.DidRenameFilesFeature=Fn.DidCreateFilesFeature=void 0;var lr=require("vscode"),Px=Oc(),Vr=Ne(),Tx=kt();function jw(r,e){return r[e]===void 0&&(r[e]={}),r[e]}function Ex(r,e){return r[e]}function Uw(r,e,t){r[e]=t}var Ho=class r{constructor(e,t,n,i,s){this._client=e,this._event=t,this._registrationType=n,this._clientCapability=i,this._serverCapability=s,this._filters=new Map}getState(){return{kind:"workspace",id:this._registrationType.method,registrations:this._filters.size>0}}filterSize(){return this._filters.size}get registrationType(){return this._registrationType}fillClientCapabilities(e){let t=jw(jw(e,"workspace"),"fileOperations");Uw(t,"dynamicRegistration",!0),Uw(t,this._clientCapability,!0)}initialize(e){let t=e.workspace?.fileOperations,n=t!==void 0?Ex(t,this._serverCapability):void 0;if(n?.filters!==void 0)try{this.register({id:Tx.generateUuid(),registerOptions:{filters:n.filters}})}catch(i){this._client.warn(`Ignoring invalid glob pattern for ${this._serverCapability} registration: ${i}`)}}register(e){this._listener||(this._listener=this._event(this.send,this));let t=e.registerOptions.filters.map(n=>{let i=new Px.Minimatch(n.pattern.glob,r.asMinimatchOptions(n.pattern.options));if(!i.makeRe())throw new Error(`Invalid pattern ${n.pattern.glob}!`);return{scheme:n.scheme,matcher:i,kind:n.pattern.matches}});this._filters.set(e.id,t)}unregister(e){this._filters.delete(e),this._filters.size===0&&this._listener&&(this._listener.dispose(),this._listener=void 0)}clear(){this._filters.clear(),this._listener&&(this._listener.dispose(),this._listener=void 0)}getFileType(e){return r.getFileType(e)}async filter(e,t){let n=await Promise.all(e.files.map(async s=>{let a=t(s),o=a.fsPath.replace(/\\/g,"/");for(let c of this._filters.values())for(let u of c)if(!(u.scheme!==void 0&&u.scheme!==a.scheme)){if(u.matcher.match(o)){if(u.kind===void 0)return!0;let l=await this.getFileType(a);if(l===void 0)return this._client.error(`Failed to determine file type for ${a.toString()}.`),!0;if(l===lr.FileType.File&&u.kind===Vr.FileOperationPatternKind.file||l===lr.FileType.Directory&&u.kind===Vr.FileOperationPatternKind.folder)return!0}else if(u.kind===Vr.FileOperationPatternKind.folder&&await r.getFileType(a)===lr.FileType.Directory&&u.matcher.match(`${o}/`))return!0}return!1})),i=e.files.filter((s,a)=>n[a]);return{...e,files:i}}static async getFileType(e){try{return(await lr.workspace.fs.stat(e)).type}catch{return}}static asMinimatchOptions(e){let t={dot:!0};return e?.ignoreCase===!0&&(t.nocase=!0),t}},fu=class extends Ho{constructor(e,t,n,i,s,a,o){super(e,t,n,i,s),this._notificationType=n,this._accessUri=a,this._createParams=o}async send(e){let t=await this.filter(e,this._accessUri);if(t.files.length){let n=async i=>this._client.sendNotification(this._notificationType,this._createParams(i));return this.doSend(t,n)}}},hu=class extends fu{constructor(){super(...arguments),this._fsPathFileTypes=new Map}async getFileType(e){let t=e.fsPath;if(this._fsPathFileTypes.has(t))return this._fsPathFileTypes.get(t);let n=await Ho.getFileType(e);return n&&this._fsPathFileTypes.set(t,n),n}async cacheFileTypes(e,t){await this.filter(e,t)}clearFileTypeCache(){this._fsPathFileTypes.clear()}unregister(e){super.unregister(e),this.filterSize()===0&&this._willListener&&(this._willListener.dispose(),this._willListener=void 0)}clear(){super.clear(),this._willListener&&(this._willListener.dispose(),this._willListener=void 0)}},gp=class extends fu{constructor(e){super(e,lr.workspace.onDidCreateFiles,Vr.DidCreateFilesNotification.type,"didCreate","didCreate",t=>t,e.code2ProtocolConverter.asDidCreateFilesParams)}doSend(e,t){let n=this._client.middleware.workspace;return n?.didCreateFiles?n.didCreateFiles(e,t):t(e)}};Fn.DidCreateFilesFeature=gp;var mp=class extends hu{constructor(e){super(e,lr.workspace.onDidRenameFiles,Vr.DidRenameFilesNotification.type,"didRename","didRename",t=>t.oldUri,e.code2ProtocolConverter.asDidRenameFilesParams)}register(e){this._willListener||(this._willListener=lr.workspace.onWillRenameFiles(this.willRename,this)),super.register(e)}willRename(e){e.waitUntil(this.cacheFileTypes(e,t=>t.oldUri))}doSend(e,t){this.clearFileTypeCache();let n=this._client.middleware.workspace;return n?.didRenameFiles?n.didRenameFiles(e,t):t(e)}};Fn.DidRenameFilesFeature=mp;var _p=class extends hu{constructor(e){super(e,lr.workspace.onDidDeleteFiles,Vr.DidDeleteFilesNotification.type,"didDelete","didDelete",t=>t,e.code2ProtocolConverter.asDidDeleteFilesParams)}register(e){this._willListener||(this._willListener=lr.workspace.onWillDeleteFiles(this.willDelete,this)),super.register(e)}willDelete(e){e.waitUntil(this.cacheFileTypes(e,t=>t))}doSend(e,t){this.clearFileTypeCache();let n=this._client.middleware.workspace;return n?.didDeleteFiles?n.didDeleteFiles(e,t):t(e)}};Fn.DidDeleteFilesFeature=_p;var Wo=class extends Ho{constructor(e,t,n,i,s,a,o){super(e,t,n,i,s),this._requestType=n,this._accessUri=a,this._createParams=o}async send(e){let t=this.waitUntil(e);e.waitUntil(t)}async waitUntil(e){let t=await this.filter(e,this._accessUri);if(t.files.length){let n=i=>this._client.sendRequest(this._requestType,this._createParams(i),i.token).then(this._client.protocol2CodeConverter.asWorkspaceEdit);return this.doSend(t,n)}else return}},bp=class extends Wo{constructor(e){super(e,lr.workspace.onWillCreateFiles,Vr.WillCreateFilesRequest.type,"willCreate","willCreate",t=>t,e.code2ProtocolConverter.asWillCreateFilesParams)}doSend(e,t){let n=this._client.middleware.workspace;return n?.willCreateFiles?n.willCreateFiles(e,t):t(e)}};Fn.WillCreateFilesFeature=bp;var vp=class extends Wo{constructor(e){super(e,lr.workspace.onWillRenameFiles,Vr.WillRenameFilesRequest.type,"willRename","willRename",t=>t.oldUri,e.code2ProtocolConverter.asWillRenameFilesParams)}doSend(e,t){let n=this._client.middleware.workspace;return n?.willRenameFiles?n.willRenameFiles(e,t):t(e)}};Fn.WillRenameFilesFeature=vp;var yp=class extends Wo{constructor(e){super(e,lr.workspace.onWillDeleteFiles,Vr.WillDeleteFilesRequest.type,"willDelete","willDelete",t=>t,e.code2ProtocolConverter.asWillDeleteFilesParams)}doSend(e,t){let n=this._client.middleware.workspace;return n?.willDeleteFiles?n.willDeleteFiles(e,t):t(e)}};Fn.WillDeleteFilesFeature=yp});var Vw=B(pu=>{"use strict";Object.defineProperty(pu,"__esModule",{value:!0});pu.LinkedEditingFeature=void 0;var Ix=require("vscode"),wp=Ne(),Cp=Ze(),Rp=class extends Cp.TextDocumentLanguageFeature{constructor(e){super(e,wp.LinkedEditingRangeRequest.type)}fillClientCapabilities(e){let t=(0,Cp.ensure)((0,Cp.ensure)(e,"textDocument"),"linkedEditingRange");t.dynamicRegistration=!0}initialize(e,t){let[n,i]=this.getRegistration(t,e.linkedEditingRangeProvider);!n||!i||this.register({id:n,registerOptions:i})}registerLanguageProvider(e){let t=e.documentSelector,n={provideLinkedEditingRanges:(i,s,a)=>{let o=this._client,c=(l,b,f)=>o.sendRequest(wp.LinkedEditingRangeRequest.type,o.code2ProtocolConverter.asTextDocumentPositionParams(l,b),f).then(_=>f.isCancellationRequested?null:o.protocol2CodeConverter.asLinkedEditingRanges(_,f),_=>o.handleFailedRequest(wp.LinkedEditingRangeRequest.type,f,_,null)),u=o.middleware;return u.provideLinkedEditingRange?u.provideLinkedEditingRange(i,s,a,c):c(i,s,a)}};return[this.registerProvider(t,n),n]}registerProvider(e,t){return Ix.languages.registerLinkedEditingRangeProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),t)}};pu.LinkedEditingFeature=Rp});var zw=B(gu=>{"use strict";Object.defineProperty(gu,"__esModule",{value:!0});gu.TypeHierarchyFeature=void 0;var Ax=require("vscode"),ji=Ne(),Sp=Ze(),Dp=class{constructor(e){this.client=e,this.middleware=e.middleware}prepareTypeHierarchy(e,t,n){let i=this.client,s=this.middleware,a=(o,c,u)=>{let l=i.code2ProtocolConverter.asTextDocumentPositionParams(o,c);return i.sendRequest(ji.TypeHierarchyPrepareRequest.type,l,u).then(b=>u.isCancellationRequested?null:i.protocol2CodeConverter.asTypeHierarchyItems(b,u),b=>i.handleFailedRequest(ji.TypeHierarchyPrepareRequest.type,u,b,null))};return s.prepareTypeHierarchy?s.prepareTypeHierarchy(e,t,n,a):a(e,t,n)}provideTypeHierarchySupertypes(e,t){let n=this.client,i=this.middleware,s=(a,o)=>{let c={item:n.code2ProtocolConverter.asTypeHierarchyItem(a)};return n.sendRequest(ji.TypeHierarchySupertypesRequest.type,c,o).then(u=>o.isCancellationRequested?null:n.protocol2CodeConverter.asTypeHierarchyItems(u,o),u=>n.handleFailedRequest(ji.TypeHierarchySupertypesRequest.type,o,u,null))};return i.provideTypeHierarchySupertypes?i.provideTypeHierarchySupertypes(e,t,s):s(e,t)}provideTypeHierarchySubtypes(e,t){let n=this.client,i=this.middleware,s=(a,o)=>{let c={item:n.code2ProtocolConverter.asTypeHierarchyItem(a)};return n.sendRequest(ji.TypeHierarchySubtypesRequest.type,c,o).then(u=>o.isCancellationRequested?null:n.protocol2CodeConverter.asTypeHierarchyItems(u,o),u=>n.handleFailedRequest(ji.TypeHierarchySubtypesRequest.type,o,u,null))};return i.provideTypeHierarchySubtypes?i.provideTypeHierarchySubtypes(e,t,s):s(e,t)}},xp=class extends Sp.TextDocumentLanguageFeature{constructor(e){super(e,ji.TypeHierarchyPrepareRequest.type)}fillClientCapabilities(e){let t=(0,Sp.ensure)((0,Sp.ensure)(e,"textDocument"),"typeHierarchy");t.dynamicRegistration=!0}initialize(e,t){let[n,i]=this.getRegistration(t,e.typeHierarchyProvider);!n||!i||this.register({id:n,registerOptions:i})}registerLanguageProvider(e){let t=this._client,n=new Dp(t);return[Ax.languages.registerTypeHierarchyProvider(t.protocol2CodeConverter.asDocumentSelector(e.documentSelector),n),n]}};gu.TypeHierarchyFeature=xp});var Hw=B(_u=>{"use strict";Object.defineProperty(_u,"__esModule",{value:!0});_u.InlineValueFeature=void 0;var Gw=require("vscode"),mu=Ne(),Ko=Ze(),kp=class extends Ko.TextDocumentLanguageFeature{constructor(e){super(e,mu.InlineValueRequest.type)}fillClientCapabilities(e){(0,Ko.ensure)((0,Ko.ensure)(e,"textDocument"),"inlineValue").dynamicRegistration=!0,(0,Ko.ensure)((0,Ko.ensure)(e,"workspace"),"inlineValue").refreshSupport=!0}initialize(e,t){this._client.onRequest(mu.InlineValueRefreshRequest.type,async()=>{for(let s of this.getAllProviders())s.onDidChangeInlineValues.fire()});let[n,i]=this.getRegistration(t,e.inlineValueProvider);!n||!i||this.register({id:n,registerOptions:i})}registerLanguageProvider(e){let t=e.documentSelector,n=new Gw.EventEmitter,i={onDidChangeInlineValues:n.event,provideInlineValues:(s,a,o,c)=>{let u=this._client,l=(f,_,m,p)=>{let g={textDocument:u.code2ProtocolConverter.asTextDocumentIdentifier(f),range:u.code2ProtocolConverter.asRange(_),context:u.code2ProtocolConverter.asInlineValueContext(m)};return u.sendRequest(mu.InlineValueRequest.type,g,p).then(R=>p.isCancellationRequested?null:u.protocol2CodeConverter.asInlineValues(R,p),R=>u.handleFailedRequest(mu.InlineValueRequest.type,p,R,null))},b=u.middleware;return b.provideInlineValues?b.provideInlineValues(s,a,o,c,l):l(s,a,o,c)}};return[this.registerProvider(t,i),{provider:i,onDidChangeInlineValues:n}]}registerProvider(e,t){return Gw.languages.registerInlineValuesProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),t)}};_u.InlineValueFeature=kp});var Kw=B(bu=>{"use strict";Object.defineProperty(bu,"__esModule",{value:!0});bu.InlayHintsFeature=void 0;var Ww=require("vscode"),qs=Ne(),Xo=Ze(),Pp=class extends Xo.TextDocumentLanguageFeature{constructor(e){super(e,qs.InlayHintRequest.type)}fillClientCapabilities(e){let t=(0,Xo.ensure)((0,Xo.ensure)(e,"textDocument"),"inlayHint");t.dynamicRegistration=!0,t.resolveSupport={properties:["tooltip","textEdits","label.tooltip","label.location","label.command"]},(0,Xo.ensure)((0,Xo.ensure)(e,"workspace"),"inlayHint").refreshSupport=!0}initialize(e,t){this._client.onRequest(qs.InlayHintRefreshRequest.type,async()=>{for(let s of this.getAllProviders())s.onDidChangeInlayHints.fire()});let[n,i]=this.getRegistration(t,e.inlayHintProvider);!n||!i||this.register({id:n,registerOptions:i})}registerLanguageProvider(e){let t=e.documentSelector,n=new Ww.EventEmitter,i={onDidChangeInlayHints:n.event,provideInlayHints:(s,a,o)=>{let c=this._client,u=async(b,f,_)=>{let m={textDocument:c.code2ProtocolConverter.asTextDocumentIdentifier(b),range:c.code2ProtocolConverter.asRange(f)};try{let p=await c.sendRequest(qs.InlayHintRequest.type,m,_);return _.isCancellationRequested?null:c.protocol2CodeConverter.asInlayHints(p,_)}catch(p){return c.handleFailedRequest(qs.InlayHintRequest.type,_,p,null)}},l=c.middleware;return l.provideInlayHints?l.provideInlayHints(s,a,o,u):u(s,a,o)}};return i.resolveInlayHint=e.resolveProvider===!0?(s,a)=>{let o=this._client,c=async(l,b)=>{try{let f=await o.sendRequest(qs.InlayHintResolveRequest.type,o.code2ProtocolConverter.asInlayHint(l),b);if(b.isCancellationRequested)return null;let _=o.protocol2CodeConverter.asInlayHint(f,b);return b.isCancellationRequested?null:_}catch(f){return o.handleFailedRequest(qs.InlayHintResolveRequest.type,b,f,null)}},u=o.middleware;return u.resolveInlayHint?u.resolveInlayHint(s,a,c):c(s,a)}:void 0,[this.registerProvider(t,i),{provider:i,onDidChangeInlayHints:n}]}registerProvider(e,t){return Ww.languages.registerInlayHintsProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),t)}};bu.InlayHintsFeature=Pp});var Xw=B(vu=>{"use strict";Object.defineProperty(vu,"__esModule",{value:!0});vu.InlineCompletionItemFeature=void 0;var Ox=require("vscode"),Tp=Ne(),Ep=Ze(),$x=kt(),Ip=class extends Ep.TextDocumentLanguageFeature{constructor(e){super(e,Tp.InlineCompletionRequest.type)}fillClientCapabilities(e){let t=(0,Ep.ensure)((0,Ep.ensure)(e,"textDocument"),"inlineCompletion");t.dynamicRegistration=!0}initialize(e,t){let n=this.getRegistrationOptions(t,e.inlineCompletionProvider);n&&this.register({id:$x.generateUuid(),registerOptions:n})}registerLanguageProvider(e){let t=e.documentSelector,n={provideInlineCompletionItems:(i,s,a,o)=>{let c=this._client,u=this._client.middleware,l=(b,f,_,m)=>c.sendRequest(Tp.InlineCompletionRequest.type,c.code2ProtocolConverter.asInlineCompletionParams(b,f,_),m).then(p=>m.isCancellationRequested?null:c.protocol2CodeConverter.asInlineCompletionResult(p,m),p=>c.handleFailedRequest(Tp.InlineCompletionRequest.type,m,p,null));return u.provideInlineCompletionItems?u.provideInlineCompletionItems(i,s,a,o,l):l(i,s,a,o)}};return[Ox.languages.registerInlineCompletionItemProvider(this._client.protocol2CodeConverter.asDocumentSelector(t),n),n]}};vu.InlineCompletionItemFeature=Ip});var Lp=B(on=>{"use strict";Object.defineProperty(on,"__esModule",{value:!0});on.ProposedFeatures=on.BaseLanguageClient=on.MessageTransports=on.SuspendMode=on.State=on.CloseAction=on.ErrorAction=on.RevealOutputChannelOn=void 0;var ot=require("vscode"),ee=Ne(),Nx=Dy(),qx=Py(),wr=ir(),yu=xc(),Yw=kt(),Lx=qf(),yr=Ze(),Mx=nh(),Qw=sw(),Zw=aw(),Ls=cw(),Fx=uw(),jx=lw(),Ux=dw(),Bx=hw(),Vx=pw(),zx=kh(),Gx=mw(),Hx=_w(),Wx=bw(),Kx=yw(),Ap=ww(),Xx=Rw(),Yx=Sw(),Qx=xw(),Zx=kw(),Jx=Pw(),ek=Tw(),tk=Ew(),nk=Iw(),rk=Ow(),ik=$w(),sk=Nw(),ok=Lw(),ak=Mw(),ck=Fw(),Ms=Bw(),uk=Vw(),lk=zw(),dk=Hw(),fk=Kw(),hk=Xw(),Ui;(function(r){r[r.Debug=0]="Debug",r[r.Info=1]="Info",r[r.Warn=2]="Warn",r[r.Error=3]="Error",r[r.Never=4]="Never"})(Ui||(on.RevealOutputChannelOn=Ui={}));var Qo;(function(r){r[r.Continue=1]="Continue",r[r.Shutdown=2]="Shutdown"})(Qo||(on.ErrorAction=Qo={}));var gi;(function(r){r[r.DoNotRestart=1]="DoNotRestart",r[r.Restart=2]="Restart"})(gi||(on.CloseAction=gi={}));var Yo;(function(r){r[r.Stopped=1]="Stopped",r[r.Starting=3]="Starting",r[r.Running=2]="Running"})(Yo||(on.State=Yo={}));var Jw;(function(r){r.off="off",r.on="on"})(Jw||(on.SuspendMode=Jw={}));var Op;(function(r){function e(t){return t==null?!1:typeof t=="boolean"||typeof t=="object"&&t!==null&&wr.stringArray(t.enabledCommands)?t:!1}r.sanitizeIsTrusted=e})(Op||(Op={}));var $p=class{constructor(e,t){this.client=e,this.maxRestartCount=t,this.restarts=[]}error(e,t,n){return n&&n<=3?{action:Qo.Continue}:{action:Qo.Shutdown}}closed(){return this.restarts.push(Date.now()),this.restarts.length<=this.maxRestartCount?{action:gi.Restart}:this.restarts[this.restarts.length-1]-this.restarts[0]<=3*60*1e3?{action:gi.DoNotRestart,message:`The ${this.client.name} server crashed ${this.maxRestartCount+1} times in the last 3 minutes. The server will not be restarted. See the output for more information.`}:(this.restarts.shift(),{action:gi.Restart})}},Ve;(function(r){r.Initial="initial",r.Starting="starting",r.StartFailed="startFailed",r.Running="running",r.Stopping="stopping",r.Stopped="stopped"})(Ve||(Ve={}));var eC;(function(r){function e(t){return t&&ee.MessageReader.is(t.reader)&&ee.MessageWriter.is(t.writer)}r.is=e})(eC||(on.MessageTransports=eC={}));var Zo=class r{constructor(e,t,n){this._traceFormat=ee.TraceFormat.Text,this._diagnosticQueue=new Map,this._diagnosticQueueState={state:"idle"},this._features=[],this._dynamicFeatures=new Map,this.workspaceEditLock=new yu.Semaphore(1),this._id=e,this._name=t,n=n||{};let i={isTrusted:!1,supportHtml:!1};n.markdown!==void 0&&(i.isTrusted=Op.sanitizeIsTrusted(n.markdown.isTrusted),i.supportHtml=n.markdown.supportHtml===!0),this._clientOptions={documentSelector:n.documentSelector??[],synchronize:n.synchronize??{},diagnosticCollectionName:n.diagnosticCollectionName,outputChannelName:n.outputChannelName??this._name,revealOutputChannelOn:n.revealOutputChannelOn??Ui.Error,stdioEncoding:n.stdioEncoding??"utf8",initializationOptions:n.initializationOptions,initializationFailedHandler:n.initializationFailedHandler,progressOnInitialization:!!n.progressOnInitialization,errorHandler:n.errorHandler??this.createDefaultErrorHandler(n.connectionOptions?.maxRestartCount),middleware:n.middleware??{},uriConverters:n.uriConverters,workspaceFolder:n.workspaceFolder,connectionOptions:n.connectionOptions,markdown:i,diagnosticPullOptions:n.diagnosticPullOptions??{onChange:!0,onSave:!1},notebookDocumentOptions:n.notebookDocumentOptions??{}},this._clientOptions.synchronize=this._clientOptions.synchronize||{},this._state=Ve.Initial,this._ignoredRegistrations=new Set,this._listeners=[],this._notificationHandlers=new Map,this._pendingNotificationHandlers=new Map,this._notificationDisposables=new Map,this._requestHandlers=new Map,this._pendingRequestHandlers=new Map,this._requestDisposables=new Map,this._progressHandlers=new Map,this._pendingProgressHandlers=new Map,this._progressDisposables=new Map,this._connection=void 0,this._initializeResult=void 0,n.outputChannel?(this._outputChannel=n.outputChannel,this._disposeOutputChannel=!1):(this._outputChannel=void 0,this._disposeOutputChannel=!0),this._traceOutputChannel=n.traceOutputChannel,this._diagnostics=void 0,this._pendingOpenNotifications=new Set,this._pendingChangeSemaphore=new yu.Semaphore(1),this._pendingChangeDelayer=new yu.Delayer(250),this._fileEvents=[],this._fileEventDelayer=new yu.Delayer(250),this._onStop=void 0,this._telemetryEmitter=new ee.Emitter,this._stateChangeEmitter=new ee.Emitter,this._trace=ee.Trace.Off,this._tracer={log:(s,a)=>{wr.string(s)?this.logTrace(s,a):this.logObjectTrace(s)}},this._c2p=Nx.createConverter(n.uriConverters?n.uriConverters.code2Protocol:void 0),this._p2c=qx.createConverter(n.uriConverters?n.uriConverters.protocol2Code:void 0,this._clientOptions.markdown.isTrusted,this._clientOptions.markdown.supportHtml),this._syncedDocuments=new Map,this.registerBuiltinFeatures()}get name(){return this._name}get middleware(){return this._clientOptions.middleware??Object.create(null)}get clientOptions(){return this._clientOptions}get protocol2CodeConverter(){return this._p2c}get code2ProtocolConverter(){return this._c2p}get onTelemetry(){return this._telemetryEmitter.event}get onDidChangeState(){return this._stateChangeEmitter.event}get outputChannel(){return this._outputChannel||(this._outputChannel=ot.window.createOutputChannel(this._clientOptions.outputChannelName?this._clientOptions.outputChannelName:this._name)),this._outputChannel}get traceOutputChannel(){return this._traceOutputChannel?this._traceOutputChannel:this.outputChannel}get diagnostics(){return this._diagnostics}get state(){return this.getPublicState()}get $state(){return this._state}set $state(e){let t=this.getPublicState();this._state=e;let n=this.getPublicState();n!==t&&this._stateChangeEmitter.fire({oldState:t,newState:n})}getPublicState(){switch(this.$state){case Ve.Starting:return Yo.Starting;case Ve.Running:return Yo.Running;default:return Yo.Stopped}}get initializeResult(){return this._initializeResult}async sendRequest(e,...t){if(this.$state===Ve.StartFailed||this.$state===Ve.Stopping||this.$state===Ve.Stopped)return Promise.reject(new ee.ResponseError(ee.ErrorCodes.ConnectionInactive,"Client is not running"));let n=await this.$start();this._didChangeTextDocumentFeature.syncKind===ee.TextDocumentSyncKind.Full&&await this.sendPendingFullTextDocumentChanges(n);let i=this._clientOptions.middleware?.sendRequest;if(i!==void 0){let s,a;return t.length===1?ee.CancellationToken.is(t[0])?a=t[0]:s=t[0]:t.length===2&&(s=t[0],a=t[1]),i(e,s,a,(o,c,u)=>{let l=[];return c!==void 0&&l.push(c),u!==void 0&&l.push(u),n.sendRequest(o,...l)})}else return n.sendRequest(e,...t)}onRequest(e,t){let n=typeof e=="string"?e:e.method;this._requestHandlers.set(n,t);let i=this.activeConnection(),s;return i!==void 0?(this._requestDisposables.set(n,i.onRequest(e,t)),s={dispose:()=>{let a=this._requestDisposables.get(n);a!==void 0&&(a.dispose(),this._requestDisposables.delete(n))}}):(this._pendingRequestHandlers.set(n,t),s={dispose:()=>{this._pendingRequestHandlers.delete(n);let a=this._requestDisposables.get(n);a!==void 0&&(a.dispose(),this._requestDisposables.delete(n))}}),{dispose:()=>{this._requestHandlers.delete(n),s.dispose()}}}async sendNotification(e,t){if(this.$state===Ve.StartFailed||this.$state===Ve.Stopping||this.$state===Ve.Stopped)return Promise.reject(new ee.ResponseError(ee.ErrorCodes.ConnectionInactive,"Client is not running"));let n=this._didChangeTextDocumentFeature.syncKind===ee.TextDocumentSyncKind.Full,i;n&&typeof e!="string"&&e.method===ee.DidOpenTextDocumentNotification.method&&(i=t?.textDocument.uri,this._pendingOpenNotifications.add(i));let s=await this.$start();n&&await this.sendPendingFullTextDocumentChanges(s),i!==void 0&&this._pendingOpenNotifications.delete(i);let a=this._clientOptions.middleware?.sendNotification;return a?a(e,s.sendNotification.bind(s),t):s.sendNotification(e,t)}onNotification(e,t){let n=typeof e=="string"?e:e.method;this._notificationHandlers.set(n,t);let i=this.activeConnection(),s;return i!==void 0?(this._notificationDisposables.set(n,i.onNotification(e,t)),s={dispose:()=>{let a=this._notificationDisposables.get(n);a!==void 0&&(a.dispose(),this._notificationDisposables.delete(n))}}):(this._pendingNotificationHandlers.set(n,t),s={dispose:()=>{this._pendingNotificationHandlers.delete(n);let a=this._notificationDisposables.get(n);a!==void 0&&(a.dispose(),this._notificationDisposables.delete(n))}}),{dispose:()=>{this._notificationHandlers.delete(n),s.dispose()}}}async sendProgress(e,t,n){if(this.$state===Ve.StartFailed||this.$state===Ve.Stopping||this.$state===Ve.Stopped)return Promise.reject(new ee.ResponseError(ee.ErrorCodes.ConnectionInactive,"Client is not running"));try{return(await this.$start()).sendProgress(e,t,n)}catch(i){throw this.error(`Sending progress for token ${t} failed.`,i),i}}onProgress(e,t,n){this._progressHandlers.set(t,{type:e,handler:n});let i=this.activeConnection(),s,a=this._clientOptions.middleware?.handleWorkDoneProgress,o=ee.WorkDoneProgress.is(e)&&a!==void 0?c=>{a(t,c,()=>n(c))}:n;return i!==void 0?(this._progressDisposables.set(t,i.onProgress(e,t,o)),s={dispose:()=>{let c=this._progressDisposables.get(t);c!==void 0&&(c.dispose(),this._progressDisposables.delete(t))}}):(this._pendingProgressHandlers.set(t,{type:e,handler:n}),s={dispose:()=>{this._pendingProgressHandlers.delete(t);let c=this._progressDisposables.get(t);c!==void 0&&(c.dispose(),this._progressDisposables.delete(t))}}),{dispose:()=>{this._progressHandlers.delete(t),s.dispose()}}}createDefaultErrorHandler(e){if(e!==void 0&&e<0)throw new Error(`Invalid maxRestartCount: ${e}`);return new $p(this,e??4)}async setTrace(e){this._trace=e;let t=this.activeConnection();t!==void 0&&await t.trace(this._trace,this._tracer,{sendNotification:!1,traceFormat:this._traceFormat})}data2String(e){if(e instanceof ee.ResponseError){let t=e;return`  Message: ${t.message}
  Code: ${t.code} ${t.data?`
`+t.data.toString():""}`}return e instanceof Error?wr.string(e.stack)?e.stack:e.message:wr.string(e)?e:e.toString()}debug(e,t,n=!0){this.logOutputMessage(ee.MessageType.Debug,Ui.Debug,"Debug",e,t,n)}info(e,t,n=!0){this.logOutputMessage(ee.MessageType.Info,Ui.Info,"Info",e,t,n)}warn(e,t,n=!0){this.logOutputMessage(ee.MessageType.Warning,Ui.Warn,"Warn",e,t,n)}error(e,t,n=!0){this.logOutputMessage(ee.MessageType.Error,Ui.Error,"Error",e,t,n)}logOutputMessage(e,t,n,i,s,a){this.outputChannel.appendLine(`[${n.padEnd(5)} - ${new Date().toLocaleTimeString()}] ${i}`),s!=null&&this.outputChannel.appendLine(this.data2String(s)),(a==="force"||a&&this._clientOptions.revealOutputChannelOn<=t)&&this.showNotificationMessage(e,i)}showNotificationMessage(e,t){t=t??"A request has failed. See the output for more information.",(e===ee.MessageType.Error?ot.window.showErrorMessage:e===ee.MessageType.Warning?ot.window.showWarningMessage:ot.window.showInformationMessage)(t,"Go to output").then(i=>{i!==void 0&&this.outputChannel.show(!0)})}logTrace(e,t){this.traceOutputChannel.appendLine(`[Trace - ${new Date().toLocaleTimeString()}] ${e}`),t&&this.traceOutputChannel.appendLine(this.data2String(t))}logObjectTrace(e){e.isLSPMessage&&e.type?this.traceOutputChannel.append(`[LSP   - ${new Date().toLocaleTimeString()}] `):this.traceOutputChannel.append(`[Trace - ${new Date().toLocaleTimeString()}] `),e&&this.traceOutputChannel.appendLine(`${JSON.stringify(e)}`)}needsStart(){return this.$state===Ve.Initial||this.$state===Ve.Stopping||this.$state===Ve.Stopped}needsStop(){return this.$state===Ve.Starting||this.$state===Ve.Running}activeConnection(){return this.$state===Ve.Running&&this._connection!==void 0?this._connection:void 0}isRunning(){return this.$state===Ve.Running}async start(){if(this._disposed==="disposing"||this._disposed==="disposed")throw new Error("Client got disposed and can't be restarted.");if(this.$state===Ve.Stopping)throw new Error("Client is currently stopping. Can only restart a full stopped client");if(this._onStart!==void 0)return this._onStart;let[e,t,n]=this.createOnStartPromise();this._onStart=e,this._diagnostics===void 0&&(this._diagnostics=this._clientOptions.diagnosticCollectionName?ot.languages.createDiagnosticCollection(this._clientOptions.diagnosticCollectionName):ot.languages.createDiagnosticCollection());for(let[i,s]of this._notificationHandlers)this._pendingNotificationHandlers.has(i)||this._pendingNotificationHandlers.set(i,s);for(let[i,s]of this._requestHandlers)this._pendingRequestHandlers.has(i)||this._pendingRequestHandlers.set(i,s);for(let[i,s]of this._progressHandlers)this._pendingProgressHandlers.has(i)||this._pendingProgressHandlers.set(i,s);this.$state=Ve.Starting;try{let i=await this.createConnection();i.onNotification(ee.LogMessageNotification.type,s=>{switch(s.type){case ee.MessageType.Error:this.error(s.message,void 0,!1);break;case ee.MessageType.Warning:this.warn(s.message,void 0,!1);break;case ee.MessageType.Info:this.info(s.message,void 0,!1);break;case ee.MessageType.Debug:this.debug(s.message,void 0,!1);break;default:this.outputChannel.appendLine(s.message)}}),i.onNotification(ee.ShowMessageNotification.type,s=>{switch(s.type){case ee.MessageType.Error:ot.window.showErrorMessage(s.message);break;case ee.MessageType.Warning:ot.window.showWarningMessage(s.message);break;case ee.MessageType.Info:ot.window.showInformationMessage(s.message);break;default:ot.window.showInformationMessage(s.message)}}),i.onRequest(ee.ShowMessageRequest.type,s=>{let a;switch(s.type){case ee.MessageType.Error:a=ot.window.showErrorMessage;break;case ee.MessageType.Warning:a=ot.window.showWarningMessage;break;case ee.MessageType.Info:a=ot.window.showInformationMessage;break;default:a=ot.window.showInformationMessage}let o=s.actions||[];return a(s.message,...o)}),i.onNotification(ee.TelemetryEventNotification.type,s=>{this._telemetryEmitter.fire(s)}),i.onRequest(ee.ShowDocumentRequest.type,async s=>{let a=async c=>{let u=this.protocol2CodeConverter.asUri(c.uri);try{if(c.external===!0)return{success:await ot.env.openExternal(u)};{let l={};return c.selection!==void 0&&(l.selection=this.protocol2CodeConverter.asRange(c.selection)),c.takeFocus===void 0||c.takeFocus===!1?l.preserveFocus=!0:c.takeFocus===!0&&(l.preserveFocus=!1),await ot.window.showTextDocument(u,l),{success:!0}}}catch{return{success:!1}}},o=this._clientOptions.middleware.window?.showDocument;return o!==void 0?o(s,a):a(s)}),i.listen(),await this.initialize(i),t()}catch(i){this.$state=Ve.StartFailed,this.error(`${this._name} client: couldn't create connection to server.`,i,"force"),n(i)}return this._onStart}createOnStartPromise(){let e,t;return[new Promise((i,s)=>{e=i,t=s}),e,t]}async initialize(e){this.refreshTrace(e,!1);let t=this._clientOptions.initializationOptions,[n,i]=this._clientOptions.workspaceFolder!==void 0?[this._clientOptions.workspaceFolder.uri.fsPath,[{uri:this._c2p.asUri(this._clientOptions.workspaceFolder.uri),name:this._clientOptions.workspaceFolder.name}]]:[this._clientGetRootPath(),null],s={processId:null,clientInfo:{name:ot.env.appName,version:ot.version},locale:this.getLocale(),rootPath:n||null,rootUri:n?this._c2p.asUri(ot.Uri.file(n)):null,capabilities:this.computeClientCapabilities(),initializationOptions:wr.func(t)?t():t,trace:ee.Trace.toString(this._trace),workspaceFolders:i};if(this.fillInitializeParams(s),this._clientOptions.progressOnInitialization){let a=Yw.generateUuid(),o=new Lx.ProgressPart(e,a);s.workDoneToken=a;try{let c=await this.doInitialize(e,s);return o.done(),c}catch(c){throw o.cancel(),c}}else return this.doInitialize(e,s)}async doInitialize(e,t){try{let n=await e.initialize(t);if(n.capabilities.positionEncoding!==void 0&&n.capabilities.positionEncoding!==ee.PositionEncodingKind.UTF16)throw new Error(`Unsupported position encoding (${n.capabilities.positionEncoding}) received from server ${this.name}`);this._initializeResult=n,this.$state=Ve.Running;let i;wr.number(n.capabilities.textDocumentSync)?n.capabilities.textDocumentSync===ee.TextDocumentSyncKind.None?i={openClose:!1,change:ee.TextDocumentSyncKind.None,save:void 0}:i={openClose:!0,change:n.capabilities.textDocumentSync,save:{includeText:!1}}:n.capabilities.textDocumentSync!==void 0&&n.capabilities.textDocumentSync!==null&&(i=n.capabilities.textDocumentSync),this._capabilities=Object.assign({},n.capabilities,{resolvedTextDocumentSync:i}),e.onNotification(ee.PublishDiagnosticsNotification.type,s=>this.handleDiagnostics(s)),e.onRequest(ee.RegistrationRequest.type,s=>this.handleRegistrationRequest(s)),e.onRequest("client/registerFeature",s=>this.handleRegistrationRequest(s)),e.onRequest(ee.UnregistrationRequest.type,s=>this.handleUnregistrationRequest(s)),e.onRequest("client/unregisterFeature",s=>this.handleUnregistrationRequest(s)),e.onRequest(ee.ApplyWorkspaceEditRequest.type,s=>this.handleApplyWorkspaceEdit(s));for(let[s,a]of this._pendingNotificationHandlers)this._notificationDisposables.set(s,e.onNotification(s,a));this._pendingNotificationHandlers.clear();for(let[s,a]of this._pendingRequestHandlers)this._requestDisposables.set(s,e.onRequest(s,a));this._pendingRequestHandlers.clear();for(let[s,a]of this._pendingProgressHandlers)this._progressDisposables.set(s,e.onProgress(a.type,s,a.handler));return this._pendingProgressHandlers.clear(),await e.sendNotification(ee.InitializedNotification.type,{}),this.hookFileEvents(e),this.hookConfigurationChanged(e),this.initializeFeatures(e),n}catch(n){throw this._clientOptions.initializationFailedHandler?this._clientOptions.initializationFailedHandler(n)?this.initialize(e):this.stop():n instanceof ee.ResponseError&&n.data&&n.data.retry?ot.window.showErrorMessage(n.message,{title:"Retry",id:"retry"}).then(i=>{i&&i.id==="retry"?this.initialize(e):this.stop()}):(n&&n.message&&ot.window.showErrorMessage(n.message),this.error("Server initialization failed.",n),this.stop()),n}}_clientGetRootPath(){let e=ot.workspace.workspaceFolders;if(!e||e.length===0)return;let t=e[0];if(t.uri.scheme==="file")return t.uri.fsPath}stop(e=2e3){return this.shutdown("stop",e)}dispose(e=2e3){try{return this._disposed="disposing",this.stop(e)}finally{this._disposed="disposed"}}async shutdown(e,t){if(this.$state===Ve.Stopped||this.$state===Ve.Initial)return;if(this.$state===Ve.Stopping){if(this._onStop!==void 0)return this._onStop;throw new Error("Client is stopping but no stop promise available.")}let n=this.activeConnection();if(n===void 0||this.$state!==Ve.Running)throw new Error(`Client is not running and can't be stopped. It's current state is: ${this.$state}`);this._initializeResult=void 0,this.$state=Ve.Stopping,this.cleanUp(e);let i=new Promise(a=>{(0,ee.RAL)().timer.setTimeout(a,t)}),s=(async a=>(await a.shutdown(),await a.exit(),a))(n);return this._onStop=Promise.race([i,s]).then(a=>{if(a!==void 0)a.end(),a.dispose();else throw this.error("Stopping server timed out",void 0,!1),new Error("Stopping the server timed out")},a=>{throw this.error("Stopping server failed",a,!1),a}).finally(()=>{this.$state=Ve.Stopped,e==="stop"&&this.cleanUpChannel(),this._onStart=void 0,this._onStop=void 0,this._connection=void 0,this._ignoredRegistrations.clear()})}cleanUp(e){this._fileEvents=[],this._fileEventDelayer.cancel();let t=this._listeners.splice(0,this._listeners.length);for(let n of t)n.dispose();this._syncedDocuments&&this._syncedDocuments.clear();for(let n of Array.from(this._features.entries()).map(i=>i[1]).reverse())n.clear();e==="stop"&&this._diagnostics!==void 0&&(this._diagnostics.dispose(),this._diagnostics=void 0),this._idleInterval!==void 0&&(this._idleInterval.dispose(),this._idleInterval=void 0)}cleanUpChannel(){this._outputChannel!==void 0&&this._disposeOutputChannel&&(this._outputChannel.dispose(),this._outputChannel=void 0)}notifyFileEvent(e){let t=this;async function n(s){return t._fileEvents.push(s),t._fileEventDelayer.trigger(async()=>{await t.sendNotification(ee.DidChangeWatchedFilesNotification.type,{changes:t._fileEvents}),t._fileEvents=[]})}let i=this.clientOptions.middleware?.workspace;(i?.didChangeWatchedFile?i.didChangeWatchedFile(e,n):n(e)).catch(s=>{t.error("Notify file events failed.",s)})}async sendPendingFullTextDocumentChanges(e){return this._pendingChangeSemaphore.lock(async()=>{try{let t=this._didChangeTextDocumentFeature.getPendingDocumentChanges(this._pendingOpenNotifications);if(t.length===0)return;for(let n of t){let i=this.code2ProtocolConverter.asChangeTextDocumentParams(n);await e.sendNotification(ee.DidChangeTextDocumentNotification.type,i),this._didChangeTextDocumentFeature.notificationSent(n,ee.DidChangeTextDocumentNotification.type,i)}}catch(t){throw this.error("Sending pending changes failed",t,!1),t}})}triggerPendingChangeDelivery(){this._pendingChangeDelayer.trigger(async()=>{let e=this.activeConnection();if(e===void 0){this.triggerPendingChangeDelivery();return}await this.sendPendingFullTextDocumentChanges(e)}).catch(e=>this.error("Delivering pending changes failed",e,!1))}handleDiagnostics(e){if(!this._diagnostics)return;let t=e.uri;this._diagnosticQueueState.state==="busy"&&this._diagnosticQueueState.document===t&&this._diagnosticQueueState.tokenSource.cancel(),this._diagnosticQueue.set(e.uri,e.diagnostics),this.triggerDiagnosticQueue()}triggerDiagnosticQueue(){(0,ee.RAL)().timer.setImmediate(()=>{this.workDiagnosticQueue()})}workDiagnosticQueue(){if(this._diagnosticQueueState.state==="busy")return;let e=this._diagnosticQueue.entries().next();if(e.done===!0)return;let[t,n]=e.value;this._diagnosticQueue.delete(t);let i=new ot.CancellationTokenSource;this._diagnosticQueueState={state:"busy",document:t,tokenSource:i},this._p2c.asDiagnostics(n,i.token).then(s=>{if(!i.token.isCancellationRequested){let a=this._p2c.asUri(t),o=this.clientOptions.middleware;o.handleDiagnostics?o.handleDiagnostics(a,s,(c,u)=>this.setDiagnostics(c,u)):this.setDiagnostics(a,s)}}).finally(()=>{this._diagnosticQueueState={state:"idle"},this.triggerDiagnosticQueue()})}setDiagnostics(e,t){this._diagnostics&&this._diagnostics.set(e,t)}getLocale(){return ot.env.language}async $start(){if(this.$state===Ve.StartFailed)throw new Error("Previous start failed. Can't restart server.");await this.start();let e=this.activeConnection();if(e===void 0)throw new Error("Starting server failed");return e}async createConnection(){let e=(i,s,a)=>{this.handleConnectionError(i,s,a).catch(o=>this.error("Handling connection error failed",o))},t=()=>{this.handleConnectionClosed().catch(i=>this.error("Handling connection close failed",i))},n=await this.createMessageTransports(this._clientOptions.stdioEncoding||"utf8");return this._connection=pk(n.reader,n.writer,e,t,this._clientOptions.connectionOptions),this._connection}async handleConnectionClosed(){if(this.$state===Ve.Stopped)return;try{this._connection!==void 0&&this._connection.dispose()}catch{}let e={action:gi.DoNotRestart};if(this.$state!==Ve.Stopping)try{e=await this._clientOptions.errorHandler.closed()}catch{}this._connection=void 0,e.action===gi.DoNotRestart?(this.error(e.message??"Connection to server got closed. Server will not be restarted.",void 0,e.handled===!0?!1:"force"),this.cleanUp("stop"),this.$state===Ve.Starting?this.$state=Ve.StartFailed:this.$state=Ve.Stopped,this._onStop=Promise.resolve(),this._onStart=void 0):e.action===gi.Restart&&(this.info(e.message??"Connection to server got closed. Server will restart.",!e.handled),this.cleanUp("restart"),this.$state=Ve.Initial,this._onStop=Promise.resolve(),this._onStart=void 0,this.start().catch(t=>this.error("Restarting server failed",t,"force")))}async handleConnectionError(e,t,n){let i=await this._clientOptions.errorHandler.error(e,t,n);i.action===Qo.Shutdown?(this.error(i.message??`Client ${this._name}: connection to server is erroring.
${e.message}
Shutting down server.`,void 0,i.handled===!0?!1:"force"),this.stop().catch(s=>{this.error("Stopping server failed",s,!1)})):this.error(i.message??`Client ${this._name}: connection to server is erroring.
${e.message}`,void 0,i.handled===!0?!1:"force")}hookConfigurationChanged(e){this._listeners.push(ot.workspace.onDidChangeConfiguration(()=>{this.refreshTrace(e,!0)}))}refreshTrace(e,t=!1){let n=ot.workspace.getConfiguration(this._id),i=ee.Trace.Off,s=ee.TraceFormat.Text;if(n){let a=n.get("trace.server","off");typeof a=="string"?i=ee.Trace.fromString(a):(i=ee.Trace.fromString(n.get("trace.server.verbosity","off")),s=ee.TraceFormat.fromString(n.get("trace.server.format","text")))}this._trace=i,this._traceFormat=s,e.trace(this._trace,this._tracer,{sendNotification:t,traceFormat:this._traceFormat}).catch(a=>{this.error("Updating trace failed with error",a,!1)})}hookFileEvents(e){let t=this._clientOptions.synchronize.fileEvents;if(!t)return;let n;wr.array(t)?n=t:n=[t],n&&this._dynamicFeatures.get(ee.DidChangeWatchedFilesNotification.type.method).registerRaw(Yw.generateUuid(),n)}registerFeatures(e){for(let t of e)this.registerFeature(t)}registerFeature(e){if(this._features.push(e),yr.DynamicFeature.is(e)){let t=e.registrationType;this._dynamicFeatures.set(t.method,e)}}getFeature(e){return this._dynamicFeatures.get(e)}hasDedicatedTextSynchronizationFeature(e){let t=this.getFeature(ee.NotebookDocumentSyncRegistrationType.method);return t===void 0||!(t instanceof Qw.NotebookDocumentSyncFeature)?!1:t.handles(e)}registerBuiltinFeatures(){let e=new Map;this.registerFeature(new Zw.ConfigurationFeature(this)),this.registerFeature(new Ls.DidOpenTextDocumentFeature(this,this._syncedDocuments)),this._didChangeTextDocumentFeature=new Ls.DidChangeTextDocumentFeature(this,e),this._didChangeTextDocumentFeature.onPendingChangeAdded(()=>{this.triggerPendingChangeDelivery()}),this.registerFeature(this._didChangeTextDocumentFeature),this.registerFeature(new Ls.WillSaveFeature(this)),this.registerFeature(new Ls.WillSaveWaitUntilFeature(this)),this.registerFeature(new Ls.DidSaveTextDocumentFeature(this)),this.registerFeature(new Ls.DidCloseTextDocumentFeature(this,this._syncedDocuments,e)),this.registerFeature(new Zx.FileSystemWatcherFeature(this,t=>this.notifyFileEvent(t))),this.registerFeature(new Fx.CompletionItemFeature(this)),this.registerFeature(new jx.HoverFeature(this)),this.registerFeature(new Bx.SignatureHelpFeature(this)),this.registerFeature(new Ux.DefinitionFeature(this)),this.registerFeature(new Hx.ReferencesFeature(this)),this.registerFeature(new Vx.DocumentHighlightFeature(this)),this.registerFeature(new zx.DocumentSymbolFeature(this)),this.registerFeature(new Gx.WorkspaceSymbolFeature(this)),this.registerFeature(new Wx.CodeActionFeature(this)),this.registerFeature(new Kx.CodeLensFeature(this)),this.registerFeature(new Ap.DocumentFormattingFeature(this)),this.registerFeature(new Ap.DocumentRangeFormattingFeature(this)),this.registerFeature(new Ap.DocumentOnTypeFormattingFeature(this)),this.registerFeature(new Xx.RenameFeature(this)),this.registerFeature(new Yx.DocumentLinkFeature(this)),this.registerFeature(new Qx.ExecuteCommandFeature(this)),this.registerFeature(new Zw.SyncConfigurationFeature(this)),this.registerFeature(new tk.TypeDefinitionFeature(this)),this.registerFeature(new ek.ImplementationFeature(this)),this.registerFeature(new Jx.ColorProviderFeature(this)),this.clientOptions.workspaceFolder===void 0&&this.registerFeature(new nk.WorkspaceFoldersFeature(this)),this.registerFeature(new rk.FoldingRangeFeature(this)),this.registerFeature(new ik.DeclarationFeature(this)),this.registerFeature(new sk.SelectionRangeFeature(this)),this.registerFeature(new ok.ProgressFeature(this)),this.registerFeature(new ak.CallHierarchyFeature(this)),this.registerFeature(new ck.SemanticTokensFeature(this)),this.registerFeature(new uk.LinkedEditingFeature(this)),this.registerFeature(new Ms.DidCreateFilesFeature(this)),this.registerFeature(new Ms.DidRenameFilesFeature(this)),this.registerFeature(new Ms.DidDeleteFilesFeature(this)),this.registerFeature(new Ms.WillCreateFilesFeature(this)),this.registerFeature(new Ms.WillRenameFilesFeature(this)),this.registerFeature(new Ms.WillDeleteFilesFeature(this)),this.registerFeature(new lk.TypeHierarchyFeature(this)),this.registerFeature(new dk.InlineValueFeature(this)),this.registerFeature(new fk.InlayHintsFeature(this)),this.registerFeature(new Mx.DiagnosticFeature(this)),this.registerFeature(new Qw.NotebookDocumentSyncFeature(this))}registerProposedFeatures(){this.registerFeatures(qp.createAll(this))}fillInitializeParams(e){for(let t of this._features)wr.func(t.fillInitializeParams)&&t.fillInitializeParams(e)}computeClientCapabilities(){let e={};(0,yr.ensure)(e,"workspace").applyEdit=!0;let t=(0,yr.ensure)((0,yr.ensure)(e,"workspace"),"workspaceEdit");t.documentChanges=!0,t.resourceOperations=[ee.ResourceOperationKind.Create,ee.ResourceOperationKind.Rename,ee.ResourceOperationKind.Delete],t.failureHandling=ee.FailureHandlingKind.TextOnlyTransactional,t.normalizesLineEndings=!0,t.changeAnnotationSupport={groupsOnLabel:!0};let n=(0,yr.ensure)((0,yr.ensure)(e,"textDocument"),"publishDiagnostics");n.relatedInformation=!0,n.versionSupport=!1,n.tagSupport={valueSet:[ee.DiagnosticTag.Unnecessary,ee.DiagnosticTag.Deprecated]},n.codeDescriptionSupport=!0,n.dataSupport=!0;let i=(0,yr.ensure)(e,"window"),s=(0,yr.ensure)(i,"showMessage");s.messageActionItem={additionalPropertiesSupport:!0};let a=(0,yr.ensure)(i,"showDocument");a.support=!0;let o=(0,yr.ensure)(e,"general");o.staleRequestSupport={cancel:!0,retryOnContentModified:Array.from(r.RequestsToCancelOnContentModified)},o.regularExpressions={engine:"ECMAScript",version:"ES2020"},o.markdown={parser:"marked",version:"1.1.0"},o.positionEncodings=["utf-16"],this._clientOptions.markdown.supportHtml&&(o.markdown.allowedTags=["ul","li","p","code","blockquote","ol","h1","h2","h3","h4","h5","h6","hr","em","pre","table","thead","tbody","tr","th","td","div","del","a","strong","br","img","span"]);for(let c of this._features)c.fillClientCapabilities(e);return e}initializeFeatures(e){let t=this._clientOptions.documentSelector;for(let n of this._features)wr.func(n.preInitialize)&&n.preInitialize(this._capabilities,t);for(let n of this._features)n.initialize(this._capabilities,t)}async handleRegistrationRequest(e){let t=this.clientOptions.middleware?.handleRegisterCapability;return t?t(e,n=>this.doRegisterCapability(n)):this.doRegisterCapability(e)}async doRegisterCapability(e){if(!this.isRunning()){for(let t of e.registrations)this._ignoredRegistrations.add(t.id);return}for(let t of e.registrations){let n=this._dynamicFeatures.get(t.method);if(n===void 0)return Promise.reject(new Error(`No feature implementation for ${t.method} found. Registration failed.`));let i=t.registerOptions??{};i.documentSelector=i.documentSelector??this._clientOptions.documentSelector;let s={id:t.id,registerOptions:i};try{n.register(s)}catch(a){return Promise.reject(a)}}}async handleUnregistrationRequest(e){let t=this.clientOptions.middleware?.handleUnregisterCapability;return t?t(e,n=>this.doUnregisterCapability(n)):this.doUnregisterCapability(e)}async doUnregisterCapability(e){for(let t of e.unregisterations){if(this._ignoredRegistrations.has(t.id))continue;let n=this._dynamicFeatures.get(t.method);if(!n)return Promise.reject(new Error(`No feature implementation for ${t.method} found. Unregistration failed.`));n.unregister(t.id)}}async handleApplyWorkspaceEdit(e){let t=e.edit,n=await this.workspaceEditLock.lock(()=>this._p2c.asWorkspaceEdit(t)),i=new Map;ot.workspace.textDocuments.forEach(a=>i.set(a.uri.toString(),a));let s=!1;if(t.documentChanges){for(let a of t.documentChanges)if(ee.TextDocumentEdit.is(a)&&a.textDocument.version&&a.textDocument.version>=0){let o=this._p2c.asUri(a.textDocument.uri).toString(),c=i.get(o);if(c&&c.version!==a.textDocument.version){s=!0;break}}}return s?Promise.resolve({applied:!1}):wr.asPromise(ot.workspace.applyEdit(n).then(a=>({applied:a})))}handleFailedRequest(e,t,n,i,s=!0){if(n instanceof ee.ResponseError){if(n.code===ee.ErrorCodes.PendingResponseRejected||n.code===ee.ErrorCodes.ConnectionInactive)return i;if(n.code===ee.LSPErrorCodes.RequestCancelled||n.code===ee.LSPErrorCodes.ServerCancelled){if(t!==void 0&&t.isCancellationRequested)return i;throw n.data!==void 0?new yr.LSPCancellationError(n.data):new ot.CancellationError}else if(n.code===ee.LSPErrorCodes.ContentModified){if(r.RequestsToCancelOnContentModified.has(e.method)||r.CancellableResolveCalls.has(e.method))throw new ot.CancellationError;return i}}throw this.error(`Request ${e.method} failed.`,n,s),n}};on.BaseLanguageClient=Zo;Zo.RequestsToCancelOnContentModified=new Set([ee.SemanticTokensRequest.method,ee.SemanticTokensRangeRequest.method,ee.SemanticTokensDeltaRequest.method]);Zo.CancellableResolveCalls=new Set([ee.CompletionResolveRequest.method,ee.CodeLensResolveRequest.method,ee.CodeActionResolveRequest.method,ee.InlayHintResolveRequest.method,ee.DocumentLinkResolveRequest.method,ee.WorkspaceSymbolResolveRequest.method]);var Np=class{error(e){(0,ee.RAL)().console.error(e)}warn(e){(0,ee.RAL)().console.warn(e)}info(e){(0,ee.RAL)().console.info(e)}log(e){(0,ee.RAL)().console.log(e)}};function pk(r,e,t,n,i){let s=new Np,a=(0,ee.createProtocolConnection)(r,e,s,i);return a.onError(c=>{t(c[0],c[1],c[2])}),a.onClose(n),{listen:()=>a.listen(),sendRequest:a.sendRequest,onRequest:a.onRequest,hasPendingResponse:a.hasPendingResponse,sendNotification:a.sendNotification,onNotification:a.onNotification,onProgress:a.onProgress,sendProgress:a.sendProgress,trace:(c,u,l)=>{let b={sendNotification:!1,traceFormat:ee.TraceFormat.Text};return l===void 0?a.trace(c,u,b):(wr.boolean(l),a.trace(c,u,l))},initialize:c=>a.sendRequest(ee.InitializeRequest.type,c),shutdown:()=>a.sendRequest(ee.ShutdownRequest.type,void 0),exit:()=>a.sendNotification(ee.ExitNotification.type),end:()=>a.end(),dispose:()=>a.dispose()}}var qp;(function(r){function e(t){return[new hk.InlineCompletionItemFeature(t)]}r.createAll=e})(qp||(on.ProposedFeatures=qp={}))});var nC=B(wu=>{"use strict";Object.defineProperty(wu,"__esModule",{value:!0});wu.terminate=void 0;var tC=require("child_process"),gk=require("path"),mk=process.platform==="win32",_k=process.platform==="darwin",bk=process.platform==="linux";function vk(r,e){if(mk)try{let i={stdio:["pipe","pipe","ignore"]};return e&&(i.cwd=e),tC.execFileSync("taskkill",["/T","/F","/PID",r.pid.toString()],i),!0}catch{return!1}else if(bk||_k)try{var t=(0,gk.join)(__dirname,"terminateProcess.sh"),n=tC.spawnSync(t,[r.pid.toString()]);return!n.error}catch{return!1}else return r.kill("SIGKILL"),!0}wu.terminate=vk});var Mp=B((B1,rC)=>{"use strict";rC.exports=Ne()});var Jo=B((V1,iC)=>{var yk=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...r)=>console.error("SEMVER",...r):()=>{};iC.exports=yk});var Cu=B((z1,sC)=>{var wk="2.0.0",Ck=Number.MAX_SAFE_INTEGER||9007199254740991,Rk=16,Sk=250,Dk=["major","premajor","minor","preminor","patch","prepatch","prerelease"];sC.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:Rk,MAX_SAFE_BUILD_LENGTH:Sk,MAX_SAFE_INTEGER:Ck,RELEASE_TYPES:Dk,SEMVER_SPEC_VERSION:wk,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}});var Ru=B((zr,oC)=>{var{MAX_SAFE_COMPONENT_LENGTH:Fp,MAX_SAFE_BUILD_LENGTH:xk,MAX_LENGTH:kk}=Cu(),Pk=Jo();zr=oC.exports={};var Tk=zr.re=[],Ek=zr.safeRe=[],ge=zr.src=[],me=zr.t={},Ik=0,jp="[a-zA-Z0-9-]",Ak=[["\\s",1],["\\d",kk],[jp,xk]],Ok=r=>{for(let[e,t]of Ak)r=r.split(`${e}*`).join(`${e}{0,${t}}`).split(`${e}+`).join(`${e}{1,${t}}`);return r},je=(r,e,t)=>{let n=Ok(e),i=Ik++;Pk(r,i,e),me[r]=i,ge[i]=e,Tk[i]=new RegExp(e,t?"g":void 0),Ek[i]=new RegExp(n,t?"g":void 0)};je("NUMERICIDENTIFIER","0|[1-9]\\d*");je("NUMERICIDENTIFIERLOOSE","\\d+");je("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${jp}*`);je("MAINVERSION",`(${ge[me.NUMERICIDENTIFIER]})\\.(${ge[me.NUMERICIDENTIFIER]})\\.(${ge[me.NUMERICIDENTIFIER]})`);je("MAINVERSIONLOOSE",`(${ge[me.NUMERICIDENTIFIERLOOSE]})\\.(${ge[me.NUMERICIDENTIFIERLOOSE]})\\.(${ge[me.NUMERICIDENTIFIERLOOSE]})`);je("PRERELEASEIDENTIFIER",`(?:${ge[me.NUMERICIDENTIFIER]}|${ge[me.NONNUMERICIDENTIFIER]})`);je("PRERELEASEIDENTIFIERLOOSE",`(?:${ge[me.NUMERICIDENTIFIERLOOSE]}|${ge[me.NONNUMERICIDENTIFIER]})`);je("PRERELEASE",`(?:-(${ge[me.PRERELEASEIDENTIFIER]}(?:\\.${ge[me.PRERELEASEIDENTIFIER]})*))`);je("PRERELEASELOOSE",`(?:-?(${ge[me.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${ge[me.PRERELEASEIDENTIFIERLOOSE]})*))`);je("BUILDIDENTIFIER",`${jp}+`);je("BUILD",`(?:\\+(${ge[me.BUILDIDENTIFIER]}(?:\\.${ge[me.BUILDIDENTIFIER]})*))`);je("FULLPLAIN",`v?${ge[me.MAINVERSION]}${ge[me.PRERELEASE]}?${ge[me.BUILD]}?`);je("FULL",`^${ge[me.FULLPLAIN]}$`);je("LOOSEPLAIN",`[v=\\s]*${ge[me.MAINVERSIONLOOSE]}${ge[me.PRERELEASELOOSE]}?${ge[me.BUILD]}?`);je("LOOSE",`^${ge[me.LOOSEPLAIN]}$`);je("GTLT","((?:<|>)?=?)");je("XRANGEIDENTIFIERLOOSE",`${ge[me.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`);je("XRANGEIDENTIFIER",`${ge[me.NUMERICIDENTIFIER]}|x|X|\\*`);je("XRANGEPLAIN",`[v=\\s]*(${ge[me.XRANGEIDENTIFIER]})(?:\\.(${ge[me.XRANGEIDENTIFIER]})(?:\\.(${ge[me.XRANGEIDENTIFIER]})(?:${ge[me.PRERELEASE]})?${ge[me.BUILD]}?)?)?`);je("XRANGEPLAINLOOSE",`[v=\\s]*(${ge[me.XRANGEIDENTIFIERLOOSE]})(?:\\.(${ge[me.XRANGEIDENTIFIERLOOSE]})(?:\\.(${ge[me.XRANGEIDENTIFIERLOOSE]})(?:${ge[me.PRERELEASELOOSE]})?${ge[me.BUILD]}?)?)?`);je("XRANGE",`^${ge[me.GTLT]}\\s*${ge[me.XRANGEPLAIN]}$`);je("XRANGELOOSE",`^${ge[me.GTLT]}\\s*${ge[me.XRANGEPLAINLOOSE]}$`);je("COERCE",`(^|[^\\d])(\\d{1,${Fp}})(?:\\.(\\d{1,${Fp}}))?(?:\\.(\\d{1,${Fp}}))?(?:$|[^\\d])`);je("COERCERTL",ge[me.COERCE],!0);je("LONETILDE","(?:~>?)");je("TILDETRIM",`(\\s*)${ge[me.LONETILDE]}\\s+`,!0);zr.tildeTrimReplace="$1~";je("TILDE",`^${ge[me.LONETILDE]}${ge[me.XRANGEPLAIN]}$`);je("TILDELOOSE",`^${ge[me.LONETILDE]}${ge[me.XRANGEPLAINLOOSE]}$`);je("LONECARET","(?:\\^)");je("CARETTRIM",`(\\s*)${ge[me.LONECARET]}\\s+`,!0);zr.caretTrimReplace="$1^";je("CARET",`^${ge[me.LONECARET]}${ge[me.XRANGEPLAIN]}$`);je("CARETLOOSE",`^${ge[me.LONECARET]}${ge[me.XRANGEPLAINLOOSE]}$`);je("COMPARATORLOOSE",`^${ge[me.GTLT]}\\s*(${ge[me.LOOSEPLAIN]})$|^$`);je("COMPARATOR",`^${ge[me.GTLT]}\\s*(${ge[me.FULLPLAIN]})$|^$`);je("COMPARATORTRIM",`(\\s*)${ge[me.GTLT]}\\s*(${ge[me.LOOSEPLAIN]}|${ge[me.XRANGEPLAIN]})`,!0);zr.comparatorTrimReplace="$1$2$3";je("HYPHENRANGE",`^\\s*(${ge[me.XRANGEPLAIN]})\\s+-\\s+(${ge[me.XRANGEPLAIN]})\\s*$`);je("HYPHENRANGELOOSE",`^\\s*(${ge[me.XRANGEPLAINLOOSE]})\\s+-\\s+(${ge[me.XRANGEPLAINLOOSE]})\\s*$`);je("STAR","(<|>)?=?\\s*\\*");je("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$");je("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")});var Su=B((G1,aC)=>{var $k=Object.freeze({loose:!0}),Nk=Object.freeze({}),qk=r=>r?typeof r!="object"?$k:r:Nk;aC.exports=qk});var dC=B((H1,lC)=>{var cC=/^[0-9]+$/,uC=(r,e)=>{let t=cC.test(r),n=cC.test(e);return t&&n&&(r=+r,e=+e),r===e?0:t&&!n?-1:n&&!t?1:r<e?-1:1},Lk=(r,e)=>uC(e,r);lC.exports={compareIdentifiers:uC,rcompareIdentifiers:Lk}});var ea=B((W1,gC)=>{var Du=Jo(),{MAX_LENGTH:fC,MAX_SAFE_INTEGER:xu}=Cu(),{safeRe:hC,t:pC}=Ru(),Mk=Su(),{compareIdentifiers:Fs}=dC(),Up=class r{constructor(e,t){if(t=Mk(t),e instanceof r){if(e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease)return e;e=e.version}else if(typeof e!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof e}".`);if(e.length>fC)throw new TypeError(`version is longer than ${fC} characters`);Du("SemVer",e,t),this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease;let n=e.trim().match(t.loose?hC[pC.LOOSE]:hC[pC.FULL]);if(!n)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>xu||this.major<0)throw new TypeError("Invalid major version");if(this.minor>xu||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>xu||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){let s=+i;if(s>=0&&s<xu)return s}return i}):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(Du("SemVer.compare",this.version,this.options,e),!(e instanceof r)){if(typeof e=="string"&&e===this.version)return 0;e=new r(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof r||(e=new r(e,this.options)),Fs(this.major,e.major)||Fs(this.minor,e.minor)||Fs(this.patch,e.patch)}comparePre(e){if(e instanceof r||(e=new r(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let t=0;do{let n=this.prerelease[t],i=e.prerelease[t];if(Du("prerelease compare",t,n,i),n===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(n===void 0)return-1;if(n===i)continue;return Fs(n,i)}while(++t)}compareBuild(e){e instanceof r||(e=new r(e,this.options));let t=0;do{let n=this.build[t],i=e.build[t];if(Du("prerelease compare",t,n,i),n===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(n===void 0)return-1;if(n===i)continue;return Fs(n,i)}while(++t)}inc(e,t,n){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t,n);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t,n);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t,n),this.inc("pre",t,n);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",t,n),this.inc("pre",t,n);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{let i=Number(n)?1:0;if(!t&&n===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[i];else{let s=this.prerelease.length;for(;--s>=0;)typeof this.prerelease[s]=="number"&&(this.prerelease[s]++,s=-2);if(s===-1){if(t===this.prerelease.join(".")&&n===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(i)}}if(t){let s=[t,i];n===!1&&(s=[t]),Fs(this.prerelease[0],t)===0?isNaN(this.prerelease[1])&&(this.prerelease=s):this.prerelease=s}break}default:throw new Error(`invalid increment argument: ${e}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};gC.exports=Up});var bC=B((K1,_C)=>{var mC=ea(),Fk=(r,e,t=!1)=>{if(r instanceof mC)return r;try{return new mC(r,e)}catch(n){if(!t)return null;throw n}};_C.exports=Fk});var yC=B((X1,vC)=>{"use strict";vC.exports=function(r){r.prototype[Symbol.iterator]=function*(){for(let e=this.head;e;e=e.next)yield e.value}}});var CC=B((Y1,wC)=>{"use strict";wC.exports=rt;rt.Node=Bi;rt.create=rt;function rt(r){var e=this;if(e instanceof rt||(e=new rt),e.tail=null,e.head=null,e.length=0,r&&typeof r.forEach=="function")r.forEach(function(i){e.push(i)});else if(arguments.length>0)for(var t=0,n=arguments.length;t<n;t++)e.push(arguments[t]);return e}rt.prototype.removeNode=function(r){if(r.list!==this)throw new Error("removing node which does not belong to this list");var e=r.next,t=r.prev;return e&&(e.prev=t),t&&(t.next=e),r===this.head&&(this.head=e),r===this.tail&&(this.tail=t),r.list.length--,r.next=null,r.prev=null,r.list=null,e};rt.prototype.unshiftNode=function(r){if(r!==this.head){r.list&&r.list.removeNode(r);var e=this.head;r.list=this,r.next=e,e&&(e.prev=r),this.head=r,this.tail||(this.tail=r),this.length++}};rt.prototype.pushNode=function(r){if(r!==this.tail){r.list&&r.list.removeNode(r);var e=this.tail;r.list=this,r.prev=e,e&&(e.next=r),this.tail=r,this.head||(this.head=r),this.length++}};rt.prototype.push=function(){for(var r=0,e=arguments.length;r<e;r++)Uk(this,arguments[r]);return this.length};rt.prototype.unshift=function(){for(var r=0,e=arguments.length;r<e;r++)Bk(this,arguments[r]);return this.length};rt.prototype.pop=function(){if(this.tail){var r=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,r}};rt.prototype.shift=function(){if(this.head){var r=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,r}};rt.prototype.forEach=function(r,e){e=e||this;for(var t=this.head,n=0;t!==null;n++)r.call(e,t.value,n,this),t=t.next};rt.prototype.forEachReverse=function(r,e){e=e||this;for(var t=this.tail,n=this.length-1;t!==null;n--)r.call(e,t.value,n,this),t=t.prev};rt.prototype.get=function(r){for(var e=0,t=this.head;t!==null&&e<r;e++)t=t.next;if(e===r&&t!==null)return t.value};rt.prototype.getReverse=function(r){for(var e=0,t=this.tail;t!==null&&e<r;e++)t=t.prev;if(e===r&&t!==null)return t.value};rt.prototype.map=function(r,e){e=e||this;for(var t=new rt,n=this.head;n!==null;)t.push(r.call(e,n.value,this)),n=n.next;return t};rt.prototype.mapReverse=function(r,e){e=e||this;for(var t=new rt,n=this.tail;n!==null;)t.push(r.call(e,n.value,this)),n=n.prev;return t};rt.prototype.reduce=function(r,e){var t,n=this.head;if(arguments.length>1)t=e;else if(this.head)n=this.head.next,t=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=0;n!==null;i++)t=r(t,n.value,i),n=n.next;return t};rt.prototype.reduceReverse=function(r,e){var t,n=this.tail;if(arguments.length>1)t=e;else if(this.tail)n=this.tail.prev,t=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=this.length-1;n!==null;i--)t=r(t,n.value,i),n=n.prev;return t};rt.prototype.toArray=function(){for(var r=new Array(this.length),e=0,t=this.head;t!==null;e++)r[e]=t.value,t=t.next;return r};rt.prototype.toArrayReverse=function(){for(var r=new Array(this.length),e=0,t=this.tail;t!==null;e++)r[e]=t.value,t=t.prev;return r};rt.prototype.slice=function(r,e){e=e||this.length,e<0&&(e+=this.length),r=r||0,r<0&&(r+=this.length);var t=new rt;if(e<r||e<0)return t;r<0&&(r=0),e>this.length&&(e=this.length);for(var n=0,i=this.head;i!==null&&n<r;n++)i=i.next;for(;i!==null&&n<e;n++,i=i.next)t.push(i.value);return t};rt.prototype.sliceReverse=function(r,e){e=e||this.length,e<0&&(e+=this.length),r=r||0,r<0&&(r+=this.length);var t=new rt;if(e<r||e<0)return t;r<0&&(r=0),e>this.length&&(e=this.length);for(var n=this.length,i=this.tail;i!==null&&n>e;n--)i=i.prev;for(;i!==null&&n>r;n--,i=i.prev)t.push(i.value);return t};rt.prototype.splice=function(r,e,...t){r>this.length&&(r=this.length-1),r<0&&(r=this.length+r);for(var n=0,i=this.head;i!==null&&n<r;n++)i=i.next;for(var s=[],n=0;i&&n<e;n++)s.push(i.value),i=this.removeNode(i);i===null&&(i=this.tail),i!==this.head&&i!==this.tail&&(i=i.prev);for(var n=0;n<t.length;n++)i=jk(this,i,t[n]);return s};rt.prototype.reverse=function(){for(var r=this.head,e=this.tail,t=r;t!==null;t=t.prev){var n=t.prev;t.prev=t.next,t.next=n}return this.head=e,this.tail=r,this};function jk(r,e,t){var n=e===r.head?new Bi(t,null,e,r):new Bi(t,e,e.next,r);return n.next===null&&(r.tail=n),n.prev===null&&(r.head=n),r.length++,n}function Uk(r,e){r.tail=new Bi(e,r.tail,null,r),r.head||(r.head=r.tail),r.length++}function Bk(r,e){r.head=new Bi(e,null,r.head,r),r.tail||(r.tail=r.head),r.length++}function Bi(r,e,t,n){if(!(this instanceof Bi))return new Bi(r,e,t,n);this.list=n,this.value=r,e?(e.next=this,this.prev=e):this.prev=null,t?(t.prev=this,this.next=t):this.next=null}try{yC()(rt)}catch{}});var kC=B((Q1,xC)=>{"use strict";var Vk=CC(),Vi=Symbol("max"),Hr=Symbol("length"),js=Symbol("lengthCalculator"),na=Symbol("allowStale"),zi=Symbol("maxAge"),Gr=Symbol("dispose"),RC=Symbol("noDisposeOnSet"),an=Symbol("lruList"),Cr=Symbol("cache"),DC=Symbol("updateAgeOnGet"),Bp=()=>1,zp=class{constructor(e){if(typeof e=="number"&&(e={max:e}),e||(e={}),e.max&&(typeof e.max!="number"||e.max<0))throw new TypeError("max must be a non-negative number");let t=this[Vi]=e.max||1/0,n=e.length||Bp;if(this[js]=typeof n!="function"?Bp:n,this[na]=e.stale||!1,e.maxAge&&typeof e.maxAge!="number")throw new TypeError("maxAge must be a number");this[zi]=e.maxAge||0,this[Gr]=e.dispose,this[RC]=e.noDisposeOnSet||!1,this[DC]=e.updateAgeOnGet||!1,this.reset()}set max(e){if(typeof e!="number"||e<0)throw new TypeError("max must be a non-negative number");this[Vi]=e||1/0,ta(this)}get max(){return this[Vi]}set allowStale(e){this[na]=!!e}get allowStale(){return this[na]}set maxAge(e){if(typeof e!="number")throw new TypeError("maxAge must be a non-negative number");this[zi]=e,ta(this)}get maxAge(){return this[zi]}set lengthCalculator(e){typeof e!="function"&&(e=Bp),e!==this[js]&&(this[js]=e,this[Hr]=0,this[an].forEach(t=>{t.length=this[js](t.value,t.key),this[Hr]+=t.length})),ta(this)}get lengthCalculator(){return this[js]}get length(){return this[Hr]}get itemCount(){return this[an].length}rforEach(e,t){t=t||this;for(let n=this[an].tail;n!==null;){let i=n.prev;SC(this,e,n,t),n=i}}forEach(e,t){t=t||this;for(let n=this[an].head;n!==null;){let i=n.next;SC(this,e,n,t),n=i}}keys(){return this[an].toArray().map(e=>e.key)}values(){return this[an].toArray().map(e=>e.value)}reset(){this[Gr]&&this[an]&&this[an].length&&this[an].forEach(e=>this[Gr](e.key,e.value)),this[Cr]=new Map,this[an]=new Vk,this[Hr]=0}dump(){return this[an].map(e=>ku(this,e)?!1:{k:e.key,v:e.value,e:e.now+(e.maxAge||0)}).toArray().filter(e=>e)}dumpLru(){return this[an]}set(e,t,n){if(n=n||this[zi],n&&typeof n!="number")throw new TypeError("maxAge must be a number");let i=n?Date.now():0,s=this[js](t,e);if(this[Cr].has(e)){if(s>this[Vi])return Us(this,this[Cr].get(e)),!1;let c=this[Cr].get(e).value;return this[Gr]&&(this[RC]||this[Gr](e,c.value)),c.now=i,c.maxAge=n,c.value=t,this[Hr]+=s-c.length,c.length=s,this.get(e),ta(this),!0}let a=new Gp(e,t,s,i,n);return a.length>this[Vi]?(this[Gr]&&this[Gr](e,t),!1):(this[Hr]+=a.length,this[an].unshift(a),this[Cr].set(e,this[an].head),ta(this),!0)}has(e){if(!this[Cr].has(e))return!1;let t=this[Cr].get(e).value;return!ku(this,t)}get(e){return Vp(this,e,!0)}peek(e){return Vp(this,e,!1)}pop(){let e=this[an].tail;return e?(Us(this,e),e.value):null}del(e){Us(this,this[Cr].get(e))}load(e){this.reset();let t=Date.now();for(let n=e.length-1;n>=0;n--){let i=e[n],s=i.e||0;if(s===0)this.set(i.k,i.v);else{let a=s-t;a>0&&this.set(i.k,i.v,a)}}}prune(){this[Cr].forEach((e,t)=>Vp(this,t,!1))}},Vp=(r,e,t)=>{let n=r[Cr].get(e);if(n){let i=n.value;if(ku(r,i)){if(Us(r,n),!r[na])return}else t&&(r[DC]&&(n.value.now=Date.now()),r[an].unshiftNode(n));return i.value}},ku=(r,e)=>{if(!e||!e.maxAge&&!r[zi])return!1;let t=Date.now()-e.now;return e.maxAge?t>e.maxAge:r[zi]&&t>r[zi]},ta=r=>{if(r[Hr]>r[Vi])for(let e=r[an].tail;r[Hr]>r[Vi]&&e!==null;){let t=e.prev;Us(r,e),e=t}},Us=(r,e)=>{if(e){let t=e.value;r[Gr]&&r[Gr](t.key,t.value),r[Hr]-=t.length,r[Cr].delete(t.key),r[an].removeNode(e)}},Gp=class{constructor(e,t,n,i,s){this.key=e,this.value=t,this.length=n,this.now=i,this.maxAge=s||0}},SC=(r,e,t,n)=>{let i=t.value;ku(r,i)&&(Us(r,t),r[na]||(i=void 0)),i&&e.call(n,i.value,i.key,r)};xC.exports=zp});var Gi=B((Z1,TC)=>{var PC=ea(),zk=(r,e,t)=>new PC(r,t).compare(new PC(e,t));TC.exports=zk});var IC=B((J1,EC)=>{var Gk=Gi(),Hk=(r,e,t)=>Gk(r,e,t)===0;EC.exports=Hk});var OC=B((eA,AC)=>{var Wk=Gi(),Kk=(r,e,t)=>Wk(r,e,t)!==0;AC.exports=Kk});var NC=B((tA,$C)=>{var Xk=Gi(),Yk=(r,e,t)=>Xk(r,e,t)>0;$C.exports=Yk});var LC=B((nA,qC)=>{var Qk=Gi(),Zk=(r,e,t)=>Qk(r,e,t)>=0;qC.exports=Zk});var FC=B((rA,MC)=>{var Jk=Gi(),eP=(r,e,t)=>Jk(r,e,t)<0;MC.exports=eP});var UC=B((iA,jC)=>{var tP=Gi(),nP=(r,e,t)=>tP(r,e,t)<=0;jC.exports=nP});var VC=B((sA,BC)=>{var rP=IC(),iP=OC(),sP=NC(),oP=LC(),aP=FC(),cP=UC(),uP=(r,e,t,n)=>{switch(e){case"===":return typeof r=="object"&&(r=r.version),typeof t=="object"&&(t=t.version),r===t;case"!==":return typeof r=="object"&&(r=r.version),typeof t=="object"&&(t=t.version),r!==t;case"":case"=":case"==":return rP(r,t,n);case"!=":return iP(r,t,n);case">":return sP(r,t,n);case">=":return oP(r,t,n);case"<":return aP(r,t,n);case"<=":return cP(r,t,n);default:throw new TypeError(`Invalid operator: ${e}`)}};BC.exports=uP});var YC=B((oA,XC)=>{var ra=Symbol("SemVer ANY"),Kp=class r{static get ANY(){return ra}constructor(e,t){if(t=zC(t),e instanceof r){if(e.loose===!!t.loose)return e;e=e.value}e=e.trim().split(/\s+/).join(" "),Wp("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===ra?this.value="":this.value=this.operator+this.semver.version,Wp("comp",this)}parse(e){let t=this.options.loose?GC[HC.COMPARATORLOOSE]:GC[HC.COMPARATOR],n=e.match(t);if(!n)throw new TypeError(`Invalid comparator: ${e}`);this.operator=n[1]!==void 0?n[1]:"",this.operator==="="&&(this.operator=""),n[2]?this.semver=new WC(n[2],this.options.loose):this.semver=ra}toString(){return this.value}test(e){if(Wp("Comparator.test",e,this.options.loose),this.semver===ra||e===ra)return!0;if(typeof e=="string")try{e=new WC(e,this.options)}catch{return!1}return Hp(e,this.operator,this.semver,this.options)}intersects(e,t){if(!(e instanceof r))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new KC(e.value,t).test(this.value):e.operator===""?e.value===""?!0:new KC(this.value,t).test(e.semver):(t=zC(t),t.includePrerelease&&(this.value==="<0.0.0-0"||e.value==="<0.0.0-0")||!t.includePrerelease&&(this.value.startsWith("<0.0.0")||e.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&e.operator.startsWith(">")||this.operator.startsWith("<")&&e.operator.startsWith("<")||this.semver.version===e.semver.version&&this.operator.includes("=")&&e.operator.includes("=")||Hp(this.semver,"<",e.semver,t)&&this.operator.startsWith(">")&&e.operator.startsWith("<")||Hp(this.semver,">",e.semver,t)&&this.operator.startsWith("<")&&e.operator.startsWith(">")))}};XC.exports=Kp;var zC=Su(),{safeRe:GC,t:HC}=Ru(),Hp=VC(),Wp=Jo(),WC=ea(),KC=Xp()});var Xp=B((aA,eR)=>{var Yp=class r{constructor(e,t){if(t=dP(t),e instanceof r)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new r(e.raw,t);if(e instanceof Qp)return this.raw=e.value,this.set=[[e]],this.format(),this;if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map(n=>this.parseRange(n.trim())).filter(n=>n.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){let n=this.set[0];if(this.set=this.set.filter(i=>!ZC(i[0])),this.set.length===0)this.set=[n];else if(this.set.length>1){for(let i of this.set)if(i.length===1&&bP(i[0])){this.set=[i];break}}}this.format()}format(){return this.range=this.set.map(e=>e.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(e){let n=((this.options.includePrerelease&&mP)|(this.options.loose&&_P))+":"+e,i=QC.get(n);if(i)return i;let s=this.options.loose,a=s?jn[Tn.HYPHENRANGELOOSE]:jn[Tn.HYPHENRANGE];e=e.replace(a,PP(this.options.includePrerelease)),St("hyphen replace",e),e=e.replace(jn[Tn.COMPARATORTRIM],hP),St("comparator trim",e),e=e.replace(jn[Tn.TILDETRIM],pP),St("tilde trim",e),e=e.replace(jn[Tn.CARETTRIM],gP),St("caret trim",e);let o=e.split(" ").map(b=>vP(b,this.options)).join(" ").split(/\s+/).map(b=>kP(b,this.options));s&&(o=o.filter(b=>(St("loose invalid filter",b,this.options),!!b.match(jn[Tn.COMPARATORLOOSE])))),St("range list",o);let c=new Map,u=o.map(b=>new Qp(b,this.options));for(let b of u){if(ZC(b))return[b];c.set(b.value,b)}c.size>1&&c.has("")&&c.delete("");let l=[...c.values()];return QC.set(n,l),l}intersects(e,t){if(!(e instanceof r))throw new TypeError("a Range is required");return this.set.some(n=>JC(n,t)&&e.set.some(i=>JC(i,t)&&n.every(s=>i.every(a=>s.intersects(a,t)))))}test(e){if(!e)return!1;if(typeof e=="string")try{e=new fP(e,this.options)}catch{return!1}for(let t=0;t<this.set.length;t++)if(TP(this.set[t],e,this.options))return!0;return!1}};eR.exports=Yp;var lP=kC(),QC=new lP({max:1e3}),dP=Su(),Qp=YC(),St=Jo(),fP=ea(),{safeRe:jn,t:Tn,comparatorTrimReplace:hP,tildeTrimReplace:pP,caretTrimReplace:gP}=Ru(),{FLAG_INCLUDE_PRERELEASE:mP,FLAG_LOOSE:_P}=Cu(),ZC=r=>r.value==="<0.0.0-0",bP=r=>r.value==="",JC=(r,e)=>{let t=!0,n=r.slice(),i=n.pop();for(;t&&n.length;)t=n.every(s=>i.intersects(s,e)),i=n.pop();return t},vP=(r,e)=>(St("comp",r,e),r=CP(r,e),St("caret",r),r=yP(r,e),St("tildes",r),r=SP(r,e),St("xrange",r),r=xP(r,e),St("stars",r),r),En=r=>!r||r.toLowerCase()==="x"||r==="*",yP=(r,e)=>r.trim().split(/\s+/).map(t=>wP(t,e)).join(" "),wP=(r,e)=>{let t=e.loose?jn[Tn.TILDELOOSE]:jn[Tn.TILDE];return r.replace(t,(n,i,s,a,o)=>{St("tilde",r,n,i,s,a,o);let c;return En(i)?c="":En(s)?c=`>=${i}.0.0 <${+i+1}.0.0-0`:En(a)?c=`>=${i}.${s}.0 <${i}.${+s+1}.0-0`:o?(St("replaceTilde pr",o),c=`>=${i}.${s}.${a}-${o} <${i}.${+s+1}.0-0`):c=`>=${i}.${s}.${a} <${i}.${+s+1}.0-0`,St("tilde return",c),c})},CP=(r,e)=>r.trim().split(/\s+/).map(t=>RP(t,e)).join(" "),RP=(r,e)=>{St("caret",r,e);let t=e.loose?jn[Tn.CARETLOOSE]:jn[Tn.CARET],n=e.includePrerelease?"-0":"";return r.replace(t,(i,s,a,o,c)=>{St("caret",r,i,s,a,o,c);let u;return En(s)?u="":En(a)?u=`>=${s}.0.0${n} <${+s+1}.0.0-0`:En(o)?s==="0"?u=`>=${s}.${a}.0${n} <${s}.${+a+1}.0-0`:u=`>=${s}.${a}.0${n} <${+s+1}.0.0-0`:c?(St("replaceCaret pr",c),s==="0"?a==="0"?u=`>=${s}.${a}.${o}-${c} <${s}.${a}.${+o+1}-0`:u=`>=${s}.${a}.${o}-${c} <${s}.${+a+1}.0-0`:u=`>=${s}.${a}.${o}-${c} <${+s+1}.0.0-0`):(St("no pr"),s==="0"?a==="0"?u=`>=${s}.${a}.${o}${n} <${s}.${a}.${+o+1}-0`:u=`>=${s}.${a}.${o}${n} <${s}.${+a+1}.0-0`:u=`>=${s}.${a}.${o} <${+s+1}.0.0-0`),St("caret return",u),u})},SP=(r,e)=>(St("replaceXRanges",r,e),r.split(/\s+/).map(t=>DP(t,e)).join(" ")),DP=(r,e)=>{r=r.trim();let t=e.loose?jn[Tn.XRANGELOOSE]:jn[Tn.XRANGE];return r.replace(t,(n,i,s,a,o,c)=>{St("xRange",r,n,i,s,a,o,c);let u=En(s),l=u||En(a),b=l||En(o),f=b;return i==="="&&f&&(i=""),c=e.includePrerelease?"-0":"",u?i===">"||i==="<"?n="<0.0.0-0":n="*":i&&f?(l&&(a=0),o=0,i===">"?(i=">=",l?(s=+s+1,a=0,o=0):(a=+a+1,o=0)):i==="<="&&(i="<",l?s=+s+1:a=+a+1),i==="<"&&(c="-0"),n=`${i+s}.${a}.${o}${c}`):l?n=`>=${s}.0.0${c} <${+s+1}.0.0-0`:b&&(n=`>=${s}.${a}.0${c} <${s}.${+a+1}.0-0`),St("xRange return",n),n})},xP=(r,e)=>(St("replaceStars",r,e),r.trim().replace(jn[Tn.STAR],"")),kP=(r,e)=>(St("replaceGTE0",r,e),r.trim().replace(jn[e.includePrerelease?Tn.GTE0PRE:Tn.GTE0],"")),PP=r=>(e,t,n,i,s,a,o,c,u,l,b,f,_)=>(En(n)?t="":En(i)?t=`>=${n}.0.0${r?"-0":""}`:En(s)?t=`>=${n}.${i}.0${r?"-0":""}`:a?t=`>=${t}`:t=`>=${t}${r?"-0":""}`,En(u)?c="":En(l)?c=`<${+u+1}.0.0-0`:En(b)?c=`<${u}.${+l+1}.0-0`:f?c=`<=${u}.${l}.${b}-${f}`:r?c=`<${u}.${l}.${+b+1}-0`:c=`<=${c}`,`${t} ${c}`.trim()),TP=(r,e,t)=>{for(let n=0;n<r.length;n++)if(!r[n].test(e))return!1;if(e.prerelease.length&&!t.includePrerelease){for(let n=0;n<r.length;n++)if(St(r[n].semver),r[n].semver!==Qp.ANY&&r[n].semver.prerelease.length>0){let i=r[n].semver;if(i.major===e.major&&i.minor===e.minor&&i.patch===e.patch)return!0}return!1}return!0}});var nR=B((cA,tR)=>{var EP=Xp(),IP=(r,e,t)=>{try{e=new EP(e,t)}catch{return!1}return e.test(r)};tR.exports=IP});var iR=B(Zn=>{"use strict";var AP=Zn&&Zn.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(r,n,i)}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),Zp=Zn&&Zn.__exportStar||function(r,e){for(var t in r)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&AP(e,r,t)};Object.defineProperty(Zn,"__esModule",{value:!0});Zn.DiagnosticPullMode=Zn.vsdiag=void 0;Zp(Ne(),Zn);Zp(Ze(),Zn);var rR=nh();Object.defineProperty(Zn,"vsdiag",{enumerable:!0,get:function(){return rR.vsdiag}});Object.defineProperty(Zn,"DiagnosticPullMode",{enumerable:!0,get:function(){return rR.DiagnosticPullMode}});Zp(Lp(),Zn)});var ag=B(Un=>{"use strict";var OP=Un&&Un.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(r,n,i)}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),aR=Un&&Un.__exportStar||function(r,e){for(var t in r)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&OP(e,r,t)};Object.defineProperty(Un,"__esModule",{value:!0});Un.SettingMonitor=Un.LanguageClient=Un.TransportKind=void 0;var Wr=require("child_process"),Jp=require("fs"),eg=require("path"),_i=require("vscode"),Pt=ir(),sR=Lp(),$P=nC(),Ot=Mp(),NP=bC(),qP=nR();aR(Mp(),Un);aR(iR(),Un);var oR="^1.82.0",$t;(function(r){r[r.stdio=0]="stdio",r[r.ipc=1]="ipc",r[r.pipe=2]="pipe",r[r.socket=3]="socket"})($t||(Un.TransportKind=$t={}));var mi;(function(r){function e(t){let n=t;return n&&n.kind===$t.socket&&Pt.number(n.port)}r.isSocket=e})(mi||(mi={}));var tg;(function(r){function e(t){return Pt.string(t.command)}r.is=e})(tg||(tg={}));var ng;(function(r){function e(t){return Pt.string(t.module)}r.is=e})(ng||(ng={}));var rg;(function(r){function e(t){let n=t;return n&&n.writer!==void 0&&n.reader!==void 0}r.is=e})(rg||(rg={}));var ig;(function(r){function e(t){let n=t;return n&&n.process!==void 0&&typeof n.detached=="boolean"}r.is=e})(ig||(ig={}));var sg=class extends sR.BaseLanguageClient{constructor(e,t,n,i,s){let a,o,c,u,l;Pt.string(t)?(a=e,o=t,c=n,u=i,l=!!s):(a=e.toLowerCase(),o=e,c=t,u=n,l=i),l===void 0&&(l=!1),super(a,o,u),this._serverOptions=c,this._forceDebug=l,this._isInDebugMode=l;try{this.checkVersion()}catch(b){throw Pt.string(b.message)&&this.outputChannel.appendLine(b.message),b}}checkVersion(){let e=NP(_i.version);if(!e)throw new Error(`No valid VS Code version detected. Version string is: ${_i.version}`);if(e.prerelease&&e.prerelease.length>0&&(e.prerelease=[]),!qP(e,oR))throw new Error(`The language client requires VS Code version ${oR} but received version ${_i.version}`)}get isInDebugMode(){return this._isInDebugMode}async restart(){await this.stop(),this.isInDebugMode?(await new Promise(e=>setTimeout(e,1e3)),await this.start()):await this.start()}stop(e=2e3){return super.stop(e).finally(()=>{if(this._serverProcess){let t=this._serverProcess;this._serverProcess=void 0,(this._isDetached===void 0||!this._isDetached)&&this.checkProcessDied(t),this._isDetached=void 0}})}checkProcessDied(e){!e||e.pid===void 0||setTimeout(()=>{try{e.pid!==void 0&&(process.kill(e.pid,0),(0,$P.terminate)(e))}catch{}},2e3)}handleConnectionClosed(){return this._serverProcess=void 0,super.handleConnectionClosed()}fillInitializeParams(e){super.fillInitializeParams(e),e.processId===null&&(e.processId=process.pid)}createMessageTransports(e){function t(l,b){if(!l&&!b)return;let f=Object.create(null);return Object.keys(process.env).forEach(_=>f[_]=process.env[_]),b&&(f.ELECTRON_RUN_AS_NODE="1",f.ELECTRON_NO_ASAR="1"),l&&Object.keys(l).forEach(_=>f[_]=l[_]),f}let n=["--debug=","--debug-brk=","--inspect=","--inspect-brk="],i=["--debug","--debug-brk","--inspect","--inspect-brk"];function s(){let l=process.execArgv;return l?l.some(b=>n.some(f=>b.startsWith(f))||i.some(f=>b===f)):!1}function a(l){if(l.stdin===null||l.stdout===null||l.stderr===null)throw new Error("Process created without stdio streams")}let o=this._serverOptions;if(Pt.func(o))return o().then(l=>{if(sR.MessageTransports.is(l))return this._isDetached=!!l.detached,l;if(rg.is(l))return this._isDetached=!!l.detached,{reader:new Ot.StreamMessageReader(l.reader),writer:new Ot.StreamMessageWriter(l.writer)};{let b;return ig.is(l)?(b=l.process,this._isDetached=l.detached):(b=l,this._isDetached=!1),b.stderr.on("data",f=>this.outputChannel.append(Pt.string(f)?f:f.toString(e))),{reader:new Ot.StreamMessageReader(b.stdout),writer:new Ot.StreamMessageWriter(b.stdin)}}});let c,u=o;return u.run||u.debug?this._forceDebug||s()?(c=u.debug,this._isInDebugMode=!0):(c=u.run,this._isInDebugMode=!1):c=o,this._getServerWorkingDir(c.options).then(l=>{if(ng.is(c)&&c.module){let b=c,f=b.transport||$t.stdio;if(b.runtime){let _=[],m=b.options??Object.create(null);m.execArgv&&m.execArgv.forEach(D=>_.push(D)),_.push(b.module),b.args&&b.args.forEach(D=>_.push(D));let p=Object.create(null);p.cwd=l,p.env=t(m.env,!1);let g=this._getRuntimePath(b.runtime,l),R;if(f===$t.ipc?(p.stdio=[null,null,null,"ipc"],_.push("--node-ipc")):f===$t.stdio?_.push("--stdio"):f===$t.pipe?(R=(0,Ot.generateRandomPipeName)(),_.push(`--pipe=${R}`)):mi.isSocket(f)&&_.push(`--socket=${f.port}`),_.push(`--clientProcessId=${process.pid.toString()}`),f===$t.ipc||f===$t.stdio){let D=Wr.spawn(g,_,p);return!D||!D.pid?Bs(D,`Launching server using runtime ${g} failed.`):(this._serverProcess=D,D.stderr.on("data",y=>this.outputChannel.append(Pt.string(y)?y:y.toString(e))),f===$t.ipc?(D.stdout.on("data",y=>this.outputChannel.append(Pt.string(y)?y:y.toString(e))),Promise.resolve({reader:new Ot.IPCMessageReader(D),writer:new Ot.IPCMessageWriter(D)})):Promise.resolve({reader:new Ot.StreamMessageReader(D.stdout),writer:new Ot.StreamMessageWriter(D.stdin)}))}else{if(f===$t.pipe)return(0,Ot.createClientPipeTransport)(R).then(D=>{let y=Wr.spawn(g,_,p);return!y||!y.pid?Bs(y,`Launching server using runtime ${g} failed.`):(this._serverProcess=y,y.stderr.on("data",d=>this.outputChannel.append(Pt.string(d)?d:d.toString(e))),y.stdout.on("data",d=>this.outputChannel.append(Pt.string(d)?d:d.toString(e))),D.onConnected().then(d=>({reader:d[0],writer:d[1]})))});if(mi.isSocket(f))return(0,Ot.createClientSocketTransport)(f.port).then(D=>{let y=Wr.spawn(g,_,p);return!y||!y.pid?Bs(y,`Launching server using runtime ${g} failed.`):(this._serverProcess=y,y.stderr.on("data",d=>this.outputChannel.append(Pt.string(d)?d:d.toString(e))),y.stdout.on("data",d=>this.outputChannel.append(Pt.string(d)?d:d.toString(e))),D.onConnected().then(d=>({reader:d[0],writer:d[1]})))})}}else{let _;return new Promise((m,p)=>{let g=(b.args&&b.args.slice())??[];f===$t.ipc?g.push("--node-ipc"):f===$t.stdio?g.push("--stdio"):f===$t.pipe?(_=(0,Ot.generateRandomPipeName)(),g.push(`--pipe=${_}`)):mi.isSocket(f)&&g.push(`--socket=${f.port}`),g.push(`--clientProcessId=${process.pid.toString()}`);let R=b.options??Object.create(null);if(R.env=t(R.env,!0),R.execArgv=R.execArgv||[],R.cwd=l,R.silent=!0,f===$t.ipc||f===$t.stdio){let D=Wr.fork(b.module,g||[],R);a(D),this._serverProcess=D,D.stderr.on("data",y=>this.outputChannel.append(Pt.string(y)?y:y.toString(e))),f===$t.ipc?(D.stdout.on("data",y=>this.outputChannel.append(Pt.string(y)?y:y.toString(e))),m({reader:new Ot.IPCMessageReader(this._serverProcess),writer:new Ot.IPCMessageWriter(this._serverProcess)})):m({reader:new Ot.StreamMessageReader(D.stdout),writer:new Ot.StreamMessageWriter(D.stdin)})}else f===$t.pipe?(0,Ot.createClientPipeTransport)(_).then(D=>{let y=Wr.fork(b.module,g||[],R);a(y),this._serverProcess=y,y.stderr.on("data",d=>this.outputChannel.append(Pt.string(d)?d:d.toString(e))),y.stdout.on("data",d=>this.outputChannel.append(Pt.string(d)?d:d.toString(e))),D.onConnected().then(d=>{m({reader:d[0],writer:d[1]})},p)},p):mi.isSocket(f)&&(0,Ot.createClientSocketTransport)(f.port).then(D=>{let y=Wr.fork(b.module,g||[],R);a(y),this._serverProcess=y,y.stderr.on("data",d=>this.outputChannel.append(Pt.string(d)?d:d.toString(e))),y.stdout.on("data",d=>this.outputChannel.append(Pt.string(d)?d:d.toString(e))),D.onConnected().then(d=>{m({reader:d[0],writer:d[1]})},p)},p)})}}else if(tg.is(c)&&c.command){let b=c,f=c.args!==void 0?c.args.slice(0):[],_,m=c.transport;if(m===$t.stdio)f.push("--stdio");else if(m===$t.pipe)_=(0,Ot.generateRandomPipeName)(),f.push(`--pipe=${_}`);else if(mi.isSocket(m))f.push(`--socket=${m.port}`);else if(m===$t.ipc)throw new Error("Transport kind ipc is not support for command executable");let p=Object.assign({},b.options);if(p.cwd=p.cwd||l,m===void 0||m===$t.stdio){let g=Wr.spawn(b.command,f,p);return!g||!g.pid?Bs(g,`Launching server using command ${b.command} failed.`):(g.stderr.on("data",R=>this.outputChannel.append(Pt.string(R)?R:R.toString(e))),this._serverProcess=g,this._isDetached=!!p.detached,Promise.resolve({reader:new Ot.StreamMessageReader(g.stdout),writer:new Ot.StreamMessageWriter(g.stdin)}))}else{if(m===$t.pipe)return(0,Ot.createClientPipeTransport)(_).then(g=>{let R=Wr.spawn(b.command,f,p);return!R||!R.pid?Bs(R,`Launching server using command ${b.command} failed.`):(this._serverProcess=R,this._isDetached=!!p.detached,R.stderr.on("data",D=>this.outputChannel.append(Pt.string(D)?D:D.toString(e))),R.stdout.on("data",D=>this.outputChannel.append(Pt.string(D)?D:D.toString(e))),g.onConnected().then(D=>({reader:D[0],writer:D[1]})))});if(mi.isSocket(m))return(0,Ot.createClientSocketTransport)(m.port).then(g=>{let R=Wr.spawn(b.command,f,p);return!R||!R.pid?Bs(R,`Launching server using command ${b.command} failed.`):(this._serverProcess=R,this._isDetached=!!p.detached,R.stderr.on("data",D=>this.outputChannel.append(Pt.string(D)?D:D.toString(e))),R.stdout.on("data",D=>this.outputChannel.append(Pt.string(D)?D:D.toString(e))),g.onConnected().then(D=>({reader:D[0],writer:D[1]})))})}}return Promise.reject(new Error("Unsupported server configuration "+JSON.stringify(o,null,4)))}).finally(()=>{this._serverProcess!==void 0&&this._serverProcess.on("exit",(l,b)=>{l!==null&&this.error(`Server process exited with code ${l}.`,void 0,!1),b!==null&&this.error(`Server process exited with signal ${b}.`,void 0,!1)})})}_getRuntimePath(e,t){if(eg.isAbsolute(e))return e;let n=this._mainGetRootPath();if(n!==void 0){let i=eg.join(n,e);if(Jp.existsSync(i))return i}if(t!==void 0){let i=eg.join(t,e);if(Jp.existsSync(i))return i}return e}_mainGetRootPath(){let e=_i.workspace.workspaceFolders;if(!e||e.length===0)return;let t=e[0];if(t.uri.scheme==="file")return t.uri.fsPath}_getServerWorkingDir(e){let t=e&&e.cwd;return t||(t=this.clientOptions.workspaceFolder?this.clientOptions.workspaceFolder.uri.fsPath:this._mainGetRootPath()),t?new Promise(n=>{Jp.lstat(t,(i,s)=>{n(!i&&s.isDirectory()?t:void 0)})}):Promise.resolve(void 0)}};Un.LanguageClient=sg;var og=class{constructor(e,t){this._client=e,this._setting=t,this._listeners=[]}start(){return _i.workspace.onDidChangeConfiguration(this.onDidChangeConfiguration,this,this._listeners),this.onDidChangeConfiguration(),new _i.Disposable(()=>{this._client.needsStop()&&this._client.stop()})}onDidChangeConfiguration(){let e=this._setting.indexOf("."),t=e>=0?this._setting.substr(0,e):this._setting,n=e>=0?this._setting.substr(e+1):void 0,i=n?_i.workspace.getConfiguration(t).get(n,!1):_i.workspace.getConfiguration(t);i&&this._client.needsStart()?this._client.start().catch(s=>this._client.error("Start failed after configuration change",s,"force")):!i&&this._client.needsStop()&&this._client.stop().catch(s=>this._client.error("Stop failed after configuration change",s,"force"))}};Un.SettingMonitor=og;function Bs(r,e){return r===null?Promise.reject(e):new Promise((t,n)=>{r.on("error",i=>{n(`${e} ${i}`)}),setImmediate(()=>n(e))})}});var cR=B((dA,Pu)=>{var LP=typeof window<"u"?window:typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope?self:{};var ye=function(r){var e=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,t=0,n={},i={manual:r.Prism&&r.Prism.manual,disableWorkerMessageHandler:r.Prism&&r.Prism.disableWorkerMessageHandler,util:{encode:function p(g){return g instanceof s?new s(g.type,p(g.content),g.alias):Array.isArray(g)?g.map(p):g.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(p){return Object.prototype.toString.call(p).slice(8,-1)},objId:function(p){return p.__id||Object.defineProperty(p,"__id",{value:++t}),p.__id},clone:function p(g,R){R=R||{};var D,y;switch(i.util.type(g)){case"Object":if(y=i.util.objId(g),R[y])return R[y];D={},R[y]=D;for(var d in g)g.hasOwnProperty(d)&&(D[d]=p(g[d],R));return D;case"Array":return y=i.util.objId(g),R[y]?R[y]:(D=[],R[y]=D,g.forEach(function(x,k){D[k]=p(x,R)}),D);default:return g}},getLanguage:function(p){for(;p;){var g=e.exec(p.className);if(g)return g[1].toLowerCase();p=p.parentElement}return"none"},setLanguage:function(p,g){p.className=p.className.replace(RegExp(e,"gi"),""),p.classList.add("language-"+g)},currentScript:function(){if(typeof document>"u")return null;if("currentScript"in document)return document.currentScript;try{throw new Error}catch(D){var p=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(D.stack)||[])[1];if(p){var g=document.getElementsByTagName("script");for(var R in g)if(g[R].src==p)return g[R]}return null}},isActive:function(p,g,R){for(var D="no-"+g;p;){var y=p.classList;if(y.contains(g))return!0;if(y.contains(D))return!1;p=p.parentElement}return!!R}},languages:{plain:n,plaintext:n,text:n,txt:n,extend:function(p,g){var R=i.util.clone(i.languages[p]);for(var D in g)R[D]=g[D];return R},insertBefore:function(p,g,R,D){D=D||i.languages;var y=D[p],d={};for(var x in y)if(y.hasOwnProperty(x)){if(x==g)for(var k in R)R.hasOwnProperty(k)&&(d[k]=R[k]);R.hasOwnProperty(x)||(d[x]=y[x])}var S=D[p];return D[p]=d,i.languages.DFS(i.languages,function(T,E){E===S&&T!=p&&(this[T]=d)}),d},DFS:function p(g,R,D,y){y=y||{};var d=i.util.objId;for(var x in g)if(g.hasOwnProperty(x)){R.call(g,x,g[x],D||x);var k=g[x],S=i.util.type(k);S==="Object"&&!y[d(k)]?(y[d(k)]=!0,p(k,R,null,y)):S==="Array"&&!y[d(k)]&&(y[d(k)]=!0,p(k,R,x,y))}}},plugins:{},highlightAll:function(p,g){i.highlightAllUnder(document,p,g)},highlightAllUnder:function(p,g,R){var D={callback:R,container:p,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};i.hooks.run("before-highlightall",D),D.elements=Array.prototype.slice.apply(D.container.querySelectorAll(D.selector)),i.hooks.run("before-all-elements-highlight",D);for(var y=0,d;d=D.elements[y++];)i.highlightElement(d,g===!0,D.callback)},highlightElement:function(p,g,R){var D=i.util.getLanguage(p),y=i.languages[D];i.util.setLanguage(p,D);var d=p.parentElement;d&&d.nodeName.toLowerCase()==="pre"&&i.util.setLanguage(d,D);var x=p.textContent,k={element:p,language:D,grammar:y,code:x};function S(E){k.highlightedCode=E,i.hooks.run("before-insert",k),k.element.innerHTML=k.highlightedCode,i.hooks.run("after-highlight",k),i.hooks.run("complete",k),R&&R.call(k.element)}if(i.hooks.run("before-sanity-check",k),d=k.element.parentElement,d&&d.nodeName.toLowerCase()==="pre"&&!d.hasAttribute("tabindex")&&d.setAttribute("tabindex","0"),!k.code){i.hooks.run("complete",k),R&&R.call(k.element);return}if(i.hooks.run("before-highlight",k),!k.grammar){S(i.util.encode(k.code));return}if(g&&r.Worker){var T=new Worker(i.filename);T.onmessage=function(E){S(E.data)},T.postMessage(JSON.stringify({language:k.language,code:k.code,immediateClose:!0}))}else S(i.highlight(k.code,k.grammar,k.language))},highlight:function(p,g,R){var D={code:p,grammar:g,language:R};if(i.hooks.run("before-tokenize",D),!D.grammar)throw new Error('The language "'+D.language+'" has no grammar.');return D.tokens=i.tokenize(D.code,D.grammar),i.hooks.run("after-tokenize",D),s.stringify(i.util.encode(D.tokens),D.language)},tokenize:function(p,g){var R=g.rest;if(R){for(var D in R)g[D]=R[D];delete g.rest}var y=new c;return u(y,y.head,p),o(p,y,g,y.head,0),b(y)},hooks:{all:{},add:function(p,g){var R=i.hooks.all;R[p]=R[p]||[],R[p].push(g)},run:function(p,g){var R=i.hooks.all[p];if(!(!R||!R.length))for(var D=0,y;y=R[D++];)y(g)}},Token:s};r.Prism=i;function s(p,g,R,D){this.type=p,this.content=g,this.alias=R,this.length=(D||"").length|0}s.stringify=function p(g,R){if(typeof g=="string")return g;if(Array.isArray(g)){var D="";return g.forEach(function(S){D+=p(S,R)}),D}var y={type:g.type,content:p(g.content,R),tag:"span",classes:["token",g.type],attributes:{},language:R},d=g.alias;d&&(Array.isArray(d)?Array.prototype.push.apply(y.classes,d):y.classes.push(d)),i.hooks.run("wrap",y);var x="";for(var k in y.attributes)x+=" "+k+'="'+(y.attributes[k]||"").replace(/"/g,"&quot;")+'"';return"<"+y.tag+' class="'+y.classes.join(" ")+'"'+x+">"+y.content+"</"+y.tag+">"};function a(p,g,R,D){p.lastIndex=g;var y=p.exec(R);if(y&&D&&y[1]){var d=y[1].length;y.index+=d,y[0]=y[0].slice(d)}return y}function o(p,g,R,D,y,d){for(var x in R)if(!(!R.hasOwnProperty(x)||!R[x])){var k=R[x];k=Array.isArray(k)?k:[k];for(var S=0;S<k.length;++S){if(d&&d.cause==x+","+S)return;var T=k[S],E=T.inside,M=!!T.lookbehind,V=!!T.greedy,Y=T.alias;if(V&&!T.pattern.global){var te=T.pattern.toString().match(/[imsuy]*$/)[0];T.pattern=RegExp(T.pattern.source,te+"g")}for(var se=T.pattern||T,le=D.next,be=y;le!==g.tail&&!(d&&be>=d.reach);be+=le.value.length,le=le.next){var we=le.value;if(g.length>p.length)return;if(!(we instanceof s)){var Le=1,ue;if(V){if(ue=a(se,be,p,M),!ue||ue.index>=p.length)break;var Ae=ue.index,Pe=ue.index+ue[0].length,ve=be;for(ve+=le.value.length;Ae>=ve;)le=le.next,ve+=le.value.length;if(ve-=le.value.length,be=ve,le.value instanceof s)continue;for(var he=le;he!==g.tail&&(ve<Pe||typeof he.value=="string");he=he.next)Le++,ve+=he.value.length;Le--,we=p.slice(be,ve),ue.index-=be}else if(ue=a(se,0,we,M),!ue)continue;var Ae=ue.index,at=ue[0],Z=we.slice(0,Ae),He=we.slice(Ae+at.length),Oe=be+we.length;d&&Oe>d.reach&&(d.reach=Oe);var ft=le.prev;Z&&(ft=u(g,ft,Z),be+=Z.length),l(g,ft,Le);var Ut=new s(x,E?i.tokenize(at,E):at,Y,at);if(le=u(g,ft,Ut),He&&u(g,le,He),Le>1){var ct={cause:x+","+S,reach:Oe};o(p,g,R,le.prev,be,ct),d&&ct.reach>d.reach&&(d.reach=ct.reach)}}}}}}function c(){var p={value:null,prev:null,next:null},g={value:null,prev:p,next:null};p.next=g,this.head=p,this.tail=g,this.length=0}function u(p,g,R){var D=g.next,y={value:R,prev:g,next:D};return g.next=y,D.prev=y,p.length++,y}function l(p,g,R){for(var D=g.next,y=0;y<R&&D!==p.tail;y++)D=D.next;g.next=D,D.prev=g,p.length-=y}function b(p){for(var g=[],R=p.head.next;R!==p.tail;)g.push(R.value),R=R.next;return g}if(!r.document)return r.addEventListener&&(i.disableWorkerMessageHandler||r.addEventListener("message",function(p){var g=JSON.parse(p.data),R=g.language,D=g.code,y=g.immediateClose;r.postMessage(i.highlight(D,i.languages[R],R)),y&&r.close()},!1)),i;var f=i.util.currentScript();f&&(i.filename=f.src,f.hasAttribute("data-manual")&&(i.manual=!0));function _(){i.manual||i.highlightAll()}if(!i.manual){var m=document.readyState;m==="loading"||m==="interactive"&&f&&f.defer?document.addEventListener("DOMContentLoaded",_):window.requestAnimationFrame?window.requestAnimationFrame(_):window.setTimeout(_,16)}return i}(LP);typeof Pu<"u"&&Pu.exports&&(Pu.exports=ye);typeof global<"u"&&(global.Prism=ye);ye.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},{pattern:/^(\s*)["']|["']$/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]};ye.languages.markup.tag.inside["attr-value"].inside.entity=ye.languages.markup.entity;ye.languages.markup.doctype.inside["internal-subset"].inside=ye.languages.markup;ye.hooks.add("wrap",function(r){r.type==="entity"&&(r.attributes.title=r.content.replace(/&amp;/,"&"))});Object.defineProperty(ye.languages.markup.tag,"addInlined",{value:function(e,t){var n={};n["language-"+t]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:ye.languages[t]},n.cdata=/^<!\[CDATA\[|\]\]>$/i;var i={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:n}};i["language-"+t]={pattern:/[\s\S]+/,inside:ye.languages[t]};var s={};s[e]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,function(){return e}),"i"),lookbehind:!0,greedy:!0,inside:i},ye.languages.insertBefore("markup","cdata",s)}});Object.defineProperty(ye.languages.markup.tag,"addAttribute",{value:function(r,e){ye.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+r+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[e,"language-"+e],inside:ye.languages[e]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}});ye.languages.html=ye.languages.markup;ye.languages.mathml=ye.languages.markup;ye.languages.svg=ye.languages.markup;ye.languages.xml=ye.languages.extend("markup",{});ye.languages.ssml=ye.languages.xml;ye.languages.atom=ye.languages.xml;ye.languages.rss=ye.languages.xml;(function(r){var e=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;r.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:RegExp("@[\\w-](?:"+/[^;{\s"']|\s+(?!\s)/.source+"|"+e.source+")*?"+/(?:;|(?=\s*\{))/.source),inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+e.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+e.source+"$"),alias:"url"}}},selector:{pattern:RegExp(`(^|[{}\\s])[^{}\\s](?:[^{};"'\\s]|\\s+(?![\\s{])|`+e.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:e,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},r.languages.css.atrule.inside.rest=r.languages.css;var t=r.languages.markup;t&&(t.tag.addInlined("style","css"),t.tag.addAttribute("style","css"))})(ye);ye.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/};ye.languages.javascript=ye.languages.extend("clike",{"class-name":[ye.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+(/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source)+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/});ye.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/;ye.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:ye.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:ye.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:ye.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:ye.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:ye.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/});ye.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:ye.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}});ye.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}});ye.languages.markup&&(ye.languages.markup.tag.addInlined("script","javascript"),ye.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript"));ye.languages.js=ye.languages.javascript;(function(){if(typeof ye>"u"||typeof document>"u")return;Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector);var r="Loading\u2026",e=function(f,_){return"\u2716 Error "+f+" while fetching file: "+_},t="\u2716 Error: File does not exist or is empty",n={js:"javascript",py:"python",rb:"ruby",ps1:"powershell",psm1:"powershell",sh:"bash",bat:"batch",h:"c",tex:"latex"},i="data-src-status",s="loading",a="loaded",o="failed",c="pre[data-src]:not(["+i+'="'+a+'"]):not(['+i+'="'+s+'"])';function u(f,_,m){var p=new XMLHttpRequest;p.open("GET",f,!0),p.onreadystatechange=function(){p.readyState==4&&(p.status<400&&p.responseText?_(p.responseText):p.status>=400?m(e(p.status,p.statusText)):m(t))},p.send(null)}function l(f){var _=/^\s*(\d+)\s*(?:(,)\s*(?:(\d+)\s*)?)?$/.exec(f||"");if(_){var m=Number(_[1]),p=_[2],g=_[3];return p?g?[m,Number(g)]:[m,void 0]:[m,m]}}ye.hooks.add("before-highlightall",function(f){f.selector+=", "+c}),ye.hooks.add("before-sanity-check",function(f){var _=f.element;if(_.matches(c)){f.code="",_.setAttribute(i,s);var m=_.appendChild(document.createElement("CODE"));m.textContent=r;var p=_.getAttribute("data-src"),g=f.language;if(g==="none"){var R=(/\.(\w+)$/.exec(p)||[,"none"])[1];g=n[R]||R}ye.util.setLanguage(m,g),ye.util.setLanguage(_,g);var D=ye.plugins.autoloader;D&&D.loadLanguages(g),u(p,function(y){_.setAttribute(i,a);var d=l(_.getAttribute("data-range"));if(d){var x=y.split(/\r\n?|\n/g),k=d[0],S=d[1]==null?x.length:d[1];k<0&&(k+=x.length),k=Math.max(0,Math.min(k-1,x.length)),S<0&&(S+=x.length),S=Math.max(0,Math.min(S,x.length)),y=x.slice(k,S).join(`
`),_.hasAttribute("data-start")||_.setAttribute("data-start",String(k+1))}m.textContent=y,ye.highlightElement(m)},function(y){_.setAttribute(i,o),m.textContent=y})}}),ye.plugins.fileHighlight={highlight:function(_){for(var m=(_||document).querySelectorAll(c),p=0,g;g=m[p++];)ye.highlightElement(g)}};var b=!1;ye.fileHighlight=function(){b||(console.warn("Prism.fileHighlight is deprecated. Use `Prism.plugins.fileHighlight.highlight` instead."),b=!0),ye.plugins.fileHighlight.highlight.apply(this,arguments)}})()});var uR=B(()=>{(function(r){function e(ue,Pe){return ue.replace(/<<(\d+)>>/g,function(ve,he){return"(?:"+Pe[+he]+")"})}function t(ue,Pe,ve){return RegExp(e(ue,Pe),ve||"")}function n(ue,Pe){for(var ve=0;ve<Pe;ve++)ue=ue.replace(/<<self>>/g,function(){return"(?:"+ue+")"});return ue.replace(/<<self>>/g,"[^\\s\\S]")}var i={type:"bool byte char decimal double dynamic float int long object sbyte short string uint ulong ushort var void",typeDeclaration:"class enum interface record struct",contextual:"add alias and ascending async await by descending from(?=\\s*(?:\\w|$)) get global group into init(?=\\s*;) join let nameof not notnull on or orderby partial remove select set unmanaged value when where with(?=\\s*{)",other:"abstract as base break case catch checked const continue default delegate do else event explicit extern finally fixed for foreach goto if implicit in internal is lock namespace new null operator out override params private protected public readonly ref return sealed sizeof stackalloc static switch this throw try typeof unchecked unsafe using virtual volatile while yield"};function s(ue){return"\\b(?:"+ue.trim().replace(/ /g,"|")+")\\b"}var a=s(i.typeDeclaration),o=RegExp(s(i.type+" "+i.typeDeclaration+" "+i.contextual+" "+i.other)),c=s(i.typeDeclaration+" "+i.contextual+" "+i.other),u=s(i.type+" "+i.typeDeclaration+" "+i.other),l=n(/<(?:[^<>;=+\-*/%&|^]|<<self>>)*>/.source,2),b=n(/\((?:[^()]|<<self>>)*\)/.source,2),f=/@?\b[A-Za-z_]\w*\b/.source,_=e(/<<0>>(?:\s*<<1>>)?/.source,[f,l]),m=e(/(?!<<0>>)<<1>>(?:\s*\.\s*<<1>>)*/.source,[c,_]),p=/\[\s*(?:,\s*)*\]/.source,g=e(/<<0>>(?:\s*(?:\?\s*)?<<1>>)*(?:\s*\?)?/.source,[m,p]),R=e(/[^,()<>[\];=+\-*/%&|^]|<<0>>|<<1>>|<<2>>/.source,[l,b,p]),D=e(/\(<<0>>+(?:,<<0>>+)+\)/.source,[R]),y=e(/(?:<<0>>|<<1>>)(?:\s*(?:\?\s*)?<<2>>)*(?:\s*\?)?/.source,[D,m,p]),d={keyword:o,punctuation:/[<>()?,.:[\]]/},x=/'(?:[^\r\n'\\]|\\.|\\[Uux][\da-fA-F]{1,8})'/.source,k=/"(?:\\.|[^\\"\r\n])*"/.source,S=/@"(?:""|\\[\s\S]|[^\\"])*"(?!")/.source;r.languages.csharp=r.languages.extend("clike",{string:[{pattern:t(/(^|[^$\\])<<0>>/.source,[S]),lookbehind:!0,greedy:!0},{pattern:t(/(^|[^@$\\])<<0>>/.source,[k]),lookbehind:!0,greedy:!0}],"class-name":[{pattern:t(/(\busing\s+static\s+)<<0>>(?=\s*;)/.source,[m]),lookbehind:!0,inside:d},{pattern:t(/(\busing\s+<<0>>\s*=\s*)<<1>>(?=\s*;)/.source,[f,y]),lookbehind:!0,inside:d},{pattern:t(/(\busing\s+)<<0>>(?=\s*=)/.source,[f]),lookbehind:!0},{pattern:t(/(\b<<0>>\s+)<<1>>/.source,[a,_]),lookbehind:!0,inside:d},{pattern:t(/(\bcatch\s*\(\s*)<<0>>/.source,[m]),lookbehind:!0,inside:d},{pattern:t(/(\bwhere\s+)<<0>>/.source,[f]),lookbehind:!0},{pattern:t(/(\b(?:is(?:\s+not)?|as)\s+)<<0>>/.source,[g]),lookbehind:!0,inside:d},{pattern:t(/\b<<0>>(?=\s+(?!<<1>>|with\s*\{)<<2>>(?:\s*[=,;:{)\]]|\s+(?:in|when)\b))/.source,[y,u,f]),inside:d}],keyword:o,number:/(?:\b0(?:x[\da-f_]*[\da-f]|b[01_]*[01])|(?:\B\.\d+(?:_+\d+)*|\b\d+(?:_+\d+)*(?:\.\d+(?:_+\d+)*)?)(?:e[-+]?\d+(?:_+\d+)*)?)(?:[dflmu]|lu|ul)?\b/i,operator:/>>=?|<<=?|[-=]>|([-+&|])\1|~|\?\?=?|[-+*/%&|^!=<>]=?/,punctuation:/\?\.?|::|[{}[\];(),.:]/}),r.languages.insertBefore("csharp","number",{range:{pattern:/\.\./,alias:"operator"}}),r.languages.insertBefore("csharp","punctuation",{"named-parameter":{pattern:t(/([(,]\s*)<<0>>(?=\s*:)/.source,[f]),lookbehind:!0,alias:"punctuation"}}),r.languages.insertBefore("csharp","class-name",{namespace:{pattern:t(/(\b(?:namespace|using)\s+)<<0>>(?:\s*\.\s*<<0>>)*(?=\s*[;{])/.source,[f]),lookbehind:!0,inside:{punctuation:/\./}},"type-expression":{pattern:t(/(\b(?:default|sizeof|typeof)\s*\(\s*(?!\s))(?:[^()\s]|\s(?!\s)|<<0>>)*(?=\s*\))/.source,[b]),lookbehind:!0,alias:"class-name",inside:d},"return-type":{pattern:t(/<<0>>(?=\s+(?:<<1>>\s*(?:=>|[({]|\.\s*this\s*\[)|this\s*\[))/.source,[y,m]),inside:d,alias:"class-name"},"constructor-invocation":{pattern:t(/(\bnew\s+)<<0>>(?=\s*[[({])/.source,[y]),lookbehind:!0,inside:d,alias:"class-name"},"generic-method":{pattern:t(/<<0>>\s*<<1>>(?=\s*\()/.source,[f,l]),inside:{function:t(/^<<0>>/.source,[f]),generic:{pattern:RegExp(l),alias:"class-name",inside:d}}},"type-list":{pattern:t(/\b((?:<<0>>\s+<<1>>|record\s+<<1>>\s*<<5>>|where\s+<<2>>)\s*:\s*)(?:<<3>>|<<4>>|<<1>>\s*<<5>>|<<6>>)(?:\s*,\s*(?:<<3>>|<<4>>|<<6>>))*(?=\s*(?:where|[{;]|=>|$))/.source,[a,_,f,y,o.source,b,/\bnew\s*\(\s*\)/.source]),lookbehind:!0,inside:{"record-arguments":{pattern:t(/(^(?!new\s*\()<<0>>\s*)<<1>>/.source,[_,b]),lookbehind:!0,greedy:!0,inside:r.languages.csharp},keyword:o,"class-name":{pattern:RegExp(y),greedy:!0,inside:d},punctuation:/[,()]/}},preprocessor:{pattern:/(^[\t ]*)#.*/m,lookbehind:!0,alias:"property",inside:{directive:{pattern:/(#)\b(?:define|elif|else|endif|endregion|error|if|line|nullable|pragma|region|undef|warning)\b/,lookbehind:!0,alias:"keyword"}}}});var T=k+"|"+x,E=e(/\/(?![*/])|\/\/[^\r\n]*[\r\n]|\/\*(?:[^*]|\*(?!\/))*\*\/|<<0>>/.source,[T]),M=n(e(/[^"'/()]|<<0>>|\(<<self>>*\)/.source,[E]),2),V=/\b(?:assembly|event|field|method|module|param|property|return|type)\b/.source,Y=e(/<<0>>(?:\s*\(<<1>>*\))?/.source,[m,M]);r.languages.insertBefore("csharp","class-name",{attribute:{pattern:t(/((?:^|[^\s\w>)?])\s*\[\s*)(?:<<0>>\s*:\s*)?<<1>>(?:\s*,\s*<<1>>)*(?=\s*\])/.source,[V,Y]),lookbehind:!0,greedy:!0,inside:{target:{pattern:t(/^<<0>>(?=\s*:)/.source,[V]),alias:"keyword"},"attribute-arguments":{pattern:t(/\(<<0>>*\)/.source,[M]),inside:r.languages.csharp},"class-name":{pattern:RegExp(m),inside:{punctuation:/\./}},punctuation:/[:,]/}}});var te=/:[^}\r\n]+/.source,se=n(e(/[^"'/()]|<<0>>|\(<<self>>*\)/.source,[E]),2),le=e(/\{(?!\{)(?:(?![}:])<<0>>)*<<1>>?\}/.source,[se,te]),be=n(e(/[^"'/()]|\/(?!\*)|\/\*(?:[^*]|\*(?!\/))*\*\/|<<0>>|\(<<self>>*\)/.source,[T]),2),we=e(/\{(?!\{)(?:(?![}:])<<0>>)*<<1>>?\}/.source,[be,te]);function Le(ue,Pe){return{interpolation:{pattern:t(/((?:^|[^{])(?:\{\{)*)<<0>>/.source,[ue]),lookbehind:!0,inside:{"format-string":{pattern:t(/(^\{(?:(?![}:])<<0>>)*)<<1>>(?=\}$)/.source,[Pe,te]),lookbehind:!0,inside:{punctuation:/^:/}},punctuation:/^\{|\}$/,expression:{pattern:/[\s\S]+/,alias:"language-csharp",inside:r.languages.csharp}}},string:/[\s\S]+/}}r.languages.insertBefore("csharp","string",{"interpolation-string":[{pattern:t(/(^|[^\\])(?:\$@|@\$)"(?:""|\\[\s\S]|\{\{|<<0>>|[^\\{"])*"/.source,[le]),lookbehind:!0,greedy:!0,inside:Le(le,se)},{pattern:t(/(^|[^@\\])\$"(?:\\.|\{\{|<<0>>|[^\\"{])*"/.source,[we]),lookbehind:!0,greedy:!0,inside:Le(we,be)}],char:{pattern:RegExp(x),greedy:!0}}),r.languages.dotnet=r.languages.cs=r.languages.csharp})(Prism)});var yR=B((CA,vR)=>{"use strict";var cg=class{tags={url:{type:"replace",open:e=>`<a href="${e||"#"}">`,close:"</a>"},quote:{type:"replace",open:e=>`<blockquote author="${e||""}">`,close:"</blockquote>"},b:{type:"replace",open:"<strong>",close:"</strong>"},u:{type:"replace",open:"<u>",close:"</u>"},i:{type:"replace",open:"<i>",close:"</i>"},h1:{type:"replace",open:"<h1>",close:"</h1>"},h2:{type:"replace",open:"<h2>",close:"</h2>"},h3:{type:"replace",open:"<h3>",close:"</h3>"},h4:{type:"replace",open:"<h4>",close:"</h4>"},h5:{type:"replace",open:"<h5>",close:"</h5>"},h6:{type:"replace",open:"<h6>",close:"</h6>"},code:{type:"replace",open:"<code>",close:"</code>"},strike:{type:"replace",open:'<span class="yabbcode-strike">',close:"</span>"},spoiler:{type:"replace",open:'<span class="yabbcode-spoiler">',close:"</span>"},list:{type:"replace",open:"<ul>",close:"</ul>"},olist:{type:"replace",open:"<ol>",close:"</ol>"},"*":{type:"replace",open:"<li>",close:null},img:{type:"content",replace:(e,t)=>t?`<img src="${t}" alt="${e||""}"/>`:""},noparse:{type:"ignore"}};regex={tags:/(\[[^\]^]+])/g,newline:/\r\n|\r|\n/g,placeholders:/\[TAG-[1-9]+]/g};contentModules={replace:(e,t,n)=>{let i=t.open,s=t.close;return typeof i=="function"&&(i=i(e.attr)),typeof s=="function"&&(s=s(e.attr)),i&&!e.isClosing&&(n=n.replace("[TAG-"+e.index+"]",i)),s&&e.closing&&(n=n.replace("[TAG-"+e.closing.index+"]",s)),n},content:(e,t,n)=>{if(!e.closing)return n;let i="[TAG-"+e.index+"]",s="[TAG-"+e.closing.index+"]",a=n.indexOf(i),o=n.indexOf(s),c=t.replace,u=n.slice(a+i.length,o);typeof c=="function"&&(c=c(e.attr,u));let l=n.slice(0,Math.max(0,a)),b=n.slice(o+s.length);return l+c+b},ignore:(e,t,n)=>{let i="[TAG-"+e.index+"]",s=n.indexOf(i),a="",o=n.length;e.closing&&(a="[TAG-"+e.closing.index+"]",o=n.indexOf(a));let c=n.slice(s+i.length,o);c=this.#e(e.children,c);let u=n.slice(0,Math.max(0,s)),l=n.slice(o+a.length);return u+c+l}};constructor(e={}){this.config={newline:!0,paragraph:!1,cleanUnmatchable:!0,sanitizeHtml:!0},e.newline!==void 0&&(this.config.newline=e.newline),e.paragraph!==void 0&&(this.config.paragraph=e.paragraph),e.cleanUnmatchable!==void 0&&(this.config.cleanUnmatchable=e.cleanUnmatchable),e.sanitizeHtml!==void 0&&(this.config.sanitizeHtml=e.sanitizeHtml)}#e=function(e,t){for(let n of e)t=t.replace("[TAG-"+n.index+"]",n.raw),n.closing&&(t=t.replace("[TAG-"+n.closing.index+"]",n.closing.raw)),n.children.length>0&&(t=this.#e(n.children,t));return t};#t=function(e,t){for(let n of e){let i=this.tags[n.module];if(i||(i={type:"replace",open:n.raw,close:n.closing&&n.closing.raw||""}),!this.contentModules[i.type])throw new Error("Cannot parse content block. Invalid block type ["+i.type+"] provided for tag ["+n.module+"]");t=this.contentModules[i.type](n,i,t),n.children.length>0&&i.type!=="ignore"&&(t=this.#t(n.children,t))}return t};#n=function(e,t){let n=0;for(;n<e.length;){let i=!1;if(e[n].matchTag!==null||e[n].isClosing){n++;continue}for(let[o,c]of e.entries())i||e[n].matchTag!==null||c.index===e[n].index||c.matchTag!==null||!c.isClosing||e[n].module!==c.module||(e[o].matchTag=e[n].index,e[n].matchTag=c.index,i=o);let s=n+1;i!==!1?e[n].closing=e[e[n].matchTag]:(e[n].matchTag=!1,i=e.length-1),s<i&&(e[n].children=e.slice(s,i).map(o=>(o.parent=e[n].index,o)));let a=s;for(;a<i;)e[a].parent=e[n].index,a++;n++}return e=e.filter(i=>!(t===void 0&&i.parent!==null||i.parent!==null&&i.parent!==t||i.isClosing)),e.map(i=>(i.children.length>0&&(i.children=this.#n(i.children,i.index)),i))};clearTags(){return this.tags={},this}registerTag(e,t){return this.tags[String(e).toLowerCase()]=t,this}parse(e){if(typeof e=="boolean"||typeof e!="string"&&Number.isNaN(Number(e)))return"";let t=String(e).slice(0);this.config.sanitizeHtml&&(t=t.replaceAll("&","&amp;").replaceAll("<","&lt;").replaceAll(">","&gt;").replaceAll('"',"&quot;").replaceAll("'","&#39;"));let n=[],i=String(t).match(this.regex.tags);if(this.config.newline&&(this.config.paragraph?t=t.replace(this.regex.newline,"</p><p>"):t=t.replace(this.regex.newline,"<br/>")),this.config.paragraph&&(t="<p>"+t+"</p>"),!i||i.length===0)return t;for(let[s,a]of i.entries()){let o=a.slice(1,-1).split("="),c={index:s,module:o[0].toLowerCase(),isClosing:a.slice(1,2)==="/",raw:a,attr:o.slice(1).join("="),closing:null,children:[],parent:null,matchTag:null};c.isClosing&&(c.module=c.module.slice(1)),n.push(c),t=t.replace(a,"[TAG-"+s+"]")}return n=this.#n(n),t=this.#t(n,t),this.config.cleanUnmatchable&&(t=t.replace(this.regex.placeholders,"")),t}};vR.exports=cg});var kR=B((kO,xR)=>{"use strict";xR.exports=ag()});var Fu=B(wi=>{"use strict";Object.defineProperty(wi,"__esModule",{value:!0});wi.Event=wi.Response=wi.Message=void 0;var ga=class{constructor(e){this.seq=0,this.type=e}};wi.Message=ga;var Cg=class extends ga{constructor(e,t){super("response"),this.request_seq=e.seq,this.command=e.command,t?(this.success=!1,this.message=t):this.success=!0}};wi.Response=Cg;var Rg=class extends ga{constructor(e,t){super("event"),this.event=e,t&&(this.body=t)}};wi.Event=Rg});var $R=B(Uu=>{"use strict";Object.defineProperty(Uu,"__esModule",{value:!0});Uu.ProtocolServer=void 0;var cT=require("events"),ma=Fu(),Sg=class{get event(){return this._event||(this._event=(e,t)=>{this._listener=e,this._this=t;let n;return n={dispose:()=>{this._listener=void 0,this._this=void 0}},n}),this._event}fire(e){if(this._listener)try{this._listener.call(this._this,e)}catch{}}hasListener(){return!!this._listener}dispose(){this._listener=void 0,this._this=void 0}},ju=class r extends cT.EventEmitter{constructor(){super(),this._sendMessage=new Sg,this._sequence=1,this._pendingRequests=new Map,this.onDidSendMessage=this._sendMessage.event}dispose(){}handleMessage(e){if(e.type==="request")this.dispatchRequest(e);else if(e.type==="response"){let t=e,n=this._pendingRequests.get(t.request_seq);n&&(this._pendingRequests.delete(t.request_seq),n(t))}}_isRunningInline(){return this._sendMessage&&this._sendMessage.hasListener()}start(e,t){this._writableStream=t,this._rawData=Buffer.alloc(0),e.on("data",n=>this._handleData(n)),e.on("close",()=>{this._emitEvent(new ma.Event("close"))}),e.on("error",n=>{this._emitEvent(new ma.Event("error","inStream error: "+(n&&n.message)))}),t.on("error",n=>{this._emitEvent(new ma.Event("error","outStream error: "+(n&&n.message)))}),e.resume()}stop(){this._writableStream&&this._writableStream.end()}sendEvent(e){this._send("event",e)}sendResponse(e){e.seq>0?console.error(`attempt to send more than one response for command ${e.command}`):this._send("response",e)}sendRequest(e,t,n,i){let s={command:e};if(t&&Object.keys(t).length>0&&(s.arguments=t),this._send("request",s),i){this._pendingRequests.set(s.seq,i);let a=setTimeout(()=>{clearTimeout(a);let o=this._pendingRequests.get(s.seq);o&&(this._pendingRequests.delete(s.seq),o(new ma.Response(s,"timeout")))},n)}}dispatchRequest(e){}_emitEvent(e){this.emit(e.event,e)}_send(e,t){if(t.type=e,t.seq=this._sequence++,this._writableStream){let n=JSON.stringify(t);this._writableStream.write(`Content-Length: ${Buffer.byteLength(n,"utf8")}\r
\r
${n}`,"utf8")}this._sendMessage.fire(t)}_handleData(e){for(this._rawData=Buffer.concat([this._rawData,e]);;){if(this._contentLength>=0){if(this._rawData.length>=this._contentLength){let t=this._rawData.toString("utf8",0,this._contentLength);if(this._rawData=this._rawData.slice(this._contentLength),this._contentLength=-1,t.length>0)try{let n=JSON.parse(t);this.handleMessage(n)}catch(n){this._emitEvent(new ma.Event("error","Error handling data: "+(n&&n.message)))}continue}}else{let t=this._rawData.indexOf(r.TWO_CRLF);if(t!==-1){let i=this._rawData.toString("utf8",0,t).split(`\r
`);for(let s=0;s<i.length;s++){let a=i[s].split(/: +/);a[0]=="Content-Length"&&(this._contentLength=+a[1])}this._rawData=this._rawData.slice(t+r.TWO_CRLF.length);continue}}break}}};Uu.ProtocolServer=ju;ju.TWO_CRLF=`\r
\r
`});var NR=B(Bu=>{"use strict";Object.defineProperty(Bu,"__esModule",{value:!0});Bu.runDebugAdapter=void 0;var uT=require("net");function lT(r){let e=0;if(process.argv.slice(2).forEach(function(n,i,s){let a=/^--server=(\d{4,5})$/.exec(n);a&&(e=parseInt(a[1],10))}),e>0)console.error(`waiting for debug protocol on port ${e}`),uT.createServer(n=>{console.error(">> accepted connection from client"),n.on("end",()=>{console.error(`>> client connection closed
`)});let i=new r(!1,!0);i.setRunAsServer(!0),i.start(n,n)}).listen(e);else{let n=new r(!1);process.on("SIGTERM",()=>{n.shutdown()}),n.start(process.stdin,process.stdout)}}Bu.runDebugAdapter=lT});var zu=B(Se=>{"use strict";Object.defineProperty(Se,"__esModule",{value:!0});Se.DebugSession=Se.ErrorDestination=Se.MemoryEvent=Se.InvalidatedEvent=Se.ProgressEndEvent=Se.ProgressUpdateEvent=Se.ProgressStartEvent=Se.CapabilitiesEvent=Se.LoadedSourceEvent=Se.ModuleEvent=Se.BreakpointEvent=Se.ThreadEvent=Se.OutputEvent=Se.ExitedEvent=Se.TerminatedEvent=Se.InitializedEvent=Se.ContinuedEvent=Se.StoppedEvent=Se.CompletionItem=Se.Module=Se.Breakpoint=Se.Variable=Se.Thread=Se.StackFrame=Se.Scope=Se.Source=void 0;var dT=$R(),hn=Fu(),fT=NR(),qR=require("url"),Dg=class{constructor(e,t,n=0,i,s){this.name=e,this.path=t,this.sourceReference=n,i&&(this.origin=i),s&&(this.adapterData=s)}};Se.Source=Dg;var xg=class{constructor(e,t,n=!1){this.name=e,this.variablesReference=t,this.expensive=n}};Se.Scope=xg;var kg=class{constructor(e,t,n,i=0,s=0){this.id=e,this.source=n,this.line=i,this.column=s,this.name=t}};Se.StackFrame=kg;var Pg=class{constructor(e,t){this.id=e,t?this.name=t:this.name="Thread #"+e}};Se.Thread=Pg;var Tg=class{constructor(e,t,n=0,i,s){this.name=e,this.value=t,this.variablesReference=n,typeof s=="number"&&(this.namedVariables=s),typeof i=="number"&&(this.indexedVariables=i)}};Se.Variable=Tg;var Eg=class{constructor(e,t,n,i){this.verified=e;let s=this;typeof t=="number"&&(s.line=t),typeof n=="number"&&(s.column=n),i&&(s.source=i)}setId(e){this.id=e}};Se.Breakpoint=Eg;var Ig=class{constructor(e,t){this.id=e,this.name=t}};Se.Module=Ig;var Ag=class{constructor(e,t,n=0){this.label=e,this.start=t,this.length=n}};Se.CompletionItem=Ag;var Og=class extends hn.Event{constructor(e,t,n){super("stopped"),this.body={reason:e},typeof t=="number"&&(this.body.threadId=t),typeof n=="string"&&(this.body.text=n)}};Se.StoppedEvent=Og;var $g=class extends hn.Event{constructor(e,t){super("continued"),this.body={threadId:e},typeof t=="boolean"&&(this.body.allThreadsContinued=t)}};Se.ContinuedEvent=$g;var Ng=class extends hn.Event{constructor(){super("initialized")}};Se.InitializedEvent=Ng;var qg=class extends hn.Event{constructor(e){if(super("terminated"),typeof e=="boolean"||e){let t=this;t.body={restart:e}}}};Se.TerminatedEvent=qg;var Lg=class extends hn.Event{constructor(e){super("exited"),this.body={exitCode:e}}};Se.ExitedEvent=Lg;var Mg=class extends hn.Event{constructor(e,t="console",n){super("output"),this.body={category:t,output:e},n!==void 0&&(this.body.data=n)}};Se.OutputEvent=Mg;var Fg=class extends hn.Event{constructor(e,t){super("thread"),this.body={reason:e,threadId:t}}};Se.ThreadEvent=Fg;var jg=class extends hn.Event{constructor(e,t){super("breakpoint"),this.body={reason:e,breakpoint:t}}};Se.BreakpointEvent=jg;var Ug=class extends hn.Event{constructor(e,t){super("module"),this.body={reason:e,module:t}}};Se.ModuleEvent=Ug;var Bg=class extends hn.Event{constructor(e,t){super("loadedSource"),this.body={reason:e,source:t}}};Se.LoadedSourceEvent=Bg;var Vg=class extends hn.Event{constructor(e){super("capabilities"),this.body={capabilities:e}}};Se.CapabilitiesEvent=Vg;var zg=class extends hn.Event{constructor(e,t,n){super("progressStart"),this.body={progressId:e,title:t},typeof n=="string"&&(this.body.message=n)}};Se.ProgressStartEvent=zg;var Gg=class extends hn.Event{constructor(e,t){super("progressUpdate"),this.body={progressId:e},typeof t=="string"&&(this.body.message=t)}};Se.ProgressUpdateEvent=Gg;var Hg=class extends hn.Event{constructor(e,t){super("progressEnd"),this.body={progressId:e},typeof t=="string"&&(this.body.message=t)}};Se.ProgressEndEvent=Hg;var Wg=class extends hn.Event{constructor(e,t,n){super("invalidated"),this.body={},e&&(this.body.areas=e),t&&(this.body.threadId=t),n&&(this.body.stackFrameId=n)}};Se.InvalidatedEvent=Wg;var Kg=class extends hn.Event{constructor(e,t,n){super("memory"),this.body={memoryReference:e,offset:t,count:n}}};Se.MemoryEvent=Kg;var Ki;(function(r){r[r.User=1]="User",r[r.Telemetry=2]="Telemetry"})(Ki=Se.ErrorDestination||(Se.ErrorDestination={}));var Vu=class r extends dT.ProtocolServer{constructor(e,t){super();let n=typeof e=="boolean"?e:!1;this._debuggerLinesStartAt1=n,this._debuggerColumnsStartAt1=n,this._debuggerPathsAreURIs=!1,this._clientLinesStartAt1=!0,this._clientColumnsStartAt1=!0,this._clientPathsAreURIs=!1,this._isServer=typeof t=="boolean"?t:!1,this.on("close",()=>{this.shutdown()}),this.on("error",i=>{this.shutdown()})}setDebuggerPathFormat(e){this._debuggerPathsAreURIs=e!=="path"}setDebuggerLinesStartAt1(e){this._debuggerLinesStartAt1=e}setDebuggerColumnsStartAt1(e){this._debuggerColumnsStartAt1=e}setRunAsServer(e){this._isServer=e}static run(e){(0,fT.runDebugAdapter)(e)}shutdown(){this._isServer||this._isRunningInline()||setTimeout(()=>{process.exit(0)},100)}sendErrorResponse(e,t,n,i,s=Ki.User){let a;typeof t=="number"?(a={id:t,format:n},i&&(a.variables=i),s&Ki.User&&(a.showUser=!0),s&Ki.Telemetry&&(a.sendTelemetry=!0)):a=t,e.success=!1,e.message=r.formatPII(a.format,!0,a.variables),e.body||(e.body={}),e.body.error=a,this.sendResponse(e)}runInTerminalRequest(e,t,n){this.sendRequest("runInTerminal",e,t,n)}dispatchRequest(e){let t=new hn.Response(e);try{if(e.command==="initialize"){var n=e.arguments;if(typeof n.linesStartAt1=="boolean"&&(this._clientLinesStartAt1=n.linesStartAt1),typeof n.columnsStartAt1=="boolean"&&(this._clientColumnsStartAt1=n.columnsStartAt1),n.pathFormat!=="path")this.sendErrorResponse(t,2018,"debug adapter only supports native paths",null,Ki.Telemetry);else{let i=t;i.body={},this.initializeRequest(i,n)}}else e.command==="launch"?this.launchRequest(t,e.arguments,e):e.command==="attach"?this.attachRequest(t,e.arguments,e):e.command==="disconnect"?this.disconnectRequest(t,e.arguments,e):e.command==="terminate"?this.terminateRequest(t,e.arguments,e):e.command==="restart"?this.restartRequest(t,e.arguments,e):e.command==="setBreakpoints"?this.setBreakPointsRequest(t,e.arguments,e):e.command==="setFunctionBreakpoints"?this.setFunctionBreakPointsRequest(t,e.arguments,e):e.command==="setExceptionBreakpoints"?this.setExceptionBreakPointsRequest(t,e.arguments,e):e.command==="configurationDone"?this.configurationDoneRequest(t,e.arguments,e):e.command==="continue"?this.continueRequest(t,e.arguments,e):e.command==="next"?this.nextRequest(t,e.arguments,e):e.command==="stepIn"?this.stepInRequest(t,e.arguments,e):e.command==="stepOut"?this.stepOutRequest(t,e.arguments,e):e.command==="stepBack"?this.stepBackRequest(t,e.arguments,e):e.command==="reverseContinue"?this.reverseContinueRequest(t,e.arguments,e):e.command==="restartFrame"?this.restartFrameRequest(t,e.arguments,e):e.command==="goto"?this.gotoRequest(t,e.arguments,e):e.command==="pause"?this.pauseRequest(t,e.arguments,e):e.command==="stackTrace"?this.stackTraceRequest(t,e.arguments,e):e.command==="scopes"?this.scopesRequest(t,e.arguments,e):e.command==="variables"?this.variablesRequest(t,e.arguments,e):e.command==="setVariable"?this.setVariableRequest(t,e.arguments,e):e.command==="setExpression"?this.setExpressionRequest(t,e.arguments,e):e.command==="source"?this.sourceRequest(t,e.arguments,e):e.command==="threads"?this.threadsRequest(t,e):e.command==="terminateThreads"?this.terminateThreadsRequest(t,e.arguments,e):e.command==="evaluate"?this.evaluateRequest(t,e.arguments,e):e.command==="stepInTargets"?this.stepInTargetsRequest(t,e.arguments,e):e.command==="gotoTargets"?this.gotoTargetsRequest(t,e.arguments,e):e.command==="completions"?this.completionsRequest(t,e.arguments,e):e.command==="exceptionInfo"?this.exceptionInfoRequest(t,e.arguments,e):e.command==="loadedSources"?this.loadedSourcesRequest(t,e.arguments,e):e.command==="dataBreakpointInfo"?this.dataBreakpointInfoRequest(t,e.arguments,e):e.command==="setDataBreakpoints"?this.setDataBreakpointsRequest(t,e.arguments,e):e.command==="readMemory"?this.readMemoryRequest(t,e.arguments,e):e.command==="writeMemory"?this.writeMemoryRequest(t,e.arguments,e):e.command==="disassemble"?this.disassembleRequest(t,e.arguments,e):e.command==="cancel"?this.cancelRequest(t,e.arguments,e):e.command==="breakpointLocations"?this.breakpointLocationsRequest(t,e.arguments,e):e.command==="setInstructionBreakpoints"?this.setInstructionBreakpointsRequest(t,e.arguments,e):this.customRequest(e.command,t,e.arguments,e)}catch(i){this.sendErrorResponse(t,1104,"{_stack}",{_exception:i.message,_stack:i.stack},Ki.Telemetry)}}initializeRequest(e,t){e.body.supportsConditionalBreakpoints=!1,e.body.supportsHitConditionalBreakpoints=!1,e.body.supportsFunctionBreakpoints=!1,e.body.supportsConfigurationDoneRequest=!0,e.body.supportsEvaluateForHovers=!1,e.body.supportsStepBack=!1,e.body.supportsSetVariable=!1,e.body.supportsRestartFrame=!1,e.body.supportsStepInTargetsRequest=!1,e.body.supportsGotoTargetsRequest=!1,e.body.supportsCompletionsRequest=!1,e.body.supportsRestartRequest=!1,e.body.supportsExceptionOptions=!1,e.body.supportsValueFormattingOptions=!1,e.body.supportsExceptionInfoRequest=!1,e.body.supportTerminateDebuggee=!1,e.body.supportsDelayedStackTraceLoading=!1,e.body.supportsLoadedSourcesRequest=!1,e.body.supportsLogPoints=!1,e.body.supportsTerminateThreadsRequest=!1,e.body.supportsSetExpression=!1,e.body.supportsTerminateRequest=!1,e.body.supportsDataBreakpoints=!1,e.body.supportsReadMemoryRequest=!1,e.body.supportsDisassembleRequest=!1,e.body.supportsCancelRequest=!1,e.body.supportsBreakpointLocationsRequest=!1,e.body.supportsClipboardContext=!1,e.body.supportsSteppingGranularity=!1,e.body.supportsInstructionBreakpoints=!1,e.body.supportsExceptionFilterOptions=!1,this.sendResponse(e)}disconnectRequest(e,t,n){this.sendResponse(e),this.shutdown()}launchRequest(e,t,n){this.sendResponse(e)}attachRequest(e,t,n){this.sendResponse(e)}terminateRequest(e,t,n){this.sendResponse(e)}restartRequest(e,t,n){this.sendResponse(e)}setBreakPointsRequest(e,t,n){this.sendResponse(e)}setFunctionBreakPointsRequest(e,t,n){this.sendResponse(e)}setExceptionBreakPointsRequest(e,t,n){this.sendResponse(e)}configurationDoneRequest(e,t,n){this.sendResponse(e)}continueRequest(e,t,n){this.sendResponse(e)}nextRequest(e,t,n){this.sendResponse(e)}stepInRequest(e,t,n){this.sendResponse(e)}stepOutRequest(e,t,n){this.sendResponse(e)}stepBackRequest(e,t,n){this.sendResponse(e)}reverseContinueRequest(e,t,n){this.sendResponse(e)}restartFrameRequest(e,t,n){this.sendResponse(e)}gotoRequest(e,t,n){this.sendResponse(e)}pauseRequest(e,t,n){this.sendResponse(e)}sourceRequest(e,t,n){this.sendResponse(e)}threadsRequest(e,t){this.sendResponse(e)}terminateThreadsRequest(e,t,n){this.sendResponse(e)}stackTraceRequest(e,t,n){this.sendResponse(e)}scopesRequest(e,t,n){this.sendResponse(e)}variablesRequest(e,t,n){this.sendResponse(e)}setVariableRequest(e,t,n){this.sendResponse(e)}setExpressionRequest(e,t,n){this.sendResponse(e)}evaluateRequest(e,t,n){this.sendResponse(e)}stepInTargetsRequest(e,t,n){this.sendResponse(e)}gotoTargetsRequest(e,t,n){this.sendResponse(e)}completionsRequest(e,t,n){this.sendResponse(e)}exceptionInfoRequest(e,t,n){this.sendResponse(e)}loadedSourcesRequest(e,t,n){this.sendResponse(e)}dataBreakpointInfoRequest(e,t,n){this.sendResponse(e)}setDataBreakpointsRequest(e,t,n){this.sendResponse(e)}readMemoryRequest(e,t,n){this.sendResponse(e)}writeMemoryRequest(e,t,n){this.sendResponse(e)}disassembleRequest(e,t,n){this.sendResponse(e)}cancelRequest(e,t,n){this.sendResponse(e)}breakpointLocationsRequest(e,t,n){this.sendResponse(e)}setInstructionBreakpointsRequest(e,t,n){this.sendResponse(e)}customRequest(e,t,n,i){this.sendErrorResponse(t,1014,"unrecognized request",null,Ki.Telemetry)}convertClientLineToDebugger(e){return this._debuggerLinesStartAt1?this._clientLinesStartAt1?e:e+1:this._clientLinesStartAt1?e-1:e}convertDebuggerLineToClient(e){return this._debuggerLinesStartAt1?this._clientLinesStartAt1?e:e-1:this._clientLinesStartAt1?e+1:e}convertClientColumnToDebugger(e){return this._debuggerColumnsStartAt1?this._clientColumnsStartAt1?e:e+1:this._clientColumnsStartAt1?e-1:e}convertDebuggerColumnToClient(e){return this._debuggerColumnsStartAt1?this._clientColumnsStartAt1?e:e-1:this._clientColumnsStartAt1?e+1:e}convertClientPathToDebugger(e){return this._clientPathsAreURIs!==this._debuggerPathsAreURIs?this._clientPathsAreURIs?r.uri2path(e):r.path2uri(e):e}convertDebuggerPathToClient(e){return this._debuggerPathsAreURIs!==this._clientPathsAreURIs?this._debuggerPathsAreURIs?r.uri2path(e):r.path2uri(e):e}static path2uri(e){process.platform==="win32"&&(/^[A-Z]:/.test(e)&&(e=e[0].toLowerCase()+e.substr(1)),e=e.replace(/\\/g,"/")),e=encodeURI(e);let t=new qR.URL("file:");return t.pathname=e,t.toString()}static uri2path(e){let t=new qR.URL(e),n=decodeURIComponent(t.pathname);return process.platform==="win32"&&(/^\/[a-zA-Z]:/.test(n)&&(n=n[1].toLowerCase()+n.substr(2)),n=n.replace(/\//g,"\\")),n}static formatPII(e,t,n){return e.replace(r._formatPIIRegexp,function(i,s){return t&&s.length>0&&s[0]!=="_"?i:n[s]&&n.hasOwnProperty(s)?n[s]:i})}};Se.DebugSession=Vu;Vu._formatPIIRegexp=/{([^}]+)}/g});var jR=B(Hu=>{"use strict";Object.defineProperty(Hu,"__esModule",{value:!0});Hu.InternalLogger=void 0;var LR=require("fs"),MR=require("path"),Jn=Wu(),Xg=class{constructor(e,t){this.beforeExitCallback=()=>this.dispose(),this._logCallback=e,this._logToConsole=t,this._minLogLevel=Jn.LogLevel.Warn,this.disposeCallback=(n,i)=>{this.dispose(),i=i||2,i+=128,process.exit(i)}}async setup(e){if(this._minLogLevel=e.consoleMinLogLevel,this._prependTimestamp=e.prependTimestamp,e.logFilePath)if(!MR.isAbsolute(e.logFilePath))this.log(`logFilePath must be an absolute path: ${e.logFilePath}`,Jn.LogLevel.Error);else{let t=n=>this.sendLog(`Error creating log file at path: ${e.logFilePath}. Error: ${n.toString()}
`,Jn.LogLevel.Error);try{await LR.promises.mkdir(MR.dirname(e.logFilePath),{recursive:!0}),this.log(`Verbose logs are written to:
`,Jn.LogLevel.Warn),this.log(e.logFilePath+`
`,Jn.LogLevel.Warn),this._logFileStream=LR.createWriteStream(e.logFilePath),this.logDateTime(),this.setupShutdownListeners(),this._logFileStream.on("error",n=>{t(n)})}catch(n){t(n)}}}logDateTime(){let e=new Date,n=e.getUTCFullYear()+`-${e.getUTCMonth()+1}-`+e.getUTCDate()+", "+FR();this.log(n+`
`,Jn.LogLevel.Verbose,!1)}setupShutdownListeners(){process.on("beforeExit",this.beforeExitCallback),process.on("SIGTERM",this.disposeCallback),process.on("SIGINT",this.disposeCallback)}removeShutdownListeners(){process.removeListener("beforeExit",this.beforeExitCallback),process.removeListener("SIGTERM",this.disposeCallback),process.removeListener("SIGINT",this.disposeCallback)}dispose(){return new Promise(e=>{this.removeShutdownListeners(),this._logFileStream?(this._logFileStream.end(e),this._logFileStream=null):e()})}log(e,t,n=!0){if(this._minLogLevel!==Jn.LogLevel.Stop){if(t>=this._minLogLevel&&this.sendLog(e,t),this._logToConsole){let i=t===Jn.LogLevel.Error?console.error:t===Jn.LogLevel.Warn?console.warn:null;i&&i((0,Jn.trimLastNewline)(e))}t===Jn.LogLevel.Error&&(e=`[${Jn.LogLevel[t]}] ${e}`),this._prependTimestamp&&n&&(e="["+FR()+"] "+e),this._logFileStream&&this._logFileStream.write(e)}}sendLog(e,t){if(e.length>1500){let n=!!e.match(/(\n|\r\n)$/);e=e.substr(0,1500)+"[...]",n&&(e=e+`
`)}if(this._logCallback){let n=new Jn.LogOutputEvent(e,t);this._logCallback(n)}}};Hu.InternalLogger=Xg;function FR(){let r=new Date,e=Gu(2,String(r.getUTCHours())),t=Gu(2,String(r.getUTCMinutes())),n=Gu(2,String(r.getUTCSeconds())),i=Gu(3,String(r.getUTCMilliseconds()));return e+":"+t+":"+n+"."+i+" UTC"}function Gu(r,e){return e.length>=r?e:String("0".repeat(r)+e).slice(-r)}});var Wu=B(er=>{"use strict";Object.defineProperty(er,"__esModule",{value:!0});er.trimLastNewline=er.LogOutputEvent=er.logger=er.Logger=er.LogLevel=void 0;var hT=jR(),pT=zu(),Ci;(function(r){r[r.Verbose=0]="Verbose",r[r.Log=1]="Log",r[r.Warn=2]="Warn",r[r.Error=3]="Error",r[r.Stop=4]="Stop"})(Ci=er.LogLevel||(er.LogLevel={}));var Ku=class{constructor(){this._pendingLogQ=[]}log(e,t=Ci.Log){e=e+`
`,this._write(e,t)}verbose(e){this.log(e,Ci.Verbose)}warn(e){this.log(e,Ci.Warn)}error(e){this.log(e,Ci.Error)}dispose(){if(this._currentLogger){let e=this._currentLogger.dispose();return this._currentLogger=null,e}else return Promise.resolve()}_write(e,t=Ci.Log){e=e+"",this._pendingLogQ?this._pendingLogQ.push({msg:e,level:t}):this._currentLogger&&this._currentLogger.log(e,t)}setup(e,t,n=!0){let i=typeof t=="string"?t:t&&this._logFilePathFromInit;if(this._currentLogger){let s={consoleMinLogLevel:e,logFilePath:i,prependTimestamp:n};this._currentLogger.setup(s).then(()=>{if(this._pendingLogQ){let a=this._pendingLogQ;this._pendingLogQ=null,a.forEach(o=>this._write(o.msg,o.level))}})}}init(e,t,n){this._pendingLogQ=this._pendingLogQ||[],this._currentLogger=new hT.InternalLogger(e,n),this._logFilePathFromInit=t}};er.Logger=Ku;er.logger=new Ku;var Yg=class extends pT.OutputEvent{constructor(e,t){let n=t===Ci.Error?"stderr":t===Ci.Warn?"console":"stdout";super(e,n)}};er.LogOutputEvent=Yg;function gT(r){return r.replace(/(\n|\r\n)$/,"")}er.trimLastNewline=gT});var VR=B(Xu=>{"use strict";Object.defineProperty(Xu,"__esModule",{value:!0});Xu.LoggingDebugSession=void 0;var BR=Wu(),Ws=BR.logger,UR=zu(),Qg=class extends UR.DebugSession{constructor(e,t,n){super(t,n),this.obsolete_logFilePath=e,this.on("error",i=>{Ws.error(i.body)})}start(e,t){super.start(e,t),Ws.init(n=>this.sendEvent(n),this.obsolete_logFilePath,this._isServer)}sendEvent(e){if(!(e instanceof BR.LogOutputEvent)){let t=e;e instanceof UR.OutputEvent&&e.body&&e.body.data&&e.body.data.doNotLogOutput&&(delete e.body.data.doNotLogOutput,t={...e},t.body={...e.body,output:"<output not logged>"}),Ws.verbose(`To client: ${JSON.stringify(t)}`)}super.sendEvent(e)}sendRequest(e,t,n,i){Ws.verbose(`To client: ${JSON.stringify(e)}(${JSON.stringify(t)}), timeout: ${n}`),super.sendRequest(e,t,n,i)}sendResponse(e){Ws.verbose(`To client: ${JSON.stringify(e)}`),super.sendResponse(e)}dispatchRequest(e){Ws.verbose(`From client: ${e.command}(${JSON.stringify(e.arguments)})`),super.dispatchRequest(e)}};Xu.LoggingDebugSession=Qg});var zR=B(Yu=>{"use strict";Object.defineProperty(Yu,"__esModule",{value:!0});Yu.Handles=void 0;var Zg=class{constructor(e){this.START_HANDLE=1e3,this._handleMap=new Map,this._nextHandle=typeof e=="number"?e:this.START_HANDLE}reset(){this._nextHandle=this.START_HANDLE,this._handleMap=new Map}create(e){var t=this._nextHandle++;return this._handleMap.set(t,e),t}get(e,t){return this._handleMap.get(e)||t}};Yu.Handles=Zg});var Ks=B(fe=>{"use strict";Object.defineProperty(fe,"__esModule",{value:!0});fe.Handles=fe.Response=fe.Event=fe.ErrorDestination=fe.CompletionItem=fe.Module=fe.Source=fe.Breakpoint=fe.Variable=fe.Scope=fe.StackFrame=fe.Thread=fe.MemoryEvent=fe.InvalidatedEvent=fe.ProgressEndEvent=fe.ProgressUpdateEvent=fe.ProgressStartEvent=fe.CapabilitiesEvent=fe.LoadedSourceEvent=fe.ModuleEvent=fe.BreakpointEvent=fe.ThreadEvent=fe.OutputEvent=fe.ContinuedEvent=fe.StoppedEvent=fe.ExitedEvent=fe.TerminatedEvent=fe.InitializedEvent=fe.logger=fe.Logger=fe.LoggingDebugSession=fe.DebugSession=void 0;var wt=zu();Object.defineProperty(fe,"DebugSession",{enumerable:!0,get:function(){return wt.DebugSession}});Object.defineProperty(fe,"InitializedEvent",{enumerable:!0,get:function(){return wt.InitializedEvent}});Object.defineProperty(fe,"TerminatedEvent",{enumerable:!0,get:function(){return wt.TerminatedEvent}});Object.defineProperty(fe,"ExitedEvent",{enumerable:!0,get:function(){return wt.ExitedEvent}});Object.defineProperty(fe,"StoppedEvent",{enumerable:!0,get:function(){return wt.StoppedEvent}});Object.defineProperty(fe,"ContinuedEvent",{enumerable:!0,get:function(){return wt.ContinuedEvent}});Object.defineProperty(fe,"OutputEvent",{enumerable:!0,get:function(){return wt.OutputEvent}});Object.defineProperty(fe,"ThreadEvent",{enumerable:!0,get:function(){return wt.ThreadEvent}});Object.defineProperty(fe,"BreakpointEvent",{enumerable:!0,get:function(){return wt.BreakpointEvent}});Object.defineProperty(fe,"ModuleEvent",{enumerable:!0,get:function(){return wt.ModuleEvent}});Object.defineProperty(fe,"LoadedSourceEvent",{enumerable:!0,get:function(){return wt.LoadedSourceEvent}});Object.defineProperty(fe,"CapabilitiesEvent",{enumerable:!0,get:function(){return wt.CapabilitiesEvent}});Object.defineProperty(fe,"ProgressStartEvent",{enumerable:!0,get:function(){return wt.ProgressStartEvent}});Object.defineProperty(fe,"ProgressUpdateEvent",{enumerable:!0,get:function(){return wt.ProgressUpdateEvent}});Object.defineProperty(fe,"ProgressEndEvent",{enumerable:!0,get:function(){return wt.ProgressEndEvent}});Object.defineProperty(fe,"InvalidatedEvent",{enumerable:!0,get:function(){return wt.InvalidatedEvent}});Object.defineProperty(fe,"MemoryEvent",{enumerable:!0,get:function(){return wt.MemoryEvent}});Object.defineProperty(fe,"Thread",{enumerable:!0,get:function(){return wt.Thread}});Object.defineProperty(fe,"StackFrame",{enumerable:!0,get:function(){return wt.StackFrame}});Object.defineProperty(fe,"Scope",{enumerable:!0,get:function(){return wt.Scope}});Object.defineProperty(fe,"Variable",{enumerable:!0,get:function(){return wt.Variable}});Object.defineProperty(fe,"Breakpoint",{enumerable:!0,get:function(){return wt.Breakpoint}});Object.defineProperty(fe,"Source",{enumerable:!0,get:function(){return wt.Source}});Object.defineProperty(fe,"Module",{enumerable:!0,get:function(){return wt.Module}});Object.defineProperty(fe,"CompletionItem",{enumerable:!0,get:function(){return wt.CompletionItem}});Object.defineProperty(fe,"ErrorDestination",{enumerable:!0,get:function(){return wt.ErrorDestination}});var mT=VR();Object.defineProperty(fe,"LoggingDebugSession",{enumerable:!0,get:function(){return mT.LoggingDebugSession}});var GR=Wu();fe.Logger=GR;var HR=Fu();Object.defineProperty(fe,"Event",{enumerable:!0,get:function(){return HR.Event}});Object.defineProperty(fe,"Response",{enumerable:!0,get:function(){return HR.Response}});var _T=zR();Object.defineProperty(fe,"Handles",{enumerable:!0,get:function(){return _T.Handles}});var bT=GR.logger;fe.logger=bT});var Jg=B(WR=>{function Qu(){this.waiters=[]}Qu.prototype.wait=function(r){var e=this,t={};this.waiters.push(t);var n=new Promise(function(i){var s=!1;t.resolve=function(a){if(!s){if(s=!0,t.timeout&&(clearTimeout(t.timeout),t.timeout=null),!a){var o=e.waiters.indexOf(t);o>-1&&e.waiters.splice(o,1)}i()}}});return r>0&&isFinite(r)&&(t.timeout=setTimeout(function(){t.timeout=null,t.resolve()},r)),n};Qu.prototype.notify=function(){this.waiters.length>0&&this.waiters.pop().resolve(!0)};Qu.prototype.notifyAll=function(){for(var r=this.waiters.length-1;r>=0;r--)this.waiters[r].resolve(!0);this.waiters=[]};WR.Subject=Qu});var im=B(rm=>{"use strict";Object.defineProperty(rm,"__esModule",{value:!0});var nm=class{constructor(e=""){this.defaultAnsiTextColor=e}hexToRgb(e,t){let n=parseInt(e.slice(1),16),i=n>>16&255,s=n>>8&255,a=n&255;return`\x1B[${t};2;${i};${s};${a}m`}parseColorTags(e,t,n){let i=new RegExp(`(?<=\\[${t}=)(?!#)([a-zA-Z_]+)(?=\\])`,"g"),s=new RegExp(`\\[${t}=(#[A-Fa-f0-9]{6})\\]`),a=new RegExp(s.source,"g"),o=e,c=e.match(i);c!==null&&c.forEach(l=>{o=o.replace(l,l.toLowerCase().replaceAll("_",""))});let u=e.match(a);return u!==null&&u.forEach(l=>{let b=l.match(s)[1],f=this.hexToRgb(b,n);o=o.replace(`[${t}=${b}]`,f)}),o=o.replaceAll(`[${t}=black]`,`\x1B[${n};2;0;0;0m`).replaceAll(`[${t}=silver]`,`\x1B[${n};2;192;192;192m`).replaceAll(`[${t}=gray]`,`\x1B[${n};2;128;128;128m`).replaceAll(`[${t}=grey]`,`\x1B[${n};2;128;128;128m`).replaceAll(`[${t}=white]`,`\x1B[${n};2;255;255;255m`).replaceAll(`[${t}=maroon]`,`\x1B[${n};2;128;0;0m`).replaceAll(`[${t}=red]`,`\x1B[${n};2;255;0;0m`).replaceAll(`[${t}=purple]`,`\x1B[${n};2;128;0;128m`).replaceAll(`[${t}=fuchsia]`,`\x1B[${n};2;255;0;255m`).replaceAll(`[${t}=green]`,`\x1B[${n};2;0;128;0m`).replaceAll(`[${t}=lime]`,`\x1B[${n};2;0;255;0m`).replaceAll(`[${t}=olive]`,`\x1B[${n};2;128;128;0m`).replaceAll(`[${t}=yellow]`,`\x1B[${n};2;255;255;0m`).replaceAll(`[${t}=navy]`,`\x1B[${n};2;0;0;128m`).replaceAll(`[${t}=blue]`,`\x1B[${n};2;0;0;255m`).replaceAll(`[${t}=teal]`,`\x1B[${n};2;0;128;128m`).replaceAll(`[${t}=aqua]`,`\x1B[${n};2;0;255;255m`).replaceAll(`[${t}=orange]`,`\x1B[${n};2;255;165;0m`).replaceAll(`[${t}=darkred]`,`\x1B[${n};2;139;0;0m`).replaceAll(`[${t}=brown]`,`\x1B[${n};2;165;42;42m`).replaceAll(`[${t}=firebrick]`,`\x1B[${n};2;178;34;34m`).replaceAll(`[${t}=crimson]`,`\x1B[${n};2;220;20;60m`).replaceAll(`[${t}=darkorange]`,`\x1B[${n};2;255;140;0m`).replaceAll(`[${t}=gold]`,`\x1B[${n};2;255;215;0m`).replaceAll(`[${t}=darkgoldenrod]`,`\x1B[${n};2;184;134;11m`).replaceAll(`[${t}=rosybrown]`,`\x1B[${n};2;188;143;143m`).replaceAll(`[${t}=darkgreen]`,`\x1B[${n};2;0;100;0m`).replaceAll(`[${t}=forestgreen]`,`\x1B[${n};2;34;139;34m`).replaceAll(`[${t}=darkcyan]`,`\x1B[${n};2;0;139;139m`).replaceAll(`[${t}=lightseagreen]`,`\x1B[${n};2;32;178;170m`).replaceAll(`[${t}=darkblue]`,`\x1B[${n};2;0;0;139m`).replaceAll(`[${t}=mediumblue]`,`\x1B[${n};2;0;0;205m`).replaceAll(`[${t}=darkviolet]`,`\x1B[${n};2;148;0;211m`).replaceAll(`[${t}=darkmagenta]`,`\x1B[${n};2;139;0;139m`).replaceAll(`[${t}=indianred]`,`\x1B[${n};2;205;92;92m`).replaceAll(`[${t}=lightcoral]`,`\x1B[${n};2;240;128;128m`).replaceAll(`[${t}=salmon]`,`\x1B[${n};2;250;128;114m`).replaceAll(`[${t}=darksalmon]`,`\x1B[${n};2;233;150;122m`).replaceAll(`[${t}=lightsalmon]`,`\x1B[${n};2;255;160;122m`).replaceAll(`[${t}=lightpink]`,`\x1B[${n};2;255;182;193m`).replaceAll(`[${t}=deeppink]`,`\x1B[${n};2;255;20;147m`).replaceAll(`[${t}=mediumvioletred]`,`\x1B[${n};2;199;21;133m`).replaceAll(`[${t}=palevioletred]`,`\x1B[${n};2;219;112;147m`).replaceAll(`[${t}=blueviolet]`,`\x1B[${n};2;138;43;226m`).replaceAll(`[${t}=darkslateblue]`,`\x1B[${n};2;72;61;139m`).replaceAll(`[${t}=mediumslateblue]`,`\x1B[${n};2;123;104;238m`).replaceAll(`[${t}=tomato]`,`\x1B[${n};2;255;99;71m`).replaceAll(`[${t}=orangered]`,`\x1B[${n};2;255;69;0m`).replaceAll(`[${t}=khaki]`,`\x1B[${n};2;240;230;140m`).replaceAll(`[${t}=lavender]`,`\x1B[${n};2;230;230;250m`).replaceAll(`[${t}=thistle]`,`\x1B[${n};2;216;191;216m`).replaceAll(`[${t}=plum]`,`\x1B[${n};2;221;160;221m`).replaceAll(`[${t}=violet]`,`\x1B[${n};2;238;130;238m`).replaceAll(`[${t}=orchid]`,`\x1B[${n};2;218;112;214m`).replaceAll(`[${t}=magenta]`,`\x1B[${n};2;255;0;255m`).replaceAll(`[${t}=mediumorchid]`,`\x1B[${n};2;186;85;211m`).replaceAll(`[${t}=rebeccapurple]`,`\x1B[${n};2;102;51;153m`).replaceAll(`[${t}=slateblue]`,`\x1B[${n};2;106;90;205m`).replaceAll(`[${t}=mediumspringgreen]`,`\x1B[${n};2;0;250;154m`).replaceAll(`[${t}=springgreen]`,`\x1B[${n};2;0;255;127m`).replaceAll(`[${t}=mediumseagreen]`,`\x1B[${n};2;60;179;113m`).replaceAll(`[${t}=seagreen]`,`\x1B[${n};2;46;139;87m`).replaceAll(`[${t}=greenyellow]`,`\x1B[${n};2;173;255;47m`).replaceAll(`[${t}=chartreuse]`,`\x1B[${n};2;127;255;0m`).replaceAll(`[${t}=lawngreen]`,`\x1B[${n};2;124;252;0m`).replaceAll(`[${t}=lightgreen]`,`\x1B[${n};2;144;238;144m`).replaceAll(`[${t}=palegreen]`,`\x1B[${n};2;152;251;152m`).replaceAll(`[${t}=darkseagreen]`,`\x1B[${n};2;143;188;143m`).replaceAll(`[${t}=lightcyan]`,`\x1B[${n};2;224;255;255m`).replaceAll(`[${t}=paleturquoise]`,`\x1B[${n};2;175;238;238m`).replaceAll(`[${t}=aquamarine]`,`\x1B[${n};2;127;255;212m`).replaceAll(`[${t}=turquoise]`,`\x1B[${n};2;64;224;208m`).replaceAll(`[${t}=mediumturquoise]`,`\x1B[${n};2;72;209;204m`).replaceAll(`[${t}=darkturquoise]`,`\x1B[${n};2;0;206;209m`).replaceAll(`[${t}=cadetblue]`,`\x1B[${n};2;95;158;160m`).replaceAll(`[${t}=steelblue]`,`\x1B[${n};2;70;130;180m`).replaceAll(`[${t}=lightsteelblue]`,`\x1B[${n};2;176;196;222m`).replaceAll(`[${t}=powderblue]`,`\x1B[${n};2;176;224;230m`).replaceAll(`[${t}=lightblue]`,`\x1B[${n};2;173;216;230m`).replaceAll(`[${t}=skyblue]`,`\x1B[${n};2;135;206;235m`).replaceAll(`[${t}=lightskyblue]`,`\x1B[${n};2;135;206;250m`).replaceAll(`[${t}=deepskyblue]`,`\x1B[${n};2;0;191;255m`).replaceAll(`[${t}=dodgerblue]`,`\x1B[${n};2;30;144;255m`).replaceAll(`[${t}=royalblue]`,`\x1B[${n};2;65;105;225m`).replaceAll(`[${t}=midnightblue]`,`\x1B[${n};2;25;25;112m`).replaceAll(`[${t}=cornsilk]`,`\x1B[${n};2;255;248;220m`).replaceAll(`[${t}=beige]`,`\x1B[${n};2;245;245;220m`).replaceAll(`[${t}=wheat]`,`\x1B[${n};2;245;222;179m`).replaceAll(`[${t}=sandybrown]`,`\x1B[${n};2;244;164;96m`).replaceAll(`[${t}=goldenrod]`,`\x1B[${n};2;218;165;32m`).replaceAll(`[${t}=peru]`,`\x1B[${n};2;205;133;63m`).replaceAll(`[${t}=chocolate]`,`\x1B[${n};2;210;105;30m`).replaceAll(`[${t}=saddlebrown]`,`\x1B[${n};2;139;69;19m`).replaceAll(`[${t}=sienna]`,`\x1B[${n};2;160;82;45m`).replaceAll(`[${t}=burlywood]`,`\x1B[${n};2;222;184;135m`).replaceAll(`[${t}=tan]`,`\x1B[${n};2;210;180;140m`).replaceAll(`[${t}=moccasin]`,`\x1B[${n};2;255;228;181m`).replaceAll(`[${t}=navajowhite]`,`\x1B[${n};2;255;222;173m`).replaceAll(`[${t}=bisque]`,`\x1B[${n};2;255;228;196m`).replaceAll(`[${t}=blanchedalmond]`,`\x1B[${n};2;255;235;205m`).replaceAll(`[${t}=darkkhaki]`,`\x1B[${n};2;189;183;107m`).replaceAll(`[${t}=gainsboro]`,`\x1B[${n};2;220;220;220m`).replaceAll(`[${t}=lightgray]`,`\x1B[${n};2;211;211;211m`).replaceAll(`[${t}=lightgrey]`,`\x1B[${n};2;211;211;211m`).replaceAll(`[${t}=darkgray]`,`\x1B[${n};2;169;169;169m`).replaceAll(`[${t}=darkgrey]`,`\x1B[${n};2;169;169;169m`).replaceAll(`[${t}=dimgray]`,`\x1B[${n};2;105;105;105m`).replaceAll(`[${t}=dimgrey]`,`\x1B[${n};2;105;105;105m`).replaceAll(`[${t}=lightslategray]`,`\x1B[${n};2;119;136;153m`).replaceAll(`[${t}=lightslategrey]`,`\x1B[${n};2;119;136;153m`).replaceAll(`[${t}=slategray]`,`\x1B[${n};2;112;128;144m`).replaceAll(`[${t}=slategrey]`,`\x1B[${n};2;112;128;144m`).replaceAll(`[${t}=darkslategray]`,`\x1B[${n};2;47;79;79m`).replaceAll(`[${t}=darkslategrey]`,`\x1B[${n};2;47;79;79m`).replaceAll(`[${t}=aliceblue]`,`\x1B[${n};2;240;248;255m`).replaceAll(`[${t}=ghostwhite]`,`\x1B[${n};2;248;248;255m`).replaceAll(`[${t}=honeydew]`,`\x1B[${n};2;240;255;240m`).replaceAll(`[${t}=ivory]`,`\x1B[${n};2;255;255;240m`).replaceAll(`[${t}=azure]`,`\x1B[${n};2;240;255;255m`).replaceAll(`[${t}=snow]`,`\x1B[${n};2;255;250;250m`).replaceAll(`[${t}=linen]`,`\x1B[${n};2;250;240;230m`).replaceAll(`[${t}=oldlace]`,`\x1B[${n};2;253;245;230m`).replaceAll(`[${t}=floralwhite]`,`\x1B[${n};2;255;250;240m`).replaceAll(`[${t}=seashell]`,`\x1B[${n};2;255;245;238m`).replaceAll(`[${t}=mistyrose]`,`\x1B[${n};2;255;228;225m`).replaceAll(`[${t}=antiquewhite]`,`\x1B[${n};2;250;235;215m`).replaceAll(`[${t}=papayawhip]`,`\x1B[${n};2;255;239;213m`).replaceAll(`[${t}=peachpuff]`,`\x1B[${n};2;255;218;185m`).replaceAll(`[${t}=lemonchiffon]`,`\x1B[${n};2;255;250;205m`).replaceAll(`[${t}=lightgoldenrodyellow]`,`\x1B[${n};2;250;250;210m`).replaceAll(`[${t}=lightyellow]`,`\x1B[${n};2;255;255;224m`).replaceAll(`[${t}=coral]`,`\x1B[${n};2;255;127;80m`).replaceAll(`[${t}=cornflowerblue]`,`\x1B[${n};2;100;149;237m`).replaceAll(`[${t}=cyan]`,`\x1B[${n};2;0;255;255m`).replaceAll(`[${t}=darkolivegreen]`,`\x1B[${n};2;85;107;47m`).replaceAll(`[${t}=darkorchid]`,`\x1B[${n};2;153;50;204m`).replaceAll(`[${t}=hotpink]`,`\x1B[${n};2;255;105;180m`).replaceAll(`[${t}=indigo]`,`\x1B[${n};2;75;0;130m`).replaceAll(`[${t}=lavenderblush]`,`\x1B[${n};2;255;240;245m`).replaceAll(`[${t}=limegreen]`,`\x1B[${n};2;50;205;50m`).replaceAll(`[${t}=mediumaquamarine]`,`\x1B[${n};2;102;205;170m`).replaceAll(`[${t}=mediumpurple]`,`\x1B[${n};2;147;112;219m`).replaceAll(`[${t}=mintcream]`,`\x1B[${n};2;245;255;250m`).replaceAll(`[${t}=olivedrab]`,`\x1B[${n};2;107;142;35m`).replaceAll(`[${t}=palegoldenrod]`,`\x1B[${n};2;238;232;170m`).replaceAll(`[${t}=palevioletred]`,`\x1B[${n};2;219;112;147m`).replaceAll(`[${t}=pink]`,`\x1B[${n};2;255;192;203m`).replaceAll(`[${t}=whitesmoke]`,`\x1B[${n};2;245;245;245m`).replaceAll(`[${t}=yellowgreen]`,`\x1B[${n};2;154;205;50m`).replaceAll(`[/${t}]`,`\x1B[${n+1}m`),o}setDefaultAnsiTextColor(e=""){this.defaultAnsiTextColor=e}parse(e=""){let t=new RegExp("\\[fgcolor(?:=[^\\]]+)?\\](.*?)\\[/fgcolor\\]"),n=new RegExp(t.source,"g"),i=e.match(n);i!==null&&(i.forEach(a=>{let o=a.match(t)[1],c=o.replace(/./g," ");e=e.replace(o,c)}),e=e.replaceAll("fgcolor","bgcolor")),e=this.parseColorTags(e,"color",38),e=this.parseColorTags(e,"fgcolor",38),e=this.parseColorTags(e,"bgcolor",48);let s=e.replaceAll("[b]","\x1B[1m").replaceAll("[/b]","\x1B[22m").replaceAll("[i]","\x1B[3m").replaceAll("[/i]","\x1B[23m").replaceAll("[u]","\x1B[4m").replaceAll("[/u]","\x1B[24m").replaceAll("[s]","\x1B[9m").replaceAll("[/s]","\x1B[29m").replaceAll("[indent]","    ").replaceAll("[/indent]","").replaceAll("[code]","\x1B[2m").replaceAll("[/code]","\x1B[22m").replaceAll("[center]","			").replaceAll("[/center]","").replaceAll("[right]","						").replaceAll("[/right]","").replaceAll("[url]","").replaceAll("[/url]","");return this.defaultAnsiTextColor+s+"\x1B[39m\x1B[49m\x1B[22m\x1B[23m\x1B[24m\x1B[29m\x1B[22m"+this.defaultAnsiTextColor}};rm.default=nm});var l0=B((wa,mm)=>{(function(r,e){typeof wa=="object"&&typeof mm=="object"?mm.exports=e():typeof define=="function"&&define.amd?define([],e):typeof wa=="object"?wa.vscodetextmate=e():r.vscodetextmate=e()})(wa,function(){return(()=>{"use strict";var r={350:(t,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.UseOnigurumaFindOptions=n.DebugFlags=void 0,n.DebugFlags={InDebugMode:typeof process<"u"&&!!process.env.VSCODE_TEXTMATE_DEBUG},n.UseOnigurumaFindOptions=!1},442:(t,n,i)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.applyStateStackDiff=n.diffStateStacksRefEq=void 0;let s=i(391);n.diffStateStacksRefEq=function(a,o){let c=0,u=[],l=a,b=o;for(;l!==b;)l&&(!b||l.depth>=b.depth)?(c++,l=l.parent):(u.push(b.toStateStackFrame()),b=b.parent);return{pops:c,newFrames:u.reverse()}},n.applyStateStackDiff=function(a,o){let c=a;for(let u=0;u<o.pops;u++)c=c.parent;for(let u of o.newFrames)c=s.StateStackImpl.pushFrame(c,u);return c}},36:(t,n)=>{var i;Object.defineProperty(n,"__esModule",{value:!0}),n.toOptionalTokenType=n.EncodedTokenAttributes=void 0,(i=n.EncodedTokenAttributes||(n.EncodedTokenAttributes={})).toBinaryStr=function(s){let a=s.toString(2);for(;a.length<32;)a="0"+a;return a},i.print=function(s){let a=i.getLanguageId(s),o=i.getTokenType(s),c=i.getFontStyle(s),u=i.getForeground(s),l=i.getBackground(s);console.log({languageId:a,tokenType:o,fontStyle:c,foreground:u,background:l})},i.getLanguageId=function(s){return(255&s)>>>0},i.getTokenType=function(s){return(768&s)>>>8},i.containsBalancedBrackets=function(s){return(1024&s)!=0},i.getFontStyle=function(s){return(30720&s)>>>11},i.getForeground=function(s){return(16744448&s)>>>15},i.getBackground=function(s){return(4278190080&s)>>>24},i.set=function(s,a,o,c,u,l,b){let f=i.getLanguageId(s),_=i.getTokenType(s),m=i.containsBalancedBrackets(s)?1:0,p=i.getFontStyle(s),g=i.getForeground(s),R=i.getBackground(s);return a!==0&&(f=a),o!==8&&(_=o),c!==null&&(m=c?1:0),u!==-1&&(p=u),l!==0&&(g=l),b!==0&&(R=b),(f<<0|_<<8|m<<10|p<<11|g<<15|R<<24)>>>0},n.toOptionalTokenType=function(s){return s}},996:(t,n,i)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.BasicScopeAttributesProvider=n.BasicScopeAttributes=void 0;let s=i(878);class a{constructor(l,b){this.languageId=l,this.tokenType=b}}n.BasicScopeAttributes=a;class o{constructor(l,b){this._getBasicScopeAttributes=new s.CachedFn(f=>{let _=this._scopeToLanguage(f),m=this._toStandardTokenType(f);return new a(_,m)}),this._defaultAttributes=new a(l,8),this._embeddedLanguagesMatcher=new c(Object.entries(b||{}))}getDefaultAttributes(){return this._defaultAttributes}getBasicScopeAttributes(l){return l===null?o._NULL_SCOPE_METADATA:this._getBasicScopeAttributes.get(l)}_scopeToLanguage(l){return this._embeddedLanguagesMatcher.match(l)||0}_toStandardTokenType(l){let b=l.match(o.STANDARD_TOKEN_TYPE_REGEXP);if(!b)return 8;switch(b[1]){case"comment":return 1;case"string":return 2;case"regex":return 3;case"meta.embedded":return 0}throw new Error("Unexpected match for standard token type!")}}n.BasicScopeAttributesProvider=o,o._NULL_SCOPE_METADATA=new a(0,0),o.STANDARD_TOKEN_TYPE_REGEXP=/\b(comment|string|regex|meta\.embedded)\b/;class c{constructor(l){if(l.length===0)this.values=null,this.scopesRegExp=null;else{this.values=new Map(l);let b=l.map(([f,_])=>s.escapeRegExpCharacters(f));b.sort(),b.reverse(),this.scopesRegExp=new RegExp(`^((${b.join(")|(")}))($|\\.)`,"")}}match(l){if(!this.scopesRegExp)return;let b=l.match(this.scopesRegExp);return b?this.values.get(b[1]):void 0}}},947:(t,n,i)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.LineTokens=n.BalancedBracketSelectors=n.StateStackImpl=n.AttributedScopeStack=n.Grammar=n.createGrammar=void 0;let s=i(350),a=i(36),o=i(736),c=i(44),u=i(792),l=i(583),b=i(878),f=i(996),_=i(47);function m(k,S,T,E,M){let V=o.createMatchers(S,p),Y=u.RuleFactory.getCompiledRuleId(T,E,M.repository);for(let te of V)k.push({debugSelector:S,matcher:te.matcher,ruleId:Y,grammar:M,priority:te.priority})}function p(k,S){if(S.length<k.length)return!1;let T=0;return k.every(E=>{for(let M=T;M<S.length;M++)if(g(S[M],E))return T=M+1,!0;return!1})}function g(k,S){if(!k)return!1;if(k===S)return!0;let T=S.length;return k.length>T&&k.substr(0,T)===S&&k[T]==="."}n.createGrammar=function(k,S,T,E,M,V,Y,te){return new R(k,S,T,E,M,V,Y,te)};class R{constructor(S,T,E,M,V,Y,te,se){if(this._rootScopeName=S,this.balancedBracketSelectors=Y,this._onigLib=se,this._basicScopeAttributesProvider=new f.BasicScopeAttributesProvider(E,M),this._rootId=-1,this._lastRuleId=0,this._ruleId2desc=[null],this._includedGrammars={},this._grammarRepository=te,this._grammar=D(T,null),this._injections=null,this._tokenTypeMatchers=[],V)for(let le of Object.keys(V)){let be=o.createMatchers(le,p);for(let we of be)this._tokenTypeMatchers.push({matcher:we.matcher,type:V[le]})}}get themeProvider(){return this._grammarRepository}dispose(){for(let S of this._ruleId2desc)S&&S.dispose()}createOnigScanner(S){return this._onigLib.createOnigScanner(S)}createOnigString(S){return this._onigLib.createOnigString(S)}getMetadataForScope(S){return this._basicScopeAttributesProvider.getBasicScopeAttributes(S)}_collectInjections(){let S=[],T=this._rootScopeName,E=(M=>M===this._rootScopeName?this._grammar:this.getExternalGrammar(M))(T);if(E){let M=E.injections;if(M)for(let Y in M)m(S,Y,M[Y],this,E);let V=this._grammarRepository.injections(T);V&&V.forEach(Y=>{let te=this.getExternalGrammar(Y);if(te){let se=te.injectionSelector;se&&m(S,se,te,this,te)}})}return S.sort((M,V)=>M.priority-V.priority),S}getInjections(){if(this._injections===null&&(this._injections=this._collectInjections(),s.DebugFlags.InDebugMode&&this._injections.length>0)){console.log(`Grammar ${this._rootScopeName} contains the following injections:`);for(let S of this._injections)console.log(`  - ${S.debugSelector}`)}return this._injections}registerRule(S){let T=++this._lastRuleId,E=S(u.ruleIdFromNumber(T));return this._ruleId2desc[T]=E,E}getRule(S){return this._ruleId2desc[u.ruleIdToNumber(S)]}getExternalGrammar(S,T){if(this._includedGrammars[S])return this._includedGrammars[S];if(this._grammarRepository){let E=this._grammarRepository.lookup(S);if(E)return this._includedGrammars[S]=D(E,T&&T.$base),this._includedGrammars[S]}}tokenizeLine(S,T,E=0){let M=this._tokenize(S,T,!1,E);return{tokens:M.lineTokens.getResult(M.ruleStack,M.lineLength),ruleStack:M.ruleStack,stoppedEarly:M.stoppedEarly}}tokenizeLine2(S,T,E=0){let M=this._tokenize(S,T,!0,E);return{tokens:M.lineTokens.getBinaryResult(M.ruleStack,M.lineLength),ruleStack:M.ruleStack,stoppedEarly:M.stoppedEarly}}_tokenize(S,T,E,M){let V;if(this._rootId===-1&&(this._rootId=u.RuleFactory.getCompiledRuleId(this._grammar.repository.$self,this,this._grammar.repository),this.getInjections()),T&&T!==d.NULL)V=!1,T.reset();else{V=!0;let be=this._basicScopeAttributesProvider.getDefaultAttributes(),we=this.themeProvider.getDefaults(),Le=a.EncodedTokenAttributes.set(0,be.languageId,be.tokenType,null,we.fontStyle,we.foregroundId,we.backgroundId),ue=this.getRule(this._rootId).getName(null,null),Pe;Pe=ue?y.createRootAndLookUpScopeName(ue,Le,this):y.createRoot("unknown",Le),T=new d(null,this._rootId,-1,-1,!1,null,Pe,Pe)}S+=`
`;let Y=this.createOnigString(S),te=Y.content.length,se=new x(E,S,this._tokenTypeMatchers,this.balancedBracketSelectors),le=_._tokenizeString(this,Y,V,0,T,se,!0,M);return c.disposeOnigString(Y),{lineLength:te,lineTokens:se,ruleStack:le.stack,stoppedEarly:le.stoppedEarly}}}function D(k,S){return(k=b.clone(k)).repository=k.repository||{},k.repository.$self={$vscodeTextmateLocation:k.$vscodeTextmateLocation,patterns:k.patterns,name:k.scopeName},k.repository.$base=S||k.repository.$self,k}n.Grammar=R;class y{constructor(S,T,E){this.parent=S,this.scopePath=T,this.tokenAttributes=E}static fromExtension(S,T){let E=S,M=S?.scopePath??null;for(let V of T)M=l.ScopeStack.push(M,V.scopeNames),E=new y(E,M,V.encodedTokenAttributes);return E}static createRoot(S,T){return new y(null,new l.ScopeStack(null,S),T)}static createRootAndLookUpScopeName(S,T,E){let M=E.getMetadataForScope(S),V=new l.ScopeStack(null,S),Y=E.themeProvider.themeMatch(V),te=y.mergeAttributes(T,M,Y);return new y(null,V,te)}get scopeName(){return this.scopePath.scopeName}toString(){return this.getScopeNames().join(" ")}equals(S){return y.equals(this,S)}static equals(S,T){for(;;){if(S===T||!S&&!T)return!0;if(!S||!T||S.scopeName!==T.scopeName||S.tokenAttributes!==T.tokenAttributes)return!1;S=S.parent,T=T.parent}}static mergeAttributes(S,T,E){let M=-1,V=0,Y=0;return E!==null&&(M=E.fontStyle,V=E.foregroundId,Y=E.backgroundId),a.EncodedTokenAttributes.set(S,T.languageId,T.tokenType,null,M,V,Y)}pushAttributed(S,T){if(S===null)return this;if(S.indexOf(" ")===-1)return y._pushAttributed(this,S,T);let E=S.split(/ /g),M=this;for(let V of E)M=y._pushAttributed(M,V,T);return M}static _pushAttributed(S,T,E){let M=E.getMetadataForScope(T),V=S.scopePath.push(T),Y=E.themeProvider.themeMatch(V),te=y.mergeAttributes(S.tokenAttributes,M,Y);return new y(S,V,te)}getScopeNames(){return this.scopePath.getSegments()}getExtensionIfDefined(S){let T=[],E=this;for(;E&&E!==S;)T.push({encodedTokenAttributes:E.tokenAttributes,scopeNames:E.scopePath.getExtensionIfDefined(E.parent?.scopePath??null)}),E=E.parent;return E===S?T.reverse():void 0}}n.AttributedScopeStack=y;class d{constructor(S,T,E,M,V,Y,te,se){this.parent=S,this.ruleId=T,this.beginRuleCapturedEOL=V,this.endRule=Y,this.nameScopesList=te,this.contentNameScopesList=se,this._stackElementBrand=void 0,this.depth=this.parent?this.parent.depth+1:1,this._enterPos=E,this._anchorPos=M}equals(S){return S!==null&&d._equals(this,S)}static _equals(S,T){return S===T||!!this._structuralEquals(S,T)&&y.equals(S.contentNameScopesList,T.contentNameScopesList)}static _structuralEquals(S,T){for(;;){if(S===T||!S&&!T)return!0;if(!S||!T||S.depth!==T.depth||S.ruleId!==T.ruleId||S.endRule!==T.endRule)return!1;S=S.parent,T=T.parent}}clone(){return this}static _reset(S){for(;S;)S._enterPos=-1,S._anchorPos=-1,S=S.parent}reset(){d._reset(this)}pop(){return this.parent}safePop(){return this.parent?this.parent:this}push(S,T,E,M,V,Y,te){return new d(this,S,T,E,M,V,Y,te)}getEnterPos(){return this._enterPos}getAnchorPos(){return this._anchorPos}getRule(S){return S.getRule(this.ruleId)}toString(){let S=[];return this._writeString(S,0),"["+S.join(",")+"]"}_writeString(S,T){return this.parent&&(T=this.parent._writeString(S,T)),S[T++]=`(${this.ruleId}, ${this.nameScopesList?.toString()}, ${this.contentNameScopesList?.toString()})`,T}withContentNameScopesList(S){return this.contentNameScopesList===S?this:this.parent.push(this.ruleId,this._enterPos,this._anchorPos,this.beginRuleCapturedEOL,this.endRule,this.nameScopesList,S)}withEndRule(S){return this.endRule===S?this:new d(this.parent,this.ruleId,this._enterPos,this._anchorPos,this.beginRuleCapturedEOL,S,this.nameScopesList,this.contentNameScopesList)}hasSameRuleAs(S){let T=this;for(;T&&T._enterPos===S._enterPos;){if(T.ruleId===S.ruleId)return!0;T=T.parent}return!1}toStateStackFrame(){return{ruleId:u.ruleIdToNumber(this.ruleId),beginRuleCapturedEOL:this.beginRuleCapturedEOL,endRule:this.endRule,nameScopesList:this.nameScopesList?.getExtensionIfDefined(this.parent?.nameScopesList??null)??[],contentNameScopesList:this.contentNameScopesList?.getExtensionIfDefined(this.nameScopesList)??[]}}static pushFrame(S,T){let E=y.fromExtension(S?.nameScopesList??null,T.nameScopesList);return new d(S,u.ruleIdFromNumber(T.ruleId),T.enterPos??-1,T.anchorPos??-1,T.beginRuleCapturedEOL,T.endRule,E,y.fromExtension(E,T.contentNameScopesList))}}n.StateStackImpl=d,d.NULL=new d(null,0,0,0,!1,null,null,null),n.BalancedBracketSelectors=class{constructor(k,S){this.allowAny=!1,this.balancedBracketScopes=k.flatMap(T=>T==="*"?(this.allowAny=!0,[]):o.createMatchers(T,p).map(E=>E.matcher)),this.unbalancedBracketScopes=S.flatMap(T=>o.createMatchers(T,p).map(E=>E.matcher))}get matchesAlways(){return this.allowAny&&this.unbalancedBracketScopes.length===0}get matchesNever(){return this.balancedBracketScopes.length===0&&!this.allowAny}match(k){for(let S of this.unbalancedBracketScopes)if(S(k))return!1;for(let S of this.balancedBracketScopes)if(S(k))return!0;return this.allowAny}};class x{constructor(S,T,E,M){this.balancedBracketSelectors=M,this._emitBinaryTokens=S,this._tokenTypeOverrides=E,s.DebugFlags.InDebugMode?this._lineText=T:this._lineText=null,this._tokens=[],this._binaryTokens=[],this._lastTokenEndIndex=0}produce(S,T){this.produceFromScopes(S.contentNameScopesList,T)}produceFromScopes(S,T){if(this._lastTokenEndIndex>=T)return;if(this._emitBinaryTokens){let M=S?.tokenAttributes??0,V=!1;if(this.balancedBracketSelectors?.matchesAlways&&(V=!0),this._tokenTypeOverrides.length>0||this.balancedBracketSelectors&&!this.balancedBracketSelectors.matchesAlways&&!this.balancedBracketSelectors.matchesNever){let Y=S?.getScopeNames()??[];for(let te of this._tokenTypeOverrides)te.matcher(Y)&&(M=a.EncodedTokenAttributes.set(M,0,a.toOptionalTokenType(te.type),null,-1,0,0));this.balancedBracketSelectors&&(V=this.balancedBracketSelectors.match(Y))}if(V&&(M=a.EncodedTokenAttributes.set(M,0,8,V,-1,0,0)),this._binaryTokens.length>0&&this._binaryTokens[this._binaryTokens.length-1]===M)return void(this._lastTokenEndIndex=T);if(s.DebugFlags.InDebugMode){let Y=S?.getScopeNames()??[];console.log("  token: |"+this._lineText.substring(this._lastTokenEndIndex,T).replace(/\n$/,"\\n")+"|");for(let te=0;te<Y.length;te++)console.log("      * "+Y[te])}return this._binaryTokens.push(this._lastTokenEndIndex),this._binaryTokens.push(M),void(this._lastTokenEndIndex=T)}let E=S?.getScopeNames()??[];if(s.DebugFlags.InDebugMode){console.log("  token: |"+this._lineText.substring(this._lastTokenEndIndex,T).replace(/\n$/,"\\n")+"|");for(let M=0;M<E.length;M++)console.log("      * "+E[M])}this._tokens.push({startIndex:this._lastTokenEndIndex,endIndex:T,scopes:E}),this._lastTokenEndIndex=T}getResult(S,T){return this._tokens.length>0&&this._tokens[this._tokens.length-1].startIndex===T-1&&this._tokens.pop(),this._tokens.length===0&&(this._lastTokenEndIndex=-1,this.produce(S,T),this._tokens[this._tokens.length-1].startIndex=0),this._tokens}getBinaryResult(S,T){this._binaryTokens.length>0&&this._binaryTokens[this._binaryTokens.length-2]===T-1&&(this._binaryTokens.pop(),this._binaryTokens.pop()),this._binaryTokens.length===0&&(this._lastTokenEndIndex=-1,this.produce(S,T),this._binaryTokens[this._binaryTokens.length-2]=0);let E=new Uint32Array(this._binaryTokens.length);for(let M=0,V=this._binaryTokens.length;M<V;M++)E[M]=this._binaryTokens[M];return E}}n.LineTokens=x},965:(t,n,i)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.parseInclude=n.TopLevelRepositoryReference=n.TopLevelReference=n.RelativeReference=n.SelfReference=n.BaseReference=n.ScopeDependencyProcessor=n.ExternalReferenceCollector=n.TopLevelRepositoryRuleReference=n.TopLevelRuleReference=void 0;let s=i(878);class a{constructor(d){this.scopeName=d}toKey(){return this.scopeName}}n.TopLevelRuleReference=a;class o{constructor(d,x){this.scopeName=d,this.ruleName=x}toKey(){return`${this.scopeName}#${this.ruleName}`}}n.TopLevelRepositoryRuleReference=o;class c{constructor(){this._references=[],this._seenReferenceKeys=new Set,this.visitedRule=new Set}get references(){return this._references}add(d){let x=d.toKey();this._seenReferenceKeys.has(x)||(this._seenReferenceKeys.add(x),this._references.push(d))}}function u(y,d,x,k){let S=x.lookup(y.scopeName);if(!S){if(y.scopeName===d)throw new Error(`No grammar provided for <${d}>`);return}let T=x.lookup(d);y instanceof a?b({baseGrammar:T,selfGrammar:S},k):l(y.ruleName,{baseGrammar:T,selfGrammar:S,repository:S.repository},k);let E=x.injections(y.scopeName);if(E)for(let M of E)k.add(new a(M))}function l(y,d,x){d.repository&&d.repository[y]&&f([d.repository[y]],d,x)}function b(y,d){y.selfGrammar.patterns&&Array.isArray(y.selfGrammar.patterns)&&f(y.selfGrammar.patterns,{...y,repository:y.selfGrammar.repository},d),y.selfGrammar.injections&&f(Object.values(y.selfGrammar.injections),{...y,repository:y.selfGrammar.repository},d)}function f(y,d,x){for(let k of y){if(x.visitedRule.has(k))continue;x.visitedRule.add(k);let S=k.repository?s.mergeObjects({},d.repository,k.repository):d.repository;Array.isArray(k.patterns)&&f(k.patterns,{...d,repository:S},x);let T=k.include;if(!T)continue;let E=D(T);switch(E.kind){case 0:b({...d,selfGrammar:d.baseGrammar},x);break;case 1:b(d,x);break;case 2:l(E.ruleName,{...d,repository:S},x);break;case 3:case 4:let M=E.scopeName===d.selfGrammar.scopeName?d.selfGrammar:E.scopeName===d.baseGrammar.scopeName?d.baseGrammar:void 0;if(M){let V={baseGrammar:d.baseGrammar,selfGrammar:M,repository:S};E.kind===4?l(E.ruleName,V,x):b(V,x)}else E.kind===4?x.add(new o(E.scopeName,E.ruleName)):x.add(new a(E.scopeName))}}}n.ExternalReferenceCollector=c,n.ScopeDependencyProcessor=class{constructor(y,d){this.repo=y,this.initialScopeName=d,this.seenFullScopeRequests=new Set,this.seenPartialScopeRequests=new Set,this.seenFullScopeRequests.add(this.initialScopeName),this.Q=[new a(this.initialScopeName)]}processQueue(){let y=this.Q;this.Q=[];let d=new c;for(let x of y)u(x,this.initialScopeName,this.repo,d);for(let x of d.references)if(x instanceof a){if(this.seenFullScopeRequests.has(x.scopeName))continue;this.seenFullScopeRequests.add(x.scopeName),this.Q.push(x)}else{if(this.seenFullScopeRequests.has(x.scopeName)||this.seenPartialScopeRequests.has(x.toKey()))continue;this.seenPartialScopeRequests.add(x.toKey()),this.Q.push(x)}}};class _{constructor(){this.kind=0}}n.BaseReference=_;class m{constructor(){this.kind=1}}n.SelfReference=m;class p{constructor(d){this.ruleName=d,this.kind=2}}n.RelativeReference=p;class g{constructor(d){this.scopeName=d,this.kind=3}}n.TopLevelReference=g;class R{constructor(d,x){this.scopeName=d,this.ruleName=x,this.kind=4}}function D(y){if(y==="$base")return new _;if(y==="$self")return new m;let d=y.indexOf("#");if(d===-1)return new g(y);if(d===0)return new p(y.substring(1));{let x=y.substring(0,d),k=y.substring(d+1);return new R(x,k)}}n.TopLevelRepositoryReference=R,n.parseInclude=D},391:function(t,n,i){var s=this&&this.__createBinding||(Object.create?function(o,c,u,l){l===void 0&&(l=u),Object.defineProperty(o,l,{enumerable:!0,get:function(){return c[u]}})}:function(o,c,u,l){l===void 0&&(l=u),o[l]=c[u]}),a=this&&this.__exportStar||function(o,c){for(var u in o)u==="default"||Object.prototype.hasOwnProperty.call(c,u)||s(c,o,u)};Object.defineProperty(n,"__esModule",{value:!0}),a(i(947),n)},47:(t,n,i)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.LocalStackElement=n._tokenizeString=void 0;let s=i(350),a=i(44),o=i(792),c=i(878);class u{constructor(R,D){this.stack=R,this.stoppedEarly=D}}function l(g,R,D,y,d,x,k,S){let T=R.content.length,E=!1,M=-1;if(k){let te=function(se,le,be,we,Le,ue){let Pe=Le.beginRuleCapturedEOL?0:-1,ve=[];for(let he=Le;he;he=he.pop()){let Ae=he.getRule(se);Ae instanceof o.BeginWhileRule&&ve.push({rule:Ae,stack:he})}for(let he=ve.pop();he;he=ve.pop()){let{ruleScanner:Ae,findOptions:at}=f(he.rule,se,he.stack.endRule,be,we===Pe),Z=Ae.findNextMatchSync(le,we,at);if(s.DebugFlags.InDebugMode&&(console.log("  scanning for while rule"),console.log(Ae.toString())),!Z){s.DebugFlags.InDebugMode&&console.log("  popping "+he.rule.debugName+" - "+he.rule.debugWhileRegExp),Le=he.stack.pop();break}if(Z.ruleId!==o.whileRuleId){Le=he.stack.pop();break}Z.captureIndices&&Z.captureIndices.length&&(ue.produce(he.stack,Z.captureIndices[0].start),m(se,le,be,he.stack,ue,he.rule.whileCaptures,Z.captureIndices),ue.produce(he.stack,Z.captureIndices[0].end),Pe=Z.captureIndices[0].end,Z.captureIndices[0].end>we&&(we=Z.captureIndices[0].end,be=!1))}return{stack:Le,linePos:we,anchorPosition:Pe,isFirstLine:be}}(g,R,D,y,d,x);d=te.stack,y=te.linePos,D=te.isFirstLine,M=te.anchorPosition}let V=Date.now();for(;!E;){if(S!==0&&Date.now()-V>S)return new u(d,!0);Y()}return new u(d,!1);function Y(){s.DebugFlags.InDebugMode&&(console.log(""),console.log(`@@scanNext ${y}: |${R.content.substr(y).replace(/\n$/,"\\n")}|`));let te=function(we,Le,ue,Pe,ve,he){let Ae=function(ft,Ut,ct,Yt,Ue,gn){let Qt=Ue.getRule(ft),{ruleScanner:Ht,findOptions:un}=b(Qt,ft,Ue.endRule,ct,Yt===gn),Bt=0;s.DebugFlags.InDebugMode&&(Bt=c.performanceNow());let Tt=Ht.findNextMatchSync(Ut,Yt,un);if(s.DebugFlags.InDebugMode){let ht=c.performanceNow()-Bt;ht>5&&console.warn(`Rule ${Qt.debugName} (${Qt.id}) matching took ${ht} against '${Ut}'`),console.log(`  scanning for (linePos: ${Yt}, anchorPosition: ${gn})`),console.log(Ht.toString()),Tt&&console.log(`matched rule id: ${Tt.ruleId} from ${Tt.captureIndices[0].start} to ${Tt.captureIndices[0].end}`)}return Tt?{captureIndices:Tt.captureIndices,matchedRuleId:Tt.ruleId}:null}(we,Le,ue,Pe,ve,he),at=we.getInjections();if(at.length===0)return Ae;let Z=function(ft,Ut,ct,Yt,Ue,gn,Qt){let Ht,un=Number.MAX_VALUE,Bt=null,Tt=0,ht=gn.contentNameScopesList.getScopeNames();for(let Et=0,Nt=ft.length;Et<Nt;Et++){let Vt=ft[Et];if(!Vt.matcher(ht))continue;let Zt=Ut.getRule(Vt.ruleId),{ruleScanner:mn,findOptions:zn}=b(Zt,Ut,null,Yt,Ue===Qt),en=mn.findNextMatchSync(ct,Ue,zn);if(!en)continue;s.DebugFlags.InDebugMode&&(console.log(`  matched injection: ${Vt.debugSelector}`),console.log(mn.toString()));let An=en.captureIndices[0].start;if(!(An>=un)&&(un=An,Bt=en.captureIndices,Ht=en.ruleId,Tt=Vt.priority,un===Ue))break}return Bt?{priorityMatch:Tt===-1,captureIndices:Bt,matchedRuleId:Ht}:null}(at,we,Le,ue,Pe,ve,he);if(!Z)return Ae;if(!Ae)return Z;let He=Ae.captureIndices[0].start,Oe=Z.captureIndices[0].start;return Oe<He||Z.priorityMatch&&Oe===He?Z:Ae}(g,R,D,y,d,M);if(!te)return s.DebugFlags.InDebugMode&&console.log("  no more matches."),x.produce(d,T),void(E=!0);let se=te.captureIndices,le=te.matchedRuleId,be=!!(se&&se.length>0)&&se[0].end>y;if(le===o.endRuleId){let we=d.getRule(g);s.DebugFlags.InDebugMode&&console.log("  popping "+we.debugName+" - "+we.debugEndRegExp),x.produce(d,se[0].start),d=d.withContentNameScopesList(d.nameScopesList),m(g,R,D,d,x,we.endCaptures,se),x.produce(d,se[0].end);let Le=d;if(d=d.parent,M=Le.getAnchorPos(),!be&&Le.getEnterPos()===y)return s.DebugFlags.InDebugMode&&console.error("[1] - Grammar is in an endless loop - Grammar pushed & popped a rule without advancing"),d=Le,x.produce(d,T),void(E=!0)}else{let we=g.getRule(le);x.produce(d,se[0].start);let Le=d,ue=we.getName(R.content,se),Pe=d.contentNameScopesList.pushAttributed(ue,g);if(d=d.push(le,y,M,se[0].end===T,null,Pe,Pe),we instanceof o.BeginEndRule){let ve=we;s.DebugFlags.InDebugMode&&console.log("  pushing "+ve.debugName+" - "+ve.debugBeginRegExp),m(g,R,D,d,x,ve.beginCaptures,se),x.produce(d,se[0].end),M=se[0].end;let he=ve.getContentName(R.content,se),Ae=Pe.pushAttributed(he,g);if(d=d.withContentNameScopesList(Ae),ve.endHasBackReferences&&(d=d.withEndRule(ve.getEndWithResolvedBackReferences(R.content,se))),!be&&Le.hasSameRuleAs(d))return s.DebugFlags.InDebugMode&&console.error("[2] - Grammar is in an endless loop - Grammar pushed the same rule without advancing"),d=d.pop(),x.produce(d,T),void(E=!0)}else if(we instanceof o.BeginWhileRule){let ve=we;s.DebugFlags.InDebugMode&&console.log("  pushing "+ve.debugName),m(g,R,D,d,x,ve.beginCaptures,se),x.produce(d,se[0].end),M=se[0].end;let he=ve.getContentName(R.content,se),Ae=Pe.pushAttributed(he,g);if(d=d.withContentNameScopesList(Ae),ve.whileHasBackReferences&&(d=d.withEndRule(ve.getWhileWithResolvedBackReferences(R.content,se))),!be&&Le.hasSameRuleAs(d))return s.DebugFlags.InDebugMode&&console.error("[3] - Grammar is in an endless loop - Grammar pushed the same rule without advancing"),d=d.pop(),x.produce(d,T),void(E=!0)}else{let ve=we;if(s.DebugFlags.InDebugMode&&console.log("  matched "+ve.debugName+" - "+ve.debugMatchRegExp),m(g,R,D,d,x,ve.captures,se),x.produce(d,se[0].end),d=d.pop(),!be)return s.DebugFlags.InDebugMode&&console.error("[4] - Grammar is in an endless loop - Grammar is not advancing, nor is it pushing/popping"),d=d.safePop(),x.produce(d,T),void(E=!0)}}se[0].end>y&&(y=se[0].end,D=!1)}}function b(g,R,D,y,d){return s.UseOnigurumaFindOptions?{ruleScanner:g.compile(R,D),findOptions:_(y,d)}:{ruleScanner:g.compileAG(R,D,y,d),findOptions:0}}function f(g,R,D,y,d){return s.UseOnigurumaFindOptions?{ruleScanner:g.compileWhile(R,D),findOptions:_(y,d)}:{ruleScanner:g.compileWhileAG(R,D,y,d),findOptions:0}}function _(g,R){let D=0;return g||(D|=1),R||(D|=4),D}function m(g,R,D,y,d,x,k){if(x.length===0)return;let S=R.content,T=Math.min(x.length,k.length),E=[],M=k[0].end;for(let V=0;V<T;V++){let Y=x[V];if(Y===null)continue;let te=k[V];if(te.length===0)continue;if(te.start>M)break;for(;E.length>0&&E[E.length-1].endPos<=te.start;)d.produceFromScopes(E[E.length-1].scopes,E[E.length-1].endPos),E.pop();if(E.length>0?d.produceFromScopes(E[E.length-1].scopes,te.start):d.produce(y,te.start),Y.retokenizeCapturedWithRuleId){let le=Y.getName(S,k),be=y.contentNameScopesList.pushAttributed(le,g),we=Y.getContentName(S,k),Le=be.pushAttributed(we,g),ue=y.push(Y.retokenizeCapturedWithRuleId,te.start,-1,!1,null,be,Le),Pe=g.createOnigString(S.substring(0,te.end));l(g,Pe,D&&te.start===0,te.start,ue,d,!1,0),a.disposeOnigString(Pe);continue}let se=Y.getName(S,k);if(se!==null){let le=(E.length>0?E[E.length-1].scopes:y.contentNameScopesList).pushAttributed(se,g);E.push(new p(le,te.end))}}for(;E.length>0;)d.produceFromScopes(E[E.length-1].scopes,E[E.length-1].endPos),E.pop()}n._tokenizeString=l;class p{constructor(R,D){this.scopes=R,this.endPos=D}}n.LocalStackElement=p},974:(t,n)=>{function i(c,u){throw new Error("Near offset "+c.pos+": "+u+" ~~~"+c.source.substr(c.pos,50)+"~~~")}Object.defineProperty(n,"__esModule",{value:!0}),n.parseJSON=void 0,n.parseJSON=function(c,u,l){let b=new s(c),f=new a,_=0,m=null,p=[],g=[];function R(){p.push(_),g.push(m)}function D(){_=p.pop(),m=g.pop()}function y(d){i(b,d)}for(;o(b,f);){if(_===0){if(m!==null&&y("too many constructs in root"),f.type===3){m={},l&&(m.$vscodeTextmateLocation=f.toLocation(u)),R(),_=1;continue}if(f.type===2){m=[],R(),_=4;continue}y("unexpected token in root")}if(_===2){if(f.type===5){D();continue}if(f.type===7){_=3;continue}y("expected , or }")}if(_===1||_===3){if(_===1&&f.type===5){D();continue}if(f.type===1){let d=f.value;if(o(b,f)&&f.type===6||y("expected colon"),o(b,f)||y("expected value"),_=2,f.type===1){m[d]=f.value;continue}if(f.type===8){m[d]=null;continue}if(f.type===9){m[d]=!0;continue}if(f.type===10){m[d]=!1;continue}if(f.type===11){m[d]=parseFloat(f.value);continue}if(f.type===2){let x=[];m[d]=x,R(),_=4,m=x;continue}if(f.type===3){let x={};l&&(x.$vscodeTextmateLocation=f.toLocation(u)),m[d]=x,R(),_=1,m=x;continue}}y("unexpected token in dict")}if(_===5){if(f.type===4){D();continue}if(f.type===7){_=6;continue}y("expected , or ]")}if(_===4||_===6){if(_===4&&f.type===4){D();continue}if(_=5,f.type===1){m.push(f.value);continue}if(f.type===8){m.push(null);continue}if(f.type===9){m.push(!0);continue}if(f.type===10){m.push(!1);continue}if(f.type===11){m.push(parseFloat(f.value));continue}if(f.type===2){let d=[];m.push(d),R(),_=4,m=d;continue}if(f.type===3){let d={};l&&(d.$vscodeTextmateLocation=f.toLocation(u)),m.push(d),R(),_=1,m=d;continue}y("unexpected token in array")}y("unknown state")}return g.length!==0&&y("unclosed constructs"),m};class s{constructor(u){this.source=u,this.pos=0,this.len=u.length,this.line=1,this.char=0}}class a{constructor(){this.value=null,this.type=0,this.offset=-1,this.len=-1,this.line=-1,this.char=-1}toLocation(u){return{filename:u,line:this.line,char:this.char}}}function o(c,u){u.value=null,u.type=0,u.offset=-1,u.len=-1,u.line=-1,u.char=-1;let l,b=c.source,f=c.pos,_=c.len,m=c.line,p=c.char;for(;;){if(f>=_)return!1;if(l=b.charCodeAt(f),l!==32&&l!==9&&l!==13){if(l!==10)break;f++,m++,p=0}else f++,p++}if(u.offset=f,u.line=m,u.char=p,l===34){for(u.type=1,f++,p++;;){if(f>=_)return!1;if(l=b.charCodeAt(f),f++,p++,l!==92){if(l===34)break}else f++,p++}u.value=b.substring(u.offset+1,f-1).replace(/\\u([0-9A-Fa-f]{4})/g,(g,R)=>String.fromCodePoint(parseInt(R,16))).replace(/\\(.)/g,(g,R)=>{switch(R){case'"':return'"';case"\\":return"\\";case"/":return"/";case"b":return"\b";case"f":return"\f";case"n":return`
`;case"r":return"\r";case"t":return"	";default:i(c,"invalid escape sequence")}throw new Error("unreachable")})}else if(l===91)u.type=2,f++,p++;else if(l===123)u.type=3,f++,p++;else if(l===93)u.type=4,f++,p++;else if(l===125)u.type=5,f++,p++;else if(l===58)u.type=6,f++,p++;else if(l===44)u.type=7,f++,p++;else if(l===110){if(u.type=8,f++,p++,l=b.charCodeAt(f),l!==117||(f++,p++,l=b.charCodeAt(f),l!==108)||(f++,p++,l=b.charCodeAt(f),l!==108))return!1;f++,p++}else if(l===116){if(u.type=9,f++,p++,l=b.charCodeAt(f),l!==114||(f++,p++,l=b.charCodeAt(f),l!==117)||(f++,p++,l=b.charCodeAt(f),l!==101))return!1;f++,p++}else if(l===102){if(u.type=10,f++,p++,l=b.charCodeAt(f),l!==97||(f++,p++,l=b.charCodeAt(f),l!==108)||(f++,p++,l=b.charCodeAt(f),l!==115)||(f++,p++,l=b.charCodeAt(f),l!==101))return!1;f++,p++}else for(u.type=11;;){if(f>=_)return!1;if(l=b.charCodeAt(f),!(l===46||l>=48&&l<=57||l===101||l===69||l===45||l===43))break;f++,p++}return u.len=f-u.offset,u.value===null&&(u.value=b.substr(u.offset,u.len)),c.pos=f,c.line=m,c.char=p,!0}},787:function(t,n,i){var s=this&&this.__createBinding||(Object.create?function(_,m,p,g){g===void 0&&(g=p),Object.defineProperty(_,g,{enumerable:!0,get:function(){return m[p]}})}:function(_,m,p,g){g===void 0&&(g=p),_[g]=m[p]}),a=this&&this.__exportStar||function(_,m){for(var p in _)p==="default"||Object.prototype.hasOwnProperty.call(m,p)||s(m,_,p)};Object.defineProperty(n,"__esModule",{value:!0}),n.applyStateStackDiff=n.diffStateStacksRefEq=n.parseRawGrammar=n.INITIAL=n.Registry=void 0;let o=i(391),c=i(50),u=i(652),l=i(583),b=i(965),f=i(442);Object.defineProperty(n,"applyStateStackDiff",{enumerable:!0,get:function(){return f.applyStateStackDiff}}),Object.defineProperty(n,"diffStateStacksRefEq",{enumerable:!0,get:function(){return f.diffStateStacksRefEq}}),a(i(44),n),n.Registry=class{constructor(_){this._options=_,this._syncRegistry=new u.SyncRegistry(l.Theme.createFromRawTheme(_.theme,_.colorMap),_.onigLib),this._ensureGrammarCache=new Map}dispose(){this._syncRegistry.dispose()}setTheme(_,m){this._syncRegistry.setTheme(l.Theme.createFromRawTheme(_,m))}getColorMap(){return this._syncRegistry.getColorMap()}loadGrammarWithEmbeddedLanguages(_,m,p){return this.loadGrammarWithConfiguration(_,m,{embeddedLanguages:p})}loadGrammarWithConfiguration(_,m,p){return this._loadGrammar(_,m,p.embeddedLanguages,p.tokenTypes,new o.BalancedBracketSelectors(p.balancedBracketSelectors||[],p.unbalancedBracketSelectors||[]))}loadGrammar(_){return this._loadGrammar(_,0,null,null,null)}async _loadGrammar(_,m,p,g,R){let D=new b.ScopeDependencyProcessor(this._syncRegistry,_);for(;D.Q.length>0;)await Promise.all(D.Q.map(y=>this._loadSingleGrammar(y.scopeName))),D.processQueue();return this._grammarForScopeName(_,m,p,g,R)}async _loadSingleGrammar(_){return this._ensureGrammarCache.has(_)||this._ensureGrammarCache.set(_,this._doLoadSingleGrammar(_)),this._ensureGrammarCache.get(_)}async _doLoadSingleGrammar(_){let m=await this._options.loadGrammar(_);if(m){let p=typeof this._options.getInjections=="function"?this._options.getInjections(_):void 0;this._syncRegistry.addGrammar(m,p)}}async addGrammar(_,m=[],p=0,g=null){return this._syncRegistry.addGrammar(_,m),await this._grammarForScopeName(_.scopeName,p,g)}_grammarForScopeName(_,m=0,p=null,g=null,R=null){return this._syncRegistry.grammarForScopeName(_,m,p,g,R)}},n.INITIAL=o.StateStackImpl.NULL,n.parseRawGrammar=c.parseRawGrammar},736:(t,n)=>{function i(s){return!!s&&!!s.match(/[\w\.:]+/)}Object.defineProperty(n,"__esModule",{value:!0}),n.createMatchers=void 0,n.createMatchers=function(s,a){let o=[],c=function(f){let _=/([LR]:|[\w\.:][\w\.:\-]*|[\,\|\-\(\)])/g,m=_.exec(f);return{next:()=>{if(!m)return null;let p=m[0];return m=_.exec(f),p}}}(s),u=c.next();for(;u!==null;){let f=0;if(u.length===2&&u.charAt(1)===":"){switch(u.charAt(0)){case"R":f=1;break;case"L":f=-1;break;default:console.log(`Unknown priority ${u} in scope selector`)}u=c.next()}let _=b();if(o.push({matcher:_,priority:f}),u!==",")break;u=c.next()}return o;function l(){if(u==="-"){u=c.next();let f=l();return _=>!!f&&!f(_)}if(u==="("){u=c.next();let f=function(){let _=[],m=b();for(;m&&(_.push(m),u==="|"||u===",");){do u=c.next();while(u==="|"||u===",");m=b()}return p=>_.some(g=>g(p))}();return u===")"&&(u=c.next()),f}if(i(u)){let f=[];do f.push(u),u=c.next();while(i(u));return _=>a(f,_)}return null}function b(){let f=[],_=l();for(;_;)f.push(_),_=l();return m=>f.every(p=>p(m))}}},44:(t,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.disposeOnigString=void 0,n.disposeOnigString=function(i){typeof i.dispose=="function"&&i.dispose()}},50:(t,n,i)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.parseRawGrammar=void 0;let s=i(69),a=i(350),o=i(974);n.parseRawGrammar=function(c,u=null){return u!==null&&/\.json$/.test(u)?(l=c,b=u,a.DebugFlags.InDebugMode?o.parseJSON(l,b,!0):JSON.parse(l)):function(f,_){return a.DebugFlags.InDebugMode?s.parseWithLocation(f,_,"$vscodeTextmateLocation"):s.parsePLIST(f)}(c,u);var l,b}},69:(t,n)=>{function i(s,a,o){let c=s.length,u=0,l=1,b=0;function f(Z){if(o===null)u+=Z;else for(;Z>0;)s.charCodeAt(u)===10?(u++,l++,b=0):(u++,b++),Z--}function _(Z){o===null?u=Z:f(Z-u)}function m(){for(;u<c;){let Z=s.charCodeAt(u);if(Z!==32&&Z!==9&&Z!==13&&Z!==10)break;f(1)}}function p(Z){return s.substr(u,Z.length)===Z&&(f(Z.length),!0)}function g(Z){let He=s.indexOf(Z,u);_(He!==-1?He+Z.length:c)}function R(Z){let He=s.indexOf(Z,u);if(He!==-1){let Oe=s.substring(u,He);return _(He+Z.length),Oe}{let Oe=s.substr(u);return _(c),Oe}}c>0&&s.charCodeAt(0)===65279&&(u=1);let D=0,y=null,d=[],x=[],k=null;function S(Z,He){d.push(D),x.push(y),D=Z,y=He}function T(){if(d.length===0)return E("illegal state stack");D=d.pop(),y=x.pop()}function E(Z){throw new Error("Near offset "+u+": "+Z+" ~~~"+s.substr(u,50)+"~~~")}let M=function(){if(k===null)return E("missing <key>");let Z={};o!==null&&(Z[o]={filename:a,line:l,char:b}),y[k]=Z,k=null,S(1,Z)},V=function(){if(k===null)return E("missing <key>");let Z=[];y[k]=Z,k=null,S(2,Z)},Y=function(){let Z={};o!==null&&(Z[o]={filename:a,line:l,char:b}),y.push(Z),S(1,Z)},te=function(){let Z=[];y.push(Z),S(2,Z)};function se(){if(D!==1)return E("unexpected </dict>");T()}function le(){return D===1||D!==2?E("unexpected </array>"):void T()}function be(Z){if(D===1){if(k===null)return E("missing <key>");y[k]=Z,k=null}else D===2?y.push(Z):y=Z}function we(Z){if(isNaN(Z))return E("cannot parse float");if(D===1){if(k===null)return E("missing <key>");y[k]=Z,k=null}else D===2?y.push(Z):y=Z}function Le(Z){if(isNaN(Z))return E("cannot parse integer");if(D===1){if(k===null)return E("missing <key>");y[k]=Z,k=null}else D===2?y.push(Z):y=Z}function ue(Z){if(D===1){if(k===null)return E("missing <key>");y[k]=Z,k=null}else D===2?y.push(Z):y=Z}function Pe(Z){if(D===1){if(k===null)return E("missing <key>");y[k]=Z,k=null}else D===2?y.push(Z):y=Z}function ve(Z){if(D===1){if(k===null)return E("missing <key>");y[k]=Z,k=null}else D===2?y.push(Z):y=Z}function he(){let Z=R(">"),He=!1;return Z.charCodeAt(Z.length-1)===47&&(He=!0,Z=Z.substring(0,Z.length-1)),{name:Z.trim(),isClosed:He}}function Ae(Z){if(Z.isClosed)return"";let He=R("</");return g(">"),He.replace(/&#([0-9]+);/g,function(Oe,ft){return String.fromCodePoint(parseInt(ft,10))}).replace(/&#x([0-9a-f]+);/g,function(Oe,ft){return String.fromCodePoint(parseInt(ft,16))}).replace(/&amp;|&lt;|&gt;|&quot;|&apos;/g,function(Oe){switch(Oe){case"&amp;":return"&";case"&lt;":return"<";case"&gt;":return">";case"&quot;":return'"';case"&apos;":return"'"}return Oe})}for(;u<c&&(m(),!(u>=c));){let Z=s.charCodeAt(u);if(f(1),Z!==60)return E("expected <");if(u>=c)return E("unexpected end of input");let He=s.charCodeAt(u);if(He===63){f(1),g("?>");continue}if(He===33){if(f(1),p("--")){g("-->");continue}g(">");continue}if(He===47){if(f(1),m(),p("plist")){g(">");continue}if(p("dict")){g(">"),se();continue}if(p("array")){g(">"),le();continue}return E("unexpected closed tag")}let Oe=he();switch(Oe.name){case"dict":D===1?M():D===2?Y():(y={},o!==null&&(y[o]={filename:a,line:l,char:b}),S(1,y)),Oe.isClosed&&se();continue;case"array":D===1?V():D===2?te():(y=[],S(2,y)),Oe.isClosed&&le();continue;case"key":at=Ae(Oe),D!==1?E("unexpected <key>"):k!==null?E("too many <key>"):k=at;continue;case"string":be(Ae(Oe));continue;case"real":we(parseFloat(Ae(Oe)));continue;case"integer":Le(parseInt(Ae(Oe),10));continue;case"date":ue(new Date(Ae(Oe)));continue;case"data":Pe(Ae(Oe));continue;case"true":Ae(Oe),ve(!0);continue;case"false":Ae(Oe),ve(!1);continue}if(!/^plist/.test(Oe.name))return E("unexpected opened tag "+Oe.name)}var at;return y}Object.defineProperty(n,"__esModule",{value:!0}),n.parsePLIST=n.parseWithLocation=void 0,n.parseWithLocation=function(s,a,o){return i(s,a,o)},n.parsePLIST=function(s){return i(s,null,null)}},652:(t,n,i)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.SyncRegistry=void 0;let s=i(391);n.SyncRegistry=class{constructor(a,o){this._onigLibPromise=o,this._grammars=new Map,this._rawGrammars=new Map,this._injectionGrammars=new Map,this._theme=a}dispose(){for(let a of this._grammars.values())a.dispose()}setTheme(a){this._theme=a}getColorMap(){return this._theme.getColorMap()}addGrammar(a,o){this._rawGrammars.set(a.scopeName,a),o&&this._injectionGrammars.set(a.scopeName,o)}lookup(a){return this._rawGrammars.get(a)}injections(a){return this._injectionGrammars.get(a)}getDefaults(){return this._theme.getDefaults()}themeMatch(a){return this._theme.match(a)}async grammarForScopeName(a,o,c,u,l){if(!this._grammars.has(a)){let b=this._rawGrammars.get(a);if(!b)return null;this._grammars.set(a,s.createGrammar(a,b,o,c,u,l,this,await this._onigLibPromise))}return this._grammars.get(a)}}},792:(t,n,i)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.CompiledRule=n.RegExpSourceList=n.RegExpSource=n.RuleFactory=n.BeginWhileRule=n.BeginEndRule=n.IncludeOnlyRule=n.MatchRule=n.CaptureRule=n.Rule=n.ruleIdToNumber=n.ruleIdFromNumber=n.whileRuleId=n.endRuleId=void 0;let s=i(878),a=i(965),o=/\\(\d+)/,c=/\\(\d+)/g;Symbol("RuleId"),n.endRuleId=-1,n.whileRuleId=-2,n.ruleIdFromNumber=function(y){return y},n.ruleIdToNumber=function(y){return y};class u{constructor(d,x,k,S){this.$location=d,this.id=x,this._name=k||null,this._nameIsCapturing=s.RegexSource.hasCaptures(this._name),this._contentName=S||null,this._contentNameIsCapturing=s.RegexSource.hasCaptures(this._contentName)}get debugName(){let d=this.$location?`${s.basename(this.$location.filename)}:${this.$location.line}`:"unknown";return`${this.constructor.name}#${this.id} @ ${d}`}getName(d,x){return this._nameIsCapturing&&this._name!==null&&d!==null&&x!==null?s.RegexSource.replaceCaptures(this._name,d,x):this._name}getContentName(d,x){return this._contentNameIsCapturing&&this._contentName!==null?s.RegexSource.replaceCaptures(this._contentName,d,x):this._contentName}}n.Rule=u;class l extends u{constructor(d,x,k,S,T){super(d,x,k,S),this.retokenizeCapturedWithRuleId=T}dispose(){}collectPatterns(d,x){throw new Error("Not supported!")}compile(d,x){throw new Error("Not supported!")}compileAG(d,x,k,S){throw new Error("Not supported!")}}n.CaptureRule=l;class b extends u{constructor(d,x,k,S,T){super(d,x,k,null),this._match=new g(S,this.id),this.captures=T,this._cachedCompiledPatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)}get debugMatchRegExp(){return`${this._match.source}`}collectPatterns(d,x){x.push(this._match)}compile(d,x){return this._getCachedCompiledPatterns(d).compile(d)}compileAG(d,x,k,S){return this._getCachedCompiledPatterns(d).compileAG(d,k,S)}_getCachedCompiledPatterns(d){return this._cachedCompiledPatterns||(this._cachedCompiledPatterns=new R,this.collectPatterns(d,this._cachedCompiledPatterns)),this._cachedCompiledPatterns}}n.MatchRule=b;class f extends u{constructor(d,x,k,S,T){super(d,x,k,S),this.patterns=T.patterns,this.hasMissingPatterns=T.hasMissingPatterns,this._cachedCompiledPatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)}collectPatterns(d,x){for(let k of this.patterns)d.getRule(k).collectPatterns(d,x)}compile(d,x){return this._getCachedCompiledPatterns(d).compile(d)}compileAG(d,x,k,S){return this._getCachedCompiledPatterns(d).compileAG(d,k,S)}_getCachedCompiledPatterns(d){return this._cachedCompiledPatterns||(this._cachedCompiledPatterns=new R,this.collectPatterns(d,this._cachedCompiledPatterns)),this._cachedCompiledPatterns}}n.IncludeOnlyRule=f;class _ extends u{constructor(d,x,k,S,T,E,M,V,Y,te){super(d,x,k,S),this._begin=new g(T,this.id),this.beginCaptures=E,this._end=new g(M||"\uFFFF",-1),this.endHasBackReferences=this._end.hasBackReferences,this.endCaptures=V,this.applyEndPatternLast=Y||!1,this.patterns=te.patterns,this.hasMissingPatterns=te.hasMissingPatterns,this._cachedCompiledPatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)}get debugBeginRegExp(){return`${this._begin.source}`}get debugEndRegExp(){return`${this._end.source}`}getEndWithResolvedBackReferences(d,x){return this._end.resolveBackReferences(d,x)}collectPatterns(d,x){x.push(this._begin)}compile(d,x){return this._getCachedCompiledPatterns(d,x).compile(d)}compileAG(d,x,k,S){return this._getCachedCompiledPatterns(d,x).compileAG(d,k,S)}_getCachedCompiledPatterns(d,x){if(!this._cachedCompiledPatterns){this._cachedCompiledPatterns=new R;for(let k of this.patterns)d.getRule(k).collectPatterns(d,this._cachedCompiledPatterns);this.applyEndPatternLast?this._cachedCompiledPatterns.push(this._end.hasBackReferences?this._end.clone():this._end):this._cachedCompiledPatterns.unshift(this._end.hasBackReferences?this._end.clone():this._end)}return this._end.hasBackReferences&&(this.applyEndPatternLast?this._cachedCompiledPatterns.setSource(this._cachedCompiledPatterns.length()-1,x):this._cachedCompiledPatterns.setSource(0,x)),this._cachedCompiledPatterns}}n.BeginEndRule=_;class m extends u{constructor(d,x,k,S,T,E,M,V,Y){super(d,x,k,S),this._begin=new g(T,this.id),this.beginCaptures=E,this.whileCaptures=V,this._while=new g(M,n.whileRuleId),this.whileHasBackReferences=this._while.hasBackReferences,this.patterns=Y.patterns,this.hasMissingPatterns=Y.hasMissingPatterns,this._cachedCompiledPatterns=null,this._cachedCompiledWhilePatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null),this._cachedCompiledWhilePatterns&&(this._cachedCompiledWhilePatterns.dispose(),this._cachedCompiledWhilePatterns=null)}get debugBeginRegExp(){return`${this._begin.source}`}get debugWhileRegExp(){return`${this._while.source}`}getWhileWithResolvedBackReferences(d,x){return this._while.resolveBackReferences(d,x)}collectPatterns(d,x){x.push(this._begin)}compile(d,x){return this._getCachedCompiledPatterns(d).compile(d)}compileAG(d,x,k,S){return this._getCachedCompiledPatterns(d).compileAG(d,k,S)}_getCachedCompiledPatterns(d){if(!this._cachedCompiledPatterns){this._cachedCompiledPatterns=new R;for(let x of this.patterns)d.getRule(x).collectPatterns(d,this._cachedCompiledPatterns)}return this._cachedCompiledPatterns}compileWhile(d,x){return this._getCachedCompiledWhilePatterns(d,x).compile(d)}compileWhileAG(d,x,k,S){return this._getCachedCompiledWhilePatterns(d,x).compileAG(d,k,S)}_getCachedCompiledWhilePatterns(d,x){return this._cachedCompiledWhilePatterns||(this._cachedCompiledWhilePatterns=new R,this._cachedCompiledWhilePatterns.push(this._while.hasBackReferences?this._while.clone():this._while)),this._while.hasBackReferences&&this._cachedCompiledWhilePatterns.setSource(0,x||"\uFFFF"),this._cachedCompiledWhilePatterns}}n.BeginWhileRule=m;class p{static createCaptureRule(d,x,k,S,T){return d.registerRule(E=>new l(x,E,k,S,T))}static getCompiledRuleId(d,x,k){return d.id||x.registerRule(S=>{if(d.id=S,d.match)return new b(d.$vscodeTextmateLocation,d.id,d.name,d.match,p._compileCaptures(d.captures,x,k));if(d.begin===void 0){d.repository&&(k=s.mergeObjects({},k,d.repository));let T=d.patterns;return T===void 0&&d.include&&(T=[{include:d.include}]),new f(d.$vscodeTextmateLocation,d.id,d.name,d.contentName,p._compilePatterns(T,x,k))}return d.while?new m(d.$vscodeTextmateLocation,d.id,d.name,d.contentName,d.begin,p._compileCaptures(d.beginCaptures||d.captures,x,k),d.while,p._compileCaptures(d.whileCaptures||d.captures,x,k),p._compilePatterns(d.patterns,x,k)):new _(d.$vscodeTextmateLocation,d.id,d.name,d.contentName,d.begin,p._compileCaptures(d.beginCaptures||d.captures,x,k),d.end,p._compileCaptures(d.endCaptures||d.captures,x,k),d.applyEndPatternLast,p._compilePatterns(d.patterns,x,k))}),d.id}static _compileCaptures(d,x,k){let S=[];if(d){let T=0;for(let E in d){if(E==="$vscodeTextmateLocation")continue;let M=parseInt(E,10);M>T&&(T=M)}for(let E=0;E<=T;E++)S[E]=null;for(let E in d){if(E==="$vscodeTextmateLocation")continue;let M=parseInt(E,10),V=0;d[E].patterns&&(V=p.getCompiledRuleId(d[E],x,k)),S[M]=p.createCaptureRule(x,d[E].$vscodeTextmateLocation,d[E].name,d[E].contentName,V)}}return S}static _compilePatterns(d,x,k){let S=[];if(d)for(let T=0,E=d.length;T<E;T++){let M=d[T],V=-1;if(M.include){let Y=a.parseInclude(M.include);switch(Y.kind){case 0:case 1:V=p.getCompiledRuleId(k[M.include],x,k);break;case 2:let te=k[Y.ruleName];te&&(V=p.getCompiledRuleId(te,x,k));break;case 3:case 4:let se=Y.scopeName,le=Y.kind===4?Y.ruleName:null,be=x.getExternalGrammar(se,k);if(be)if(le){let we=be.repository[le];we&&(V=p.getCompiledRuleId(we,x,be.repository))}else V=p.getCompiledRuleId(be.repository.$self,x,be.repository)}}else V=p.getCompiledRuleId(M,x,k);if(V!==-1){let Y=x.getRule(V),te=!1;if((Y instanceof f||Y instanceof _||Y instanceof m)&&Y.hasMissingPatterns&&Y.patterns.length===0&&(te=!0),te)continue;S.push(V)}}return{patterns:S,hasMissingPatterns:(d?d.length:0)!==S.length}}}n.RuleFactory=p;class g{constructor(d,x){if(d){let k=d.length,S=0,T=[],E=!1;for(let M=0;M<k;M++)if(d.charAt(M)==="\\"&&M+1<k){let V=d.charAt(M+1);V==="z"?(T.push(d.substring(S,M)),T.push("$(?!\\n)(?<!\\n)"),S=M+2):V!=="A"&&V!=="G"||(E=!0),M++}this.hasAnchor=E,S===0?this.source=d:(T.push(d.substring(S,k)),this.source=T.join(""))}else this.hasAnchor=!1,this.source=d;this.hasAnchor?this._anchorCache=this._buildAnchorCache():this._anchorCache=null,this.ruleId=x,this.hasBackReferences=o.test(this.source)}clone(){return new g(this.source,this.ruleId)}setSource(d){this.source!==d&&(this.source=d,this.hasAnchor&&(this._anchorCache=this._buildAnchorCache()))}resolveBackReferences(d,x){let k=x.map(S=>d.substring(S.start,S.end));return c.lastIndex=0,this.source.replace(c,(S,T)=>s.escapeRegExpCharacters(k[parseInt(T,10)]||""))}_buildAnchorCache(){let d,x,k,S,T=[],E=[],M=[],V=[];for(d=0,x=this.source.length;d<x;d++)k=this.source.charAt(d),T[d]=k,E[d]=k,M[d]=k,V[d]=k,k==="\\"&&d+1<x&&(S=this.source.charAt(d+1),S==="A"?(T[d+1]="\uFFFF",E[d+1]="\uFFFF",M[d+1]="A",V[d+1]="A"):S==="G"?(T[d+1]="\uFFFF",E[d+1]="G",M[d+1]="\uFFFF",V[d+1]="G"):(T[d+1]=S,E[d+1]=S,M[d+1]=S,V[d+1]=S),d++);return{A0_G0:T.join(""),A0_G1:E.join(""),A1_G0:M.join(""),A1_G1:V.join("")}}resolveAnchors(d,x){return this.hasAnchor&&this._anchorCache?d?x?this._anchorCache.A1_G1:this._anchorCache.A1_G0:x?this._anchorCache.A0_G1:this._anchorCache.A0_G0:this.source}}n.RegExpSource=g;class R{constructor(){this._items=[],this._hasAnchors=!1,this._cached=null,this._anchorCache={A0_G0:null,A0_G1:null,A1_G0:null,A1_G1:null}}dispose(){this._disposeCaches()}_disposeCaches(){this._cached&&(this._cached.dispose(),this._cached=null),this._anchorCache.A0_G0&&(this._anchorCache.A0_G0.dispose(),this._anchorCache.A0_G0=null),this._anchorCache.A0_G1&&(this._anchorCache.A0_G1.dispose(),this._anchorCache.A0_G1=null),this._anchorCache.A1_G0&&(this._anchorCache.A1_G0.dispose(),this._anchorCache.A1_G0=null),this._anchorCache.A1_G1&&(this._anchorCache.A1_G1.dispose(),this._anchorCache.A1_G1=null)}push(d){this._items.push(d),this._hasAnchors=this._hasAnchors||d.hasAnchor}unshift(d){this._items.unshift(d),this._hasAnchors=this._hasAnchors||d.hasAnchor}length(){return this._items.length}setSource(d,x){this._items[d].source!==x&&(this._disposeCaches(),this._items[d].setSource(x))}compile(d){if(!this._cached){let x=this._items.map(k=>k.source);this._cached=new D(d,x,this._items.map(k=>k.ruleId))}return this._cached}compileAG(d,x,k){return this._hasAnchors?x?k?(this._anchorCache.A1_G1||(this._anchorCache.A1_G1=this._resolveAnchors(d,x,k)),this._anchorCache.A1_G1):(this._anchorCache.A1_G0||(this._anchorCache.A1_G0=this._resolveAnchors(d,x,k)),this._anchorCache.A1_G0):k?(this._anchorCache.A0_G1||(this._anchorCache.A0_G1=this._resolveAnchors(d,x,k)),this._anchorCache.A0_G1):(this._anchorCache.A0_G0||(this._anchorCache.A0_G0=this._resolveAnchors(d,x,k)),this._anchorCache.A0_G0):this.compile(d)}_resolveAnchors(d,x,k){let S=this._items.map(T=>T.resolveAnchors(x,k));return new D(d,S,this._items.map(T=>T.ruleId))}}n.RegExpSourceList=R;class D{constructor(d,x,k){this.regExps=x,this.rules=k,this.scanner=d.createOnigScanner(x)}dispose(){typeof this.scanner.dispose=="function"&&this.scanner.dispose()}toString(){let d=[];for(let x=0,k=this.rules.length;x<k;x++)d.push("   - "+this.rules[x]+": "+this.regExps[x]);return d.join(`
`)}findNextMatchSync(d,x,k){let S=this.scanner.findNextMatchSync(d,x,k);return S?{ruleId:this.rules[S.index],captureIndices:S.captureIndices}:null}}n.CompiledRule=D},583:(t,n,i)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.ThemeTrieElement=n.ThemeTrieElementRule=n.ColorMap=n.fontStyleToString=n.ParsedThemeRule=n.parseTheme=n.StyleAttributes=n.ScopeStack=n.Theme=void 0;let s=i(878);class a{constructor(g,R,D){this._colorMap=g,this._defaults=R,this._root=D,this._cachedMatchRoot=new s.CachedFn(y=>this._root.match(y))}static createFromRawTheme(g,R){return this.createFromParsedTheme(l(g),R)}static createFromParsedTheme(g,R){return function(D,y){D.sort((M,V)=>{let Y=s.strcmp(M.scope,V.scope);return Y!==0?Y:(Y=s.strArrCmp(M.parentScopes,V.parentScopes),Y!==0?Y:M.index-V.index)});let d=0,x="#000000",k="#ffffff";for(;D.length>=1&&D[0].scope==="";){let M=D.shift();M.fontStyle!==-1&&(d=M.fontStyle),M.foreground!==null&&(x=M.foreground),M.background!==null&&(k=M.background)}let S=new f(y),T=new u(d,S.getId(x),S.getId(k)),E=new m(new _(0,null,-1,0,0),[]);for(let M=0,V=D.length;M<V;M++){let Y=D[M];E.insert(0,Y.scope,Y.parentScopes,Y.fontStyle,S.getId(Y.foreground),S.getId(Y.background))}return new a(S,T,E)}(g,R)}getColorMap(){return this._colorMap.getColorMap()}getDefaults(){return this._defaults}match(g){if(g===null)return this._defaults;let R=g.scopeName,D=this._cachedMatchRoot.get(R).find(y=>function(d,x){if(x===null)return!0;let k=0,S=x[k];for(;d;){if(c(d.scopeName,S)){if(k++,k===x.length)return!0;S=x[k]}d=d.parent}return!1}(g.parent,y.parentScopes));return D?new u(D.fontStyle,D.foreground,D.background):null}}n.Theme=a;class o{constructor(g,R){this.parent=g,this.scopeName=R}static push(g,R){for(let D of R)g=new o(g,D);return g}static from(...g){let R=null;for(let D=0;D<g.length;D++)R=new o(R,g[D]);return R}push(g){return new o(this,g)}getSegments(){let g=this,R=[];for(;g;)R.push(g.scopeName),g=g.parent;return R.reverse(),R}toString(){return this.getSegments().join(" ")}extends(g){return this===g||this.parent!==null&&this.parent.extends(g)}getExtensionIfDefined(g){let R=[],D=this;for(;D&&D!==g;)R.push(D.scopeName),D=D.parent;return D===g?R.reverse():void 0}}function c(p,g){return g===p||p.startsWith(g)&&p[g.length]==="."}n.ScopeStack=o;class u{constructor(g,R,D){this.fontStyle=g,this.foregroundId=R,this.backgroundId=D}}function l(p){if(!p)return[];if(!p.settings||!Array.isArray(p.settings))return[];let g=p.settings,R=[],D=0;for(let y=0,d=g.length;y<d;y++){let x,k=g[y];if(!k.settings)continue;if(typeof k.scope=="string"){let M=k.scope;M=M.replace(/^[,]+/,""),M=M.replace(/[,]+$/,""),x=M.split(",")}else x=Array.isArray(k.scope)?k.scope:[""];let S=-1;if(typeof k.settings.fontStyle=="string"){S=0;let M=k.settings.fontStyle.split(" ");for(let V=0,Y=M.length;V<Y;V++)switch(M[V]){case"italic":S|=1;break;case"bold":S|=2;break;case"underline":S|=4;break;case"strikethrough":S|=8}}let T=null;typeof k.settings.foreground=="string"&&s.isValidHexColor(k.settings.foreground)&&(T=k.settings.foreground);let E=null;typeof k.settings.background=="string"&&s.isValidHexColor(k.settings.background)&&(E=k.settings.background);for(let M=0,V=x.length;M<V;M++){let Y=x[M].trim().split(" "),te=Y[Y.length-1],se=null;Y.length>1&&(se=Y.slice(0,Y.length-1),se.reverse()),R[D++]=new b(te,se,y,S,T,E)}}return R}n.StyleAttributes=u,n.parseTheme=l;class b{constructor(g,R,D,y,d,x){this.scope=g,this.parentScopes=R,this.index=D,this.fontStyle=y,this.foreground=d,this.background=x}}n.ParsedThemeRule=b,n.fontStyleToString=function(p){if(p===-1)return"not set";let g="";return 1&p&&(g+="italic "),2&p&&(g+="bold "),4&p&&(g+="underline "),8&p&&(g+="strikethrough "),g===""&&(g="none"),g.trim()};class f{constructor(g){if(this._lastColorId=0,this._id2color=[],this._color2id=Object.create(null),Array.isArray(g)){this._isFrozen=!0;for(let R=0,D=g.length;R<D;R++)this._color2id[g[R]]=R,this._id2color[R]=g[R]}else this._isFrozen=!1}getId(g){if(g===null)return 0;g=g.toUpperCase();let R=this._color2id[g];if(R)return R;if(this._isFrozen)throw new Error(`Missing color in color map - ${g}`);return R=++this._lastColorId,this._color2id[g]=R,this._id2color[R]=g,R}getColorMap(){return this._id2color.slice(0)}}n.ColorMap=f;class _{constructor(g,R,D,y,d){this.scopeDepth=g,this.parentScopes=R,this.fontStyle=D,this.foreground=y,this.background=d}clone(){return new _(this.scopeDepth,this.parentScopes,this.fontStyle,this.foreground,this.background)}static cloneArr(g){let R=[];for(let D=0,y=g.length;D<y;D++)R[D]=g[D].clone();return R}acceptOverwrite(g,R,D,y){this.scopeDepth>g?console.log("how did this happen?"):this.scopeDepth=g,R!==-1&&(this.fontStyle=R),D!==0&&(this.foreground=D),y!==0&&(this.background=y)}}n.ThemeTrieElementRule=_;class m{constructor(g,R=[],D={}){this._mainRule=g,this._children=D,this._rulesWithParentScopes=R}static _sortBySpecificity(g){return g.length===1||g.sort(this._cmpBySpecificity),g}static _cmpBySpecificity(g,R){if(g.scopeDepth===R.scopeDepth){let D=g.parentScopes,y=R.parentScopes,d=D===null?0:D.length,x=y===null?0:y.length;if(d===x)for(let k=0;k<d;k++){let S=D[k].length,T=y[k].length;if(S!==T)return T-S}return x-d}return R.scopeDepth-g.scopeDepth}match(g){if(g==="")return m._sortBySpecificity([].concat(this._mainRule).concat(this._rulesWithParentScopes));let R,D,y=g.indexOf(".");return y===-1?(R=g,D=""):(R=g.substring(0,y),D=g.substring(y+1)),this._children.hasOwnProperty(R)?this._children[R].match(D):m._sortBySpecificity([].concat(this._mainRule).concat(this._rulesWithParentScopes))}insert(g,R,D,y,d,x){if(R==="")return void this._doInsertHere(g,D,y,d,x);let k,S,T,E=R.indexOf(".");E===-1?(k=R,S=""):(k=R.substring(0,E),S=R.substring(E+1)),this._children.hasOwnProperty(k)?T=this._children[k]:(T=new m(this._mainRule.clone(),_.cloneArr(this._rulesWithParentScopes)),this._children[k]=T),T.insert(g+1,S,D,y,d,x)}_doInsertHere(g,R,D,y,d){if(R!==null){for(let x=0,k=this._rulesWithParentScopes.length;x<k;x++){let S=this._rulesWithParentScopes[x];if(s.strArrCmp(S.parentScopes,R)===0)return void S.acceptOverwrite(g,D,y,d)}D===-1&&(D=this._mainRule.fontStyle),y===0&&(y=this._mainRule.foreground),d===0&&(d=this._mainRule.background),this._rulesWithParentScopes.push(new _(g,R,D,y,d))}else this._mainRule.acceptOverwrite(g,D,y,d)}}n.ThemeTrieElement=m},878:(t,n)=>{function i(o){return Array.isArray(o)?function(c){let u=[];for(let l=0,b=c.length;l<b;l++)u[l]=i(c[l]);return u}(o):typeof o=="object"?function(c){let u={};for(let l in c)u[l]=i(c[l]);return u}(o):o}Object.defineProperty(n,"__esModule",{value:!0}),n.performanceNow=n.CachedFn=n.escapeRegExpCharacters=n.isValidHexColor=n.strArrCmp=n.strcmp=n.RegexSource=n.basename=n.mergeObjects=n.clone=void 0,n.clone=function(o){return i(o)},n.mergeObjects=function(o,...c){return c.forEach(u=>{for(let l in u)o[l]=u[l]}),o},n.basename=function o(c){let u=~c.lastIndexOf("/")||~c.lastIndexOf("\\");return u===0?c:~u==c.length-1?o(c.substring(0,c.length-1)):c.substr(1+~u)};let s=/\$(\d+)|\${(\d+):\/(downcase|upcase)}/g;function a(o,c){return o<c?-1:o>c?1:0}n.RegexSource=class{static hasCaptures(o){return o!==null&&(s.lastIndex=0,s.test(o))}static replaceCaptures(o,c,u){return o.replace(s,(l,b,f,_)=>{let m=u[parseInt(b||f,10)];if(!m)return l;{let p=c.substring(m.start,m.end);for(;p[0]===".";)p=p.substring(1);switch(_){case"downcase":return p.toLowerCase();case"upcase":return p.toUpperCase();default:return p}}})}},n.strcmp=a,n.strArrCmp=function(o,c){if(o===null&&c===null)return 0;if(!o)return-1;if(!c)return 1;let u=o.length,l=c.length;if(u===l){for(let b=0;b<u;b++){let f=a(o[b],c[b]);if(f!==0)return f}return 0}return u-l},n.isValidHexColor=function(o){return!!(/^#[0-9a-f]{6}$/i.test(o)||/^#[0-9a-f]{8}$/i.test(o)||/^#[0-9a-f]{3}$/i.test(o)||/^#[0-9a-f]{4}$/i.test(o))},n.escapeRegExpCharacters=function(o){return o.replace(/[\-\\\{\}\*\+\?\|\^\$\.\,\[\]\(\)\#\s]/g,"\\$&")},n.CachedFn=class{constructor(o){this.fn=o,this.cache=new Map}get(o){if(this.cache.has(o))return this.cache.get(o);let c=this.fn(o);return this.cache.set(o,c),c}},n.performanceNow=typeof performance>"u"?function(){return Date.now()}:function(){return performance.now()}}},e={};return function t(n){var i=e[n];if(i!==void 0)return i.exports;var s=e[n]={exports:{}};return r[n].call(s.exports,s,s.exports,t),s.exports}(787)})()})});var d0=B((Ca,_m)=>{(function(r,e){typeof Ca=="object"&&typeof _m=="object"?_m.exports=e():typeof define=="function"&&define.amd?define([],e):typeof Ca=="object"?Ca.onig=e():r.onig=e()})(Ca,()=>{return r={770:function(t,n,i){"use strict";var s=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(n,"__esModule",{value:!0}),n.setDefaultDebugCall=n.createOnigScanner=n.createOnigString=n.loadWASM=n.OnigScanner=n.OnigString=void 0;let a=s(i(418)),o=null,c=!1;class u{static _utf8ByteLength(p){let g=0;for(let R=0,D=p.length;R<D;R++){let y=p.charCodeAt(R),d=y,x=!1;if(y>=55296&&y<=56319&&R+1<D){let k=p.charCodeAt(R+1);k>=56320&&k<=57343&&(d=65536+(y-55296<<10)|k-56320,x=!0)}g+=d<=127?1:d<=2047?2:d<=65535?3:4,x&&R++}return g}constructor(p){let g=p.length,R=u._utf8ByteLength(p),D=R!==g,y=D?new Uint32Array(g+1):null;D&&(y[g]=R);let d=D?new Uint32Array(R+1):null;D&&(d[R]=g);let x=new Uint8Array(R),k=0;for(let S=0;S<g;S++){let T=p.charCodeAt(S),E=T,M=!1;if(T>=55296&&T<=56319&&S+1<g){let V=p.charCodeAt(S+1);V>=56320&&V<=57343&&(E=65536+(T-55296<<10)|V-56320,M=!0)}D&&(y[S]=k,M&&(y[S+1]=k),E<=127?d[k+0]=S:E<=2047?(d[k+0]=S,d[k+1]=S):E<=65535?(d[k+0]=S,d[k+1]=S,d[k+2]=S):(d[k+0]=S,d[k+1]=S,d[k+2]=S,d[k+3]=S)),E<=127?x[k++]=E:E<=2047?(x[k++]=192|(1984&E)>>>6,x[k++]=128|(63&E)>>>0):E<=65535?(x[k++]=224|(61440&E)>>>12,x[k++]=128|(4032&E)>>>6,x[k++]=128|(63&E)>>>0):(x[k++]=240|(1835008&E)>>>18,x[k++]=128|(258048&E)>>>12,x[k++]=128|(4032&E)>>>6,x[k++]=128|(63&E)>>>0),M&&S++}this.utf16Length=g,this.utf8Length=R,this.utf16Value=p,this.utf8Value=x,this.utf16OffsetToUtf8=y,this.utf8OffsetToUtf16=d}createString(p){let g=p._omalloc(this.utf8Length);return p.HEAPU8.set(this.utf8Value,g),g}}class l{constructor(p){if(this.id=++l.LAST_ID,!o)throw new Error("Must invoke loadWASM first.");this._onigBinding=o,this.content=p;let g=new u(p);this.utf16Length=g.utf16Length,this.utf8Length=g.utf8Length,this.utf16OffsetToUtf8=g.utf16OffsetToUtf8,this.utf8OffsetToUtf16=g.utf8OffsetToUtf16,this.utf8Length<1e4&&!l._sharedPtrInUse?(l._sharedPtr||(l._sharedPtr=o._omalloc(1e4)),l._sharedPtrInUse=!0,o.HEAPU8.set(g.utf8Value,l._sharedPtr),this.ptr=l._sharedPtr):this.ptr=g.createString(o)}convertUtf8OffsetToUtf16(p){return this.utf8OffsetToUtf16?p<0?0:p>this.utf8Length?this.utf16Length:this.utf8OffsetToUtf16[p]:p}convertUtf16OffsetToUtf8(p){return this.utf16OffsetToUtf8?p<0?0:p>this.utf16Length?this.utf8Length:this.utf16OffsetToUtf8[p]:p}dispose(){this.ptr===l._sharedPtr?l._sharedPtrInUse=!1:this._onigBinding._ofree(this.ptr)}}n.OnigString=l,l.LAST_ID=0,l._sharedPtr=0,l._sharedPtrInUse=!1;class b{constructor(p,g){var R,D;if(!o)throw new Error("Must invoke loadWASM first.");let y=[],d=[];for(let M=0,V=p.length;M<V;M++){let Y=new u(p[M]);y[M]=Y.createString(o),d[M]=Y.utf8Length}let x=o._omalloc(4*p.length);o.HEAPU32.set(y,x/4);let k=o._omalloc(4*p.length);o.HEAPU32.set(d,k/4),this._onigBinding=o,this._options=(R=g?.options)!==null&&R!==void 0?R:[10];let S=this.onigOptions(this._options),T=this.onigSyntax((D=g?.syntax)!==null&&D!==void 0?D:0),E=o._createOnigScanner(x,k,p.length,S,T);this._ptr=E;for(let M=0,V=p.length;M<V;M++)o._ofree(y[M]);o._ofree(k),o._ofree(x),E===0&&function(M){throw new Error(M.UTF8ToString(M._getLastOnigError()))}(o)}dispose(){this._onigBinding._freeOnigScanner(this._ptr)}findNextMatchSync(p,g,R){let D=c,y=this._options;if(Array.isArray(R)?(R.includes(25)&&(D=!0),y=y.concat(R)):typeof R=="boolean"&&(D=R),typeof p=="string"){p=new l(p);let d=this._findNextMatchSync(p,g,D,y);return p.dispose(),d}return this._findNextMatchSync(p,g,D,y)}_findNextMatchSync(p,g,R,D){let y=this._onigBinding,d=this.onigOptions(D),x;if(x=R?y._findNextOnigScannerMatchDbg(this._ptr,p.id,p.ptr,p.utf8Length,p.convertUtf16OffsetToUtf8(g),d):y._findNextOnigScannerMatch(this._ptr,p.id,p.ptr,p.utf8Length,p.convertUtf16OffsetToUtf8(g),d),x===0)return null;let k=y.HEAPU32,S=x/4,T=k[S++],E=k[S++],M=[];for(let V=0;V<E;V++){let Y=p.convertUtf8OffsetToUtf16(k[S++]),te=p.convertUtf8OffsetToUtf16(k[S++]);M[V]={start:Y,end:te,length:te-Y}}return{index:T,captureIndices:M}}onigOptions(p){return p.map(g=>this.onigOption(g)).reduce((g,R)=>g|R,this._onigBinding.ONIG_OPTION_NONE)}onigSyntax(p){switch(p){case 0:return this._onigBinding.ONIG_SYNTAX_DEFAULT;case 1:return this._onigBinding.ONIG_SYNTAX_ASIS;case 2:return this._onigBinding.ONIG_SYNTAX_POSIX_BASIC;case 3:return this._onigBinding.ONIG_SYNTAX_POSIX_EXTENDED;case 4:return this._onigBinding.ONIG_SYNTAX_EMACS;case 5:return this._onigBinding.ONIG_SYNTAX_GREP;case 6:return this._onigBinding.ONIG_SYNTAX_GNU_REGEX;case 7:return this._onigBinding.ONIG_SYNTAX_JAVA;case 8:return this._onigBinding.ONIG_SYNTAX_PERL;case 9:return this._onigBinding.ONIG_SYNTAX_PERL_NG;case 10:return this._onigBinding.ONIG_SYNTAX_RUBY;case 11:return this._onigBinding.ONIG_SYNTAX_PYTHON;case 12:return this._onigBinding.ONIG_SYNTAX_ONIGURUMA}}onigOption(p){switch(p){case 1:return this._onigBinding.ONIG_OPTION_NONE;case 0:case 25:return this._onigBinding.ONIG_OPTION_DEFAULT;case 2:return this._onigBinding.ONIG_OPTION_IGNORECASE;case 3:return this._onigBinding.ONIG_OPTION_EXTEND;case 4:return this._onigBinding.ONIG_OPTION_MULTILINE;case 5:return this._onigBinding.ONIG_OPTION_SINGLELINE;case 6:return this._onigBinding.ONIG_OPTION_FIND_LONGEST;case 7:return this._onigBinding.ONIG_OPTION_FIND_NOT_EMPTY;case 8:return this._onigBinding.ONIG_OPTION_NEGATE_SINGLELINE;case 9:return this._onigBinding.ONIG_OPTION_DONT_CAPTURE_GROUP;case 10:return this._onigBinding.ONIG_OPTION_CAPTURE_GROUP;case 11:return this._onigBinding.ONIG_OPTION_NOTBOL;case 12:return this._onigBinding.ONIG_OPTION_NOTEOL;case 13:return this._onigBinding.ONIG_OPTION_CHECK_VALIDITY_OF_STRING;case 14:return this._onigBinding.ONIG_OPTION_IGNORECASE_IS_ASCII;case 15:return this._onigBinding.ONIG_OPTION_WORD_IS_ASCII;case 16:return this._onigBinding.ONIG_OPTION_DIGIT_IS_ASCII;case 17:return this._onigBinding.ONIG_OPTION_SPACE_IS_ASCII;case 18:return this._onigBinding.ONIG_OPTION_POSIX_IS_ASCII;case 19:return this._onigBinding.ONIG_OPTION_TEXT_SEGMENT_EXTENDED_GRAPHEME_CLUSTER;case 20:return this._onigBinding.ONIG_OPTION_TEXT_SEGMENT_WORD;case 21:return this._onigBinding.ONIG_OPTION_NOT_BEGIN_STRING;case 22:return this._onigBinding.ONIG_OPTION_NOT_END_STRING;case 23:return this._onigBinding.ONIG_OPTION_NOT_BEGIN_POSITION;case 24:return this._onigBinding.ONIG_OPTION_CALLBACK_EACH_MATCH}}}n.OnigScanner=b;let f=!1,_=null;n.loadWASM=function(m){if(f)return _;let p,g,R,D;if(f=!0,function(y){return typeof y.instantiator=="function"}(m))p=m.instantiator,g=m.print;else{let y;(function(d){return d.data!==void 0})(m)?(y=m.data,g=m.print):y=m,p=function(d){return typeof Response<"u"&&d instanceof Response}(y)?typeof WebAssembly.instantiateStreaming=="function"?function(d){return x=>WebAssembly.instantiateStreaming(d,x)}(y):function(d){return async x=>{let k=await d.arrayBuffer();return WebAssembly.instantiate(k,x)}}(y):function(d){return x=>WebAssembly.instantiate(d,x)}(y)}return _=new Promise((y,d)=>{R=y,D=d}),function(y,d,x,k){(0,a.default)({print:d,instantiateWasm:(S,T)=>{if(typeof performance>"u"){let E=()=>Date.now();S.env.emscripten_get_now=E,S.wasi_snapshot_preview1.emscripten_get_now=E}return y(S).then(E=>T(E.instance),k),{}}}).then(S=>{o=S,x()})}(p,g,R,D),_},n.createOnigString=function(m){return new l(m)},n.createOnigScanner=function(m){return new b(m)},n.setDefaultDebugCall=function(m){c=m}},418:t=>{var n=(typeof document<"u"&&document.currentScript&&document.currentScript.src,function(i={}){var s,a,o=i;o.ready=new Promise((q,U)=>{s=q,a=U});var c,u=Object.assign({},o);typeof read<"u"&&read,c=q=>{if(typeof readbuffer=="function")return new Uint8Array(readbuffer(q));let U=read(q,"binary");return typeof U=="object"||se(X),U;var X},typeof clearTimeout>"u"&&(globalThis.clearTimeout=q=>{}),typeof setTimeout>"u"&&(globalThis.setTimeout=q=>typeof q=="function"?q():se()),typeof scriptArgs<"u"&&scriptArgs,typeof onig_print<"u"&&(typeof console>"u"&&(console={}),console.log=onig_print,console.warn=console.error=typeof printErr<"u"?printErr:onig_print);var l,b,f=o.print||console.log.bind(console),_=o.printErr||console.error.bind(console);Object.assign(o,u),u=null,o.arguments&&o.arguments,o.thisProgram&&o.thisProgram,o.quit&&o.quit,o.wasmBinary&&(l=o.wasmBinary),o.noExitRuntime,typeof WebAssembly!="object"&&se("no native wasm support detected");var m,p,g,R,D,y,d,x,k=!1;function S(){var q=b.buffer;o.HEAP8=m=new Int8Array(q),o.HEAP16=g=new Int16Array(q),o.HEAPU8=p=new Uint8Array(q),o.HEAPU16=R=new Uint16Array(q),o.HEAP32=D=new Int32Array(q),o.HEAPU32=y=new Uint32Array(q),o.HEAPF32=d=new Float32Array(q),o.HEAPF64=x=new Float64Array(q)}var T=[],E=[],M=[],V=0,Y=null,te=null;function se(q){o.onAbort&&o.onAbort(q),_(q="Aborted("+q+")"),k=!0,q+=". Build with -sASSERTIONS for more info.";var U=new WebAssembly.RuntimeError(q);throw a(U),U}var le,be;function we(q){return q.startsWith("data:application/octet-stream;base64,")}function Le(q){if(q==le&&l)return new Uint8Array(l);if(c)return c(q);throw"both async and sync fetching of the wasm failed"}function ue(q,U,X){return function(H){return Promise.resolve().then(()=>Le(H))}(q).then(H=>WebAssembly.instantiate(H,U)).then(H=>H).then(X,H=>{_(`failed to asynchronously prepare wasm: ${H}`),se(H)})}we(le="onig.wasm")||(be=le,le=o.locateFile?o.locateFile(be,""):""+be);var Pe=q=>{for(;q.length>0;)q.shift()(o)},ve=void 0,he=q=>{for(var U="",X=q;p[X];)U+=ve[p[X++]];return U},Ae={},at={},Z={},He=void 0,Oe=q=>{throw new He(q)},ft=void 0,Ut=(q,U,X)=>{function H(F){var K=X(F);K.length!==q.length&&(N=>{throw new ft(N)})("Mismatched type converter count");for(var ae=0;ae<q.length;++ae)ct(q[ae],K[ae])}q.forEach(function(F){Z[F]=U});var J=new Array(U.length),ce=[],v=0;U.forEach((F,K)=>{at.hasOwnProperty(F)?J[K]=at[F]:(ce.push(F),Ae.hasOwnProperty(F)||(Ae[F]=[]),Ae[F].push(()=>{J[K]=at[F],++v===ce.length&&H(J)}))}),ce.length===0&&H(J)};function ct(q,U,X={}){if(!("argPackAdvance"in U))throw new TypeError("registerType registeredInstance requires argPackAdvance");return function(H,J,ce={}){var v=J.name;if(H||Oe(`type "${v}" must have a positive integer typeid pointer`),at.hasOwnProperty(H)){if(ce.ignoreDuplicateRegistrations)return;Oe(`Cannot register type '${v}' twice`)}if(at[H]=J,delete Z[H],Ae.hasOwnProperty(H)){var F=Ae[H];delete Ae[H],F.forEach(K=>K())}}(q,U,X)}function Yt(){this.allocated=[void 0],this.freelist=[]}var Ue=new Yt,gn=()=>{for(var q=0,U=Ue.reserved;U<Ue.allocated.length;++U)Ue.allocated[U]!==void 0&&++q;return q},Qt=q=>(q||Oe("Cannot use deleted val. handle = "+q),Ue.get(q).value),Ht=q=>{switch(q){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:return Ue.allocate({refcount:1,value:q})}};function un(q){return this.fromWireType(D[q>>2])}var Bt=(q,U)=>{switch(U){case 4:return function(X){return this.fromWireType(d[X>>2])};case 8:return function(X){return this.fromWireType(x[X>>3])};default:throw new TypeError(`invalid float width (${U}): ${q}`)}},Tt=(q,U,X)=>{switch(U){case 1:return X?H=>m[H>>0]:H=>p[H>>0];case 2:return X?H=>g[H>>1]:H=>R[H>>1];case 4:return X?H=>D[H>>2]:H=>y[H>>2];default:throw new TypeError(`invalid integer width (${U}): ${q}`)}};function ht(q){return this.fromWireType(y[q>>2])}var Et,Nt=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,Vt=(q,U,X)=>{for(var H=U+X,J=U;q[J]&&!(J>=H);)++J;if(J-U>16&&q.buffer&&Nt)return Nt.decode(q.subarray(U,J));for(var ce="";U<J;){var v=q[U++];if(128&v){var F=63&q[U++];if((224&v)!=192){var K=63&q[U++];if((v=(240&v)==224?(15&v)<<12|F<<6|K:(7&v)<<18|F<<12|K<<6|63&q[U++])<65536)ce+=String.fromCharCode(v);else{var ae=v-65536;ce+=String.fromCharCode(55296|ae>>10,56320|1023&ae)}}else ce+=String.fromCharCode((31&v)<<6|F)}else ce+=String.fromCharCode(v)}return ce},Zt=(q,U)=>q?Vt(p,q,U):"",mn=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0,zn=(q,U)=>{for(var X=q,H=X>>1,J=H+U/2;!(H>=J)&&R[H];)++H;if((X=H<<1)-q>32&&mn)return mn.decode(p.subarray(q,X));for(var ce="",v=0;!(v>=U/2);++v){var F=g[q+2*v>>1];if(F==0)break;ce+=String.fromCharCode(F)}return ce},en=(q,U,X)=>{if(X===void 0&&(X=2147483647),X<2)return 0;for(var H=U,J=(X-=2)<2*q.length?X/2:q.length,ce=0;ce<J;++ce){var v=q.charCodeAt(ce);g[U>>1]=v,U+=2}return g[U>>1]=0,U-H},An=q=>2*q.length,ln=(q,U)=>{for(var X=0,H="";!(X>=U/4);){var J=D[q+4*X>>2];if(J==0)break;if(++X,J>=65536){var ce=J-65536;H+=String.fromCharCode(55296|ce>>10,56320|1023&ce)}else H+=String.fromCharCode(J)}return H},$=(q,U,X)=>{if(X===void 0&&(X=2147483647),X<4)return 0;for(var H=U,J=H+X-4,ce=0;ce<q.length;++ce){var v=q.charCodeAt(ce);if(v>=55296&&v<=57343&&(v=65536+((1023&v)<<10)|1023&q.charCodeAt(++ce)),D[U>>2]=v,(U+=4)+4>J)break}return D[U>>2]=0,U-H},G=q=>{for(var U=0,X=0;X<q.length;++X){var H=q.charCodeAt(X);H>=55296&&H<=57343&&++X,U+=4}return U};Et=()=>performance.now();var re=q=>{var U=(q-b.buffer.byteLength+65535)/65536;try{return b.grow(U),S(),1}catch{}},oe=[null,[],[]];(()=>{for(var q=new Array(256),U=0;U<256;++U)q[U]=String.fromCharCode(U);ve=q})(),He=o.BindingError=class extends Error{constructor(q){super(q),this.name="BindingError"}},ft=o.InternalError=class extends Error{constructor(q){super(q),this.name="InternalError"}},Object.assign(Yt.prototype,{get(q){return this.allocated[q]},has(q){return this.allocated[q]!==void 0},allocate(q){var U=this.freelist.pop()||this.allocated.length;return this.allocated[U]=q,U},free(q){this.allocated[q]=void 0,this.freelist.push(q)}}),Ue.allocated.push({value:void 0},{value:null},{value:!0},{value:!1}),Ue.reserved=Ue.allocated.length,o.count_emval_handles=gn;var Be,ze={_embind_register_bigint:(q,U,X,H,J)=>{},_embind_register_bool:(q,U,X,H)=>{ct(q,{name:U=he(U),fromWireType:function(J){return!!J},toWireType:function(J,ce){return ce?X:H},argPackAdvance:8,readValueFromPointer:function(J){return this.fromWireType(p[J])},destructorFunction:null})},_embind_register_constant:(q,U,X)=>{q=he(q),Ut([],[U],function(H){return H=H[0],o[q]=H.fromWireType(X),[]})},_embind_register_emval:(q,U)=>{ct(q,{name:U=he(U),fromWireType:X=>{var H=Qt(X);return(J=>{J>=Ue.reserved&&--Ue.get(J).refcount==0&&Ue.free(J)})(X),H},toWireType:(X,H)=>Ht(H),argPackAdvance:8,readValueFromPointer:un,destructorFunction:null})},_embind_register_float:(q,U,X)=>{ct(q,{name:U=he(U),fromWireType:H=>H,toWireType:(H,J)=>J,argPackAdvance:8,readValueFromPointer:Bt(U,X),destructorFunction:null})},_embind_register_integer:(q,U,X,H,J)=>{U=he(U),J===-1&&(J=4294967295);var ce=K=>K;if(H===0){var v=32-8*X;ce=K=>K<<v>>>v}var F=U.includes("unsigned");ct(q,{name:U,fromWireType:ce,toWireType:F?function(K,ae){return this.name,ae>>>0}:function(K,ae){return this.name,ae},argPackAdvance:8,readValueFromPointer:Tt(U,X,H!==0),destructorFunction:null})},_embind_register_memory_view:(q,U,X)=>{var H=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array][U];function J(ce){var v=y[ce>>2],F=y[ce+4>>2];return new H(m.buffer,F,v)}ct(q,{name:X=he(X),fromWireType:J,argPackAdvance:8,readValueFromPointer:J},{ignoreDuplicateRegistrations:!0})},_embind_register_std_string:(q,U)=>{var X=(U=he(U))==="std::string";ct(q,{name:U,fromWireType:H=>{var J,ce=y[H>>2],v=H+4;if(X)for(var F=v,K=0;K<=ce;++K){var ae=v+K;if(K==ce||p[ae]==0){var N=Zt(F,ae-F);J===void 0?J=N:(J+="\0",J+=N),F=ae+1}}else{var C=new Array(ce);for(K=0;K<ce;++K)C[K]=String.fromCharCode(p[v+K]);J=C.join("")}return xe(H),J},toWireType:(H,J)=>{var ce;J instanceof ArrayBuffer&&(J=new Uint8Array(J));var v=typeof J=="string";v||J instanceof Uint8Array||J instanceof Uint8ClampedArray||J instanceof Int8Array||Oe("Cannot pass non-string to std::string"),ce=X&&v?(C=>{for(var A=0,O=0;O<C.length;++O){var P=C.charCodeAt(O);P<=127?A++:P<=2047?A+=2:P>=55296&&P<=57343?(A+=4,++O):A+=3}return A})(J):J.length;var F=nt(4+ce+1),K=F+4;if(y[F>>2]=ce,X&&v)((C,A,O,P)=>{if(!(P>0))return 0;for(var w=O,j=O+P-1,W=0;W<C.length;++W){var pe=C.charCodeAt(W);if(pe>=55296&&pe<=57343&&(pe=65536+((1023&pe)<<10)|1023&C.charCodeAt(++W)),pe<=127){if(O>=j)break;A[O++]=pe}else if(pe<=2047){if(O+1>=j)break;A[O++]=192|pe>>6,A[O++]=128|63&pe}else if(pe<=65535){if(O+2>=j)break;A[O++]=224|pe>>12,A[O++]=128|pe>>6&63,A[O++]=128|63&pe}else{if(O+3>=j)break;A[O++]=240|pe>>18,A[O++]=128|pe>>12&63,A[O++]=128|pe>>6&63,A[O++]=128|63&pe}}A[O]=0})(J,p,K,ce+1);else if(v)for(var ae=0;ae<ce;++ae){var N=J.charCodeAt(ae);N>255&&(xe(K),Oe("String has UTF-16 code units that do not fit in 8 bits")),p[K+ae]=N}else for(ae=0;ae<ce;++ae)p[K+ae]=J[ae];return H!==null&&H.push(xe,F),F},argPackAdvance:8,readValueFromPointer:ht,destructorFunction:H=>xe(H)})},_embind_register_std_wstring:(q,U,X)=>{var H,J,ce,v,F;X=he(X),U===2?(H=zn,J=en,v=An,ce=()=>R,F=1):U===4&&(H=ln,J=$,v=G,ce=()=>y,F=2),ct(q,{name:X,fromWireType:K=>{for(var ae,N=y[K>>2],C=ce(),A=K+4,O=0;O<=N;++O){var P=K+4+O*U;if(O==N||C[P>>F]==0){var w=H(A,P-A);ae===void 0?ae=w:(ae+="\0",ae+=w),A=P+U}}return xe(K),ae},toWireType:(K,ae)=>{typeof ae!="string"&&Oe(`Cannot pass non-string to C++ string type ${X}`);var N=v(ae),C=nt(4+N+U);return y[C>>2]=N>>F,J(ae,C+4,N+U),K!==null&&K.push(xe,C),C},argPackAdvance:8,readValueFromPointer:un,destructorFunction:K=>xe(K)})},_embind_register_void:(q,U)=>{ct(q,{isVoid:!0,name:U=he(U),argPackAdvance:0,fromWireType:()=>{},toWireType:(X,H)=>{}})},emscripten_get_now:Et,emscripten_memcpy_big:(q,U,X)=>p.copyWithin(q,U,U+X),emscripten_resize_heap:q=>{var U=p.length,X=2147483648;if((q>>>=0)>X)return!1;for(var H,J=1;J<=4;J*=2){var ce=U*(1+.2/J);ce=Math.min(ce,q+100663296);var v=Math.min(X,(H=Math.max(q,ce))+(65536-H%65536)%65536);if(re(v))return!0}return!1},fd_write:(q,U,X,H)=>{for(var J=0,ce=0;ce<X;ce++){var v=y[U>>2],F=y[U+4>>2];U+=8;for(var K=0;K<F;K++)ae=q,N=p[v+K],C=void 0,C=oe[ae],N===0||N===10?((ae===1?f:_)(Vt(C,0)),C.length=0):C.push(N);J+=F}var ae,N,C;return y[H>>2]=J,0}},$e=function(){var q,U,X,H,J={env:ze,wasi_snapshot_preview1:ze};function ce(v,F){var K,ae=v.exports;return b=($e=ae).memory,S(),$e.__indirect_function_table,K=$e.__wasm_call_ctors,E.unshift(K),function(N){if(V--,o.monitorRunDependencies&&o.monitorRunDependencies(V),V==0&&(Y!==null&&(clearInterval(Y),Y=null),te)){var C=te;te=null,C()}}(),ae}if(V++,o.monitorRunDependencies&&o.monitorRunDependencies(V),o.instantiateWasm)try{return o.instantiateWasm(J,ce)}catch(v){_(`Module.instantiateWasm callback failed with error: ${v}`),a(v)}return(q=l,U=le,X=J,H=function(v){ce(v.instance)},q||typeof WebAssembly.instantiateStreaming!="function"||we(U)||typeof fetch!="function"?ue(U,X,H):fetch(U,{credentials:"same-origin"}).then(v=>WebAssembly.instantiateStreaming(v,X).then(H,function(F){return _(`wasm streaming compile failed: ${F}`),_("falling back to ArrayBuffer instantiation"),ue(U,X,H)}))).catch(a),{}}(),nt=q=>(nt=$e.malloc)(q),xe=q=>(xe=$e.free)(q);function Ye(){function q(){Be||(Be=!0,o.calledRun=!0,k||(Pe(E),s(o),o.onRuntimeInitialized&&o.onRuntimeInitialized(),function(){if(o.postRun)for(typeof o.postRun=="function"&&(o.postRun=[o.postRun]);o.postRun.length;)U=o.postRun.shift(),M.unshift(U);var U;Pe(M)}()))}V>0||(function(){if(o.preRun)for(typeof o.preRun=="function"&&(o.preRun=[o.preRun]);o.preRun.length;)U=o.preRun.shift(),T.unshift(U);var U;Pe(T)}(),V>0||(o.setStatus?(o.setStatus("Running..."),setTimeout(function(){setTimeout(function(){o.setStatus("")},1),q()},1)):q()))}if(o._omalloc=q=>(o._omalloc=$e.omalloc)(q),o._ofree=q=>(o._ofree=$e.ofree)(q),o._getLastOnigError=()=>(o._getLastOnigError=$e.getLastOnigError)(),o._createOnigScanner=(q,U,X,H,J)=>(o._createOnigScanner=$e.createOnigScanner)(q,U,X,H,J),o._freeOnigScanner=q=>(o._freeOnigScanner=$e.freeOnigScanner)(q),o._findNextOnigScannerMatch=(q,U,X,H,J,ce)=>(o._findNextOnigScannerMatch=$e.findNextOnigScannerMatch)(q,U,X,H,J,ce),o._findNextOnigScannerMatchDbg=(q,U,X,H,J,ce)=>(o._findNextOnigScannerMatchDbg=$e.findNextOnigScannerMatchDbg)(q,U,X,H,J,ce),o.__embind_initialize_bindings=()=>(o.__embind_initialize_bindings=$e._embind_initialize_bindings)(),o.dynCall_jiji=(q,U,X,H,J)=>(o.dynCall_jiji=$e.dynCall_jiji)(q,U,X,H,J),o.UTF8ToString=Zt,te=function q(){Be||Ye(),Be||(te=q)},o.preInit)for(typeof o.preInit=="function"&&(o.preInit=[o.preInit]);o.preInit.length>0;)o.preInit.pop()();return Ye(),i.ready});t.exports=n}},e={},function t(n){var i=e[n];if(i!==void 0)return i.exports;var s=e[n]={exports:{}};return r[n].call(s.exports,s,s.exports,t),s.exports}(770);var r,e})});var UT={};S0(UT,{activate:()=>AT,deactivate:()=>$T,globals:()=>vt});module.exports=D0(UT);var _0=Ce(require("node:fs")),vm=Ce(require("node:path")),In=Ce(require("vscode"));var Im=require("net"),Am=Ce(require("node:fs")),Om=Ce(require("node:path")),vo=Ce(require("vscode"));var xm=require("vscode");var x0=["SILENT","ERROR","WARN ","INFO ","DEBUG","TRACE"],Cl="\x1B[0m",Dm=[Cl,"\x1B[1;31m","\x1B[1;33m","\x1B[1;36m","\x1B[1;32m","\x1B[1;35m"],Rl=class{constructor(e,{level:t=4,time:n=!1,output:i=""}={}){this.tag=e;this.level=t,this.show_time=n,i&&(this.output=xm.window.createOutputChannel(i,{log:!0}))}level=4;show_tag=!0;show_time;show_level=!1;output;log(e,...t){if(xa()){let n="";this.show_time&&(n+=`[${new Date().toISOString()}]`),this.show_level&&(n+="["+Dm[e]+x0[e]+Cl+"]"),this.show_tag&&(n+="["+Dm[e]+this.tag+Cl+"]"),console.log(n,...t)}if(this.output)switch(e){case 1:this.output.error(t[0]);break;case 2:this.output.warn(t[0]);break;case 3:this.output.info(t[0]);break;case 4:this.output.debug(t[0],...t.slice(1));break;case 5:this.output.trace(t[0]);break;default:break}}error(...e){1<=this.level&&this.log(1,...e)}warn(...e){2<=this.level&&this.log(2,...e)}info(...e){3<=this.level&&this.log(3,...e)}debug(...e){4<=this.level&&this.log(4,...e)}trace(...e){5<=this.level&&this.log(5,...e)}},k0=new Map;function ke(r,e){let t=new Rl(r,e);return k0.set(r,t),t}var Qr=Ce(require("vscode")),Wt=Ce(require("node:path")),kr=Ce(require("node:fs")),Dl=Ce(require("node:os")),Sl=require("node:child_process");function Pm(){let r=process.env.APPDATA||(process.platform==="darwin"?`${process.env.HOME}/Library/Preferences`:`${process.env.HOME}/.local/share`);return Wt.join(r,"Godot")}var ss,ka;async function Zr(){let r="";if(Qr.workspace.workspaceFolders!==void 0){let e=await Qr.workspace.findFiles("**/project.godot",null);if(e.length===0)return;if(e.length===1){if(r=e[0].fsPath,!kr.existsSync(r)||!kr.statSync(r).isFile())return}else if(e.length>1){let t=e.reduce((n,i)=>n.fsPath.length<=i.fsPath.length?n:i);if(t&&(r=t.fsPath,!kr.existsSync(r)||!kr.statSync(r).isFile()))return}}return ka=r,ss=Wt.dirname(r),Dl.platform()==="win32"&&(ss=ss[0].toUpperCase()+ss.slice(1)),ss}var km;async function nn(){if((ss===void 0||ka===void 0)&&await Zr(),ka===void 0)return;let r="3.x",n=(await Qr.workspace.openTextDocument(ka)).getText().match(/config\/features=PackedStringArray\((.*)\)/);if(n){let s=n[0].match(/\"(4.[0-9]+)\"/);s&&(r=s[1])}return km=r,km}function Tm(r,e=20){if(r===".")return kr.existsSync("project.godot")&&kr.statSync("project.godot").isFile()?"project.godot":null;let t=Wt.dirname(r);if(r===t)return null;let n=Wt.join(t,"project.godot");return kr.existsSync(n)&&kr.statSync(n).isFile()?n:e===0?null:Tm(t,e-1)}async function _n(r){let e=await Zr();return Qr.Uri.joinPath(Qr.Uri.file(e),r.substring(6))}async function Pa(r){let e=Wt.dirname(Tm(r.fsPath));if(e===null)return;let t=Wt.normalize(Wt.relative(e,r.fsPath));return t=t.split(Wt.sep).join(Wt.posix.sep),`res://${t}`}function gr(r,e){let t=xl(r),n="";try{n=(0,Sl.execSync)(`"${t}" --version`).toString().trim()}catch{if(Wt.isAbsolute(t))return{status:"INVALID_EXE",godotPath:t};let a=Qr.workspace.workspaceFolders[0].uri.fsPath;t=Wt.resolve(a,t);try{n=(0,Sl.execSync)(`"${t}" --version`).toString().trim()}catch{return{status:"INVALID_EXE",godotPath:t}}}let i=/^(([34])\.([0-9]+)(?:\.[0-9]+)?)/m,s=n.match(i);return s?s[2]!==e?{status:"WRONG_VERSION",godotPath:t,version:s[1]}:{status:"SUCCESS",godotPath:t,version:s[1]}:{status:"INVALID_EXE",godotPath:t}}function xl(r){let e=r.replace(/^"/,"").replace(/"$/,"");return Dl.platform()==="darwin"&&e.endsWith(".app")&&(e=Wt.join(e,"Contents","MacOS","Godot")),e}var os=Ce(require("vscode")),P0=[["godot_tools.editor_path","godotTools.editorPath.godot3"],["godot_tools.editor_path","godotTools.editorPath.godot4"],["godot_tools.gdscript_lsp_server_protocol","godotTools.lsp.serverProtocol"],["godot_tools.gdscript_lsp_server_host","godotTools.lsp.serverHost"],["godot_tools.gdscript_lsp_server_port","godotTools.lsp.serverPort"],["godot_tools.reconnect_automatically","godotTools.lsp.autoReconnect.enabled"],["godot_tools.reconnect_cooldown","godotTools.lsp.autoReconnect.cooldown"],["godot_tools.reconnect_attempts","godotTools.lsp.autoReconnect.attempts"],["godot_tools.scenePreview.previewRelatedScenes","godotTools.scenePreview.previewRelatedScenes"]];function T0(){let r=os.workspace.getConfiguration(),e=!1;for(let[t,n]of P0){let i=r.get(t);i!==void 0&&(r.update(n,i,!0),e=!0)}e&&os.window.showInformationMessage(`Settings from godot-tools version <2.0.0 have been updated to the new format.
			Please view the changelog for version 2.0.0 for more information.`,"Okay")}function E0(r){let e=os.extensions.getExtension(r.extension.id).packageJSON.version;r.globalState.update("previousVersion",e)}function I0(r){return r.globalState.get("previousVersion")===void 0}function Em(r){I0(r)&&T0(),E0(r)}var Pr=Ce(require("vscode")),Ta="godotTools";function We(r,e){let t=Pr.workspace.getConfiguration(Ta).get(r,null);return e&&t===null?e:t}function Ea(r,e){return Pr.workspace.getConfiguration(Ta).update(r,e)}var A0=`${Ta}.context.`;function xn(r,e){return Pr.commands.executeCommand("setContext",A0+r,e)}function Je(r,e,t){return Pr.commands.registerCommand(`${Ta}.${r}`,e)}function kn(...r){return Pr.Uri.joinPath(Pr.extensions.getExtension("geequlim.godot-tools").extensionUri,...r??"")}function xa(){return process.env.VSCODE_DEBUG_MODE==="true"}async function Ia(r){if(Am.existsSync(r))return vo.Uri.file(r);let e=Om.basename(r),t=await vo.workspace.findFiles(`**/${e}`,null);return t.length===1?t[0]:null}async function as(){return new Promise(r=>{let e=(0,Im.createServer)();e.listen(0,()=>{let t=e.address().port;e.close(n=>r(t))})})}function Lr(r,e){return vo.Uri.from({scheme:"gddoc",path:`${r}.gddoc`,fragment:e})}function $m(r){let e=r.replace(/([a-z])([A-Z0-9])/g,"$1_$2").toLowerCase();return e.startsWith("_")?e.substring(1):e}var qt={reset:"\x1B[0;37m",red:"\x1B[0;31m",green:"\x1B[0;32m",yellow:"\x1B[0;33m",blue:"\x1B[0;34m",purple:"\x1B[0;35m",cyan:"\x1B[0;36m",white:"\x1B[0;37m",bright:{red:"\x1B[1;31m",green:"\x1B[1;32m",yellow:"\x1B[1;33m",blue:"\x1B[1;34m",purple:"\x1B[1;35m",cyan:"\x1B[1;36m",white:"\x1B[1;37m"},dim:{red:"\x1B[1;2;31m",green:"\x1B[1;2;32m",yellow:"\x1B[1;2;33m",blue:"\x1B[1;2;34m",purple:"\x1B[1;2;35m",cyan:"\x1B[1;2;36m",white:"\x1B[1;2;37m"}};var O0=Ce(require("vscode"));var nE=ke("providers.completions");var Nm=Ce(require("vscode")),Jr=require("vscode");var fE=ke("providers.definitions"),Aa=class{constructor(e){this.context=e;let t=[{language:"gdresource",scheme:"file"},{language:"gdscene",scheme:"file"},{language:"gdscript",scheme:"file"}];e.subscriptions.push(Nm.languages.registerDefinitionProvider(t,this))}async provideDefinition(e,t,n){if(["gdresource","gdscene"].includes(e.languageId)){let o=e.getWordRangeAtPosition(t,/(\w+)/);if(o){let c=e.getText(o);if(vt.docsProvider.classInfo.has(c)){let u=Lr(c);return new Jr.Location(u,new Jr.Position(0,0))}else{let u=0,l,b;do l=e.lineAt(t.line-u++),b=l.text.match(/(?<=type)="(\w+)"/);while(!b&&l.lineNumber>0);if(vt.docsProvider.classInfo.has(b[1])){let f=Lr(b[1],c);return new Jr.Location(f,new Jr.Position(0,0))}}}return null}let i=await vt.lsp.client.get_symbol_at_position(e.uri,t);if(!i)return null;let s=i.split("."),a=Lr(s[0],s[1]);return new Jr.Location(a,new Jr.Position(0,0))}};var ei=Ce(require("node:path")),Tr=Ce(require("vscode")),Fm=require("vscode");var Lm=Ce(require("node:fs")),Na=require("node:path"),Mm=require("vscode");var Pi=require("vscode"),kl=Ce(require("path"));var qm=kn("resources","godot_icons").fsPath,Oa=class extends Pi.TreeItem{constructor(t,n,i){super(t,i);this.label=t;this.className=n;this.collapsibleState=i;let s=n+".svg";this.iconPath={light:Pi.Uri.file(kl.join(qm,"light",s)),dark:Pi.Uri.file(kl.join(qm,"dark",s))}}path;relativePath;resourcePath;parent;text;position;body;unique=!1;hasScript=!1;scriptId="";children=[];parse_body(){let t=this.body.split(`
`),n=[];for(let s=0;s<t.length;s++){let a=t[s];a.startsWith("tile_data")&&(a="tile_data = PoolIntArray(...)"),a.startsWith("unique_name_in_owner = true")&&(this.unique=!0),a.startsWith("script = ExtResource")&&(this.hasScript=!0,this.scriptId=a.match(/script = ExtResource\(\s*"?([\w]+)"?\s*\)/)[1],this.contextValue+="hasScript"),a!==""&&n.push(a)}this.body=n.join(`
`);let i=new Pi.MarkdownString;i.appendCodeblock(this.body,"gdresource"),this.tooltip=i}},$a=class{path;title;mtime;root;externalResources=new Map;subResources=new Map;nodes=new Map};var yE=ke("scenes.parser"),rr=class r{static instance;scenes=new Map;constructor(){if(r.instance)return r.instance;r.instance=this}parse_scene(e){let t=e.uri.fsPath,n=Lm.statSync(t);if(this.scenes.has(t)){let f=this.scenes.get(t);if(f.mtime===n.mtimeMs)return f}let i=new $a;i.path=t,i.mtime=n.mtimeMs,i.title=(0,Na.basename)(t),this.scenes.set(t,i);let s=e.getText();for(let f of s.matchAll(/\[ext_resource.*/g)){let _=f[0],m=_.match(/type="([\w]+)"/)?.[1],p=_.match(/path="([\w.:/]+)"/)?.[1],g=_.match(/uid="([\w:/]+)"/)?.[1],R=_.match(/ id="?([\w]+)"?/)?.[1];i.externalResources.set(R,{body:_,path:p,type:m,uid:g,id:R,index:f.index,line:e.lineAt(e.positionAt(f.index)).lineNumber+1})}let a=null;for(let f of s.matchAll(/\[sub_resource.*/g)){let _=f[0],m=_.match(/type="([\w]+)"/)?.[1],p=_.match(/path="([\w.:/]+)"/)?.[1],g=_.match(/uid="([\w:/]+)"/)?.[1],R=_.match(/ id="?([\w]+)"?/)?.[1],D={path:p,type:m,uid:g,id:R,index:f.index,line:e.lineAt(e.positionAt(f.index)).lineNumber+1};a&&(a.body=s.slice(a.index,f.index).trimEnd()),i.subResources.set(R,D),a=D}let o="",c={},u=null,l=/\[node.*/g;for(let f of s.matchAll(l)){let _=f[0],m=_.match(/name="([^.:@/"%]+)"/)?.[1],p=_.match(/type="([\w]+)"/)?.[1]??"PackedScene",g=_.match(/parent="(([^.:@/"%]|[\/.])+)"/)?.[1],R=_.match(/instance=ExtResource\(\s*"?([\w]+)"?\s*\)/)?.[1],D="",y="";g===void 0?(o=m,D=m):g==="."?(g=o,y=m,D=`${g}/${m}`):(y=`${g}/${m}`,g=`${o}/${g}`,D=`${g}/${m}`),u&&(u.body=s.slice(u.position,f.index),u.parse_body()),a&&(a.body=s.slice(a.index,f.index).trimEnd(),a=null);let d=new Oa(m,p);if(d.path=D,d.description=p,d.relativePath=y,d.parent=g,d.text=f[0],d.position=f.index,d.resourceUri=Mm.Uri.from({scheme:"godot",path:D}),i.nodes.set(D,d),R){let x=i.externalResources.get(R);x&&(d.tooltip=x.path,d.resourcePath=x.path,[".tscn"].includes((0,Na.extname)(d.resourcePath))&&(d.contextValue+="openable")),d.contextValue+="hasResourcePath"}D===o&&(i.root=d),g in c&&c[g].children.push(d),c[D]=d,u=d}u&&(u.body=s.slice(u.position,s.length),u.parse_body());let b=/\[resource\]/g;for(let f of s.matchAll(b))a&&(a.body=s.slice(a.index,f.index).trimEnd(),a=null);return i}};var $E=ke("providers.drops"),qa=class{constructor(e){this.context=e;let t=[{language:"csharp",scheme:"file"},{language:"gdscript",scheme:"file"}];e.subscriptions.push(Fm.languages.registerDocumentDropEditProvider(t,this))}parser=new rr;async provideDocumentDropEdits(e,t,n,i){let s=await Pa(e.uri),a=n.get("godot/scene").value,o=Tr.Uri.file(a),c=await Tr.workspace.openTextDocument(o),u=await this.parser.parse_scene(c),l="";for(let _ of u.externalResources.values())if(_.path===s){l=_.id;break}let b;l&&(b=(()=>{if(u.root.scriptId===l)return u.root;for(let m of u.nodes.values())if(m.scriptId===l)return m})());let f=n.get("godot/class")?.value;if(f){let _=n.get("godot/path")?.value,m=n.get("godot/relativePath")?.value,p=n.get("godot/unique")?.value==="true",g=n.get("godot/label")?.value;b&&(m=ei.normalize(ei.relative(b?.path,_)).split(ei.sep).join(ei.posix.sep));let R=m||g;if(e.languageId==="gdscript"){R.startsWith(".")&&(R=`'${R}'`);let D=`$${R}`;if(p&&(D=`%${g}`),e.lineAt(t.line).text===""){let d=new Tr.SnippetString;return(await nn())?.startsWith("4")&&d.appendText("@"),d.appendText("onready var "),d.appendPlaceholder($m(g)),d.appendText(`: ${f} = ${D}`),new Tr.DocumentDropEdit(d)}return new Tr.DocumentDropEdit(D)}if(e.languageId==="csharp")return new Tr.DocumentDropEdit(`GetNode<${f}>("${R}")`)}}};var jm=Ce(require("vscode")),Er=require("vscode");var La=Ce(require("node:fs")),lt=Ce(require("vscode")),Hn=require("vscode");var ME=ke("scenes.preview"),Ma=class{constructor(e){this.context=e;this.tree=lt.window.createTreeView("scenePreview",{treeDataProvider:this,dragAndDropController:this}),e.subscriptions.push(Je("scenePreview.lock",this.lock_preview.bind(this)),Je("scenePreview.unlock",this.unlock_preview.bind(this)),Je("scenePreview.copyNodePath",this.copy_node_path.bind(this)),Je("scenePreview.copyResourcePath",this.copy_resource_path.bind(this)),Je("scenePreview.openScene",this.open_scene.bind(this)),Je("scenePreview.openScript",this.open_script.bind(this)),Je("scenePreview.openCurrentScene",this.open_current_scene.bind(this)),Je("scenePreview.openMainScript",this.open_main_script.bind(this)),Je("scenePreview.goToDefinition",this.go_to_definition.bind(this)),Je("scenePreview.openDocumentation",this.open_documentation.bind(this)),Je("scenePreview.refresh",this.refresh.bind(this)),Hn.window.onDidChangeActiveTextEditor(this.text_editor_changed.bind(this)),Hn.window.registerFileDecorationProvider(this.uniqueDecorator),Hn.window.registerFileDecorationProvider(this.scriptDecorator),this.watcher.onDidChange(this.on_file_changed.bind(this)),this.watcher,this.tree.onDidChangeSelection(this.tree_selection_changed),this.tree);let t=this.context.workspaceState.get("godotTools.scenePreview.lockedScene");t&&La.existsSync(t)&&(xn("scenePreview.locked",!0),this.scenePreviewLocked=!0,this.currentScene=t),this.refresh()}dropMimeTypes=[];dragMimeTypes=[];tree;scenePreviewLocked=!1;currentScene="";parser=new rr;scene;watcher=Hn.workspace.createFileSystemWatcher("**/*.tscn");uniqueDecorator=new Pl(this);scriptDecorator=new Tl(this);changeTreeEvent=new Hn.EventEmitter;get onDidChangeTreeData(){return this.changeTreeEvent.event}handleDrag(e,t,n){t.set("godot/scene",new lt.DataTransferItem(this.currentScene)),t.set("godot/node",new lt.DataTransferItem(e[0])),t.set("godot/path",new lt.DataTransferItem(e[0].path)),t.set("godot/relativePath",new lt.DataTransferItem(e[0].relativePath)),t.set("godot/class",new lt.DataTransferItem(e[0].className)),t.set("godot/unique",new lt.DataTransferItem(e[0].unique)),t.set("godot/label",new lt.DataTransferItem(e[0].label))}async on_file_changed(e){e.fsPath.endsWith(".tscn")&&setTimeout(async()=>{if(e.fsPath===this.currentScene)this.refresh();else{let t=await lt.workspace.openTextDocument(e);this.parser.parse_scene(t)}},20)}async text_editor_changed(){if(this.scenePreviewLocked)return;let e=lt.window.activeTextEditor;if(e){let t=e.document.uri.fsPath,n=We("scenePreview.previewRelatedScenes");if(!t.endsWith(".tscn")){let i=t.replace(".gd",".tscn").replace(".cs",".tscn");if(n==="anyFolder"){let s=await Ia(i);if(!s)return;t=s.fsPath}if(n==="sameFolder")if(La.existsSync(i))t=i;else return;if(n==="off")return}if(!t.endsWith(".tscn"))return;this.currentScene=t,this.refresh()}}async refresh(){if(!La.existsSync(this.currentScene))return;let e=await lt.workspace.openTextDocument(this.currentScene);this.scene=this.parser.parse_scene(e),this.tree.message=this.scene.title,this.changeTreeEvent.fire()}lock_preview(){this.scenePreviewLocked=!0,xn("scenePreview.locked",!0),this.context.workspaceState.update("godotTools.scenePreview.lockedScene",this.currentScene)}unlock_preview(){this.scenePreviewLocked=!1,xn("scenePreview.locked",!1),this.context.workspaceState.update("godotTools.scenePreview.lockedScene",""),this.refresh()}copy_node_path(e){if(e.unique){lt.env.clipboard.writeText(`%${e.label}`);return}lt.env.clipboard.writeText(e.relativePath)}copy_resource_path(e){lt.env.clipboard.writeText(e.resourcePath)}async open_scene(e){let t=await _n(e.resourcePath);t&&lt.window.showTextDocument(t,{preview:!0})}async open_script(e){let t=this.scene.externalResources.get(e.scriptId).path,n=await _n(t);n&&lt.window.showTextDocument(n,{preview:!0})}async open_current_scene(){if(this.currentScene){let e=await lt.workspace.openTextDocument(this.currentScene);lt.window.showTextDocument(e)}}async open_main_script(){if(this.currentScene){let e=this.scene.root;if(e?.hasScript){let t=this.scene.externalResources.get(e.scriptId).path,n=await _n(t);n&&lt.window.showTextDocument(n,{preview:!0})}}}async go_to_definition(e){let t=await lt.workspace.openTextDocument(this.currentScene),n=t.positionAt(e.position),i=t.positionAt(e.position+e.text.length),s=new lt.Range(n,i);lt.window.showTextDocument(t,{selection:s})}async open_documentation(e){lt.commands.executeCommand("vscode.open",Lr(e.className))}tree_selection_changed(e){}getChildren(e){return e?Promise.resolve(e.children):this.scene?.root?Promise.resolve([this.scene?.root]):Promise.resolve([])}getTreeItem(e){return e.children.length>0?e.collapsibleState=Hn.TreeItemCollapsibleState.Expanded:e.collapsibleState=Hn.TreeItemCollapsibleState.None,this.uniqueDecorator.changeDecorationsEvent.fire(e.resourceUri),this.scriptDecorator.changeDecorationsEvent.fire(e.resourceUri),e}},Pl=class{constructor(e){this.previewer=e}changeDecorationsEvent=new Hn.EventEmitter;get onDidChangeFileDecorations(){return this.changeDecorationsEvent.event}provideFileDecoration(e,t){if(e.scheme!=="godot")return;if(this.previewer.scene?.nodes.get(e.path)?.unique)return{badge:"%"}}},Tl=class{constructor(e){this.previewer=e}changeDecorationsEvent=new Hn.EventEmitter;get onDidChangeFileDecorations(){return this.changeDecorationsEvent.event}provideFileDecoration(e,t){if(e.scheme!=="godot")return;if(this.previewer.scene?.nodes.get(e.path)?.hasScript)return{badge:"S"}}};var HE=ke("providers.document_links"),Fa=class{constructor(e){this.context=e;let t=[{language:"gdresource",scheme:"file"},{language:"gdscene",scheme:"file"},{language:"gdscript",scheme:"file"}];e.subscriptions.push(jm.languages.registerDocumentLinkProvider(t,this))}parser=new rr;async provideDocumentLinks(e,t){let n=this.parser.parse_scene(e),i=e.getText(),s=e.uri.fsPath,a=[];if(["gdresource","gdscene"].includes(e.languageId)){for(let o of i.matchAll(/ExtResource\(\s?"?(\w+)\s?"?\)/g)){let c=o[1],u=Er.Uri.from({scheme:"file",path:s,fragment:`${n.externalResources.get(c).line},0`}),l=this.create_range(e,o),b=new Er.DocumentLink(l,u);b.tooltip="Jump to resource definition",a.push(b)}for(let o of i.matchAll(/SubResource\(\s?"?(\w+)\s?"?\)/g)){let c=o[1],u=Er.Uri.from({scheme:"file",path:s,fragment:`${n.subResources.get(c).line},0`}),l=this.create_range(e,o),b=new Er.DocumentLink(l,u);a.push(b)}}for(let o of i.matchAll(/res:\/\/([^"'\n]*)/g)){let c=this.create_range(e,o),u=await _n(o[0]);u instanceof Er.Uri&&a.push(new Er.DocumentLink(c,u))}return a}create_range(e,t){let n=e.positionAt(t.index),i=e.positionAt(t.index+t[0].length);return new Er.Range(n,i)}};var Gs=Ce(require("vscode"));var aa=Ce(require("vscode")),Sn=Ce(ag()),ca=Ce(cR()),RA=Ce(uR());function mR(){return{baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}}var Vs=mR();function MP(r){Vs=r}var FP=/[&<>"']/,jP=/[&<>"']/g,UP=/[<>"']|&(?!#?\w+;)/,BP=/[<>"']|&(?!#?\w+;)/g,VP={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},lR=r=>VP[r];function cn(r,e){if(e){if(FP.test(r))return r.replace(jP,lR)}else if(UP.test(r))return r.replace(BP,lR);return r}var zP=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig;function _R(r){return r.replace(zP,(e,t)=>(t=t.toLowerCase(),t==="colon"?":":t.charAt(0)==="#"?t.charAt(1)==="x"?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):""))}var GP=/(^|[^\[])\^/g;function bt(r,e){r=r.source||r,e=e||"";let t={replace:(n,i)=>(i=i.source||i,i=i.replace(GP,"$1"),r=r.replace(n,i),t),getRegex:()=>new RegExp(r,e)};return t}var HP=/[^\w:]/g,WP=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function dR(r,e,t){if(r){let n;try{n=decodeURIComponent(_R(t)).replace(HP,"").toLowerCase()}catch{return null}if(n.indexOf("javascript:")===0||n.indexOf("vbscript:")===0||n.indexOf("data:")===0)return null}e&&!WP.test(t)&&(t=QP(e,t));try{t=encodeURI(t).replace(/%25/g,"%")}catch{return null}return t}var Tu={},KP=/^[^:]+:\/*[^/]*$/,XP=/^([^:]+:)[\s\S]*$/,YP=/^([^:]+:\/*[^/]*)[\s\S]*$/;function QP(r,e){Tu[" "+r]||(KP.test(r)?Tu[" "+r]=r+"/":Tu[" "+r]=Eu(r,"/",!0)),r=Tu[" "+r];let t=r.indexOf(":")===-1;return e.substring(0,2)==="//"?t?e:r.replace(XP,"$1")+e:e.charAt(0)==="/"?t?e:r.replace(YP,"$1")+e:r+e}var Iu={exec:function(){}};function Rr(r){let e=1,t,n;for(;e<arguments.length;e++){t=arguments[e];for(n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r}function fR(r,e){let t=r.replace(/\|/g,(s,a,o)=>{let c=!1,u=a;for(;--u>=0&&o[u]==="\\";)c=!c;return c?"|":" |"}),n=t.split(/ \|/),i=0;if(n[0].trim()||n.shift(),n[n.length-1].trim()||n.pop(),n.length>e)n.splice(e);else for(;n.length<e;)n.push("");for(;i<n.length;i++)n[i]=n[i].trim().replace(/\\\|/g,"|");return n}function Eu(r,e,t){let n=r.length;if(n===0)return"";let i=0;for(;i<n;){let s=r.charAt(n-i-1);if(s===e&&!t)i++;else if(s!==e&&t)i++;else break}return r.substr(0,n-i)}function ZP(r,e){if(r.indexOf(e[1])===-1)return-1;let t=r.length,n=0,i=0;for(;i<t;i++)if(r[i]==="\\")i++;else if(r[i]===e[0])n++;else if(r[i]===e[1]&&(n--,n<0))return i;return-1}function bR(r){r&&r.sanitize&&!r.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}function hR(r,e){if(e<1)return"";let t="";for(;e>1;)e&1&&(t+=r),e>>=1,r+=r;return t+r}function pR(r,e,t,n){let i=e.href,s=e.title?cn(e.title):null,a=r[1].replace(/\\([\[\]])/g,"$1");if(r[0].charAt(0)!=="!"){n.state.inLink=!0;let o={type:"link",raw:t,href:i,title:s,text:a,tokens:n.inlineTokens(a,[])};return n.state.inLink=!1,o}else return{type:"image",raw:t,href:i,title:s,text:cn(a)}}function JP(r,e){let t=r.match(/^(\s+)(?:```)/);if(t===null)return e;let n=t[1];return e.split(`
`).map(i=>{let s=i.match(/^\s+/);if(s===null)return i;let[a]=s;return a.length>=n.length?i.slice(n.length):i}).join(`
`)}var ia=class{constructor(e){this.options=e||Vs}space(e){let t=this.rules.block.newline.exec(e);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}code(e){let t=this.rules.block.code.exec(e);if(t){let n=t[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?n:Eu(n,`
`)}}}fences(e){let t=this.rules.block.fences.exec(e);if(t){let n=t[0],i=JP(n,t[3]||"");return{type:"code",raw:n,lang:t[2]?t[2].trim():t[2],text:i}}}heading(e){let t=this.rules.block.heading.exec(e);if(t){let n=t[2].trim();if(/#$/.test(n)){let s=Eu(n,"#");(this.options.pedantic||!s||/ $/.test(s))&&(n=s.trim())}let i={type:"heading",raw:t[0],depth:t[1].length,text:n,tokens:[]};return this.lexer.inline(i.text,i.tokens),i}}hr(e){let t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:t[0]}}blockquote(e){let t=this.rules.block.blockquote.exec(e);if(t){let n=t[0].replace(/^ *> ?/gm,"");return{type:"blockquote",raw:t[0],tokens:this.lexer.blockTokens(n,[]),text:n}}}list(e){let t=this.rules.block.list.exec(e);if(t){let n,i,s,a,o,c,u,l,b,f,_,m,p=t[1].trim(),g=p.length>1,R={type:"list",raw:"",ordered:g,start:g?+p.slice(0,-1):"",loose:!1,items:[]};p=g?`\\d{1,9}\\${p.slice(-1)}`:`\\${p}`,this.options.pedantic&&(p=g?p:"[*+-]");let D=new RegExp(`^( {0,3}${p})((?: [^\\n]*)?(?:\\n|$))`);for(;e&&(m=!1,!(!(t=D.exec(e))||this.rules.block.hr.test(e)));){if(n=t[0],e=e.substring(n.length),l=t[2].split(`
`,1)[0],b=e.split(`
`,1)[0],this.options.pedantic?(a=2,_=l.trimLeft()):(a=t[2].search(/[^ ]/),a=a>4?1:a,_=l.slice(a),a+=t[1].length),c=!1,!l&&/^ *$/.test(b)&&(n+=b+`
`,e=e.substring(b.length+1),m=!0),!m){let d=new RegExp(`^ {0,${Math.min(3,a-1)}}(?:[*+-]|\\d{1,9}[.)])`);for(;e&&(f=e.split(`
`,1)[0],l=f,this.options.pedantic&&(l=l.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),!d.test(l));){if(l.search(/[^ ]/)>=a||!l.trim())_+=`
`+l.slice(a);else if(!c)_+=`
`+l;else break;!c&&!l.trim()&&(c=!0),n+=f+`
`,e=e.substring(f.length+1)}}R.loose||(u?R.loose=!0:/\n *\n *$/.test(n)&&(u=!0)),this.options.gfm&&(i=/^\[[ xX]\] /.exec(_),i&&(s=i[0]!=="[ ] ",_=_.replace(/^\[[ xX]\] +/,""))),R.items.push({type:"list_item",raw:n,task:!!i,checked:s,loose:!1,text:_}),R.raw+=n}R.items[R.items.length-1].raw=n.trimRight(),R.items[R.items.length-1].text=_.trimRight(),R.raw=R.raw.trimRight();let y=R.items.length;for(o=0;o<y;o++){this.lexer.state.top=!1,R.items[o].tokens=this.lexer.blockTokens(R.items[o].text,[]);let d=R.items[o].tokens.filter(k=>k.type==="space"),x=d.every(k=>{let S=k.raw.split(""),T=0;for(let E of S)if(E===`
`&&(T+=1),T>1)return!0;return!1});!R.loose&&d.length&&x&&(R.loose=!0,R.items[o].loose=!0)}return R}}html(e){let t=this.rules.block.html.exec(e);if(t){let n={type:"html",raw:t[0],pre:!this.options.sanitizer&&(t[1]==="pre"||t[1]==="script"||t[1]==="style"),text:t[0]};return this.options.sanitize&&(n.type="paragraph",n.text=this.options.sanitizer?this.options.sanitizer(t[0]):cn(t[0]),n.tokens=[],this.lexer.inline(n.text,n.tokens)),n}}def(e){let t=this.rules.block.def.exec(e);if(t)return t[3]&&(t[3]=t[3].substring(1,t[3].length-1)),{type:"def",tag:t[1].toLowerCase().replace(/\s+/g," "),raw:t[0],href:t[2],title:t[3]}}table(e){let t=this.rules.block.table.exec(e);if(t){let n={type:"table",header:fR(t[1]).map(i=>({text:i})),align:t[2].replace(/^ *|\| *$/g,"").split(/ *\| */),rows:t[3]&&t[3].trim()?t[3].replace(/\n[ \t]*$/,"").split(`
`):[]};if(n.header.length===n.align.length){n.raw=t[0];let i=n.align.length,s,a,o,c;for(s=0;s<i;s++)/^ *-+: *$/.test(n.align[s])?n.align[s]="right":/^ *:-+: *$/.test(n.align[s])?n.align[s]="center":/^ *:-+ *$/.test(n.align[s])?n.align[s]="left":n.align[s]=null;for(i=n.rows.length,s=0;s<i;s++)n.rows[s]=fR(n.rows[s],n.header.length).map(u=>({text:u}));for(i=n.header.length,a=0;a<i;a++)n.header[a].tokens=[],this.lexer.inlineTokens(n.header[a].text,n.header[a].tokens);for(i=n.rows.length,a=0;a<i;a++)for(c=n.rows[a],o=0;o<c.length;o++)c[o].tokens=[],this.lexer.inlineTokens(c[o].text,c[o].tokens);return n}}}lheading(e){let t=this.rules.block.lheading.exec(e);if(t){let n={type:"heading",raw:t[0],depth:t[2].charAt(0)==="="?1:2,text:t[1],tokens:[]};return this.lexer.inline(n.text,n.tokens),n}}paragraph(e){let t=this.rules.block.paragraph.exec(e);if(t){let n={type:"paragraph",raw:t[0],text:t[1].charAt(t[1].length-1)===`
`?t[1].slice(0,-1):t[1],tokens:[]};return this.lexer.inline(n.text,n.tokens),n}}text(e){let t=this.rules.block.text.exec(e);if(t){let n={type:"text",raw:t[0],text:t[0],tokens:[]};return this.lexer.inline(n.text,n.tokens),n}}escape(e){let t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:cn(t[1])}}tag(e){let t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&/^<a /i.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:this.options.sanitize?"text":"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(t[0]):cn(t[0]):t[0]}}link(e){let t=this.rules.inline.link.exec(e);if(t){let n=t[2].trim();if(!this.options.pedantic&&/^</.test(n)){if(!/>$/.test(n))return;let a=Eu(n.slice(0,-1),"\\");if((n.length-a.length)%2===0)return}else{let a=ZP(t[2],"()");if(a>-1){let c=(t[0].indexOf("!")===0?5:4)+t[1].length+a;t[2]=t[2].substring(0,a),t[0]=t[0].substring(0,c).trim(),t[3]=""}}let i=t[2],s="";if(this.options.pedantic){let a=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(i);a&&(i=a[1],s=a[3])}else s=t[3]?t[3].slice(1,-1):"";return i=i.trim(),/^</.test(i)&&(this.options.pedantic&&!/>$/.test(n)?i=i.slice(1):i=i.slice(1,-1)),pR(t,{href:i&&i.replace(this.rules.inline._escapes,"$1"),title:s&&s.replace(this.rules.inline._escapes,"$1")},t[0],this.lexer)}}reflink(e,t){let n;if((n=this.rules.inline.reflink.exec(e))||(n=this.rules.inline.nolink.exec(e))){let i=(n[2]||n[1]).replace(/\s+/g," ");if(i=t[i.toLowerCase()],!i||!i.href){let s=n[0].charAt(0);return{type:"text",raw:s,text:s}}return pR(n,i,n[0],this.lexer)}}emStrong(e,t,n=""){let i=this.rules.inline.emStrong.lDelim.exec(e);if(!i||i[3]&&n.match(/[\p{L}\p{N}]/u))return;let s=i[1]||i[2]||"";if(!s||s&&(n===""||this.rules.inline.punctuation.exec(n))){let a=i[0].length-1,o,c,u=a,l=0,b=i[0][0]==="*"?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(b.lastIndex=0,t=t.slice(-1*e.length+a);(i=b.exec(t))!=null;){if(o=i[1]||i[2]||i[3]||i[4]||i[5]||i[6],!o)continue;if(c=o.length,i[3]||i[4]){u+=c;continue}else if((i[5]||i[6])&&a%3&&!((a+c)%3)){l+=c;continue}if(u-=c,u>0)continue;if(c=Math.min(c,c+u+l),Math.min(a,c)%2){let _=e.slice(1,a+i.index+c);return{type:"em",raw:e.slice(0,a+i.index+c+1),text:_,tokens:this.lexer.inlineTokens(_,[])}}let f=e.slice(2,a+i.index+c-1);return{type:"strong",raw:e.slice(0,a+i.index+c+1),text:f,tokens:this.lexer.inlineTokens(f,[])}}}}codespan(e){let t=this.rules.inline.code.exec(e);if(t){let n=t[2].replace(/\n/g," "),i=/[^ ]/.test(n),s=/^ /.test(n)&&/ $/.test(n);return i&&s&&(n=n.substring(1,n.length-1)),n=cn(n,!0),{type:"codespan",raw:t[0],text:n}}}br(e){let t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}}del(e){let t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2],[])}}autolink(e,t){let n=this.rules.inline.autolink.exec(e);if(n){let i,s;return n[2]==="@"?(i=cn(this.options.mangle?t(n[1]):n[1]),s="mailto:"+i):(i=cn(n[1]),s=i),{type:"link",raw:n[0],text:i,href:s,tokens:[{type:"text",raw:i,text:i}]}}}url(e,t){let n;if(n=this.rules.inline.url.exec(e)){let i,s;if(n[2]==="@")i=cn(this.options.mangle?t(n[0]):n[0]),s="mailto:"+i;else{let a;do a=n[0],n[0]=this.rules.inline._backpedal.exec(n[0])[0];while(a!==n[0]);i=cn(n[0]),n[1]==="www."?s="http://"+i:s=i}return{type:"link",raw:n[0],text:i,href:s,tokens:[{type:"text",raw:i,text:i}]}}}inlineText(e,t){let n=this.rules.inline.text.exec(e);if(n){let i;return this.lexer.state.inRawBlock?i=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(n[0]):cn(n[0]):n[0]:i=cn(this.options.smartypants?t(n[0]):n[0]),{type:"text",raw:n[0],text:i}}}},De={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*\n)|~{3,})([^\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:- *){3,}|(?:_ *){3,}|(?:\* *){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)( [^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *(?:\n *)?<?([^\s>]+)>?(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/,table:Iu,lheading:/^([^\n]+)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,text:/^[^\n]+/};De._label=/(?!\s*\])(?:\\.|[^\[\]\\])+/;De._title=/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/;De.def=bt(De.def).replace("label",De._label).replace("title",De._title).getRegex();De.bullet=/(?:[*+-]|\d{1,9}[.)])/;De.listItemStart=bt(/^( *)(bull) */).replace("bull",De.bullet).getRegex();De.list=bt(De.list).replace(/bull/g,De.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+De.def.source+")").getRegex();De._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul";De._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/;De.html=bt(De.html,"i").replace("comment",De._comment).replace("tag",De._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex();De.paragraph=bt(De._paragraph).replace("hr",De.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",De._tag).getRegex();De.blockquote=bt(De.blockquote).replace("paragraph",De.paragraph).getRegex();De.normal=Rr({},De);De.gfm=Rr({},De.normal,{table:"^ *([^\\n ].*\\|.*)\\n {0,3}(?:\\| *)?(:?-+:? *(?:\\| *:?-+:? *)*)(?:\\| *)?(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"});De.gfm.table=bt(De.gfm.table).replace("hr",De.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",De._tag).getRegex();De.gfm.paragraph=bt(De._paragraph).replace("hr",De.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("table",De.gfm.table).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",De._tag).getRegex();De.pedantic=Rr({},De.normal,{html:bt(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",De._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:Iu,paragraph:bt(De.normal._paragraph).replace("hr",De.hr).replace("heading",` *#{1,6} *[^
]`).replace("lheading",De.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()});var de={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:Iu,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(ref)\]/,nolink:/^!?\[(ref)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:([punct_])|[^\s*]))|^_+(?:([punct*])|([^\s_]))/,rDelimAst:/^[^_*]*?\_\_[^_*]*?\*[^_*]*?(?=\_\_)|[punct_](\*+)(?=[\s]|$)|[^punct*_\s](\*+)(?=[punct_\s]|$)|[punct_\s](\*+)(?=[^punct*_\s])|[\s](\*+)(?=[punct_])|[punct_](\*+)(?=[punct_])|[^punct*_\s](\*+)(?=[^punct*_\s])/,rDelimUnd:/^[^_*]*?\*\*[^_*]*?\_[^_*]*?(?=\*\*)|[punct*](\_+)(?=[\s]|$)|[^punct*_\s](\_+)(?=[punct*\s]|$)|[punct*\s](\_+)(?=[^punct*_\s])|[\s](\_+)(?=[punct*])|[punct*](\_+)(?=[punct*])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:Iu,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\spunctuation])/};de._punctuation="!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~";de.punctuation=bt(de.punctuation).replace(/punctuation/g,de._punctuation).getRegex();de.blockSkip=/\[[^\]]*?\]\([^\)]*?\)|`[^`]*?`|<[^>]*?>/g;de.escapedEmSt=/\\\*|\\_/g;de._comment=bt(De._comment).replace("(?:-->|$)","-->").getRegex();de.emStrong.lDelim=bt(de.emStrong.lDelim).replace(/punct/g,de._punctuation).getRegex();de.emStrong.rDelimAst=bt(de.emStrong.rDelimAst,"g").replace(/punct/g,de._punctuation).getRegex();de.emStrong.rDelimUnd=bt(de.emStrong.rDelimUnd,"g").replace(/punct/g,de._punctuation).getRegex();de._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g;de._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/;de._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/;de.autolink=bt(de.autolink).replace("scheme",de._scheme).replace("email",de._email).getRegex();de._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/;de.tag=bt(de.tag).replace("comment",de._comment).replace("attribute",de._attribute).getRegex();de._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/;de._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/;de._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/;de.link=bt(de.link).replace("label",de._label).replace("href",de._href).replace("title",de._title).getRegex();de.reflink=bt(de.reflink).replace("label",de._label).replace("ref",De._label).getRegex();de.nolink=bt(de.nolink).replace("ref",De._label).getRegex();de.reflinkSearch=bt(de.reflinkSearch,"g").replace("reflink",de.reflink).replace("nolink",de.nolink).getRegex();de.normal=Rr({},de);de.pedantic=Rr({},de.normal,{strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:bt(/^!?\[(label)\]\((.*?)\)/).replace("label",de._label).getRegex(),reflink:bt(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",de._label).getRegex()});de.gfm=Rr({},de.normal,{escape:bt(de.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/});de.gfm.url=bt(de.gfm.url,"i").replace("email",de.gfm._extended_email).getRegex();de.breaks=Rr({},de.gfm,{br:bt(de.br).replace("{2,}","*").getRegex(),text:bt(de.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()});function eT(r){return r.replace(/---/g,"\u2014").replace(/--/g,"\u2013").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1\u2018").replace(/'/g,"\u2019").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1\u201C").replace(/"/g,"\u201D").replace(/\.{3}/g,"\u2026")}function gR(r){let e="",t,n,i=r.length;for(t=0;t<i;t++)n=r.charCodeAt(t),Math.random()>.5&&(n="x"+n.toString(16)),e+="&#"+n+";";return e}var bi=class r{constructor(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||Vs,this.options.tokenizer=this.options.tokenizer||new ia,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let t={block:De.normal,inline:de.normal};this.options.pedantic?(t.block=De.pedantic,t.inline=de.pedantic):this.options.gfm&&(t.block=De.gfm,this.options.breaks?t.inline=de.breaks:t.inline=de.gfm),this.tokenizer.rules=t}static get rules(){return{block:De,inline:de}}static lex(e,t){return new r(t).lex(e)}static lexInline(e,t){return new r(t).inlineTokens(e)}lex(e){e=e.replace(/\r\n|\r/g,`
`).replace(/\t/g,"    "),this.blockTokens(e,this.tokens);let t;for(;t=this.inlineQueue.shift();)this.inlineTokens(t.src,t.tokens);return this.tokens}blockTokens(e,t=[]){this.options.pedantic&&(e=e.replace(/^ +$/gm,""));let n,i,s,a;for(;e;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(o=>(n=o.call({lexer:this},e,t))?(e=e.substring(n.raw.length),t.push(n),!0):!1))){if(n=this.tokenizer.space(e)){e=e.substring(n.raw.length),n.raw.length===1&&t.length>0?t[t.length-1].raw+=`
`:t.push(n);continue}if(n=this.tokenizer.code(e)){e=e.substring(n.raw.length),i=t[t.length-1],i&&(i.type==="paragraph"||i.type==="text")?(i.raw+=`
`+n.raw,i.text+=`
`+n.text,this.inlineQueue[this.inlineQueue.length-1].src=i.text):t.push(n);continue}if(n=this.tokenizer.fences(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.heading(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.hr(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.blockquote(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.list(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.html(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.def(e)){e=e.substring(n.raw.length),i=t[t.length-1],i&&(i.type==="paragraph"||i.type==="text")?(i.raw+=`
`+n.raw,i.text+=`
`+n.raw,this.inlineQueue[this.inlineQueue.length-1].src=i.text):this.tokens.links[n.tag]||(this.tokens.links[n.tag]={href:n.href,title:n.title});continue}if(n=this.tokenizer.table(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.lheading(e)){e=e.substring(n.raw.length),t.push(n);continue}if(s=e,this.options.extensions&&this.options.extensions.startBlock){let o=1/0,c=e.slice(1),u;this.options.extensions.startBlock.forEach(function(l){u=l.call({lexer:this},c),typeof u=="number"&&u>=0&&(o=Math.min(o,u))}),o<1/0&&o>=0&&(s=e.substring(0,o+1))}if(this.state.top&&(n=this.tokenizer.paragraph(s))){i=t[t.length-1],a&&i.type==="paragraph"?(i.raw+=`
`+n.raw,i.text+=`
`+n.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=i.text):t.push(n),a=s.length!==e.length,e=e.substring(n.raw.length);continue}if(n=this.tokenizer.text(e)){e=e.substring(n.raw.length),i=t[t.length-1],i&&i.type==="text"?(i.raw+=`
`+n.raw,i.text+=`
`+n.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=i.text):t.push(n);continue}if(e){let o="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(o);break}else throw new Error(o)}}return this.state.top=!0,t}inline(e,t){this.inlineQueue.push({src:e,tokens:t})}inlineTokens(e,t=[]){let n,i,s,a=e,o,c,u;if(this.tokens.links){let l=Object.keys(this.tokens.links);if(l.length>0)for(;(o=this.tokenizer.rules.inline.reflinkSearch.exec(a))!=null;)l.includes(o[0].slice(o[0].lastIndexOf("[")+1,-1))&&(a=a.slice(0,o.index)+"["+hR("a",o[0].length-2)+"]"+a.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(o=this.tokenizer.rules.inline.blockSkip.exec(a))!=null;)a=a.slice(0,o.index)+"["+hR("a",o[0].length-2)+"]"+a.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(o=this.tokenizer.rules.inline.escapedEmSt.exec(a))!=null;)a=a.slice(0,o.index)+"++"+a.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex);for(;e;)if(c||(u=""),c=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(l=>(n=l.call({lexer:this},e,t))?(e=e.substring(n.raw.length),t.push(n),!0):!1))){if(n=this.tokenizer.escape(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.tag(e)){e=e.substring(n.raw.length),i=t[t.length-1],i&&n.type==="text"&&i.type==="text"?(i.raw+=n.raw,i.text+=n.text):t.push(n);continue}if(n=this.tokenizer.link(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(n.raw.length),i=t[t.length-1],i&&n.type==="text"&&i.type==="text"?(i.raw+=n.raw,i.text+=n.text):t.push(n);continue}if(n=this.tokenizer.emStrong(e,a,u)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.codespan(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.br(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.del(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.autolink(e,gR)){e=e.substring(n.raw.length),t.push(n);continue}if(!this.state.inLink&&(n=this.tokenizer.url(e,gR))){e=e.substring(n.raw.length),t.push(n);continue}if(s=e,this.options.extensions&&this.options.extensions.startInline){let l=1/0,b=e.slice(1),f;this.options.extensions.startInline.forEach(function(_){f=_.call({lexer:this},b),typeof f=="number"&&f>=0&&(l=Math.min(l,f))}),l<1/0&&l>=0&&(s=e.substring(0,l+1))}if(n=this.tokenizer.inlineText(s,eT)){e=e.substring(n.raw.length),n.raw.slice(-1)!=="_"&&(u=n.raw.slice(-1)),c=!0,i=t[t.length-1],i&&i.type==="text"?(i.raw+=n.raw,i.text+=n.text):t.push(n);continue}if(e){let l="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(l);break}else throw new Error(l)}}return t}},sa=class{constructor(e){this.options=e||Vs}code(e,t,n){let i=(t||"").match(/\S*/)[0];if(this.options.highlight){let s=this.options.highlight(e,i);s!=null&&s!==e&&(n=!0,e=s)}return e=e.replace(/\n$/,"")+`
`,i?'<pre><code class="'+this.options.langPrefix+cn(i,!0)+'">'+(n?e:cn(e,!0))+`</code></pre>
`:"<pre><code>"+(n?e:cn(e,!0))+`</code></pre>
`}blockquote(e){return`<blockquote>
`+e+`</blockquote>
`}html(e){return e}heading(e,t,n,i){return this.options.headerIds?"<h"+t+' id="'+this.options.headerPrefix+i.slug(n)+'">'+e+"</h"+t+`>
`:"<h"+t+">"+e+"</h"+t+`>
`}hr(){return this.options.xhtml?`<hr/>
`:`<hr>
`}list(e,t,n){let i=t?"ol":"ul",s=t&&n!==1?' start="'+n+'"':"";return"<"+i+s+`>
`+e+"</"+i+`>
`}listitem(e){return"<li>"+e+`</li>
`}checkbox(e){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "}paragraph(e){return"<p>"+e+`</p>
`}table(e,t){return t&&(t="<tbody>"+t+"</tbody>"),`<table>
<thead>
`+e+`</thead>
`+t+`</table>
`}tablerow(e){return`<tr>
`+e+`</tr>
`}tablecell(e,t){let n=t.header?"th":"td";return(t.align?"<"+n+' align="'+t.align+'">':"<"+n+">")+e+"</"+n+`>
`}strong(e){return"<strong>"+e+"</strong>"}em(e){return"<em>"+e+"</em>"}codespan(e){return"<code>"+e+"</code>"}br(){return this.options.xhtml?"<br/>":"<br>"}del(e){return"<del>"+e+"</del>"}link(e,t,n){if(e=dR(this.options.sanitize,this.options.baseUrl,e),e===null)return n;let i='<a href="'+cn(e)+'"';return t&&(i+=' title="'+t+'"'),i+=">"+n+"</a>",i}image(e,t,n){if(e=dR(this.options.sanitize,this.options.baseUrl,e),e===null)return n;let i='<img src="'+e+'" alt="'+n+'"';return t&&(i+=' title="'+t+'"'),i+=this.options.xhtml?"/>":">",i}text(e){return e}},Au=class{strong(e){return e}em(e){return e}codespan(e){return e}del(e){return e}html(e){return e}text(e){return e}link(e,t,n){return""+n}image(e,t,n){return""+n}br(){return""}},Ou=class{constructor(){this.seen={}}serialize(e){return e.toLowerCase().trim().replace(/<[!\/a-z].*?>/ig,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")}getNextSafeSlug(e,t){let n=e,i=0;if(this.seen.hasOwnProperty(n)){i=this.seen[e];do i++,n=e+"-"+i;while(this.seen.hasOwnProperty(n))}return t||(this.seen[e]=i,this.seen[n]=0),n}slug(e,t={}){let n=this.serialize(e);return this.getNextSafeSlug(n,t.dryrun)}},vi=class r{constructor(e){this.options=e||Vs,this.options.renderer=this.options.renderer||new sa,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new Au,this.slugger=new Ou}static parse(e,t){return new r(t).parse(e)}static parseInline(e,t){return new r(t).parseInline(e)}parse(e,t=!0){let n="",i,s,a,o,c,u,l,b,f,_,m,p,g,R,D,y,d,x,k,S=e.length;for(i=0;i<S;i++){if(_=e[i],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[_.type]&&(k=this.options.extensions.renderers[_.type].call({parser:this},_),k!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(_.type))){n+=k||"";continue}switch(_.type){case"space":continue;case"hr":{n+=this.renderer.hr();continue}case"heading":{n+=this.renderer.heading(this.parseInline(_.tokens),_.depth,_R(this.parseInline(_.tokens,this.textRenderer)),this.slugger);continue}case"code":{n+=this.renderer.code(_.text,_.lang,_.escaped);continue}case"table":{for(b="",l="",o=_.header.length,s=0;s<o;s++)l+=this.renderer.tablecell(this.parseInline(_.header[s].tokens),{header:!0,align:_.align[s]});for(b+=this.renderer.tablerow(l),f="",o=_.rows.length,s=0;s<o;s++){for(u=_.rows[s],l="",c=u.length,a=0;a<c;a++)l+=this.renderer.tablecell(this.parseInline(u[a].tokens),{header:!1,align:_.align[a]});f+=this.renderer.tablerow(l)}n+=this.renderer.table(b,f);continue}case"blockquote":{f=this.parse(_.tokens),n+=this.renderer.blockquote(f);continue}case"list":{for(m=_.ordered,p=_.start,g=_.loose,o=_.items.length,f="",s=0;s<o;s++)D=_.items[s],y=D.checked,d=D.task,R="",D.task&&(x=this.renderer.checkbox(y),g?D.tokens.length>0&&D.tokens[0].type==="paragraph"?(D.tokens[0].text=x+" "+D.tokens[0].text,D.tokens[0].tokens&&D.tokens[0].tokens.length>0&&D.tokens[0].tokens[0].type==="text"&&(D.tokens[0].tokens[0].text=x+" "+D.tokens[0].tokens[0].text)):D.tokens.unshift({type:"text",text:x}):R+=x),R+=this.parse(D.tokens,g),f+=this.renderer.listitem(R,d,y);n+=this.renderer.list(f,m,p);continue}case"html":{n+=this.renderer.html(_.text);continue}case"paragraph":{n+=this.renderer.paragraph(this.parseInline(_.tokens));continue}case"text":{for(f=_.tokens?this.parseInline(_.tokens):_.text;i+1<S&&e[i+1].type==="text";)_=e[++i],f+=`
`+(_.tokens?this.parseInline(_.tokens):_.text);n+=t?this.renderer.paragraph(f):f;continue}default:{let T='Token with "'+_.type+'" type was not found.';if(this.options.silent){console.error(T);return}else throw new Error(T)}}}return n}parseInline(e,t){t=t||this.renderer;let n="",i,s,a,o=e.length;for(i=0;i<o;i++){if(s=e[i],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[s.type]&&(a=this.options.extensions.renderers[s.type].call({parser:this},s),a!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(s.type))){n+=a||"";continue}switch(s.type){case"escape":{n+=t.text(s.text);break}case"html":{n+=t.html(s.text);break}case"link":{n+=t.link(s.href,s.title,this.parseInline(s.tokens,t));break}case"image":{n+=t.image(s.href,s.title,s.text);break}case"strong":{n+=t.strong(this.parseInline(s.tokens,t));break}case"em":{n+=t.em(this.parseInline(s.tokens,t));break}case"codespan":{n+=t.codespan(s.text);break}case"br":{n+=t.br();break}case"del":{n+=t.del(this.parseInline(s.tokens,t));break}case"text":{n+=t.text(s.text);break}default:{let c='Token with "'+s.type+'" type was not found.';if(this.options.silent){console.error(c);return}else throw new Error(c)}}}return n}};function Ie(r,e,t){if(typeof r>"u"||r===null)throw new Error("marked(): input parameter is undefined or null");if(typeof r!="string")throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(r)+", string expected");if(typeof e=="function"&&(t=e,e=null),e=Rr({},Ie.defaults,e||{}),bR(e),t){let n=e.highlight,i;try{i=bi.lex(r,e)}catch(o){return t(o)}let s=function(o){let c;if(!o)try{e.walkTokens&&Ie.walkTokens(i,e.walkTokens),c=vi.parse(i,e)}catch(u){o=u}return e.highlight=n,o?t(o):t(null,c)};if(!n||n.length<3||(delete e.highlight,!i.length))return s();let a=0;Ie.walkTokens(i,function(o){o.type==="code"&&(a++,setTimeout(()=>{n(o.text,o.lang,function(c,u){if(c)return s(c);u!=null&&u!==o.text&&(o.text=u,o.escaped=!0),a--,a===0&&s()})},0))}),a===0&&s();return}try{let n=bi.lex(r,e);return e.walkTokens&&Ie.walkTokens(n,e.walkTokens),vi.parse(n,e)}catch(n){if(n.message+=`
Please report this to https://github.com/markedjs/marked.`,e.silent)return"<p>An error occurred:</p><pre>"+cn(n.message+"",!0)+"</pre>";throw n}}Ie.options=Ie.setOptions=function(r){return Rr(Ie.defaults,r),MP(Ie.defaults),Ie};Ie.getDefaults=mR;Ie.defaults=Vs;Ie.use=function(...r){let e=Rr({},...r),t=Ie.defaults.extensions||{renderers:{},childTokens:{}},n;r.forEach(i=>{if(i.extensions&&(n=!0,i.extensions.forEach(s=>{if(!s.name)throw new Error("extension name required");if(s.renderer){let a=t.renderers?t.renderers[s.name]:null;a?t.renderers[s.name]=function(...o){let c=s.renderer.apply(this,o);return c===!1&&(c=a.apply(this,o)),c}:t.renderers[s.name]=s.renderer}if(s.tokenizer){if(!s.level||s.level!=="block"&&s.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");t[s.level]?t[s.level].unshift(s.tokenizer):t[s.level]=[s.tokenizer],s.start&&(s.level==="block"?t.startBlock?t.startBlock.push(s.start):t.startBlock=[s.start]:s.level==="inline"&&(t.startInline?t.startInline.push(s.start):t.startInline=[s.start]))}s.childTokens&&(t.childTokens[s.name]=s.childTokens)})),i.renderer){let s=Ie.defaults.renderer||new sa;for(let a in i.renderer){let o=s[a];s[a]=(...c)=>{let u=i.renderer[a].apply(s,c);return u===!1&&(u=o.apply(s,c)),u}}e.renderer=s}if(i.tokenizer){let s=Ie.defaults.tokenizer||new ia;for(let a in i.tokenizer){let o=s[a];s[a]=(...c)=>{let u=i.tokenizer[a].apply(s,c);return u===!1&&(u=o.apply(s,c)),u}}e.tokenizer=s}if(i.walkTokens){let s=Ie.defaults.walkTokens;e.walkTokens=function(a){i.walkTokens.call(this,a),s&&s.call(this,a)}}n&&(e.extensions=t),Ie.setOptions(e)})};Ie.walkTokens=function(r,e){for(let t of r)switch(e.call(Ie,t),t.type){case"table":{for(let n of t.header)Ie.walkTokens(n.tokens,e);for(let n of t.rows)for(let i of n)Ie.walkTokens(i.tokens,e);break}case"list":{Ie.walkTokens(t.items,e);break}default:Ie.defaults.extensions&&Ie.defaults.extensions.childTokens&&Ie.defaults.extensions.childTokens[t.type]?Ie.defaults.extensions.childTokens[t.type].forEach(function(n){Ie.walkTokens(t[n],e)}):t.tokens&&Ie.walkTokens(t.tokens,e)}};Ie.parseInline=function(r,e){if(typeof r>"u"||r===null)throw new Error("marked.parseInline(): input parameter is undefined or null");if(typeof r!="string")throw new Error("marked.parseInline(): input parameter is of type "+Object.prototype.toString.call(r)+", string expected");e=Rr({},Ie.defaults,e||{}),bR(e);try{let t=bi.lexInline(r,e);return e.walkTokens&&Ie.walkTokens(t,e.walkTokens),vi.parseInline(t,e)}catch(t){if(t.message+=`
Please report this to https://github.com/markedjs/marked.`,e.silent)return"<p>An error occurred:</p><pre>"+cn(t.message+"",!0)+"</pre>";throw t}};Ie.Parser=vi;Ie.parser=vi.parse;Ie.Renderer=sa;Ie.TextRenderer=Au;Ie.Lexer=bi;Ie.lexer=bi.lex;Ie.Tokenizer=ia;Ie.Slugger=Ou;Ie.parse=Ie;var pA=Ie.options,gA=Ie.setOptions,mA=Ie.use,_A=Ie.walkTokens,bA=Ie.parseInline;var vA=vi.parse,yA=bi.lex;var tT=yR(),nT=new tT;Ie.setOptions({highlight:(r,e)=>{if(e==="gdscript")return ca.highlight(r,iT,e);if(e==="csharp")return ca.highlight(r,ca.languages.csharp,e)}});var lg="",wR=aa.window.activeColorTheme.kind;wR===aa.ColorThemeKind.Dark?lg=`{
		viewport: null,
		styles: {
			'header,footer,section,article': '#d4d4d480',
			'h1,a': '#d4d4d480',
			'h2,h3,h4': '#d4d4d480'
		},
		back: 'rgba(1,1,1,0.08)',
		view: '#79797933',
		drag: '#bfbfbf33',
		interval: 50
	}`:wR===aa.ColorThemeKind.Light&&(lg=`{
		viewport: null,
		styles: {
			'header,footer,section,article': 'rgba(0,0,0,0.08)',
			'h1,a': 'rgba(0,0,0,0.10)',
			'h2,h3,h4': 'rgba(0,0,0,0.08)'
		},
		back: 'rgba(0,0,0,0.08)',
		view: 'rgba(0,0,0,0.08)',
		drag: 'rgba(0,0,0,0.08)',
		interval: 50
	}`);function CR(r,e,t){let n=r.asWebviewUri(kn("media","pagemap.js")),i=r.asWebviewUri(kn("media","prism.css")),s=r.asWebviewUri(kn("media","docs.css")),a="";return t&&(a=`
			window.addEventListener('load', event => {
				document.getElementById('${t}').scrollIntoView();
			});
		`),`<!DOCTYPE html>
		<html>
		<head>
			<meta name="viewport" content="width=device-width, initial-scale=1.0">
			<link href="${s}" rel="stylesheet">
			<link href="${i}" rel="stylesheet">

			<title>${e.name}</title>
		</head>
		<body style="line-height: scaleFactor%; font-size: scaleFactor%; margin-right: bodyMargin">
			<main>
				${rT(e)}
			</main>

			<canvas id='minimap' style="display: displayMinimap"></canvas>
			
			<script src="${n}"></script>
			<script>
				pagemap(document.querySelector('#minimap'), ${lg});			
				${a};

				var vscode = acquireVsCodeApi();
				function inspect(native_class, symbol_name) {
					if (typeof (godot_class) != 'undefined' && godot_class == native_class) {
						document.getElementById(symbol_name).scrollIntoView();
					} else {
						vscode.postMessage({
							type: 'INSPECT_NATIVE_SYMBOL',
							data: {
								native_class: native_class,
								symbol_name: symbol_name
							}
						});
					}
				};
				window.addEventListener('message', event => {
					const message = event.data;
					switch (message.command) {
						case 'focus':
							document.getElementById(message.target).scrollIntoView();
							break;
					}
				});
			</script>
		</body>
		</html>`}function rT(r){let e=zs(r.native_class,void 0);function t(a,o=!1){let c=/\((.*)?\)\s*\-\>\s*(([A-z0-9]+)?)$/.exec(a.detail);if(!c)return"";let u=zs(c[2]||"void",void 0),l=(c[1]||"").replace(/\:\s([A-z0-9_]+)(\,\s*)?/g,`: <a href="" onclick="inspect('$1')">$1</a>$2`);return l=l.replace(/\s=\s(.*?)[\,\)]/g,""),`${u} ${o?`${e}.`:""}${tt("a",a.name,{href:`#${a.name}`})}( ${l} )`}function n(a,o=!1){switch(a.kind){case Sn.SymbolKind.Property:case Sn.SymbolKind.Variable:{let c=/\.([A-z_0-9]+)\:\s(.*)$/.exec(a.detail);if(!c)return;let u=zs(c[2],void 0),l=tt("a",a.name,{href:`#${a.name}`}),b=tt("h4",`${u} ${o?`${e}.`:""}${a.name}`),f=tt("p",oa(a.documentation,r.native_class)),_=tt("div",b+f);return{index:`${u} ${l}`,body:_}}case Sn.SymbolKind.Constant:{let c=/\.([A-Za-z_0-9]+)(\:\s*)?([A-z0-9_\.]+)?\s*=\s*(.*)$/.exec(a.detail);if(!c)return;let u=zs(c[3]||"int",void 0),l=c[1],b=tt("code",c[4]),f=tt("p",`${u} ${o?`${e}.`:""}${l} = ${b}`),_=tt("p",oa(a.documentation,r.native_class));return{body:tt("div",f+_)}}case Sn.SymbolKind.Event:{let c=/\.([A-z0-9]+)\((.*)?\)/.exec(a.detail);if(!c)return;let u=(c[2]||"").replace(/\:\s([A-z0-9_]+)(\,\s*)?/g,`: <a href="" onclick="inspect('$1')">$1</a>$2`),l=tt("p",`${o?`signal ${o?`${e}.`:""}`:""}${a.name}( ${u} )`),b=tt("p",oa(a.documentation,r.native_class));return{body:tt("div",l+b)}}case Sn.SymbolKind.Method:case Sn.SymbolKind.Function:{let c=t(a,o),u=tt("h4",c),l=tt("p",oa(a.documentation,r.native_class)),b=tt("div",u+l);return{index:c,body:b}}default:break}}if(r.kind===Sn.SymbolKind.Class){let a=tt("h2",`Class: ${r.name}`);if(r.class_info.inherits){let p=zs(r.class_info.inherits,void 0);a+=tt("p",`Inherits: ${p}`)}if(r.class_info?.extended_classes){let p="";for(let g of r.class_info.extended_classes)p+=(p?", ":" ")+zs(g,g);a+=tt("p",`Inherited by:${p}`)}a+=tt("p",oa(r.documentation,r.native_class));let o="",c="",u="",l="",b="",f="",_="";if(r.children)for(let p of r.children){let g=n(p);switch(p.kind){case Sn.SymbolKind.Property:case Sn.SymbolKind.Variable:b+=tt("li",g.index),f+=tt("li",g.body,{id:p.name});break;case Sn.SymbolKind.Constant:o+=tt("li",g.body,{id:p.name});break;case Sn.SymbolKind.Event:c+=tt("li",g.body,{id:p.name});break;case Sn.SymbolKind.Method:case Sn.SymbolKind.Function:u+=tt("li",g.index),l+=tt("li",g.body,{id:p.name});break;default:_+=tt("li",g.body,{id:p.name});break}}let m=(p,g)=>{g&&(a+=tt("h3",p),a+=tt("ul",g))};return m("Properties",b),m("Constants",o),m("Signals",c),m("Methods",u),m("Property Descriptions",f),m("Method Descriptions",l),m("Other Members",_),a+=tt("script",`var godot_class = "${r.native_class}";`),a}let i="",s=n(r,!0);return s.index&&([Sn.SymbolKind.Function,Sn.SymbolKind.Method].includes(r.kind)||(i+=tt("h2",s.index))),i+=tt("div",s.body),i}function tt(r,e,t={},n,i){let s="";for(let a in t)Object.prototype.hasOwnProperty.call(t,a)&&(s+=` ${a}="${t[a]}"`);return`${i||""}<${r} ${s}>${e}</${r}>${n?`
`:""}`}function zs(r,e){return!e||e===r?tt("a",r,{onclick:`inspect('${r}')`,href:""}):tt("a",`${r}.${e}`,{onclick:`inspect('${r}', '${e}')`,href:""})}function ug(r,e){let t=r.split(`
`),n=t[0].match(/^\s*/)[0].length;return r=t.map(i=>i.slice(n)).join(`
`),Ie.parse(`\`\`\`${e}
${r}
\`\`\``)}function oa(r,e){r=r.replaceAll("[code skip-lint]","[code]");let t=nT.parse(r.trim());t=t.replaceAll(/\[\/?codeblocks\](<br\/>)?/g,""),t=t.replaceAll("&quot;",'"');for(let n of t.matchAll(/\[codeblock].*?\[\/codeblock]/gs)){let i=n[0];i=i.replaceAll(/\[\/?codeblock\](<br\/>)?/g,""),i=i.replaceAll("<br/>",`
`),t=t.replace(n[0],ug(i,"gdscript"))}for(let n of t.matchAll(/\[gdscript].*?\[\/gdscript]/gs)){let i=n[0];i=i.replaceAll(/\[\/?gdscript\](<br\/>)?/g,""),i=i.replaceAll("<br/>",`
`),t=t.replace(n[0],ug(i,"gdscript"))}for(let n of t.matchAll(/\[csharp].*?\[\/csharp]/gs)){let i=n[0];i=i.replaceAll(/\[\/?csharp\](<br\/>)?/g,""),i=i.replaceAll("<br/>",`
`),t=t.replace(n[0],ug(i,"csharp"))}return t=t.replaceAll("<br/>		",""),t=t.replaceAll(/\[param\s+(@?[A-Z_a-z][A-Z_a-z0-9]*?)\]/g,"<code>$1</code>"),t=t.replaceAll(/\[method\s+(@?[A-Z_a-z][A-Z_a-z0-9]*?)\]/g,`<a href="" onclick="inspect('${e}', '$1')">$1</a>`),t=t.replaceAll(/\[(\w+)\]/g,`<a href="" onclick="inspect('$1')">$1</a>`),t=t.replaceAll(/\[\w+\s+(@?[A-Z_a-z][A-Z_a-z0-9]*?)\.(\w+)\]/g,`<a href="" onclick="inspect('$1', '$2')">$1.$2</a>`),t}var iT={comment:{pattern:/(^|[^\\])#.*/,lookbehind:!0},"string-interpolation":{pattern:/(?:f|rf|fr)(?:("""|''')[\s\S]+?\1|("|')(?:\\.|(?!\2)[^\\\r\n])*\2)/i,greedy:!0,inside:{interpolation:{pattern:/((?:^|[^{])(?:{{)*){(?!{)(?:[^{}]|{(?!{)(?:[^{}]|{(?!{)(?:[^{}])+})+})+}/,lookbehind:!0,inside:{"format-spec":{pattern:/(:)[^:(){}]+(?=}$)/,lookbehind:!0},"conversion-option":{pattern:/![sra](?=[:}]$)/,alias:"punctuation"},rest:null}},string:/[\s\S]+/}},"triple-quoted-string":{pattern:/(?:[rub]|rb|br)?("""|''')[\s\S]+?\1/i,greedy:!0,alias:"string"},string:{pattern:/(?:[rub]|rb|br)?("|')(?:\\.|(?!\1)[^\\\r\n])*\1/i,greedy:!0},function:{pattern:/((?:^|\s)func[ \t]+)[a-zA-Z_]\w*(?=\s*\()/g,lookbehind:!0},"class-name":{pattern:/(\bclass\s+)\w+/i,lookbehind:!0},decorator:{pattern:/(^\s*)@\w+(?:\.\w+)*/im,lookbehind:!0,alias:["annotation","punctuation"],inside:{punctuation:/\./}},keyword:/\b(?:if|elif|else|for|while|break|continue|pass|return|match|func|class|class_name|extends|is|onready|tool|static|export|setget|const|var|as|void|enum|preload|assert|yield|signal|breakpoint|rpc|sync|master|puppet|slave|remotesync|mastersync|puppetsync)\b/,builtin:/\b(?:PI|TAU|NAN|INF|_|sin|cos|tan|sinh|cosh|tanh|asin|acos|atan|atan2|sqrt|fmod|fposmod|floor|ceil|round|abs|sign|pow|log|exp|is_nan|is_inf|ease|decimals|stepify|lerp|dectime|randomize|randi|randf|rand_range|seed|rand_seed|deg2rad|rad2deg|linear2db|db2linear|max|min|clamp|nearest_po2|weakref|funcref|convert|typeof|type_exists|char|str|print|printt|prints|printerr|printraw|var2str|str2var|var2bytes|bytes2var|range|load|inst2dict|dict2inst|hash|Color8|print_stack|instance_from_id|preload|yield|assert|Vector2|Vector3|Color|Rect2|Array|Basis|Dictionary|Plane|Quat|RID|Rect3|Transform|Transform2D|AABB|String|Color|NodePath|RID|Object|Dictionary|Array|PoolByteArray|PoolIntArray|PoolRealArray|PoolStringArray|PoolVector2Array|PoolVector3Array|PoolColorArray)\b/,boolean:/\b(?:true|false)\b/,number:/(?:\b(?=\d)|\B(?=\.))(?:0[bo])?(?:(?:\d|0x[\da-f])[\da-f]*\.?\d*|\.\d+)(?:e[+-]?\d+)?j?\b/i,operator:/[-+%=]=?|!=|\*\*?=?|\/\/?=?|<[<=>]?|>[=>]?|[&|^~]/,punctuation:/[{}[\];(),.:]/};var EA=ke("providers.docs"),$u=class{constructor(e){this.context=e;let t={webviewOptions:{enableScripts:!0,retainContextWhenHidden:!0,enableFindWidget:!0},supportsMultipleEditorsPerDocument:!0};e.subscriptions.push(Gs.window.registerCustomEditorProvider("gddoc",this,t))}classInfo=new Map;symbolDb=new Map;htmlDb=new Map;ready=!1;register_capabilities(e){for(let t of e.params.native_classes)this.classInfo.set(t.name,t);for(let t of this.classInfo.values())if(t.inherits){this.classInfo.has(t.inherits)||this.classInfo.set(t.inherits,{name:t.inherits,inherits:""});let n=this.classInfo.get(t.inherits).extended_classes||[];n.push(t.name),this.classInfo.get(t.inherits).extended_classes=n}this.ready=!0}async list_native_classes(){let e=await Gs.window.showQuickPick([...this.classInfo.keys()].sort(),{placeHolder:"Type godot class name here",canPickMany:!1});e&&Gs.commands.executeCommand("vscode.open",Lr(e))}openCustomDocument(e,t,n){return{uri:e,dispose:()=>{}}}async resolveCustomEditor(e,t,n){let i=e.uri.path.split(".")[0],s=e.uri.fragment,a=null;for(t.webview.options={enableScripts:!0};!this.ready;)await new Promise(u=>setTimeout(u,100));if(a=this.symbolDb.get(i),!a&&this.classInfo.has(i)){let u={native_class:i,symbol_name:i};a=await vt.lsp.client.send_request("textDocument/nativeSymbol",u),a.class_info=this.classInfo.get(a.name),this.symbolDb.set(a.name,a)}this.htmlDb.has(i)||this.htmlDb.set(i,CR(t.webview,a,s));let o=We("documentation.pageScale");t.webview.html=this.htmlDb.get(i).replaceAll("scaleFactor",o),We("documentation.displayMinimap")?(t.webview.html=this.htmlDb.get(i).replace("displayMinimap","initial;"),t.webview.html=this.htmlDb.get(i).replace("bodyMargin","200px;")):(t.webview.html=this.htmlDb.get(i).replace("bodyMargin","0px;"),t.webview.html=this.htmlDb.get(i).replace("displayMinimap","none;")),t.iconPath=kn("resources/godot_icon.svg"),t.webview.onDidReceiveMessage(u=>{if(u.type==="INSPECT_NATIVE_SYMBOL"){let l=Lr(u.data.native_class,u.data.symbol_name);Gs.commands.executeCommand("vscode.open",l)}}),s&&t.webview.postMessage({command:"focus",target:s})}};var ua=Ce(require("vscode")),Nr=require("vscode");var FA=ke("providers.hover"),Nu=class{constructor(e){this.context=e;let t=[{language:"gdresource",scheme:"file"},{language:"gdscene",scheme:"file"},{language:"gdscript",scheme:"file"}];e.subscriptions.push(ua.languages.registerHoverProvider(t,this))}parser=new rr;async get_links(e){let t="";for(let n of e.matchAll(/res:\/\/[^"^']*/g)){let i=await _n(n[0]);i instanceof Nr.Uri&&(t+=`* [${n[0]}](${i})
`)}return t}async provideHover(e,t,n){if(["gdresource","gdscene"].includes(e.languageId)){let s=this.parser.parse_scene(e),a=/(?:Ext|Sub)Resource\(\s?"?(\w+)\s?"?\)/,o=e.getText(e.getWordRangeAtPosition(t,a));if(o.startsWith("ExtResource")){let u=o.match(a)[1],l=s.externalResources.get(u),b=l.body,f=await this.get_links(b),_=new Nr.MarkdownString;_.appendMarkdown(f);let m=await _n(l.path);if(_.appendMarkdown(`
---
`),_.appendCodeblock(b,"gdresource"),l.type==="Texture"&&(_.appendMarkdown(`
---
`),_.appendMarkdown(`<img src="${m}" min-width=100px max-width=500px/>
`),_.supportHtml=!0,_.isTrusted=!0),l.type==="Script"){_.appendMarkdown(`
---
`);let g=(await ua.workspace.openTextDocument(m)).getText();_.appendCodeblock(g,"gdscript")}return new Nr.Hover(_)}if(o.startsWith("SubResource")){let u=o.match(a)[1],l=s.subResources.get(u).body;l=l?.replace(/Array\([0-9,\.\- ]*\)/,"Array(...)");let b=new Nr.MarkdownString;return b.appendCodeblock(l,"gdresource"),new Nr.Hover(b)}}let i=e.getText(e.getWordRangeAtPosition(t,/res:\/\/[^"^']*/));if(i.startsWith("res://")){let s="";if(i.endsWith(".gd"))s="gdscript";else if(i.endsWith(".cs"))s="csharp";else if(i.endsWith(".tscn"))s="gdscene";else if(i.endsWith(".tres"))s="gdresource";else if(i.endsWith(".png")||i.endsWith(".svg"))s="image";else return;let a=await _n(i),o=new Nr.MarkdownString;if(s==="image")o.appendMarkdown(`<img src="${a}" min-width=100px max-width=500px/>`),o.supportHtml=!0,o.isTrusted=!0;else{let u=(await ua.workspace.openTextDocument(a)).getText();o.appendCodeblock(u,s)}return new Nr.Hover(o)}}};var SR=Ce(require("vscode")),qr=require("vscode");var YA=ke("providers.inlay_hints");function DR(r){let e=/: ([\w\d_]+)/,t=r.match(e);return` ${t?t[1]:"unknown"} `}async function RR(r,e,t){let n=await vt.lsp.client.send_request("textDocument/hover",{textDocument:{uri:r.uri.toString()},position:{line:e.line,character:e.character}});if(!(Array.isArray(n.contents)&&n.contents.length===0))return new qr.InlayHint(t,DR(n.contents.value),qr.InlayHintKind.Type)}var qu=class{constructor(e){this.context=e;let t=[{language:"gdresource",scheme:"file"},{language:"gdscene",scheme:"file"},{language:"gdscript",scheme:"file"}];e.subscriptions.push(SR.languages.registerInlayHintsProvider(t,this))}parser=new rr;async provideInlayHints(e,t,n){let i=[],s=e.getText(t);if(e.fileName.endsWith(".gd")){if(!We("inlayHints.gdscript",!0)||!vt.lsp.client.isRunning())return i;let o=await vt.lsp.client.send_request("textDocument/documentSymbol",{textDocument:{uri:e.uri.toString()}});if(o.length===0)return i;let c=typeof o[0]=="object"&&"children"in o[0]?o[0].children:o,u=c.some(b=>b.detail),l=/((var|const)\s+)([\w\d_]+)\s*:=/g;for(let b of s.matchAll(l)){if(n.isCancellationRequested)break;let f=e.positionAt(b.index+b[0].length-1),_=e.positionAt(b.index+b[1].length);if(u){let m=c.find(p=>p.name===b[3]);if(m&&m.detail){let p=new qr.InlayHint(f,DR(m.detail),qr.InlayHintKind.Type);i.push(p)}else{let p=await RR(e,_,f);p&&i.push(p)}}else{let m=await RR(e,_,f);m&&i.push(m)}}return i}if(!We("inlayHints.gdresource",!0))return i;let a=this.parser.parse_scene(e);for(let o of s.matchAll(/ExtResource\(\s?"?(\w+)\s?"?\)/g)){let c=o[1],u=e.positionAt(o.index+o[0].length),l=a.externalResources.get(c),b=`${l.type}: "${l.path}"`,f=new qr.InlayHint(u,b,qr.InlayHintKind.Type);f.paddingLeft=!0,i.push(f)}for(let o of s.matchAll(/SubResource\(\s?"?(\w+)\s?"?\)/g)){let c=o[1],u=e.positionAt(o.index+o[0].length),b=`${a.subResources.get(c).type}`,f=new qr.InlayHint(u,b,qr.InlayHintKind.Type);f.paddingLeft=!0,i.push(f)}return i}};var sT=Ce(require("vscode")),dg=require("vscode");var oO=ke("providers.tokens");var fg=Ce(require("vscode"));var uO=ke("providers.tasks");var Sr=Ce(require("vscode"));var Hi=Ce(require("vscode"));function hg(){Hi.window.showErrorMessage("Reload VSCode to apply settings","Reload").then(e=>{e=="Reload"&&Hi.commands.executeCommand("workbench.action.reloadWindow")})}function pg(r){Hi.window.showOpenDialog({openLabel:"Select Godot executable",filters:process.platform==="win32"?{"Godot Editor Binary":["exe","EXE"]}:void 0}).then(async e=>{if(!e)return;let t=e[0].fsPath;Ea(r,t),hg()})}function Bn(r,e){Hi.window.showErrorMessage(r,"Select Godot executable","Open Settings","Ignore").then(t=>{t=="Select Godot executable"&&pg(e),t=="Open Settings"&&Hi.commands.executeCommand("workbench.action.openSettings",e)})}var la=require("child_process");var oT=ke("subspawn"),Wi={};function Kr(r){r in Wi&&(Wi[r].forEach(e=>{try{e.pid&&(process.platform==="win32"?(0,la.execSync)(`taskkill /pid ${e.pid} /T /F`):process.platform==="darwin"?(0,la.execSync)(`kill -9 ${e.pid}`):process.kill(-e.pid))}catch{oT.error(`couldn't kill task ${r}`)}}),Wi[r]=[])}process.on("exit",()=>{Object.keys(Wi).forEach(r=>Kr(r))});function gg(){process.exit()}process.on("SIGINT",gg);process.on("SIGTERM",gg);process.on("SIGQUIT",gg);function yi(r,e,t){let n=(0,la.spawn)(e,t);return Wi[r]=Wi[r]||[],Wi[r].push(n),n}var AR=Ce(require("node:events")),yg=Ce(require("node:path")),OR=Ce(kR());var Mu=Ce(si()),ER=require("node:events"),IR=require("net");var mg=ke("lsp.buf"),_g=8192,PR=Buffer.from("\r","ascii")[0],TR=Buffer.from(`
`,"ascii")[0],aT=`\r
`,da=class{constructor(e){this.reader=e}encoding="utf8";index=0;buffer=Buffer.allocUnsafe(_g);nextMessageLength;messageToken;partialMessageTimer;_partialMessageTimeout=1e4;append(e){let t=e;if(typeof e=="string"){let n=e,i=Buffer.byteLength(n,this.encoding);t=Buffer.allocUnsafe(i),t.write(n,0,i,this.encoding)}if(this.buffer.length-this.index>=t.length)t.copy(this.buffer,this.index,0,t.length);else{let n=(Math.ceil((this.index+t.length)/_g)+1)*_g;this.index===0?(this.buffer=Buffer.allocUnsafe(n),t.copy(this.buffer,0,0,t.length)):this.buffer=Buffer.concat([this.buffer.slice(0,this.index),t],n)}this.index+=t.length}tryReadHeaders(){let e=0;for(;e+3<this.index&&(this.buffer[e]!==PR||this.buffer[e+1]!==TR||this.buffer[e+2]!==PR||this.buffer[e+3]!==TR);)e++;if(e+3>=this.index)return;let t=Object.create(null),n=this.buffer.toString("ascii",0,e).split(aT);for(let s of n){let a=s.indexOf(":");if(a===-1)throw new Error("Message header must separate key and value using :");let o=s.substr(0,a),c=s.substr(a+1).trim();t[o]=c}let i=e+4;return this.buffer=this.buffer.slice(i),this.index=this.index-i,t}tryReadContent(e){if(this.index<e)return null;let t=this.buffer.toString(this.encoding,0,e),n=e;return this.buffer.copy(this.buffer,0,n),this.index=this.index-n,t}ready(){if(this.nextMessageLength===-1){let t=this.tryReadHeaders();if(!t)return;let n=t["Content-Length"];if(!n){mg.warn("Header must provide a Content-Length property.");return}let i=Number.parseInt(n);if(Number.isNaN(i)){mg.warn("Content-Length value must be a number.");return}this.nextMessageLength=i}let e=this.tryReadContent(this.nextMessageLength);if(!e){mg.warn("haven't recieved full message"),this.setPartialMessageTimer();return}return this.clearPartialMessageTimer(),this.nextMessageLength=-1,this.messageToken++,e}reset(){this.nextMessageLength=-1,this.messageToken=0,this.partialMessageTimer=void 0}clearPartialMessageTimer(){this.partialMessageTimer&&(clearTimeout(this.partialMessageTimer),this.partialMessageTimer=void 0)}setPartialMessageTimer(){this.clearPartialMessageTimer(),!(this._partialMessageTimeout<=0)&&(this.partialMessageTimer=setTimeout((e,t)=>{this.partialMessageTimer=void 0,e===this.messageToken&&(this.reader.firePartialMessage({messageToken:e,waitingTime:t}),this.setPartialMessageTimer())},this._partialMessageTimeout,this.messageToken,this._partialMessageTimeout))}};var Hs=ke("lsp.io",{output:"Godot LSP"}),Lu=class extends ER.EventEmitter{reader=new bg(this);writer=new vg(this);requestFilter=e=>e;responseFilter=e=>e;notificationFilter=e=>e;socket=null;messageCache=[];async connect(e,t){return Hs.debug(`connecting to ${e}:${t}`),new Promise((n,i)=>{this.socket=null;let s=new IR.Socket;s.connect(t,e),s.on("connect",()=>{for(this.socket=s;this.messageCache.length>0;){let a=this.messageCache.shift();this.socket.write(a)}this.emit("connected"),n()}),s.on("data",a=>{this.emit("data",a)}),s.on("error",()=>{this.socket=null,this.emit("disconnected")}),s.on("close",()=>{this.socket=null,this.emit("disconnected")})})}write(e){this.socket?this.socket.write(e):this.messageCache.push(e)}},bg=class extends Mu.AbstractMessageReader{constructor(t){super();this.io=t}callback;buffer=new da(this);listen(t){this.buffer.reset(),this.callback=t,this.io.on("data",this.on_data.bind(this)),this.io.on("error",this.fireError.bind(this)),this.io.on("close",this.fireClose.bind(this))}on_data(t){for(this.buffer.append(t);;){let n=this.buffer.ready();if(!n)return;let i=JSON.parse(n),s;if("id"in i?s=this.io.responseFilter(i):"method"in i?s=this.io.notificationFilter(i):Hs.warn("rx [unhandled]:",i),s===!1){Hs.debug("rx [discarded]:",i);return}Hs.debug("rx:",s),this.callback(i)}}},vg=class extends Mu.AbstractMessageWriter{constructor(t){super();this.io=t}errorCount;async write(t){let n=this.io.requestFilter(t);if(n===!1){Hs.debug("tx [discarded]:",t);return}Hs.debug("tx:",n);let i=JSON.stringify(n),a=`Content-Length: ${Buffer.byteLength(i,"utf-8").toString()}\r
\r
${i}`;try{this.io.write(a),this.errorCount=0}catch(o){this.errorCount++,this.fireError(o,n,this.errorCount)}}end(){}};var fa=ke("lsp.client",{output:"Godot LSP"});var ha=class extends OR.LanguageClient{io=new Lu;target=1;port=-1;lastPortTried=-1;sentMessages=new Map;initMessage;rejected=!1;events=new AR.default;_status;set status(e){this._status=e,this.events.emit("status",this._status)}constructor(){let e=()=>new Promise((n,i)=>{n({reader:this.io.reader,writer:this.io.writer})}),t={documentSelector:[{scheme:"file",language:"gdscript"},{scheme:"untitled",language:"gdscript"}]};super("GDScriptLanguageClient",e,t),this.status=0,this.io.on("connected",this.on_connected.bind(this)),this.io.on("disconnected",this.on_disconnected.bind(this)),this.io.requestFilter=this.request_filter.bind(this),this.io.responseFilter=this.response_filter.bind(this),this.io.notificationFilter=this.notification_filter.bind(this)}connect(e=1){this.rejected=!1,this.target=e,this.status=0;let t=We("lsp.serverPort");this.port!==-1&&(t=this.port),this.target===1&&(t===6005||t===6008)&&(t=6005),this.lastPortTried=t;let n=We("lsp.serverHost");fa.info(`attempting to connect to LSP at ${n}:${t}`),this.io.connect(n,t)}async send_request(e,t){try{return this.sendRequest(e,t)}catch{fa.warn("sending request failed!")}}request_filter(e){return this.rejected?e.method==="shutdown"?e:!1:(this.sentMessages.set(e.id,e),!this.initMessage&&e.method==="initialize"&&(this.initMessage=e),e.method==="workspace/didChangeWatchedFiles"||e.method==="workspace/symbol"?!1:e)}response_filter(e){if(this.sentMessages.get(e.id)?.method==="textDocument/hover"){let n=e.result.contents.value;n&&(n=n.replace(/\n[#]+/g,`
`),n=n.replaceAll("`br`",`

`),n=n.replace("`codeblocks`",""),n=n.replace("`/codeblocks`",""),n=n.replace("`gdscript`","\nGDScript:\n```gdscript"),n=n.replace("`/gdscript`","```"),n=n.replace("`csharp`","\nC#:\n```csharp"),n=n.replace("`/csharp`","```"),e.result.contents.value=n)}return e}async check_workspace(e){let t=yg.normalize(e.params.path),n=yg.normalize(await Zr());t!==n&&(fa.warn("Connected LSP is a different workspace"),this.io.socket.resetAndDestroy(),this.rejected=!0)}notification_filter(e){return e.method==="gdscript_client/changeWorkspace"&&this.check_workspace(e),e.method==="gdscript/capabilities"&&vt.docsProvider.register_capabilities(e),e}async get_symbol_at_position(e,t){let n={textDocument:{uri:e.toString()},position:{line:t.line,character:t.character}},i=await this.send_request("textDocument/hover",n);return this.parse_hover_result(i)}parse_hover_result(e){let t=e.contents,n;if(Array.isArray(t)?n=t[0]:n=t.value,!n)return"";n=n.split(`
`)[0].trim();let i,s;return i=n.match(/(?:func|const) (@?\w+)\.(\w+)/),i&&(s=`${i[1]}.${i[2]}`),i=n.match(/<Native> class (\w+)/),i&&(s=`${i[1]}`),s}on_connected(){this.status=2;let e=We("lsp.serverHost");fa.info(`connected to LSP at ${e}:${this.lastPortTried}`),this.initMessage&&this.send_request(this.initMessage.method,this.initMessage.params)}on_disconnected(){if(this.rejected){this.status=3;return}if(this.target===1){let e=We("lsp.serverHost"),t=We("lsp.serverPort");if((t===6005||t===6008)&&this.lastPortTried===6005){t=6008,fa.info(`attempting to connect to LSP at ${e}:${t}`),this.lastPortTried=t,this.io.connect(e,t);return}}this.status=1}};var wg=ke("lsp.manager",{output:"Godot LSP"});var pa=class{constructor(e){this.context=e;this.client=new ha,this.client.events.on("status",this.on_client_status_changed.bind(this)),setInterval(()=>{this.retry_callback()},We("lsp.autoReconnect.cooldown")),xn("connectedToLSP",!1),this.statusWidget=Sr.window.createStatusBarItem(Sr.StatusBarAlignment.Right),this.statusWidget.command="godotTools.checkStatus",this.statusWidget.show(),this.update_status_widget(),e.subscriptions.push(Je("startLanguageServer",()=>{this.start_language_server(),this.reconnectionAttempts=0,this.target=0,this.client.connect(this.target)}),Je("stopLanguageServer",this.stop_language_server.bind(this)),Je("checkStatus",this.on_status_item_click.bind(this)),this.statusWidget),this.connect_to_language_server()}client=null;reconnectionAttempts=0;target=1;status=0;statusWidget=null;connectedVersion="";async connect_to_language_server(){this.client.port=-1,this.target=1,this.connectedVersion=void 0,We("lsp.headless")&&(this.target=0,await this.start_language_server()),this.reconnectionAttempts=0,this.client.connect(this.target)}stop_language_server(){Kr("LSP")}async start_language_server(){this.stop_language_server();let e=await Zr();if(!e){Sr.window.showErrorMessage("Current workspace is not a Godot project");return}let t=await nn(),n="6",i="3.6";t.startsWith("4")&&(n="2",i="4.2");let s=`editorPath.godot${t[0]}`,a=We(s),o=gr(a,t[0]);switch(a=o.godotPath,o.status){case"WRONG_VERSION":{let f=`Cannot launch headless LSP: The current project uses Godot v${t}, but the specified Godot executable is v${o.version}`;Bn(f,s);return}case"INVALID_EXE":{let f=`Cannot launch headless LSP: '${a}' is not a valid Godot executable`;Bn(f,s);return}}if(this.connectedVersion=o.version,o.version[2]<n){let f=`Cannot launch headless LSP: Headless LSP mode is only available on v${i} or newer, but the specified Godot executable is v${o.version}.`;Sr.window.showErrorMessage(f,"Select Godot executable","Open Settings","Disable Headless LSP","Ignore").then(_=>{_==="Select Godot executable"?pg(s):_==="Open Settings"?Sr.commands.executeCommand("workbench.action.openSettings",s):_==="Disable Headless LSP"&&(Ea("lsp.headless",!1),hg())});return}this.client.port=await as(),wg.info(`starting headless LSP on port ${this.client.port}`);let u=`"${a}" --path "${e}" --editor --headless --no-window --lsp-port ${this.client.port}`,l=yi("LSP",u,{shell:!0,detached:!0}),b=ke("lsp.stdout");l.stdout.on("data",f=>{let _=f.toString().trim();_&&b.debug(_)}),l.stderr.on("data",f=>{}),l.on("close",f=>{wg.info(`LSP process exited with code ${f}`)})}get_lsp_connection_string(){let e=We("lsp.serverHost"),t=We("lsp.serverPort");return this.client.port!==-1&&(t=this.client.port),`${e}:${t}`}on_status_item_click(){let e=this.get_lsp_connection_string();switch(this.status){case 0:break;case 1:break;case 2:break;case 5:{let t=`Connected to the GDScript language server at ${e}.`,n=["Ok"];this.target===0&&(n=["Restart LSP",...n]),Sr.window.showInformationMessage(t,...n).then(i=>{i==="Restart LSP"&&this.connect_to_language_server()});break}case 4:this.retry_connect_client();break;case 6:this.show_retrying_prompt();break;case 7:this.retry_connect_client();break}}update_status_widget(){let e=this.get_lsp_connection_string(),t=We("lsp.autoReconnect.attempts"),n="",i="";switch(this.status){case 0:n="$(sync~spin) Initializing",i="Initializing extension...";break;case 1:n=`$(sync~spin) Initializing LSP ${this.reconnectionAttempts}/${t}`,i=`Connecting to headless GDScript language server.
${e}`,this.connectedVersion&&(i+=`
${this.connectedVersion}`);break;case 2:n="$(sync~spin) Connecting",i=`Connecting to the GDScript language server at ${e}`;break;case 5:n="$(check) Connected",i=`Connected to the GDScript language server.
${e}`,this.connectedVersion&&(i+=`
${this.connectedVersion}`);break;case 4:n="$(x) Disconnected",i="Disconnected from the GDScript language server.";break;case 6:n=`$(sync~spin) Connecting ${this.reconnectionAttempts}/${t}`,i=`Connecting to the GDScript language server.
${e}`,this.connectedVersion&&(i+=`
${this.connectedVersion}`);break;case 7:n="$(x) Wrong Project",i="Disconnected from the GDScript language server.";break}this.statusWidget.text=n,this.statusWidget.tooltip=i}on_client_status_changed(e){switch(e){case 0:this.status=2;break;case 2:this.retry=!1,this.reconnectionAttempts=0,xn("connectedToLSP",!0),this.status=5,this.client.needsStart()&&this.client.start().then(()=>wg.info("LSP Client started"));break;case 1:xn("connectedToLSP",!1),this.retry?this.client.port!==-1?this.status=1:this.status=6:this.status=4,this.retry=!0;break;case 3:this.status=7,this.retry=!1;break;default:break}this.update_status_widget()}retry=!1;retry_callback(){this.retry&&this.retry_connect_client()}retry_connect_client(){let e=We("lsp.autoReconnect.enabled"),t=We("lsp.autoReconnect.attempts");if(e&&this.reconnectionAttempts<=t-1){this.reconnectionAttempts++,this.client.connect(this.target),this.retry=!0;return}this.retry=!1,this.status=4,this.update_status_widget(),this.show_retrying_prompt()}show_retrying_prompt(){let t=`Couldn't connect to the GDScript language server at ${this.get_lsp_connection_string()}. Is the Godot editor or language server running?`,n=["Retry","Ignore"];this.target===1&&(n=["Open workspace with Godot Editor",...n]),Sr.window.showErrorMessage(t,...n).then(i=>{i==="Retry"&&this.connect_to_language_server(),i==="Open workspace with Godot Editor"&&(Sr.commands.executeCommand("godotTools.openEditor"),this.connect_to_language_server())})}};var gm=Ce(require("fs")),gt=require("vscode");var tr=Ce(Ks()),cm=Ce(Jg()),e0=Ce(require("node:fs")),t0=require("vscode");var Zu=Ce(require("node:path"));var r2=ke("debugger.runtime"),Ju=class{constructor(e=[],t=[],n=[]){this.locals=e;this.members=t;this.globals=n}remaining=0;reset(e=0){this.locals=[],this.members=[],this.globals=[],this.remaining=e}forEach(e,t){this.locals.forEach(e),this.members.forEach(e),this.globals.forEach(e)}},_a=class extends Map{constructor(t){super();this.class_name=t}},ba=class{constructor(e){this.id=e}stringify_value(){return`<${this.id}>`}sub_values(){return[{name:"id",value:this.id}]}type_name(){return"Object"}},Xs=class{breakpoint_id=0;breakpoints=new Map;last_frame;last_frames=[];projectPath;scene_tree;stack_count=0;stack_files=[];session;constructor(e){this.session=e}set_breakpoint(e,t){let n={file:e.replace(/\\/g,"/"),line:t,id:this.breakpoint_id++},i=this.breakpoints.get(n.file);if(i||(i=[],this.breakpoints.set(n.file,i)),i.push(n),this.projectPath){let s=`res://${Zu.relative(this.projectPath,n.file)}`;this.session?.controller.set_breakpoint(s.replace(/\\/g,"/"),t)}}remove_breakpoint(e,t){let n=this.breakpoints.get(e);if(n){let i=n.findIndex(s=>s.line===t);if(i!==-1){let s=n[i];n.splice(i,1),this.breakpoints.set(e,n);let a=`res://${Zu.relative(this.projectPath,s.file)}`;this.session?.controller.remove_breakpoint(a.replace(/\\/g,"/"),s.line)}}}get_all_breakpoints(){let e=[];for(let t of Array.from(this.breakpoints.values()))e.push(...t);return e}get_breakpoints(e){return this.breakpoints.get(e)||[]}get_breakpoint_string(){let e=this.get_all_breakpoints(),t="";return e.length>0&&(t+=' --breakpoints "',e.forEach((n,i)=>{t+=`${this.get_breakpoint_path(n.file)}:${n.line}`,i<e.length-1&&(t+=",")}),t+='"'),t}get_breakpoint_path(e){let t=Zu.relative(this.projectPath,e).replace(/\\/g,"/");if(t.length!==0)return`res://${t}`}};var dr=require("vscode");var KR=require("path"),XR=kn("resources","godot_icons").fsPath,el=class{_on_did_change_tree_data=new dr.EventEmitter;tree;onDidChangeTreeData=this._on_did_change_tree_data.event;constructor(){}fill_tree(e){this.tree=e,this._on_did_change_tree_data.fire(void 0)}getChildren(e){return this.tree?e?e.children:[this.tree]:[]}getTreeItem(e){let t=e.children.length>0,n=new dr.TreeItem(e.label,t?e===this.tree?dr.TreeItemCollapsibleState.Expanded:dr.TreeItemCollapsibleState.Collapsed:dr.TreeItemCollapsibleState.None);if(n.description=e.class_name,n.iconPath=e.iconPath,e.scene_file_path){let i="";i+=`${e.label}`,i+=`
${e.class_name}`,i+=`
${e.object_id}`,e.scene_file_path&&(i+=`
${e.scene_file_path}`),n.tooltip=i}return n}},Ys=class extends dr.TreeItem{constructor(t,n,i,s,a,o){super(t);this.label=t;this.class_name=n;this.object_id=i;this.children=s;this.scene_file_path=a;this.view_flags=o;let c=n+".svg";this.iconPath={light:dr.Uri.file(KR.join(XR,"light",c)),dark:dr.Uri.file(KR.join(XR,"dark",c))}}};function em(r,e={offset:0}){let t=r[e.offset++],n=r[e.offset++],i=r[e.offset++],s=r[e.offset++],a=[];for(let o=0;o<t;++o)a.push(em(r,e));return new Ys(n,i,s,a)}function YR(r){let e=r.byteLength,t=0,n=[];for(;e>0;){let i=r.readUInt32LE(t)+4;n.push(r.subarray(t,t+i)),t+=i,e-=i}return n}function QR(r){var e=typeof r.value;return["number","bigint","boolean","string"].some(t=>t==e)}function tl(r){let e=r.value,t;e&&Array.isArray(e)?t=e.map((n,i)=>({name:`${i}`,value:n})):e instanceof Map?t=Array.from(e.keys()).map(n=>typeof n.stringify_value=="function"?{name:`${n.type_name()}${n.stringify_value()}`,value:e.get(n)}:{name:`${n}`,value:e.get(n)}):e&&typeof e.sub_values=="function"&&(t=e.sub_values().map(n=>({name:n.name,value:n.value}))),r.sub_values=t,t?.forEach(tl)}function tm(r,e){let t=r.value,n="",i=0,s=0,a;return typeof t=="number"?Number.isInteger(t)?n=`${t}`:n=`${parseFloat(t.toFixed(5))}`:typeof t=="bigint"||typeof t=="boolean"||typeof t=="string"?n=`${t}`:typeof t>"u"?n="null":Array.isArray(t)?(n=`Array[${t.length}]`,s=t.length,a="indexed",i=e||0):t instanceof Map?(n=t.class_name??`Dictionary[${t.size}]`,s=t.size,a="named",i=e||0):(n=`${t.type_name()}${t.stringify_value()}`,i=e||0),{name:r.name,value:n,variablesReference:i,array_size:s>0?s:void 0,filter:a}}var co=Ce(Ks()),sm=Ce(require("node:fs")),om=Ce(require("node:net")),Xr=require("vscode");function pn(r){return+Number.parseFloat(String(r)).toFixed(1)}var Qs=class{constructor(e=0,t=0,n=0){this.x=e;this.y=t;this.z=n}stringify_value(){return`(${pn(this.x)}, ${pn(this.y)}, ${pn(this.z)})`}sub_values(){return[{name:"x",value:this.x},{name:"y",value:this.y},{name:"z",value:this.z}]}type_name(){return"Vector3"}},Zs=class{constructor(e=0,t=0){this.x=e;this.y=t}stringify_value(){return`(${pn(this.x)}, ${pn(this.y)})`}sub_values(){return[{name:"x",value:this.x},{name:"y",value:this.y}]}type_name(){return"Vector2"}},Js=class{constructor(e,t,n){this.x=e;this.y=t;this.z=n}stringify_value(){return`(${this.x.stringify_value()}, ${this.y.stringify_value()}, ${this.z.stringify_value()})`}sub_values(){return[{name:"x",value:this.x},{name:"y",value:this.y},{name:"z",value:this.z}]}type_name(){return"Basis"}},eo=class{constructor(e,t){this.position=e;this.size=t}stringify_value(){return`(${this.position.stringify_value()}, ${this.size.stringify_value()})`}sub_values(){return[{name:"position",value:this.position},{name:"size",value:this.size}]}type_name(){return"AABB"}},to=class{constructor(e,t,n,i=1){this.r=e;this.g=t;this.b=n;this.a=i}stringify_value(){return`(${pn(this.r)}, ${pn(this.g)}, ${pn(this.b)}, ${pn(this.a)})`}sub_values(){return[{name:"r",value:this.r},{name:"g",value:this.g},{name:"b",value:this.b},{name:"a",value:this.a}]}type_name(){return"Color"}},nl=class{constructor(e,t,n){this.names=e;this.sub_names=t;this.absolute=n}stringify_value(){return`(/${this.names.join("/")}${this.sub_names.length>0?":":""}${this.sub_names.join(":")})`}sub_values(){return[{name:"names",value:this.names},{name:"sub_names",value:this.sub_names},{name:"absolute",value:this.absolute}]}type_name(){return"NodePath"}},no=class extends Map{constructor(t){super();this.class_name=t}},Xi=class{constructor(e){this.id=e}stringify_value(){return`<${this.id}>`}sub_values(){return[{name:"id",value:this.id}]}type_name(){return"Object"}},ro=class{constructor(e,t,n,i){this.x=e;this.y=t;this.z=n;this.d=i}stringify_value(){return`(${pn(this.x)}, ${pn(this.y)}, ${pn(this.z)}, ${pn(this.d)})`}sub_values(){return[{name:"x",value:this.x},{name:"y",value:this.y},{name:"z",value:this.z},{name:"d",value:this.d}]}type_name(){return"Plane"}},io=class{constructor(e,t,n,i){this.x=e;this.y=t;this.z=n;this.w=i}stringify_value(){return`(${pn(this.x)}, ${pn(this.y)}, ${pn(this.z)}, ${pn(this.w)})`}sub_values(){return[{name:"x",value:this.x},{name:"y",value:this.y},{name:"z",value:this.z},{name:"w",value:this.w}]}type_name(){return"Quat"}},so=class{constructor(e,t){this.position=e;this.size=t}stringify_value(){return`(${this.position.stringify_value()} - ${this.size.stringify_value()})`}sub_values(){return[{name:"position",value:this.position},{name:"size",value:this.size}]}type_name(){return"Rect2"}},oo=class{constructor(e,t){this.basis=e;this.origin=t}stringify_value(){return`(${this.basis.stringify_value()} - ${this.origin.stringify_value()})`}sub_values(){return[{name:"basis",value:this.basis},{name:"origin",value:this.origin}]}type_name(){return"Transform"}},ao=class{constructor(e,t,n){this.origin=e;this.x=t;this.y=n}stringify_value(){return`(${this.origin.stringify_value()} - (${this.x.stringify_value()}, ${this.y.stringify_value()})`}sub_values(){return[{name:"origin",value:this.origin},{name:"x",value:this.x},{name:"y",value:this.y}]}type_name(){return"Transform2D"}};var rl=class{decode_variant(e){let t=this.decode_UInt32(e);switch(t&255){case 1:return this.decode_UInt32(e)!==0;case 2:return t&65536?this.decode_Int64(e):this.decode_Int32(e);case 3:return t&65536?this.decode_Double(e):this.decode_Float(e);case 4:return this.decode_String(e);case 5:return this.decode_Vector2(e);case 6:return this.decode_Rect2(e);case 7:return this.decode_Vector3(e);case 8:return this.decode_Transform2D(e);case 9:return this.decode_Plane(e);case 10:return this.decode_Quat(e);case 11:return this.decode_AABB(e);case 12:return this.decode_Basis(e);case 13:return this.decode_Transform(e);case 14:return this.decode_Color(e);case 15:return this.decode_NodePath(e);case 17:return t&65536?this.decode_Object_id(e):this.decode_Object(e);case 18:return this.decode_Dictionary(e);case 19:return this.decode_Array(e);case 20:return this.decode_PoolByteArray(e);case 21:return this.decode_PoolIntArray(e);case 22:return this.decode_PoolFloatArray(e);case 23:return this.decode_PoolStringArray(e);case 24:return this.decode_PoolVector2Array(e);case 25:return this.decode_PoolVector3Array(e);case 26:return this.decode_PoolColorArray(e);default:return}}get_dataset(e){let t=e.readUInt32LE(0);if(e.length!=t+4)return;let n={buffer:e,offset:4,len:t},i=[];i.push(t+4);do{let s=this.decode_variant(n);i.push(s)}while(n.len>0);return i}decode_AABB(e){return new eo(this.decode_Vector3(e),this.decode_Vector3(e))}decode_Array(e){let t=[],n=this.decode_UInt32(e);for(let i=0;i<n;i++){let s=this.decode_variant(e);t.push(s)}return t}decode_Basis(e){return new Js(this.decode_Vector3(e),this.decode_Vector3(e),this.decode_Vector3(e))}decode_Color(e){let t=this.decode_Vector3(e),n=this.decode_Float(e);return new to(t.x,t.y,t.z,n)}decode_Dictionary(e){let t=new Map,n=this.decode_UInt32(e);for(let i=0;i<n;i++){let s=this.decode_variant(e),a=this.decode_variant(e);t.set(s,a)}return t}decode_Double(e){let t=e.buffer.readDoubleLE(e.offset);return e.offset+=8,e.len-=8,t}decode_Float(e){let t=e.buffer.readFloatLE(e.offset);return e.offset+=4,e.len-=4,t}decode_Int32(e){let t=e.buffer.readInt32LE(e.offset);return e.len-=4,e.offset+=4,t}decode_UInt32(e){let t=e.buffer.readUInt32LE(e.offset);return e.len-=4,e.offset+=4,t}decode_Int64(e){let t=e.buffer.readBigInt64LE(e.offset);return e.len-=8,e.offset+=8,t}decode_UInt64(e){let t=e.buffer.readBigUInt64LE(e.offset);return e.len-=8,e.offset+=8,t}decode_NodePath(e){let t=this.decode_UInt32(e)&2147483647,n=this.decode_UInt32(e),i=this.decode_UInt32(e),s=(i&1)===1;i&2&&n++;let a=t+n,o=[],c=[];for(let u=0;u<a;u++){let l=this.decode_String(e);u<t?o.push(l):c.push(l)}return new nl(o,c,s)}decode_Object(e){let t=this.decode_String(e),n=this.decode_UInt32(e),i=new no(t);for(let s=0;s<n;s++){let a=this.decode_String(e),o=this.decode_variant(e);i.set(a,o)}return i}decode_Object_id(e){let t=this.decode_UInt64(e);return new Xi(t)}decode_Plane(e){let t=this.decode_Float(e),n=this.decode_Float(e),i=this.decode_Float(e),s=this.decode_Float(e);return new ro(t,n,i,s)}decode_PoolByteArray(e){let t=this.decode_UInt32(e),n=[];for(let i=0;i<t;i++)n.push(e.buffer.readUInt8(e.offset)),e.offset++,e.len--;return n}decode_PoolColorArray(e){let t=this.decode_UInt32(e),n=[];for(let i=0;i<t;i++)n.push(this.decode_Color(e));return n}decode_PoolFloatArray(e){let t=this.decode_UInt32(e),n=[];for(let i=0;i<t;i++)n.push(this.decode_Float(e));return n}decode_PoolIntArray(e){let t=this.decode_UInt32(e),n=[];for(let i=0;i<t;i++)n.push(this.decode_Int32(e));return n}decode_PoolStringArray(e){let t=this.decode_UInt32(e),n=[];for(let i=0;i<t;i++)n.push(this.decode_String(e));return n}decode_PoolVector2Array(e){let t=this.decode_UInt32(e),n=[];for(let i=0;i<t;i++)n.push(this.decode_Vector2(e));return n}decode_PoolVector3Array(e){let t=this.decode_UInt32(e),n=[];for(let i=0;i<t;i++)n.push(this.decode_Vector3(e));return n}decode_Quat(e){let t=this.decode_Float(e),n=this.decode_Float(e),i=this.decode_Float(e),s=this.decode_Float(e);return new io(t,n,i,s)}decode_Rect2(e){return new so(this.decode_Vector2(e),this.decode_Vector2(e))}decode_String(e){let t=this.decode_UInt32(e),n=0;t%4!==0&&(n=4-t%4);let i=e.buffer.toString("utf8",e.offset,e.offset+t);return t+=n,e.offset+=t,e.len-=t,i}decode_Transform(e){return new oo(this.decode_Basis(e),this.decode_Vector3(e))}decode_Transform2D(e){return new ao(this.decode_Vector2(e),this.decode_Vector2(e),this.decode_Vector2(e))}decode_Vector2(e){let t=this.decode_Float(e),n=this.decode_Float(e);return new Zs(t,n)}decode_Vector3(e){let t=this.decode_Float(e),n=this.decode_Float(e),i=this.decode_Float(e);return new Qs(t,n,i)}};var il=class{encode_variant(e,t){if(typeof e=="number"&&Number.isInteger(e)&&(e>2147483647||e<-2147483648)&&(e=BigInt(e)),!t){let n=this.size_variant(e);t={buffer:Buffer.alloc(n+4),offset:0,len:0},this.encode_UInt32(n,t)}switch(typeof e){case"number":Number.isInteger(e)?(this.encode_UInt32(2,t),this.encode_UInt32(e,t)):(this.encode_UInt32(65539,t),this.encode_Float(e,t));break;case"bigint":this.encode_UInt32(65538,t),this.encode_UInt64(e,t);break;case"boolean":this.encode_UInt32(1,t),this.encode_Bool(e,t);break;case"string":this.encode_UInt32(4,t),this.encode_String(e,t);break;case"undefined":break;default:Array.isArray(e)?(this.encode_UInt32(19,t),this.encode_Array(e,t)):e instanceof Map?(this.encode_UInt32(18,t),this.encode_Dictionary(e,t)):e instanceof Zs?(this.encode_UInt32(5,t),this.encode_Vector2(e,t)):e instanceof so?(this.encode_UInt32(6,t),this.encode_Rect2(e,t)):e instanceof Qs?(this.encode_UInt32(7,t),this.encode_Vector3(e,t)):e instanceof ao?(this.encode_UInt32(8,t),this.encode_Transform2D(e,t)):e instanceof ro?(this.encode_UInt32(9,t),this.encode_Plane(e,t)):e instanceof io?(this.encode_UInt32(10,t),this.encode_Quat(e,t)):e instanceof eo?(this.encode_UInt32(11,t),this.encode_AABB(e,t)):e instanceof Js?(this.encode_UInt32(12,t),this.encode_Basis(e,t)):e instanceof oo?(this.encode_UInt32(13,t),this.encode_Transform(e,t)):e instanceof to&&(this.encode_UInt32(14,t),this.encode_Color(e,t))}return t.buffer}encode_AABB(e,t){this.encode_Vector3(e.position,t),this.encode_Vector3(e.size,t)}encode_Array(e,t){let n=e.length;this.encode_UInt32(n,t),e.forEach(i=>{this.encode_variant(i,t)})}encode_Basis(e,t){this.encode_Vector3(e.x,t),this.encode_Vector3(e.y,t),this.encode_Vector3(e.z,t)}encode_Bool(e,t){this.encode_UInt32(e?1:0,t)}encode_Color(e,t){this.encode_Float(e.r,t),this.encode_Float(e.g,t),this.encode_Float(e.b,t),this.encode_Float(e.a,t)}encode_Dictionary(e,t){let n=e.size;this.encode_UInt32(n,t),Array.from(e.keys()).forEach(s=>{let a=e.get(s);this.encode_variant(s,t),this.encode_variant(a,t)})}encode_Double(e,t){t.buffer.writeDoubleLE(e,t.offset),t.offset+=8}encode_Float(e,t){t.buffer.writeFloatLE(e,t.offset),t.offset+=4}encode_Plane(e,t){this.encode_Float(e.x,t),this.encode_Float(e.y,t),this.encode_Float(e.z,t),this.encode_Float(e.d,t)}encode_Quat(e,t){this.encode_Float(e.x,t),this.encode_Float(e.y,t),this.encode_Float(e.z,t),this.encode_Float(e.w,t)}encode_Rect2(e,t){this.encode_Vector2(e.position,t),this.encode_Vector2(e.size,t)}encode_String(e,t){let n=e.length;for(this.encode_UInt32(n,t),t.buffer.write(e,t.offset,n,"utf8"),t.offset+=n,n+=4;n%4;)n++,t.buffer.writeUInt8(0,t.offset),t.offset++}encode_Transform(e,t){this.encode_Basis(e.basis,t),this.encode_Vector3(e.origin,t)}encode_Transform2D(e,t){this.encode_Vector2(e.origin,t),this.encode_Vector2(e.x,t),this.encode_Vector2(e.y,t)}encode_UInt32(e,t){t.buffer.writeUInt32LE(e,t.offset),t.offset+=4}encode_UInt64(e,t){t.buffer.writeBigUInt64LE(e,t.offset),t.offset+=8}encode_Vector2(e,t){this.encode_Float(e.x,t),this.encode_Float(e.y,t)}encode_Vector3(e,t){this.encode_Float(e.x,t),this.encode_Float(e.y,t),this.encode_Float(e.z,t)}size_Bool(){return this.size_UInt32()}size_Dictionary(e){let t=this.size_UInt32();return Array.from(e.keys()).forEach(i=>{let s=e.get(i);t+=this.size_variant(i),t+=this.size_variant(s)}),t}size_String(e){let t=this.size_UInt32()+e.length;for(;t%4;)t++;return t}size_UInt32(){return 4}size_UInt64(){return 8}size_array(e){let t=this.size_UInt32();return e.forEach(n=>{t+=this.size_variant(n)}),t}size_variant(e){let t=4;switch(typeof e=="number"&&(e>2147483647||e<-2147483648)&&(e=BigInt(e)),typeof e){case"number":t+=this.size_UInt32();break;case"bigint":t+=this.size_UInt64();break;case"boolean":t+=this.size_Bool();break;case"string":t+=this.size_String(e);break;case"undefined":break;default:if(Array.isArray(e)){t+=this.size_array(e);break}else if(e instanceof Map){t+=this.size_Dictionary(e);break}else switch(e.__type__){case"Vector2":t+=this.size_UInt32()*2;break;case"Rect2":t+=this.size_UInt32()*4;break;case"Vector3":t+=this.size_UInt32()*3;break;case"Transform2D":t+=this.size_UInt32()*6;break;case"Plane":t+=this.size_UInt32()*4;break;case"Quat":t+=this.size_UInt32()*4;break;case"AABB":t+=this.size_UInt32()*6;break;case"Basis":t+=this.size_UInt32()*9;break;case"Transform":t+=this.size_UInt32()*12;break;case"Color":t+=this.size_UInt32()*4;break}}return t}};var JR=Ce(im()),zt=ke("debugger.controller",{output:"Godot Debugger"}),ZR=ke("debugger.socket"),yT=new JR.default("\x1B[38;2;211;211;211m"),am=class{command="";paramCount=-1;parameters=[];complete=!1;threadId=0},sl=class{constructor(e){this.session=e}commandBuffer=[];encoder=new il;decoder=new rl;draining=!1;exception="";server;socket;steppingOut=!1;currentCommand=void 0;didFirstOutput=!1;connectedVersion="";break(){this.send_command("break")}continue(){this.send_command("continue")}next(){this.send_command("next")}step(){this.send_command("step")}step_out(){this.steppingOut=!0,this.send_command("next")}set_breakpoint(e,t){this.send_command("breakpoint",[e,t,!0])}remove_breakpoint(e,t){this.session.debug_data.remove_breakpoint(e,t),this.send_command("breakpoint",[e,t,!1])}request_inspect_object(e){this.send_command("inspect_object",[e])}request_scene_tree(){this.send_command("request_scene_tree")}request_stack_dump(){this.send_command("get_stack_dump")}request_stack_frame_vars(e){this.send_command("get_stack_frame_vars",[e])}set_object_property(e,t,n){this.send_command("set_object_property",[e,t,n])}set_exception(e){this.exception=e}async start_game(e){zt.info("Starting game process");let t,n;if(e.editor_path)switch(zt.info("Using 'editor_path' variable from launch.json"),zt.info(`Verifying version of '${e.editor_path}'`),n=gr(e.editor_path,"3"),t=n.godotPath,zt.info(`Verification result: ${n.status}, version: "${n.version}"`),n.status){case"WRONG_VERSION":{let c=`Cannot launch debug session: The current project uses Godot v${await nn()}, but the specified Godot executable is v${n.version}`;zt.warn(c),Xr.window.showErrorMessage(c,"Ok"),this.abort();return}case"INVALID_EXE":{let o=`Cannot launch debug session: '${t}' is not a valid Godot executable`;zt.warn(o),Xr.window.showErrorMessage(o,"Ok"),this.abort();return}default:break}else{zt.info("Using 'editorPath.godot3' from settings");let o="editorPath.godot3";switch(t=We(o),zt.info(`Verifying version of '${t}'`),n=gr(t,"3"),t=n.godotPath,zt.info(`Verification result: ${n.status}, version: "${n.version}"`),n.status){case"WRONG_VERSION":{let u=`Cannot launch debug session: The current project uses Godot v${await nn()}, but the specified Godot executable is v${n.version}`;zt.warn(u),Bn(u,o),this.abort();return}case"INVALID_EXE":{let c=`Cannot launch debug session: '${t}' is not a valid Godot executable`;zt.warn(c),Bn(c,o),this.abort();return}}}this.connectedVersion=n.version;let i=`"${t}" --path "${e.project}"`,s=e.address.replace("tcp://","");if(i+=` --remote-debug "${s}:${e.port}"`,e.profiling&&(i+=" --profiling"),e.debug_collisions&&(i+=" --debug-collisions"),e.debug_paths&&(i+=" --debug-paths"),e.frame_delay&&(i+=` --frame-delay ${e.frame_delay}`),e.time_scale&&(i+=` --time-scale ${e.time_scale}`),e.fixed_fps&&(i+=` --fixed-fps ${e.fixed_fps}`),e.scene&&e.scene!=="main"){zt.info(`Custom scene argument provided: ${e.scene}`);let o=e.scene;if(e.scene==="current"){let c=Xr.window.activeTextEditor.document.fileName;if(c.endsWith(".gd")&&(c=c.replace(".gd",".tscn"),!sm.existsSync(c))){let u=`Can't find associated scene file for ${c}`;zt.warn(u),Xr.window.showErrorMessage(u,"Ok"),this.abort();return}o=c}if(e.scene==="pinned"){if(!Ct){let u="No pinned scene found";zt.warn(u),Xr.window.showErrorMessage(u,"Ok"),this.abort();return}let c=Ct.fsPath;if(c.endsWith(".gd")&&(c=c.replace(".gd",".tscn"),!sm.existsSync(c))){let u=`Can't find associated scene file for ${c}`;zt.warn(u),Xr.window.showErrorMessage(u,"Ok"),this.abort();return}o=c}i+=` "${o}"`}i+=this.session.debug_data.get_breakpoint_string(),e.additional_options&&(i+=` ${e.additional_options}`),zt.info(`Launching game process using command: '${i}'`);let a=yi("debug",i,{shell:!0,detached:!0});a.stdout.on("data",o=>{}),a.stderr.on("data",o=>{}),a.on("close",o=>{})}stash;on_data(e){this.stash&&(e=Buffer.concat([this.stash,e]),this.stash=void 0);let t=YR(e);for(;t.length>0;){let n=t.shift(),i=this.decoder.get_dataset(n)?.slice(1);if(i===void 0){this.stash=Buffer.alloc(n.length),n.copy(this.stash);return}this.parse_message(i)}}async launch(e){zt.info("Starting debug controller in 'launch' mode"),this.server=om.createServer(t=>{this.socket=t,t.on("data",this.on_data.bind(this)),t.on("close",n=>{this.abort()}),t.on("end",()=>{this.abort()}),t.on("error",n=>{}),t.on("drain",()=>{t.resume(),this.draining=!1,this.send_buffer()})}),e.port===-1&&(e.port=await as()),this.server.listen(e.port,e.address),this.start_game(e)}async attach(e){zt.info("Starting debug controller in 'attach' mode"),this.server=om.createServer(t=>{this.socket=t,t.on("data",this.on_data.bind(this)),t.on("close",n=>{}),t.on("end",()=>{}),t.on("error",n=>{}),t.on("drain",()=>{t.resume(),this.draining=!1,this.send_buffer()})}),this.server.listen(e.port,e.address)}parse_message(e){for((!this.currentCommand||this.currentCommand.complete)&&(this.currentCommand=new am,this.currentCommand.command=e.shift());e&&e.length>0;)this.currentCommand.paramCount===-1?this.currentCommand.paramCount=e.shift():this.currentCommand.parameters.push(e.shift()),this.currentCommand.paramCount===this.currentCommand.parameters.length&&(this.currentCommand.complete=!0);this.currentCommand.complete&&(ZR.debug("rx:",[this.currentCommand.command,...this.currentCommand.parameters]),this.handle_command(this.currentCommand))}async handle_command(e){switch(e.command){case"debug_enter":{let t=e.parameters[1];t!=="Breakpoint"?this.set_exception(t):this.set_exception(""),this.request_stack_dump();break}case"debug_exit":break;case"message:click_ctrl":break;case"performance":break;case"message:scene_tree":{let t=em(e.parameters);this.session.sceneTree.fill_tree(t);break}case"message:inspect_object":{let t=BigInt(e.parameters[0]),n=e.parameters[1],i=e.parameters[2];t<0&&(t=t+BigInt(2)**BigInt(64));let s=new no(n);for(let o of i)s.set(o[0],o[5]);let a={name:"",value:s};tl(a),this.session.inspect_callbacks.has(BigInt(t))&&(this.session.inspect_callbacks.get(BigInt(t))(a.name,a),this.session.inspect_callbacks.delete(BigInt(t))),this.session.set_inspection(t,a);break}case"stack_dump":{let t=e.parameters.map((n,i)=>({id:i,file:n.get("file"),function:n.get("function"),line:n.get("line")}));this.trigger_breakpoint(t),this.request_scene_tree();break}case"stack_frame_vars":{this.do_stack_frame_vars(e.parameters);break}case"output":{this.didFirstOutput||(this.didFirstOutput=!0);for(let t of e.parameters)t[0].split(`
`).forEach(n=>Xr.debug.activeDebugConsole.appendLine(yT.parse(n)));break}case"error":{this.didFirstOutput||(this.didFirstOutput=!0),this.handle_error(e);break}}}async handle_error(e){let t=e.parameters[0],n={hr:t[0],min:t[1],sec:t[2],msec:t[3],func:t[4],file:t[5],line:t[6],cond:t[7],msg:t[8],warning:t[9],stack:[]},i=e.parameters[1];for(let l=0;l<i;l+=3){let b=e.parameters[l+2],f=e.parameters[l+3],_=e.parameters[l+4],m=`${b}:${_} @ ${f}()`,p={source:{name:(await _n(b)).toString()},line:_};n.stack.push({msg:m,extras:p})}let s=`${n.hr}:${n.min}:${n.sec}.${n.msec}`,a=`${n.file}:${n.line} @ ${n.func}()`,o=n.warning?"yellow":"red",c=n.file.startsWith("res://")?"GDScript":"C++",u={source:{name:(await _n(n.file)).toString()},line:n.line,group:"startCollapsed"};if(n.msg?(this.stderr(`${qt[o]}${s} | ${n.func}: ${n.msg}`,u),this.stderr(`${qt.dim.white}<${c} Error> ${qt.white}${n.cond}`)):this.stderr(`${qt[o]}${s} | ${n.func}: ${n.cond}`,u),this.stderr(`${qt.dim.white}<${c} Source> ${qt.white}${a}`),i!==0){this.stderr(`${qt.dim.white}<Stack Trace>`,{group:"start"});for(let l of n.stack)this.stderr(`${qt.white}${l.msg}`,l.extras);this.stderr("",{group:"end"})}this.stderr("",{group:"end"})}stdout(e="",t={}){this.session.sendEvent({event:"output",body:{category:"stdout",output:e+qt.reset,...t}})}stderr(e="",t={}){this.session.sendEvent({event:"output",body:{category:"stderr",output:e+qt.reset,...t}})}abort(){zt.info("Aborting debug controller"),this.session.sendEvent(new co.TerminatedEvent),this.stop()}stop(){zt.info("Stopping debug controller"),Kr("debug"),this.socket?.destroy(),this.server?.close(e=>{e&&zt.error(e),this.server.unref(),this.server=void 0})}trigger_breakpoint(e){let t=!1,n=e.length;if(n===0){this.session.debug_data.last_frames=[],this.session.sendEvent(new co.StoppedEvent("breakpoint",0));return}let i=e[0].file.replace("res://",`${this.session.debug_data.projectPath}/`),s=e[0].line;if(this.steppingOut&&!this.session.debug_data.get_breakpoints(i).find(o=>o.line===s))if(this.session.debug_data.stack_count>1)t=this.session.debug_data.stack_count===n;else{let o=e[0].file===this.session.debug_data.last_frame.file,c=e[0].function===this.session.debug_data.last_frame.function,u=e[0].line>=this.session.debug_data.last_frame.line;t=o&&c&&u}if(this.session.debug_data.stack_count=n,this.session.debug_data.last_frame=e[0],this.session.debug_data.last_frames=e,t){this.next();return}this.steppingOut=!1,this.session.debug_data.stack_files=e.map(a=>a.file),this.exception.length===0?this.session.sendEvent(new co.StoppedEvent("breakpoint",0)):(this.session.set_exception(!0),this.session.sendEvent(new co.StoppedEvent("exception",0,this.exception)))}send_command(e,t=[]){let n=[e,...t];ZR.debug("tx:",n);let i=this.encoder.encode_variant(n);this.commandBuffer.push(i),this.send_buffer()}send_buffer(){if(this.socket)for(;!this.draining&&this.commandBuffer.length>0;){let e=this.commandBuffer.shift();this.draining=!this.socket.write(e)}}do_stack_frame_vars(e){let t=new Ju,n=e[0],i=e[1+n*2],s=e[2+(n+i)*2],a=1;for(;n--;)t.locals.push({name:e[a++],value:e[a++]});for(a++;i--;)t.members.push({name:e[a++],value:e[a++]});for(a++;s--;)t.globals.push({name:e[a++],value:e[a++]});t.forEach(o=>tl(o)),this.session.set_scopes(t)}};var U2=ke("debugger.session",{output:"Godot Debugger"}),ol=class extends tr.LoggingDebugSession{all_scopes;controller=new sl(this);debug_data=new Xs(this);sceneTree;exception=!1;got_scope=new cm.Subject;ongoing_inspections=[];previous_inspections=[];configuration_done=new cm.Subject;mode="";inspect_callbacks=new Map;constructor(){super(),this.setDebuggerLinesStartAt1(!1),this.setDebuggerColumnsStartAt1(!1)}dispose(){this.controller.stop()}initializeRequest(e,t){e.body=e.body||{},e.body.supportsConfigurationDoneRequest=!0,e.body.supportsTerminateRequest=!0,e.body.supportsEvaluateForHovers=!1,e.body.supportsStepBack=!1,e.body.supportsGotoTargetsRequest=!1,e.body.supportsCancelRequest=!1,e.body.supportsCompletionsRequest=!1,e.body.supportsFunctionBreakpoints=!1,e.body.supportsDataBreakpoints=!1,e.body.supportsBreakpointLocationsRequest=!1,e.body.supportsConditionalBreakpoints=!1,e.body.supportsHitConditionalBreakpoints=!1,e.body.supportsLogPoints=!1,e.body.supportsModulesRequest=!1,e.body.supportsReadMemoryRequest=!1,e.body.supportsRestartFrame=!1,e.body.supportsRestartRequest=!1,e.body.supportsSetExpression=!1,e.body.supportsStepInTargetsRequest=!1,e.body.supportsTerminateThreadsRequest=!1,this.sendResponse(e),this.sendEvent(new tr.InitializedEvent)}async launchRequest(e,t){await this.configuration_done.wait(1e3),this.mode="launch",this.debug_data.projectPath=t.project,this.exception=!1,await this.controller.launch(t),this.sendResponse(e)}async attachRequest(e,t){await this.configuration_done.wait(1e3),this.mode="attach",this.exception=!1,await this.controller.attach(t),this.sendResponse(e)}configurationDoneRequest(e,t){this.configuration_done.notify(),this.sendResponse(e)}continueRequest(e,t){this.exception||(e.body={allThreadsContinued:!0},this.controller.continue(),this.sendResponse(e))}async evaluateRequest(e,t){if(await t0.debug.activeDebugSession.customRequest("scopes",{frameId:0}),this.all_scopes)try{let n=this.get_variable(t.expression,null,null,null),i=tm(n.variable);e.body={result:i.value,variablesReference:QR(n.variable)?0:n.index}}catch(n){e.success=!1,e.message=n.toString()}e.body||(e.body={result:"null",variablesReference:0}),this.sendResponse(e)}nextRequest(e,t){this.exception||(this.controller.next(),this.sendResponse(e))}pauseRequest(e,t){this.exception||(this.controller.break(),this.sendResponse(e))}async scopesRequest(e,t){this.controller.request_stack_frame_vars(t.frameId),await this.got_scope.wait(2e3),e.body={scopes:[{name:"Locals",variablesReference:1,expensive:!1},{name:"Members",variablesReference:2,expensive:!1},{name:"Globals",variablesReference:3,expensive:!1}]},this.sendResponse(e)}setBreakPointsRequest(e,t){let n=t.source.path.replace(/\\/g,"/"),i=t.lines||[];if(e0.existsSync(n)){let s=this.debug_data.get_breakpoints(n),a=s.map(o=>o.line);for(let o of s)i.indexOf(o.line)===-1&&this.debug_data.remove_breakpoint(n,o.line);for(let o of i)a.indexOf(o)===-1&&(t.breakpoints.find(u=>u.line===o).condition||this.debug_data.set_breakpoint(n,o));s=this.debug_data.get_breakpoints(n),s.sort((o,c)=>o.line<c.line?-1:1),e.body={breakpoints:s.map(o=>new tr.Breakpoint(!0,o.line,1,new tr.Source(o.file.split("/").reverse()[0],o.file)))},this.sendResponse(e)}}stackTraceRequest(e,t){this.debug_data.last_frame&&(e.body={totalFrames:this.debug_data.last_frames.length,stackFrames:this.debug_data.last_frames.map(n=>({id:n.id,name:n.function,line:n.line,column:1,source:new tr.Source(n.file,`${this.debug_data.projectPath}/${n.file.replace("res://","")}`)}))}),this.sendResponse(e)}stepInRequest(e,t){this.exception||(this.controller.step(),this.sendResponse(e))}stepOutRequest(e,t){this.exception||(this.controller.step_out(),this.sendResponse(e))}terminateRequest(e,t){this.mode==="launch"&&(this.controller.stop(),this.sendEvent(new tr.TerminatedEvent)),this.sendResponse(e)}threadsRequest(e){e.body={threads:[new tr.Thread(0,"thread_1")]},this.sendResponse(e)}async variablesRequest(e,t){if(!this.all_scopes){e.body={variables:[]},this.sendResponse(e);return}let n=this.all_scopes[t.variablesReference],i;n.sub_values?i=n.sub_values.map(s=>{let a=this.all_scopes.find(o=>o&&o.scope_path===s.scope_path&&o.name===s.name);if(a)return tm(a,this.all_scopes.findIndex(o=>o&&o.scope_path===`${n.scope_path}.${n.name}`&&o.name===s.name))}):i=[],e.body={variables:i},this.sendResponse(e)}set_exception(e){this.exception=!0}set_scopes(e){this.all_scopes=[void 0,{name:"local",value:void 0,sub_values:e.locals,scope_path:"@"},{name:"member",value:void 0,sub_values:e.members,scope_path:"@"},{name:"global",value:void 0,sub_values:e.globals,scope_path:"@"}];for(let t of e.locals)t.scope_path="@.local",this.append_variable(t);for(let t of e.members)t.scope_path="@.member",this.append_variable(t);for(let t of e.globals)t.scope_path="@.global",this.append_variable(t);this.add_to_inspections(),this.ongoing_inspections.length===0&&(this.previous_inspections=[],this.got_scope.notify())}set_inspection(e,t){let n=this.all_scopes.filter(i=>i&&i.value instanceof Xi&&i.value.id===e);for(let i of n){let s=this.all_scopes.findIndex(o=>o===i),a=this.all_scopes.splice(s,1);t.name=a[0].name,t.scope_path=a[0].scope_path,this.append_variable(t,s)}this.ongoing_inspections.splice(this.ongoing_inspections.findIndex(i=>i===e),1),this.previous_inspections.push(e),this.ongoing_inspections.length===0&&(this.previous_inspections=[],this.got_scope.notify())}add_to_inspections(){for(let e of this.all_scopes)e&&e.value instanceof Xi&&!this.ongoing_inspections.includes(e.value.id)&&!this.previous_inspections.includes(e.value.id)&&(this.controller.request_inspect_object(e.value.id),this.ongoing_inspections.push(e.value.id))}get_variable(e,t=null,n=0,i=null){let s={variable:null,index:null,object_id:null};t||(e.includes("self")||(e="self."+e),t=this.all_scopes.find(_=>_&&_.name==="self"),i=this.all_scopes.find(_=>_&&_.name==="id"&&_.scope_path==="@.member.self").value);let a=e.split("."),o=a[n+1],c=a.slice(0,n+1).join(".").split("self.").join("").split("self").join("").split("[").join(".").split("]").join("");a.length===1&&a[0]==="self"&&(o="self");let u=(o.match(/(?<=\[).*(?=\])/)||[null])[0];u&&(u=u.replace(/['"]+/g,""),o=o.split(/(?<=\[).*(?=\])/).join("").split("[]").join(""),c&&(c+="."),c+=o,o=u);function l(_){return _.split("Members/").join("").split("Locals/").join("")}function b(_){return _.split("@.member.self.").join("").split("@.member.self").join("").split("@.member.").join("").split("@.member").join("").split("@.local.").join("").split("@.local").join("").split("Locals/").join("").split("Members/").join("").split("@").join("")}let f=this.all_scopes.filter(_=>_).map(_=>({sanitized:{name:l(_.name),scope_path:b(_.scope_path)},real:_}));if(s.variable=f.find(_=>_.sanitized.name===o&&_.sanitized.scope_path===c)?.real,!s.variable)throw new Error(`Could not find: ${o}`);if(t.value.entries)if(s.variable.name==="self")s.object_id=this.all_scopes.find(_=>_&&_.name==="id"&&_.scope_path==="@.member.self").value;else if(u){let _=c.split(".")[c.split(".").length-1],m=Array.from(t.value.entries()).find(p=>p&&p[0].split("Members/").join("").split("Locals/").join("")===_)[1];s.object_id=m.get?m.get(u)?.id:m[u]?.id}else{let _=Array.from(t.value.entries()).find(m=>m&&m[0].split("Members/").join("").split("Locals/").join("")===o);s.object_id=_?.[1].id}return s.object_id||(s.object_id=i),s.index=this.all_scopes.findIndex(_=>_&&_.name===s.variable.name&&_.scope_path===s.variable.scope_path),a.length>2&&n<a.length-2&&(s=this.get_variable(a.join("."),s.variable,n+1,s.object_id)),s}append_variable(e,t){t?this.all_scopes.splice(t,0,e):this.all_scopes.push(e);let n=`${e.scope_path}.${e.name}`;e.sub_values&&e.sub_values.forEach((i,s)=>{i.scope_path=n,this.append_variable(i,t?t+s+1:void 0)})}};var nr=Ce(Ks()),a0=Ce(Jg()),c0=Ce(require("node:fs"));var mo=Ce(Ks()),lm=Ce(require("node:fs")),dm=Ce(require("node:net")),Yr=require("vscode");var Dn=65536,va=65536,n0=3<<16,r0=983040;function Gt(r){return+Number.parseFloat(String(r)).toFixed(1)}var Ri=class{constructor(e=0,t=0,n=0){this.x=e;this.y=t;this.z=n}stringify_value(){return`(${Gt(this.x)}, ${Gt(this.y)}, ${Gt(this.z)})`}sub_values(){return[{name:"x",value:this.x},{name:"y",value:this.y},{name:"z",value:this.z}]}type_name(){return"Vector3"}},uo=class extends Ri{type_name(){return"Vector3i"}},Si=class{constructor(e=0,t=0,n=0,i=0){this.x=e;this.y=t;this.z=n;this.w=i}stringify_value(){return`(${Gt(this.x)}, ${Gt(this.y)}, ${Gt(this.z)}, ${Gt(this.w)})`}sub_values(){return[{name:"x",value:this.x},{name:"y",value:this.y},{name:"z",value:this.z},{name:"w",value:this.w}]}type_name(){return"Vector4"}},lo=class extends Si{type_name(){return"Vector4i"}},Di=class{constructor(e=0,t=0){this.x=e;this.y=t}stringify_value(){return`(${Gt(this.x)}, ${Gt(this.y)})`}sub_values(){return[{name:"x",value:this.x},{name:"y",value:this.y}]}type_name(){return"Vector2"}},fo=class extends Di{type_name(){return"Vector2i"}},Yi=class{constructor(e,t,n){this.x=e;this.y=t;this.z=n}stringify_value(){return`(${this.x.stringify_value()}, ${this.y.stringify_value()}, ${this.z.stringify_value()})`}sub_values(){return[{name:"x",value:this.x},{name:"y",value:this.y},{name:"z",value:this.z}]}type_name(){return"Basis"}},Qi=class{constructor(e,t){this.position=e;this.size=t}stringify_value(){return`(${this.position.stringify_value()}, ${this.size.stringify_value()})`}sub_values(){return[{name:"position",value:this.position},{name:"size",value:this.size}]}type_name(){return"AABB"}},ho=class{constructor(e,t,n,i=1){this.r=e;this.g=t;this.b=n;this.a=i}stringify_value(){return`(${Gt(this.r)}, ${Gt(this.g)}, ${Gt(this.b)}, ${Gt(this.a)})`}sub_values(){return[{name:"r",value:this.r},{name:"g",value:this.g},{name:"b",value:this.b},{name:"a",value:this.a}]}type_name(){return"Color"}},al=class{constructor(e,t,n){this.names=e;this.sub_names=t;this.absolute=n}stringify_value(){return`(/${this.names.join("/")}${this.sub_names.length>0?":":""}${this.sub_names.join(":")})`}sub_values(){return[{name:"names",value:this.names},{name:"sub_names",value:this.sub_names},{name:"absolute",value:this.absolute}]}type_name(){return"NodePath"}},po=class extends Map{constructor(t){super();this.class_name=t}},fr=class{constructor(e){this.id=e}stringify_value(){return`<${this.id}>`}sub_values(){return[{name:"id",value:this.id}]}type_name(){return"ObjectId"}},cl=class extends fr{type_name(){return"RID"}},Zi=class{constructor(e,t,n,i){this.x=e;this.y=t;this.z=n;this.d=i}stringify_value(){return`(${Gt(this.x)}, ${Gt(this.y)}, ${Gt(this.z)}, ${Gt(this.d)})`}sub_values(){return[{name:"x",value:this.x},{name:"y",value:this.y},{name:"z",value:this.z},{name:"d",value:this.d}]}type_name(){return"Plane"}},Ji=class{constructor(e,t,n,i){this.x=e;this.y=t;this.z=n;this.w=i}stringify_value(){return`(${Gt(this.x)}, ${Gt(this.y)}, ${Gt(this.z)}, ${Gt(this.w)})`}sub_values(){return[{name:"x",value:this.x},{name:"y",value:this.y},{name:"z",value:this.z},{name:"w",value:this.w}]}type_name(){return"Quat"}},xi=class{constructor(e,t){this.position=e;this.size=t}stringify_value(){return`(${this.position.stringify_value()} - ${this.size.stringify_value()})`}sub_values(){return[{name:"position",value:this.position},{name:"size",value:this.size}]}type_name(){return"Rect2"}},go=class extends xi{type_name(){return"Rect2i"}},es=class{constructor(e,t,n,i){this.x=e;this.y=t;this.z=n;this.w=i}stringify_value(){return`(${this.x.stringify_value()}, ${this.y.stringify_value()}, ${this.z.stringify_value()}, ${this.w.stringify_value()})`}sub_values(){return[{name:"x",value:this.x},{name:"y",value:this.y},{name:"z",value:this.z},{name:"w",value:this.w}]}type_name(){return"Projection"}},ts=class{constructor(e,t){this.basis=e;this.origin=t}stringify_value(){return`(${this.basis.stringify_value()} - ${this.origin.stringify_value()})`}sub_values(){return[{name:"basis",value:this.basis},{name:"origin",value:this.origin}]}type_name(){return"Transform"}},ns=class{constructor(e,t,n){this.origin=e;this.x=t;this.y=n}stringify_value(){return`(${this.origin.stringify_value()} - (${this.x.stringify_value()}, ${this.y.stringify_value()})`}sub_values(){return[{name:"origin",value:this.origin},{name:"x",value:this.x},{name:"y",value:this.y}]}type_name(){return"Transform2D"}},rs=class{constructor(e){this.value=e}stringify_value(){return this.value}sub_values(){return[{name:"value",value:this.value}]}type_name(){return"StringName"}},ul=class{stringify_value(){return"()"}sub_values(){return[]}type_name(){return"Callable"}},ll=class{constructor(e,t){this.name=e;this.oid=t}stringify_value(){return`(${this.name}, ${this.oid.stringify_value()})`}sub_values(){}type_name(){return"Signal"}};function um(r,e={offset:0}){let t=r[e.offset++],n=r[e.offset++],i=r[e.offset++],s=r[e.offset++],a=r[e.offset++],o=r[e.offset++],c=[];for(let u=0;u<t;++u)c.push(um(r,e));return new Ys(n,i,s,c,a,o)}function i0(r){let e=r.byteLength,t=0,n=[];for(;e>0;){let i=r.readUInt32LE(t)+4;n.push(r.subarray(t,t+i)),t+=i,e-=i}return n}function dl(r){let e;if(r)if(Array.isArray(r))e=r.map((t,n)=>({name:`${n}`,value:t}));else if(r instanceof Map){e=[];for(let[t,n]of r.entries()){let i=typeof t.stringify_value=="function"?`${t.type_name()}${t.stringify_value()}`:`${t}`,s=n instanceof fr?n.id:void 0;e.push({id:s,name:i,value:n})}}else typeof r.sub_values=="function"&&(e=r.sub_values()?.map(t=>({name:t.name,value:t.value})));for(let t=0;t<e?.length;t++)e[t].sub_values=dl(e[t].value);return e}var fl=class{decode_variant(e){let t=this.decode_UInt32(e);switch(t&255){case 1:return this.decode_UInt32(e)!==0;case 2:return t&Dn?this.decode_Int64(e):this.decode_Int32(e);case 3:return t&Dn?this.decode_Float64(e):this.decode_Float32(e);case 4:return this.decode_String(e);case 5:return t&Dn?this.decode_Vector2d(e):this.decode_Vector2f(e);case 6:return this.decode_Vector2i(e);case 7:return t&Dn?this.decode_Rect2d(e):this.decode_Rect2f(e);case 8:return this.decode_Rect2i(e);case 9:return t&Dn?this.decode_Vector3d(e):this.decode_Vector3f(e);case 10:return this.decode_Vector3i(e);case 11:return t&Dn?this.decode_Transform2Dd(e):this.decode_Transform2Df(e);case 14:return t&Dn?this.decode_Planed(e):this.decode_Planef(e);case 12:return t&Dn?this.decode_Vector4d(e):this.decode_Vector4f(e);case 13:return this.decode_Vector4i(e);case 15:return t&Dn?this.decode_Quaterniond(e):this.decode_Quaternionf(e);case 16:return t&Dn?this.decode_AABBd(e):this.decode_AABBf(e);case 17:return t&Dn?this.decode_Basisd(e):this.decode_Basisf(e);case 18:return t&Dn?this.decode_Transform3Dd(e):this.decode_Transform3Df(e);case 19:return t&Dn?this.decode_Projectiond(e):this.decode_Projectionf(e);case 20:return this.decode_Color(e);case 21:return this.decode_StringName(e);case 22:return this.decode_NodePath(e);case 23:return this.decode_RID(e);case 24:return t&va?this.decode_Object_id(e):this.decode_Object(e);case 25:return this.decode_Callable(e);case 26:return this.decode_Signal(e);case 27:return this.decode_Dictionary(e,t);case 28:return this.decode_Array(e,t);case 29:return this.decode_PackedByteArray(e);case 30:return this.decode_PackedInt32Array(e);case 31:return this.decode_PackedInt64Array(e);case 32:return this.decode_PackedFloat32Array(e);case 33:return this.decode_PackedFloat32Array(e);case 34:return this.decode_PackedStringArray(e);case 35:return t&va?this.decode_PackedVector2dArray(e):this.decode_PackedVector2fArray(e);case 36:return t&va?this.decode_PackedVector3dArray(e):this.decode_PackedVector3fArray(e);case 38:return t&va?this.decode_PackedVector4dArray(e):this.decode_PackedVector4fArray(e);case 37:return this.decode_PackedColorArray(e);default:return}}get_dataset(e){let t=e.readUInt32LE(0);if(e.length!==t+4)return;let n={buffer:e,offset:4,len:t},i=[];i.push(t+4);do{let s=this.decode_variant(n);if(s===void 0)throw new Error("Unable to decode variant.");i.push(s)}while(n.len>0);return i}decode_ContainerTypeFlag(e,t,n){return(t>>n&3)===1?this.decode_UInt32(e):this.decode_String(e)}decode_AABBf(e){return new Qi(this.decode_Vector3f(e),this.decode_Vector3f(e))}decode_AABBd(e){return new Qi(this.decode_Vector3d(e),this.decode_Vector3d(e))}decode_Array(e,t){let n=[],i=null;t&n0&&(i=this.decode_ContainerTypeFlag(e,t,16));let s=this.decode_UInt32(e);for(let a=0;a<s;a++){let o=this.decode_variant(e);n.push(o)}return n}decode_Basisf(e){return new Yi(this.decode_Vector3f(e),this.decode_Vector3f(e),this.decode_Vector3f(e))}decode_Basisd(e){return new Yi(this.decode_Vector3d(e),this.decode_Vector3d(e),this.decode_Vector3d(e))}decode_Color(e){let t=this.decode_Vector3f(e),n=this.decode_Float32(e);return new ho(t.x,t.y,t.z,n)}decode_Dictionary(e,t){let n=new Map,i=null,s=null;t&r0&&(i=this.decode_ContainerTypeFlag(e,t,16),s=this.decode_ContainerTypeFlag(e,t,18));let a=this.decode_UInt32(e);for(let o=0;o<a;o++){let c=this.decode_variant(e),u=this.decode_variant(e);n.set(c,u)}return n}decode_Float32(e){let t=e.buffer.readFloatLE(e.offset);return e.offset+=4,e.len-=4,t}decode_Float64(e){let t=e.buffer.readDoubleLE(e.offset);return e.offset+=8,e.len-=8,t}decode_Int32(e){let t=e.buffer.readInt32LE(e.offset);return e.len-=4,e.offset+=4,t}decode_UInt32(e){let t=e.buffer.readUInt32LE(e.offset);return e.len-=4,e.offset+=4,t}decode_Int64(e){let t=e.buffer.readBigInt64LE(e.offset);return e.len-=8,e.offset+=8,t}decode_UInt64(e){let t=e.buffer.readBigUInt64LE(e.offset);return e.len-=8,e.offset+=8,t}decode_NodePath(e){let t=this.decode_UInt32(e)&2147483647,n=this.decode_UInt32(e),i=this.decode_UInt32(e),s=(i&1)===1;i&2&&n++;let a=t+n,o=[],c=[];for(let u=0;u<a;u++){let l=this.decode_String(e);u<t?o.push(l):c.push(l)}return new al(o,c,s)}decode_Object(e){let t=this.decode_String(e),n=this.decode_UInt32(e),i=new po(t);for(let s=0;s<n;s++){let a=this.decode_String(e),o=this.decode_variant(e);i.set(a,o)}return i}decode_Object_id(e){let t=this.decode_UInt64(e);return new fr(t)}decode_RID(e){let t=this.decode_UInt64(e);return new cl(t)}decode_Callable(e){return new ul}decode_Signal(e){return new ll(this.decode_String(e),this.decode_Object_id(e))}decode_Planef(e){let t=this.decode_Float32(e),n=this.decode_Float32(e),i=this.decode_Float32(e),s=this.decode_Float32(e);return new Zi(t,n,i,s)}decode_Planed(e){let t=this.decode_Float64(e),n=this.decode_Float64(e),i=this.decode_Float64(e),s=this.decode_Float64(e);return new Zi(t,n,i,s)}decode_PackedByteArray(e){let t=this.decode_UInt32(e),n=[];for(let i=0;i<t;i++)n.push(e.buffer.readUInt8(e.offset)),e.offset++,e.len--;return n}decode_PackedColorArray(e){let t=this.decode_UInt32(e),n=[];for(let i=0;i<t;i++)n.push(this.decode_Color(e));return n}decode_PackedFloat32Array(e){let t=this.decode_UInt32(e),n=[];for(let i=0;i<t;i++)n.push(this.decode_Float32(e));return n}decode_PackedFloat64Array(e){let t=this.decode_UInt32(e),n=[];for(let i=0;i<t;i++)n.push(this.decode_Float64(e));return n}decode_PackedInt32Array(e){let t=this.decode_UInt32(e),n=[];for(let i=0;i<t;i++)n.push(this.decode_Int32(e));return n}decode_PackedInt64Array(e){let t=this.decode_UInt32(e),n=[];for(let i=0;i<t;i++)n.push(this.decode_Int64(e));return n}decode_PackedStringArray(e){let t=this.decode_UInt32(e),n=[];for(let i=0;i<t;i++)n.push(this.decode_String(e));return n}decode_PackedVector2fArray(e){let t=this.decode_UInt32(e),n=[];for(let i=0;i<t;i++)n.push(this.decode_Vector2f(e));return n}decode_PackedVector3fArray(e){let t=this.decode_UInt32(e),n=[];for(let i=0;i<t;i++)n.push(this.decode_Vector3f(e));return n}decode_PackedVector4fArray(e){let t=this.decode_UInt32(e),n=[];for(let i=0;i<t;i++)n.push(this.decode_Vector4f(e));return n}decode_PackedVector2dArray(e){let t=this.decode_UInt32(e),n=[];for(let i=0;i<t;i++)n.push(this.decode_Vector2d(e));return n}decode_PackedVector3dArray(e){let t=this.decode_UInt32(e),n=[];for(let i=0;i<t;i++)n.push(this.decode_Vector3d(e));return n}decode_PackedVector4dArray(e){let t=this.decode_UInt32(e),n=[];for(let i=0;i<t;i++)n.push(this.decode_Vector4d(e));return n}decode_Quaternionf(e){let t=this.decode_Float32(e),n=this.decode_Float32(e),i=this.decode_Float32(e),s=this.decode_Float32(e);return new Ji(t,n,i,s)}decode_Quaterniond(e){let t=this.decode_Float64(e),n=this.decode_Float64(e),i=this.decode_Float64(e),s=this.decode_Float64(e);return new Ji(t,n,i,s)}decode_Rect2f(e){return new xi(this.decode_Vector2f(e),this.decode_Vector2f(e))}decode_Rect2d(e){return new xi(this.decode_Vector2d(e),this.decode_Vector2d(e))}decode_Rect2i(e){return new go(this.decode_Vector2f(e),this.decode_Vector2f(e))}decode_String(e){let t=this.decode_UInt32(e),n=0;t%4!==0&&(n=4-t%4);let i=e.buffer.toString("utf8",e.offset,e.offset+t);return t+=n,e.offset+=t,e.len-=t,i}decode_StringName(e){return new rs(this.decode_String(e))}decode_Transform3Df(e){return new ts(this.decode_Basisf(e),this.decode_Vector3f(e))}decode_Transform3Dd(e){return new ts(this.decode_Basisd(e),this.decode_Vector3d(e))}decode_Projectionf(e){return new es(this.decode_Vector4f(e),this.decode_Vector4f(e),this.decode_Vector4f(e),this.decode_Vector4f(e))}decode_Projectiond(e){return new es(this.decode_Vector4d(e),this.decode_Vector4d(e),this.decode_Vector4d(e),this.decode_Vector4d(e))}decode_Transform2Df(e){return new ns(this.decode_Vector2f(e),this.decode_Vector2f(e),this.decode_Vector2f(e))}decode_Transform2Dd(e){return new ns(this.decode_Vector2d(e),this.decode_Vector2d(e),this.decode_Vector2d(e))}decode_Vector2f(e){let t=this.decode_Float32(e),n=this.decode_Float32(e);return new Di(t,n)}decode_Vector2d(e){let t=this.decode_Float64(e),n=this.decode_Float64(e);return new Di(t,n)}decode_Vector2i(e){let t=this.decode_Int32(e),n=this.decode_Int32(e);return new fo(t,n)}decode_Vector3f(e){let t=this.decode_Float32(e),n=this.decode_Float32(e),i=this.decode_Float32(e);return new Ri(t,n,i)}decode_Vector3d(e){let t=this.decode_Float64(e),n=this.decode_Float64(e),i=this.decode_Float64(e);return new Ri(t,n,i)}decode_Vector3i(e){let t=this.decode_Int32(e),n=this.decode_Int32(e),i=this.decode_Int32(e);return new uo(t,n,i)}decode_Vector4f(e){let t=this.decode_Float32(e),n=this.decode_Float32(e),i=this.decode_Float32(e),s=this.decode_Float32(e);return new Si(t,n,i,s)}decode_Vector4d(e){let t=this.decode_Float64(e),n=this.decode_Float64(e),i=this.decode_Float64(e),s=this.decode_Float64(e);return new Si(t,n,i,s)}decode_Vector4i(e){let t=this.decode_Int32(e),n=this.decode_Int32(e),i=this.decode_Int32(e),s=this.decode_Int32(e);return new lo(t,n,i,s)}};var hl=class{encode_variant(e,t){if(typeof e=="number"&&Number.isInteger(e)&&(e>2147483647||e<-2147483648)&&(e=BigInt(e)),!t){let n=this.size_variant(e);t={buffer:Buffer.alloc(n+4),offset:0,len:0},this.encode_UInt32(n,t)}switch(typeof e){case"number":Number.isInteger(e)?(this.encode_UInt32(2,t),this.encode_UInt32(e,t)):(this.encode_UInt32(3,t),this.encode_Float32(e,t));break;case"bigint":this.encode_UInt32(2|Dn,t),this.encode_UInt64(e,t);break;case"boolean":this.encode_UInt32(1,t),this.encode_Bool(e,t);break;case"string":this.encode_UInt32(4,t),this.encode_String(e,t);break;case"undefined":break;default:Array.isArray(e)?(this.encode_UInt32(28,t),this.encode_Array(e,t)):e instanceof Map?(this.encode_UInt32(27,t),this.encode_Dictionary(e,t)):e instanceof fo?(this.encode_UInt32(6,t),this.encode_Vector2i(e,t)):e instanceof Di?(this.encode_UInt32(5,t),this.encode_Vector2(e,t)):e instanceof go?(this.encode_UInt32(8,t),this.encode_Rect2i(e,t)):e instanceof xi?(this.encode_UInt32(7,t),this.encode_Rect2(e,t)):e instanceof uo?(this.encode_UInt32(10,t),this.encode_Vector3i(e,t)):e instanceof Ri?(this.encode_UInt32(9,t),this.encode_Vector3(e,t)):e instanceof lo?(this.encode_UInt32(13,t),this.encode_Vector4i(e,t)):e instanceof Si?(this.encode_UInt32(12,t),this.encode_Vector4(e,t)):e instanceof ns?(this.encode_UInt32(11,t),this.encode_Transform2D(e,t)):e instanceof rs?(this.encode_UInt32(21,t),this.encode_StringName(e,t)):e instanceof Zi?(this.encode_UInt32(14,t),this.encode_Plane(e,t)):e instanceof es?(this.encode_UInt32(19,t),this.encode_Projection(e,t)):e instanceof Ji?(this.encode_UInt32(15,t),this.encode_Quaternion(e,t)):e instanceof Qi?(this.encode_UInt32(16,t),this.encode_AABB(e,t)):e instanceof Yi?(this.encode_UInt32(17,t),this.encode_Basis(e,t)):e instanceof ts?(this.encode_UInt32(18,t),this.encode_Transform3D(e,t)):e instanceof ho&&(this.encode_UInt32(20,t),this.encode_Color(e,t))}return t.buffer}encode_AABB(e,t){this.encode_Vector3(e.position,t),this.encode_Vector3(e.size,t)}encode_Array(e,t){let n=e.length;this.encode_UInt32(n,t),e.forEach(i=>{this.encode_variant(i,t)})}encode_Basis(e,t){this.encode_Vector3(e.x,t),this.encode_Vector3(e.y,t),this.encode_Vector3(e.z,t)}encode_Bool(e,t){this.encode_UInt32(e?1:0,t)}encode_Color(e,t){this.encode_Float32(e.r,t),this.encode_Float32(e.g,t),this.encode_Float32(e.b,t),this.encode_Float32(e.a,t)}encode_Dictionary(e,t){let n=e.size;this.encode_UInt32(n,t),Array.from(e.keys()).forEach(s=>{let a=e.get(s);this.encode_variant(s,t),this.encode_variant(a,t)})}encode_Float64(e,t){t.buffer.writeDoubleLE(e,t.offset),t.offset+=8}encode_Float32(e,t){t.buffer.writeFloatLE(e,t.offset),t.offset+=4}encode_Plane(e,t){this.encode_Float32(e.x,t),this.encode_Float32(e.y,t),this.encode_Float32(e.z,t),this.encode_Float32(e.d,t)}encode_Quaternion(e,t){this.encode_Float32(e.x,t),this.encode_Float32(e.y,t),this.encode_Float32(e.z,t),this.encode_Float32(e.w,t)}encode_Rect2(e,t){this.encode_Vector2(e.position,t),this.encode_Vector2(e.size,t)}encode_Rect2i(e,t){this.encode_Vector2i(e.position,t),this.encode_Vector2i(e.size,t)}encode_String(e,t){let n=e.length;for(this.encode_UInt32(n,t),t.buffer.write(e,t.offset,n,"utf8"),t.offset+=n,n+=4;n%4;)n++,t.buffer.writeUInt8(0,t.offset),t.offset++}encode_Transform3D(e,t){this.encode_Basis(e.basis,t),this.encode_Vector3(e.origin,t)}encode_Transform2D(e,t){this.encode_Vector2(e.origin,t),this.encode_Vector2(e.x,t),this.encode_Vector2(e.y,t)}encode_Projection(e,t){this.encode_Vector4(e.x,t),this.encode_Vector4(e.y,t),this.encode_Vector4(e.z,t),this.encode_Vector4(e.w,t)}encode_UInt32(e,t){t.buffer.writeUInt32LE(e,t.offset),t.offset+=4}encode_Int32(e,t){t.buffer.writeInt32LE(e,t.offset),t.offset+=4}encode_UInt64(e,t){t.buffer.writeBigUInt64LE(e,t.offset),t.offset+=8}encode_Vector2(e,t){this.encode_Float32(e.x,t),this.encode_Float32(e.y,t)}encode_Vector3(e,t){this.encode_Float32(e.x,t),this.encode_Float32(e.y,t),this.encode_Float32(e.z,t)}encode_Vector4(e,t){this.encode_Float32(e.x,t),this.encode_Float32(e.y,t),this.encode_Float32(e.z,t),this.encode_Float32(e.w,t)}encode_Vector2i(e,t){this.encode_Int32(e.x,t),this.encode_Int32(e.y,t)}encode_Vector3i(e,t){this.encode_Int32(e.x,t),this.encode_Int32(e.y,t),this.encode_Int32(e.z,t)}encode_Vector4i(e,t){this.encode_Int32(e.x,t),this.encode_Int32(e.y,t),this.encode_Int32(e.z,t),this.encode_Int32(e.w,t)}encode_StringName(e,t){this.encode_String(e.value,t)}size_Bool(){return this.size_UInt32()}size_Dictionary(e){let t=this.size_UInt32();return Array.from(e.keys()).forEach(i=>{let s=e.get(i);t+=this.size_variant(i),t+=this.size_variant(s)}),t}size_String(e){let t=this.size_UInt32()+e.length;for(;t%4;)t++;return t}size_UInt32(){return 4}size_UInt64(){return 8}size_array(e){let t=this.size_UInt32();return e.forEach(n=>{t+=this.size_variant(n)}),t}size_variant(e){let t=4;switch(typeof e=="number"&&(e>2147483647||e<-2147483648)&&(e=BigInt(e)),typeof e){case"number":t+=this.size_UInt32();break;case"bigint":t+=this.size_UInt64();break;case"boolean":t+=this.size_Bool();break;case"string":t+=this.size_String(e);break;case"undefined":break;default:if(Array.isArray(e)){t+=this.size_array(e);break}else if(e instanceof Map){t+=this.size_Dictionary(e);break}else if(e instanceof rs){t+=this.size_String(e.value);break}else switch(e.__type__){case"Vector2":case"Vector2i":t+=this.size_UInt32()*2;break;case"Rect2":case"Rect2i":t+=this.size_UInt32()*4;break;case"Vector3":case"Vector3i":t+=this.size_UInt32()*3;break;case"Vector4":case"Vector4i":t+=this.size_UInt32()*4;break;case"Transform2D":t+=this.size_UInt32()*6;break;case"Projection":t+=this.size_UInt32()*16;break;case"Plane":t+=this.size_UInt32()*4;break;case"Quaternion":t+=this.size_UInt32()*4;break;case"AABB":t+=this.size_UInt32()*6;break;case"Basis":t+=this.size_UInt32()*9;break;case"Transform3D":t+=this.size_UInt32()*12;break;case"Color":t+=this.size_UInt32()*4;break}break}return t}};var is=class{_resolve;_reject;promise;timeoutId;constructor(e){this.promise=new Promise((t,n)=>{this._resolve=t,this._reject=n,e!==void 0&&(this.timeoutId=setTimeout(()=>{n(new Error("GodotObjectPromise timed out"))},e))})}async resolve(e){this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=void 0),await this._resolve(e)}async reject(e){this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=void 0),await this._reject(e)}};var hr=class{constructor(e,t=[]){this.godot_id=e;this.path=t}toString(){return`${this.godot_id.toString()}:${this.path.join("/")}`}},pl=class{godot_to_vscode;vscode_to_godot;next_vscode_id;constructor(){this.godot_to_vscode=new Map,this.vscode_to_godot=new Map,this.next_vscode_id=1}create_vscode_id(e){let t=e.toString();if(this.godot_to_vscode.has(t))throw new Error(`Duplicate godot_id: ${t}`);let n=this.next_vscode_id++;return this.godot_to_vscode.set(t,n),this.vscode_to_godot.set(n,e),n}get_godot_id_with_path(e){let t=this.vscode_to_godot.get(e);if(t===void 0)throw new Error(`Unknown vscode_id: ${e}`);return t}get_vscode_id(e,t=!0){let n=this.godot_to_vscode.get(e.toString());if(t&&n===void 0)throw new Error(`Unknown godot_id_with_path: ${e}`);return n}get_or_create_vscode_id(e){let t=this.get_vscode_id(e,!1);return t===void 0&&(t=this.create_vscode_id(e)),t}};var gl=class{constructor(e){this.controller=e}godot_object_promises=new Map;godot_id_to_vscode_id_mapper=new pl;frame_id_to_scopes_map=new Map;get_or_create_frame_scopes(e){var t=this.frame_id_to_scopes_map.get(e);if(t===void 0){let n=BigInt(e);t={},t.Locals=this.godot_id_to_vscode_id_mapper.get_or_create_vscode_id(new hr(-n*3n-1n,[])),t.Members=this.godot_id_to_vscode_id_mapper.get_or_create_vscode_id(new hr(-n*3n-2n,[])),t.Globals=this.godot_id_to_vscode_id_mapper.get_or_create_vscode_id(new hr(-n*3n-3n,[])),this.frame_id_to_scopes_map.set(e,t)}return t}async get_godot_object(e,t=!1){if(t){this.godot_object_promises.delete(e);for(let[s,a]of this.frame_id_to_scopes_map){let o=this.godot_id_to_vscode_id_mapper.get_godot_id_with_path(a.Members),u=(await this.get_godot_object(o.godot_id)).sub_values.find(l=>l.name==="self");u!==void 0&&u.value instanceof fr&&u.value.id===e&&this.godot_object_promises.delete(o.godot_id)}}var n=this.godot_object_promises.get(e);if(n===void 0)if(e<0){let s=(-e-1n)/3n,a=-s*3n-1n,o=-s*3n-2n,c=-s*3n-3n;this.godot_object_promises.set(a,new is),this.godot_object_promises.set(o,new is),this.godot_object_promises.set(c,new is),n=this.godot_object_promises.get(e),this.controller.request_stack_frame_vars(Number(s))}else this.godot_id_to_vscode_id_mapper.get_or_create_vscode_id(new hr(e,[])),n=new is,this.godot_object_promises.set(e,n),this.controller.request_inspect_object(e);return await n.promise}async get_vscode_object(e){let t=this.godot_id_to_vscode_id_mapper.get_godot_id_with_path(e);if(t===void 0)throw new Error(`Unknown variablesReference ${e}`);let n=await this.get_godot_object(t.godot_id);if(n===void 0)throw new Error(`Cannot retrieve path '${t.toString()}'. Godot object with id ${t.godot_id} not found.`);let i=n.sub_values;for(let[a,o]of t.path.entries()){let c=i.find(u=>u.name===o);if(c===void 0)throw new Error(`Cannot retrieve path '${t.toString()}'. Following subpath not found: '${t.path.slice(0,a+1).join("/")}'.`);i=c.sub_values}let s=[];for(let a of i){let o=a.id!==void 0?new hr(a.id,[]):void 0,c=o!==void 0?this.godot_id_to_vscode_id_mapper.get_or_create_vscode_id(o):0,u=await this.parse_variable(a,c,t.godot_id,t.path,this.godot_id_to_vscode_id_mapper);s.push(u)}return s}async get_vscode_variable_by_name(e,t){let n,i=e.split(".");for(var s=0;s<i.length;s++){if(s===0){let c=this.get_or_create_frame_scopes(t),l=[c.Locals,c.Members,c.Globals].map(b=>this.godot_id_to_vscode_id_mapper.get_godot_id_with_path(b)).map(b=>b.godot_id);for(var a of l)if(n=(await this.get_godot_object(a)).sub_values.find(f=>f.name===i[0]),n!==void 0)break}else n.value instanceof fr?n=(await this.get_godot_object(n.value.id)).sub_values.find(u=>u.name===i[s]):n=n.sub_values.find(c=>c.name===i[s]);if(n===void 0)throw new Error(`Cannot retrieve path '${e}'. Following subpath not found: '${i.slice(0,s+1).join(".")}'`)}let o=await this.parse_variable(n,void 0,a,[],this.godot_id_to_vscode_id_mapper);if(o.variablesReference===void 0){let c=n.value instanceof fr?n.value:void 0,u=c!==void 0?this.godot_id_to_vscode_id_mapper.get_or_create_vscode_id(new hr(c.id,[])):0;o.variablesReference=u}return o}async parse_variable(e,t,n,i,s){let a=e.value,o="",c=0;if(typeof a=="number")Number.isInteger(a)?o=`${a}`:o=`${parseFloat(a.toFixed(5))}`;else if(typeof a=="bigint"||typeof a=="boolean"||typeof a=="string")o=`${a}`;else if(typeof a>"u")o="null";else if(Array.isArray(a))o=`(${a.length}) [${a.slice(0,10).join(", ")}]`,c=s.get_or_create_vscode_id(new hr(n,[...i,e.name]));else if(a instanceof Map)o=a.class_name??`Dictionary(${a.size})`,c=s.get_or_create_vscode_id(new hr(n,[...i,e.name]));else if(a instanceof fr){if(a.id===void 0)throw new Error("Invalid godot object: instanceof ObjectId but id is undefined");o=`${(await this.get_godot_object(a.id)).type}${a.stringify_value()}`,c=t}else{try{o=`${a.type_name()}${a.stringify_value()}`}catch{o=`${a}`}c=s.get_or_create_vscode_id(new hr(n,[...i,e.name]))}return{name:e.name,value:o,variablesReference:c}}resolve_variable(e,t,n){let i=this.godot_object_promises.get(e);if(i===void 0)throw new Error(`Received 'inspect_object' for godot_id ${e} but no variable promise to resolve found`);i.resolve({godot_id:e,type:t,sub_values:n})}};var o0=Ce(im()),dt=ke("debugger.controller",{output:"Godot Debugger"}),s0=ke("debugger.socket"),CT=new o0.default("\x1B[38;2;211;211;211m"),fm=class{command="";paramCount=-1;parameters=[];complete=!1;threadId=0},hm=class{Locals=[];Members=[];Globals=[];remaining;stack_frame_id;constructor(e){this.stack_frame_id=e}reset(e){this.remaining=e,this.Locals=[],this.Members=[],this.Globals=[]}append(e,t,n,i,s){let a=["Locals","Members","Globals"][t],o=this[a],c=n===24?i.id:void 0;o.push({id:c,name:e,value:i,type:n,sub_values:s}),this.remaining--}},ml=class{constructor(e){this.session=e}commandBuffer=[];encoder=new hl;decoder=new fl;draining=!1;exception="";threadId;server;socket;steppingOut=!1;didFirstOutput=!1;partialStackVars;projectVersionMajor;projectVersionMinor;projectVersionPoint;setProjectVersion(e){let t=e.split(".").map(Number);this.projectVersionMajor=t[0]||0,this.projectVersionMinor=t[1]||0,this.projectVersionPoint=t[2]||0}break(){this.send_command("break")}continue(){this.send_command("continue")}next(){this.send_command("next")}step(){this.send_command("step")}step_out(){this.steppingOut=!0,this.send_command("next")}set_breakpoint(e,t){this.send_command("breakpoint",[e,t,!0])}remove_breakpoint(e,t){this.session.debug_data.remove_breakpoint(e,t),this.send_command("breakpoint",[e,t,!1])}request_inspect_object(e){this.send_command("scene:inspect_object",[e])}request_scene_tree(){this.send_command("scene:request_scene_tree")}request_stack_dump(){this.send_command("get_stack_dump")}request_stack_frame_vars(e){this.partialStackVars!==void 0&&dt.warn(`Partial stack frames have been requested, while existing request hasn't been completed yet.Remaining stack_frames: ${this.partialStackVars.remaining}Current stack_frame_id: ${this.partialStackVars.stack_frame_id}Requested stack_frame_id: ${e}`),this.partialStackVars=new hm(e),this.send_command("get_stack_frame_vars",[e])}set_object_property(e,t,n){this.send_command("scene:set_object_property",[e,t,n])}set_exception(e){this.exception=e}async start_game(e){dt.info("Starting game process");let t,n;if(e.editor_path)switch(dt.info("Using 'editor_path' variable from launch.json"),dt.info(`Verifying version of '${e.editor_path}'`),n=gr(e.editor_path,"4"),t=n.godotPath,dt.info(`Verification result: ${n.status}, version: "${n.version}"`),n.status){case"WRONG_VERSION":{let c=`Cannot launch debug session: The current project uses Godot v${await nn()}, but the specified Godot executable is v${n.version}`;dt.warn(c),Yr.window.showErrorMessage(c,"Ok"),this.abort();return}case"INVALID_EXE":{let o=`Cannot launch debug session: '${t}' is not a valid Godot executable`;dt.warn(o),Yr.window.showErrorMessage(o,"Ok"),this.abort();return}default:break}else{dt.info("Using 'editorPath.godot4' from settings");let o="editorPath.godot4";switch(t=We(o),dt.info(`Verifying version of '${t}'`),n=gr(t,"4"),t=n.godotPath,dt.info(`Verification result: ${n.status}, version: "${n.version}"`),n.status){case"WRONG_VERSION":{let u=`Cannot launch debug session: The current project uses Godot v${await nn()}, but the specified Godot executable is v${n.version}`;dt.warn(u),Bn(u,o),this.abort();return}case"INVALID_EXE":{let c=`Cannot launch debug session: '${t}' is not a valid Godot executable`;dt.warn(c),Bn(c,o),this.abort();return}}}this.setProjectVersion(n.version);let i=`"${t}" --path "${e.project}"`,s=e.address.replace("tcp://","");if(i+=` --remote-debug "tcp://${s}:${e.port}"`,e.profiling&&(i+=" --profiling"),e.single_threaded_scene&&(i+=" --single-threaded-scene"),e.debug_collisions&&(i+=" --debug-collisions"),e.debug_paths&&(i+=" --debug-paths"),e.debug_navigation&&(i+=" --debug-navigation"),e.debug_avoidance&&(i+=" --debug-avoidance"),e.debug_stringnames&&(i+=" --debug-stringnames"),e.frame_delay&&(i+=` --frame-delay ${e.frame_delay}`),e.time_scale&&(i+=` --time-scale ${e.time_scale}`),e.disable_vsync&&(i+=" --disable-vsync"),e.fixed_fps&&(i+=` --fixed-fps ${e.fixed_fps}`),e.scene&&e.scene!=="main"){dt.info(`Custom scene argument provided: ${e.scene}`);let o=e.scene;if(e.scene==="current"){let c=Yr.window.activeTextEditor.document.fileName;if(c.endsWith(".gd")&&(c=c.replace(".gd",".tscn"),!lm.existsSync(c))){let u=`Can't find associated scene file for ${c}`;dt.warn(u),Yr.window.showErrorMessage(u,"Ok"),this.abort();return}o=c}if(e.scene==="pinned"){if(!Ct){let u="No pinned scene found";dt.warn(u),Yr.window.showErrorMessage(u,"Ok"),this.abort();return}let c=Ct.fsPath;if(c.endsWith(".gd")&&(c=c.replace(".gd",".tscn"),!lm.existsSync(c))){let u=`Can't find associated scene file for ${c}`;dt.warn(u),Yr.window.showErrorMessage(u,"Ok"),this.abort();return}o=c}i+=` "${o}"`}i+=this.session.debug_data.get_breakpoint_string(),e.additional_options&&(i+=` ${e.additional_options}`),dt.info(`Launching game process using command: '${i}'`);let a=yi("debug",i,{shell:!0,detached:!0});a.stdout.on("data",o=>{}),a.stderr.on("data",o=>{}),a.on("close",o=>{})}stash;on_data(e){this.stash&&(e=Buffer.concat([this.stash,e]),this.stash=void 0);let t=i0(e);for(;t.length>0;){let n=t.shift(),i=this.decoder.get_dataset(n)?.slice(1);if(i===void 0){this.stash=Buffer.alloc(n.length),n.copy(this.stash);return}s0.debug("rx:",i[0],i[0][2]);let s=this.parse_message(i[0]);this.handle_command(s)}}async launch(e){dt.info("Starting debug controller in 'launch' mode"),this.server=dm.createServer(t=>{this.socket=t,t.on("data",this.on_data.bind(this)),t.on("close",n=>{this.abort()}),t.on("end",()=>{this.abort()}),t.on("error",n=>{}),t.on("drain",()=>{t.resume(),this.draining=!1,this.send_buffer()})}),e.port===-1&&(e.port=await as()),this.server.listen(e.port,e.address),this.start_game(e)}async attach(e){dt.info("Starting debug controller in 'attach' mode"),this.server=dm.createServer(t=>{this.socket=t,t.on("data",this.on_data.bind(this)),t.on("close",n=>{}),t.on("end",()=>{}),t.on("error",n=>{}),t.on("drain",()=>{t.resume(),this.draining=!1,this.send_buffer()})}),this.server.listen(e.port,e.address)}parse_message(e){let t=new fm,n=0;return t.command=e[n++],this.projectVersionMinor>=2&&(t.threadId=e[n++]),t.parameters=e[n++],t}async handle_command(e){switch(e.command){case"debug_enter":{let o=e.parameters[1];o!=="Breakpoint"?this.set_exception(o):this.set_exception(""),this.request_stack_dump(),this.session.variables_manager=new gl(this);break}case"debug_exit":this.session.variables_manager=void 0;break;case"message:click_ctrl":break;case"performance:profile_frame":break;case"set_pid":this.threadId=e.threadId;break;case"scene:scene_tree":{let o=um(e.parameters);this.session.sceneTree.fill_tree(o);break}case"scene:inspect_object":{let o=BigInt(e.parameters[0]),c=e.parameters[1],u=e.parameters[2];o<0&&(o=o+BigInt(2)**BigInt(64));let l=new po(c);for(let f of u)l.set(f[0],f[5]);let b=dl(l);try{this.session.variables_manager?.resolve_variable(o,c,b)}catch(f){dt.error("Race condition error error in scene:inspect_object",f)}break}case"stack_dump":{let o=[];for(let c=1;c<e.parameters.length;c+=3)o.push({id:o.length,file:e.parameters[c+0],line:e.parameters[c+1],function:e.parameters[c+2]});this.trigger_breakpoint(o),this.request_scene_tree();break}case"stack_frame_vars":{this.partialStackVars!==void 0&&dt.warn("'stack_frame_vars' received again from godot engine before all partial 'stack_frame_var' are received");let o=e.parameters[0];this.partialStackVars.reset(o);break}case"stack_frame_var":{if(this.partialStackVars===void 0){dt.error("Unexpected 'stack_frame_var' received. Should have received 'stack_frame_vars' first.");return}if(typeof e.parameters[0]!="string"){dt.error("Unexpected parameter type for 'stack_frame_var'. Expected string for name, got "+typeof e.parameters[0]);return}if(typeof e.parameters[1]!="number"||e.parameters[1]!==0&&e.parameters[1]!==1&&e.parameters[1]!==2){dt.error("Unexpected parameter type for 'stack_frame_var'. Expected number for scope, got "+typeof e.parameters[1]);return}if(typeof e.parameters[2]!="number"){dt.error("Unexpected parameter type for 'stack_frame_var'. Expected number for type, got "+typeof e.parameters[2]);return}var t=e.parameters[0],n=e.parameters[1],i=e.parameters[2],s=e.parameters[3],a=dl(s);if(this.partialStackVars.append(t,n,i,s,a),this.partialStackVars.remaining===0){let o=this.partialStackVars;this.partialStackVars=void 0,dt.info("All partial 'stack_frame_var' are received.");let c=BigInt(o.stack_frame_id),u=-c*3n-1n,l=-c*3n-2n,b=-c*3n-3n;this.session.variables_manager.resolve_variable(u,"Locals",o.Locals),this.session.variables_manager.resolve_variable(l,"Members",o.Members),this.session.variables_manager.resolve_variable(b,"Globals",o.Globals)}break}case"output":{this.didFirstOutput||(this.didFirstOutput=!0);for(let o of e.parameters[0])o.split(`
`).forEach(c=>Yr.debug.activeDebugConsole.appendLine(CT.parse(c)));break}case"error":{this.didFirstOutput||(this.didFirstOutput=!0),this.handle_error(e);break}}}async handle_error(e){let t=e.parameters,n={hr:t[0],min:t[1],sec:t[2],msec:t[3],file:t[4],func:t[5],line:t[6],error:t[7],desc:t[8],warning:t[9],stack:[]},i=t[10]??0;for(let b=0;b<i;b+=3){let f=t[11+b],_=t[12+b],m=t[13+b],p=`${f.slice(6)}:${m} @ ${_}()`,g={source:{name:(await _n(f)).toString()},line:m};n.stack.push({msg:p,extras:g})}let s=`${n.hr}:${n.min}:${n.sec}.${n.msec}`,a=n.file;a.startsWith("res://")&&(a=a.slice(6));let o=`${a}:${n.line}`,c=n.warning?"yellow":"red",u=n.file.startsWith("res://")?"GDScript":"C++",l={source:{name:(await _n(n.file)).toString()},line:n.line,group:"startCollapsed"};if(n.desc?(this.stderr(`${qt[c]}${s} | ${n.desc}`,l),this.stderr(`${qt.dim.white}<${u} Error> ${qt.white}${n.error}`)):this.stderr(`${qt[c]}${s} | ${n.error}`,l),this.stderr(`${qt.dim.white}<${u} Source> ${qt.white}${o}`),i!==0){this.stderr(`${qt.dim.white}<Stack Trace>`,{group:"start"});for(let b of n.stack)this.stderr(`${qt.white}${b.msg}`,b.extras);this.stderr("",{group:"end"})}this.stderr("",{group:"end"})}stdout(e="",t={}){this.session.sendEvent({event:"output",body:{category:"stdout",output:e+qt.reset,...t}})}stderr(e="",t={}){this.session.sendEvent({event:"output",body:{category:"stderr",output:e+qt.reset,...t}})}abort(){dt.info("Aborting debug controller"),this.session.sendEvent(new mo.TerminatedEvent),this.stop()}stop(){dt.info("Stopping debug controller"),Kr("debug"),this.socket?.destroy(),this.server?.close(e=>{e&&dt.error(e),this.server.unref(),this.server=void 0})}trigger_breakpoint(e){let t=!1,n=e.length;if(n===0){this.session.debug_data.last_frames=[],this.session.sendEvent(new mo.StoppedEvent("breakpoint",0));return}let i=e[0].file.replace("res://",`${this.session.debug_data.projectPath}/`),s=e[0].line;if(this.steppingOut&&!this.session.debug_data.get_breakpoints(i).find(o=>o.line===s))if(this.session.debug_data.stack_count>1)t=this.session.debug_data.stack_count===n;else{let o=e[0].file===this.session.debug_data.last_frame.file,c=e[0].function===this.session.debug_data.last_frame.function,u=e[0].line>=this.session.debug_data.last_frame.line;t=o&&c&&u}if(this.session.debug_data.stack_count=n,this.session.debug_data.last_frame=e[0],this.session.debug_data.last_frames=e,t){this.next();return}this.steppingOut=!1,this.session.debug_data.stack_files=e.map(a=>a.file),this.exception.length===0?this.session.sendEvent(new mo.StoppedEvent("breakpoint",0)):(this.session.set_exception(!0),this.session.sendEvent(new mo.StoppedEvent("exception",0,this.exception)))}send_command(e,t){let n=[e];this.projectVersionMinor>=2&&n.push(this.threadId),n.push(t??[]),s0.debug("tx:",n,n[2]);let i=this.encoder.encode_variant(n);this.commandBuffer.push(i),this.send_buffer()}send_buffer(){if(this.socket)for(;!this.draining&&this.commandBuffer.length>0;){let e=this.commandBuffer.shift();this.draining=!this.socket.write(e)}}};var jt=ke("debugger.session",{output:"Godot Debugger"}),ya=class extends nr.LoggingDebugSession{controller=new ml(this);debug_data=new Xs(this);sceneTree;exception=!1;configuration_done=new a0.Subject;mode="";variables_manager;constructor(e){super(),this.setDebuggerLinesStartAt1(!1),this.setDebuggerColumnsStartAt1(!1),this.controller.setProjectVersion(e)}dispose(){this.controller.stop()}initializeRequest(e,t){jt.info("initializeRequest",t),e.body=e.body||{},e.body.supportsConfigurationDoneRequest=!0,e.body.supportsTerminateRequest=!0,e.body.supportsEvaluateForHovers=!1,e.body.supportsStepBack=!1,e.body.supportsGotoTargetsRequest=!1,e.body.supportsCancelRequest=!1,e.body.supportsCompletionsRequest=!1,e.body.supportsFunctionBreakpoints=!1,e.body.supportsDataBreakpoints=!1,e.body.supportsBreakpointLocationsRequest=!1,e.body.supportsConditionalBreakpoints=!1,e.body.supportsHitConditionalBreakpoints=!1,e.body.supportsLogPoints=!1,e.body.supportsModulesRequest=!1,e.body.supportsReadMemoryRequest=!1,e.body.supportsRestartFrame=!1,e.body.supportsRestartRequest=!1,e.body.supportsSetExpression=!1,e.body.supportsStepInTargetsRequest=!1,e.body.supportsTerminateThreadsRequest=!1,this.sendResponse(e),this.sendEvent(new nr.InitializedEvent)}async launchRequest(e,t){jt.info("launchRequest",t),await this.configuration_done.wait(1e3),this.mode="launch",this.debug_data.projectPath=t.project,this.exception=!1,await this.controller.launch(t),this.sendResponse(e)}async attachRequest(e,t){jt.info("attachRequest",t),await this.configuration_done.wait(1e3),this.mode="attach",this.debug_data.projectPath=t.project,this.exception=!1,await this.controller.attach(t),this.sendResponse(e)}configurationDoneRequest(e,t){jt.info("configurationDoneRequest",t),this.configuration_done.notify(),this.sendResponse(e)}continueRequest(e,t){jt.info("continueRequest",t),this.exception||(e.body={allThreadsContinued:!0},this.controller.continue(),this.sendResponse(e))}nextRequest(e,t){jt.info("nextRequest",t),this.exception||(this.controller.next(),this.sendResponse(e))}pauseRequest(e,t){jt.info("pauseRequest",t),this.exception||(this.controller.break(),this.sendResponse(e))}setBreakPointsRequest(e,t){jt.info("setBreakPointsRequest",t);let n=t.source.path.replace(/\\/g,"/"),i=t.lines||[];if(c0.existsSync(n)){let s=this.debug_data.get_breakpoints(n),a=s.map(o=>o.line);for(let o of s)i.indexOf(o.line)===-1&&this.debug_data.remove_breakpoint(n,o.line);for(let o of i)a.indexOf(o)===-1&&(t.breakpoints.find(u=>u.line===o).condition||this.debug_data.set_breakpoint(n,o));s=this.debug_data.get_breakpoints(n),s.sort((o,c)=>o.line<c.line?-1:1),e.body={breakpoints:s.map(o=>new nr.Breakpoint(!0,o.line,1,new nr.Source(o.file.split("/").reverse()[0],o.file)))},this.sendResponse(e)}}stepInRequest(e,t){jt.info("stepInRequest",t),this.exception||(this.controller.step(),this.sendResponse(e))}stepOutRequest(e,t){jt.info("stepOutRequest",t),this.exception||(this.controller.step_out(),this.sendResponse(e))}terminateRequest(e,t){jt.info("terminateRequest",t),this.mode==="launch"&&(this.controller.stop(),this.sendEvent(new nr.TerminatedEvent)),this.sendResponse(e)}threadsRequest(e){jt.info("threadsRequest"),e.body={threads:[new nr.Thread(0,"thread_1")]},jt.info("threadsRequest response",e),this.sendResponse(e)}stackTraceRequest(e,t){jt.info("stackTraceRequest",t),this.debug_data.last_frame&&(e.body={totalFrames:this.debug_data.last_frames.length,stackFrames:this.debug_data.last_frames.map(n=>({id:n.id,name:n.function,line:n.line,column:1,source:new nr.Source(n.file,`${this.debug_data.projectPath}/${n.file.replace("res://","")}`)}))}),jt.info("stackTraceRequest response",e),this.sendResponse(e)}async scopesRequest(e,t){jt.info("scopesRequest",t);let n=this.variables_manager.get_or_create_frame_scopes(t.frameId),i=[{name:"Locals",variablesReference:n.Locals,expensive:!1},{name:"Members",variablesReference:n.Members,expensive:!1},{name:"Globals",variablesReference:n.Globals,expensive:!1}];e.body={scopes:i},jt.info("scopesRequest response",e),this.sendResponse(e)}async variablesRequest(e,t){jt.info("variablesRequest",t);try{let n=await this.variables_manager.get_vscode_object(t.variablesReference);e.body={variables:n}}catch(n){jt.error("variablesRequest",n),e.success=!1,e.message=n.toString()}jt.info("variablesRequest response",e),this.sendResponse(e)}async evaluateRequest(e,t){jt.info("evaluateRequest",t);try{let n=await this.variables_manager.get_vscode_variable_by_name(t.expression,t.frameId);e.body={result:n.value,variablesReference:n.variablesReference}}catch(n){e.success=!1,e.message=n.toString(),e.body={result:"null",variablesReference:0}}jt.info("evaluateRequest response",e),this.sendResponse(e)}set_exception(e){this.exception=!0}};var ki=require("vscode");var _l=class{_on_did_change_tree_data=new ki.EventEmitter;tree;onDidChangeTreeData=this._on_did_change_tree_data.event;clean_up(){this.tree&&(this.tree=void 0,this._on_did_change_tree_data.fire(void 0))}fill_tree(e,t,n,i){this.tree=this.parse_variable(i,n),this.tree.label=e,this.tree.collapsibleState=ki.TreeItemCollapsibleState.Expanded,this.tree.description=t,this._on_did_change_tree_data.fire(void 0)}getChildren(e){return this.tree?e?e.properties:[this.tree]:[]}getTreeItem(e){return e}get_changed_value(e,t,n){let i=e.length-1,s=e[i].value;if(Array.isArray(s)){let a=Number.parseInt(t.label);a<s.length&&(s[a]=n)}else s instanceof Map?s.set(t.parent.value.key,n):s[t.label]&&(s[t.label]=n);return s}get_top_id(){if(this.tree)return this.tree.object_id}get_top_name(){if(this.tree)return this.tree.label}has_tree(){return this.tree!==void 0}parse_variable(e,t){let n=e.value,i="";typeof n=="number"?Number.isInteger(n)?i=`${n}`:i=`${Number.parseFloat(n.toFixed(5))}`:typeof n=="bigint"||typeof n=="boolean"||typeof n=="string"?i=`${n}`:typeof n>"u"?i="null":Array.isArray(n)?i=`Array[${n.length}]`:n instanceof Map?n instanceof _a?i=`${n.class_name}`:i=`Dictionary[${n.size}]`:i=`${n.type_name()}${n.stringify_value()}`;let s=[];if(n){let o=[];typeof n.sub_values=="function"&&!(n instanceof ba)?o=n.sub_values():Array.isArray(n)?o=n.map((c,u)=>({name:`${u}`,value:c})):n instanceof Map&&(o=Array.from(n.keys()).map(c=>{let u=typeof c.rendered_value=="function"?c.rendered_value():`${c}`,l=n.get(c);return{name:u,value:l}})),s=o?.map(c=>this.parse_variable(c,t))}let a=new pm(e.name,n,t,s,s.length===0?ki.TreeItemCollapsibleState.None:ki.TreeItemCollapsibleState.Collapsed);a.description=i;for(let o of a.properties)o.parent=a;if(a.description=i,n instanceof ba)a.contextValue="remote_object",a.object_id=Number(n.id);else if(typeof n=="number"||typeof n=="bigint"||typeof n=="boolean"||typeof n=="string")a.contextValue="editable_value";else if(Array.isArray(n)||n instanceof Map&&!(n instanceof _a))for(let o of a.properties)o.parent=a;return a}},pm=class extends ki.TreeItem{constructor(t,n,i,s,a){super(t,a);this.label=t;this.value=n;this.object_id=i;this.properties=s;this.collapsibleState=a}changes_parent;parent};var u0=Ce(Ks()),Vn=ke("debugger",{output:"Godot Debugger"}),Ct,bl=class{constructor(e){this.context=e;Vn.info("Initializing Godot Debugger"),this.restore_pinned_file(),e.subscriptions.push(gt.debug.registerDebugConfigurationProvider("godot",this),gt.debug.registerDebugAdapterDescriptorFactory("godot",this),gt.window.registerTreeDataProvider("inspectNode",this.inspectorProvider),gt.window.registerTreeDataProvider("activeSceneTree",this.sceneTreeProvider),gt.window.registerFileDecorationProvider(this),Je("debugger.inspectNode",this.inspect_node.bind(this)),Je("debugger.refreshSceneTree",this.refresh_scene_tree.bind(this)),Je("debugger.refreshInspector",this.refresh_inspector.bind(this)),Je("debugger.editValue",this.edit_value.bind(this)),Je("debugger.debugCurrentFile",this.debug_current_file.bind(this)),Je("debugger.debugPinnedFile",this.debug_pinned_file.bind(this)),Je("debugger.pinFile",this.pin_file.bind(this)),Je("debugger.unpinFile",this.unpin_file.bind(this)),Je("debugger.openPinnedFile",this.open_pinned_file.bind(this)))}session;inspectorProvider=new _l;sceneTreeProvider=new el;_onDidChangeFileDecorations=new gt.EventEmitter;get onDidChangeFileDecorations(){return this._onDidChangeFileDecorations.event}provideFileDecoration(e,t){if(e.scheme==="file"&&Ct&&e.fsPath===Ct.fsPath)return{badge:"\u{1F588}"}}async createDebugAdapterDescriptor(e){Vn.info("Creating debug session");let t=await nn();return Vn.info(`Project version identified as ${t}`),t.startsWith("4")?this.session=new ya(t):this.session=new ol,this.context.subscriptions.push(this.session),this.session.sceneTree=this.sceneTreeProvider,new gt.DebugAdapterInlineImplementation(this.session)}resolveDebugConfiguration(e,t,n){if(t.request||(t.request="launch"),t.request==="launch"&&(t.address||(t.address="127.0.0.1"),t.port||(t.port=-1),t.project||(t.project="${workspaceFolder}")),typeof t.port!="number"||t.port<-1||t.port>65535){gt.window.showErrorMessage("Can't launch debug session: 'port' must be a number between -1 and 65535.","Ok");return}if(t.address.includes("://")){gt.window.showErrorMessage("Can't launch debug session: 'address' cannot include a protocol.","Ok");return}return t}debug_current_file(){Vn.info("Attempting to debug current file");let e=gt.workspace.getConfiguration("launch",gt.window.activeTextEditor.document.uri).get("configurations"),t=e.filter(o=>o.request==="launch"),n=e.filter(o=>o.scene==="current"),i=gt.window.activeTextEditor.document.fileName;if(i.endsWith(".gd")){let o=i.replace(".gd",".tscn");if(!gm.existsSync(o)){Vn.warn(`Can't find associated scene for '${i}', aborting debug`),gt.window.showWarningMessage(`Can't find associated scene file for '${i}'`);return}i=o}let s={name:`Debug ${i} : 'File'}`,type:"godot",request:"launch",scene:"current"},a=n[0]??t[0]??e[0]??s;a.scene=i,Vn.info(`Starting debug session for '${i}'`),gt.debug.startDebugging(gt.workspace.workspaceFolders[0],a)}debug_pinned_file(){Vn.info("Attempting to debug pinned scene");let e=gt.workspace.getConfiguration("launch",Ct).get("configurations"),t=e.filter(o=>o.request==="launch"),n=e.filter(o=>o.scene==="pinned");if(!Ct){Vn.warn("No pinned scene found, aborting debug"),gt.window.showWarningMessage("No pinned scene found");return}let i=Ct.fsPath;if(i.endsWith(".gd")){let o=i.replace(".gd",".tscn");if(!gm.existsSync(o)){Vn.warn(`Can't find associated scene for '${i}', aborting debug`),gt.window.showWarningMessage(`Can't find associated scene file for '${i}'`);return}i=o}let s={name:`Debug ${i} : 'File'}`,type:"godot",request:"launch",scene:"pinned"},a=n[0]??t[0]??e[0]??s;a.scene=i,Vn.info(`Starting debug session for '${i}'`),gt.debug.startDebugging(gt.workspace.workspaceFolders[0],a)}pin_file(e){e===void 0&&(e=gt.window.activeTextEditor.document.uri),Vn.info(`Pinning debug target file: '${e.fsPath}'`),xn("pinnedScene",[e.fsPath]),Ct&&this._onDidChangeFileDecorations.fire(Ct),Ct=e,this.context.workspaceState.update("pinnedScene",Ct),this._onDidChangeFileDecorations.fire(e)}unpin_file(e){Vn.info(`Unpinning debug target file: '${Ct}'`),xn("pinnedScene",[]);let t=Ct;Ct=void 0,this.context.workspaceState.update("pinnedScene",Ct),this._onDidChangeFileDecorations.fire(t)}restore_pinned_file(){Ct=this.context.workspaceState.get("pinnedScene",void 0),Ct&&(Vn.info(`Restoring pinned debug target file: '${Ct.fsPath}'`),xn("pinnedScene",[Ct.fsPath]))}open_pinned_file(){Vn.info(`Opening pinned debug target file: '${Ct}'`),Ct&&gt.window.showTextDocument(Ct)}async inspect_node(e){await this.fill_provider_tree(e.label,BigInt(e.object_id))}create_godot_variable(e){return{value:{type_name:function(){return e.type},stringify_value:function(){return`<${e.godot_id}>`},sub_values:function(){return e.sub_values}}}}async fill_provider_tree(e,t,n=!1){if(this.session instanceof ya){let i=await this.session.variables_manager.get_godot_object(BigInt(t),n),s=this.create_godot_variable(i);this.inspectorProvider.fill_tree(e,i.type,Number(i.godot_id),s)}else this.session?.controller.request_inspect_object(BigInt(t)),this.session?.inspect_callbacks.set(BigInt(t),(i,s)=>{this.inspectorProvider.fill_tree(e,i,Number(t),s)})}refresh_scene_tree(){this.session?.controller.request_scene_tree()}async refresh_inspector(){if(this.inspectorProvider.has_tree()){let e=this.inspectorProvider.get_top_name(),t=this.inspectorProvider.get_top_id();await this.fill_provider_tree(e,BigInt(t),!0)}}async edit_value(e){let t=e.value,n=typeof t,i=n==="number"&&!Number.isInteger(t),s=await gt.window.showInputBox({value:`${e.description}`}),a;switch(n){case"string":a=s;break;case"number":if(i){if(a=Number.parseFloat(s),Number.isNaN(a))return}else if(a=Number.parseInt(s),Number.isNaN(a))return;break;case"boolean":if(s.toLowerCase()==="true"||s.toLowerCase()==="false")a=s.toLowerCase()==="true";else if(s==="0"||s==="1")a=s==="1";else return}if(e.changes_parent){let u=[e.parent],l=0;for(;u[l].changes_parent;)u.push(u[l++].parent);let b=this.inspectorProvider.get_changed_value(u,e,a);this.session?.controller.set_object_property(BigInt(e.object_id),u[l].label,b)}else this.session?.controller.set_object_property(BigInt(e.object_id),e.label,a);let o=this.inspectorProvider.get_top_name(),c=BigInt(this.inspectorProvider.get_top_id());await this.fill_provider_tree(o,c,!0),this.session.sendEvent(new u0.InvalidatedEvent(["variables"])),console.log("foo")}};var m0=Ce(require("vscode"));var Ra=require("vscode"),vl=Ce(require("node:fs")),_o=Ce(l0()),bo=Ce(d0());var f0=["and","as","await","break","breakpoint","class_name","class","const","continue","elif","else","enum","export","extends","for","if","in","is","master","mastersync","when","not","onready","or","pass","puppet","puppetsync","remote","remotesync","return","setget","signal","static","tool","var","while","yield"],h0=["**","<<",">>","==","!=",">=","<=","&&","||","+=","-=","*=","/=","%=","**=","&=","^=","|=","~=","<<=",">>=",":=","->","&","|","^","-","+","/","*",">","<","-","%"];var RT=ke("formatter.tm");function ST(r){return new Promise((e,t)=>{vl.readFile(r,(n,i)=>n?t(n):e(i))})}var p0=kn("syntaxes/GDScript.tmLanguage.json").fsPath,DT=kn("resources/onig.wasm").fsPath,xT=vl.readFileSync(DT).buffer,kT=new _o.Registry({onigLib:bo.loadWASM(xT).then(()=>({createOnigScanner(r){return new bo.OnigScanner(r)},createOnigString(r){return new bo.OnigString(r)}})),loadGrammar:r=>r==="source.gdscript"?ST(p0).then(e=>_o.parseRawGrammar(e.toString(),p0)):null});function PT(){return{maxEmptyLines:We("formatter.maxEmptyLines")==="1"?1:2,denseFunctionParameters:We("formatter.denseFunctionParameters")}}function TT(r){if(r.scopes.includes("string.quoted.gdscript")&&(r.string=!0),r.scopes.includes("meta.function.parameters.gdscript")&&(r.param=!0),r.scopes[0].includes("constant.numeric")){r.type="literal";return}if(r.value.match(/[A-Za-z_]\w+/)&&(r.identifier=!0),r.scopes.includes("meta.literal.nodepath.gdscript")){r.skip=!0,r.type="nodepath";return}if(r.scopes.includes("meta.literal.nodepath.bare.gdscript")){r.skip=!0,r.type="bare_nodepath";return}if(r.scopes.includes("keyword.control.flow.gdscript")){r.type="keyword";return}if(f0.includes(r.value)){r.type="keyword";return}if(h0.includes(r.value)){r.type="symbol";return}if(r.value!=="preload"){if(r.scopes.includes("keyword.language.gdscript")){r.type="keyword";return}if(r.scopes.includes("constant.language.gdscript")){r.type="constant";return}if(r.scopes.includes("variable.other.gdscript")){r.type="variable";return}if(r.scopes.includes("comment.line.number-sign.gdscript")){r.type="comment";return}}}function ET(r,e,t){let n=r[e],i=r[e-1],s=n.value,a=i?.value;if(!a)return"";if(s==="##"||s==="#")return" ";if(i.skip&&n.skip||a==="(")return"";if(a===".")return n?.type==="symbol"?" ":"";if(s===".")return"";if(n.param){if(t.denseFunctionParameters){if((a==="-"||a==="+")&&(r[e-2]?.value==="="||["keyword","symbol"].includes(r[e-2]?.type)||[",","("].includes(r[e-2]?.value)))return"";if(s==="%"||a==="%")return" ";if(s==="=")return r[e-2]?.value===":"?" ":"";if(a==="=")return r[e-3]?.value===":"?" ":"";if(i?.type==="symbol"||n.type==="symbol")return" "}else if(s===":"&&r[e+1]?.value==="=")return" "}if(s===":"){if(["var","const"].includes(r[e-2]?.value))return r[e+1]?.value!=="="?"":" ";if(i?.type==="keyword")return""}if(a==="@")return"";if(a==="-"||a==="+"){if(s==="(")return" ";if(["keyword","symbol"].includes(r[e-2]?.type)||[",","(","["].includes(r[e-2]?.value))return"";if(n.identifier)return" ";if(e===1)return""}return a===":"&&s==="="||s==="("&&(a==="export"||a==="func"||a==="assert")?"":a===")"&&n.type==="keyword"?" ":a==="["&&n.type==="symbol"||a==="["&&n.type==="nodepath"||a==="["&&n.type==="bare_nodepath"?"":a===":"||a===";"||a==="##"||a==="#"||s==="="||a==="="?" ":r[e-2]?.value==="="&&["+","-"].includes(a)||a==="("?"":s==="{"||s==="\\"||s==="{}"||i?.type==="keyword"||n.type==="keyword"||i?.type==="symbol"||n.type==="symbol"||a===","?" ":""}var bm=null;kT.loadGrammar("source.gdscript").then(r=>{bm=r});function IT(r){return r.text[r.firstNonWhitespaceCharacterIndex]==="#"}function g0(r,e){if(!bm)return[];let t=[],n=e??PT(),i=null,s=null,a=!0,o=0;for(let c=0;c<r.lineCount;c++){let u=r.lineAt(c);if(u.isEmptyOrWhitespace){if(a?t.push(Ra.TextEdit.delete(u.rangeIncludingLineBreak)):o++,c===r.lineCount-1)for(let m=c-o+1;m<r.lineCount;m++)t.push(Ra.TextEdit.delete(r.lineAt(m).rangeIncludingLineBreak));continue}if(a=!1,o){let m=n.maxEmptyLines;i===":"&&(m=0);for(let p=o-m;p>0;p--)t.push(Ra.TextEdit.delete(r.lineAt(c-p).rangeIncludingLineBreak));o=0}if(IT(u))continue;let l="";s=bm.tokenizeLine(u.text,s?.ruleStack??_o.INITIAL);let b=u.text.slice(0,u.firstNonWhitespaceCharacterIndex);l+=b;let f=s.tokens[0];u.text.slice(f.startIndex,f.endIndex).trim()===""&&s.tokens.shift();let _=[];for(let m of s.tokens){let p={scopes:[m.scopes.join(" "),...m.scopes],original:u.text.slice(m.startIndex,m.endIndex),value:u.text.slice(m.startIndex,m.endIndex).trim()};TT(p),!(!p.string&&p.value.trim()==="")&&_.push(p)}for(let m=0;m<_.length;m++)xa()&&RT.debug(m,_[m].value,_[m]),m===0&&_[m].string?l+=_[m].original.trimStart():m>0&&_[m-1].string&&_[m].string?l+=_[m].original:l+=ET(_,m,n)+_[m].value.trim(),_[m].type!=="comment"&&(i=_[m].value);t.push(Ra.TextEdit.replace(u.range,l))}return t}var fN=ke("formatter"),yl=class{constructor(e){this.context=e;let t={language:"gdscript",scheme:"file"};e.subscriptions.push(m0.languages.registerDocumentFormattingEditProvider(t,this))}provideDocumentFormattingEdits(e){return g0(e)}};var vt={};function AT(r){Em(r),vt.context=r,vt.lsp=new pa(r),vt.debug=new bl(r),vt.scenePreviewProvider=new Ma(r),vt.linkProvider=new Fa(r),vt.dropsProvider=new qa(r),vt.hoverProvider=new Nu(r),vt.inlayProvider=new qu(r),vt.formattingProvider=new yl(r),vt.docsProvider=new $u(r),vt.definitionProvider=new Aa(r),r.subscriptions.push(Je("openEditor",MT),Je("openEditorSettings",FT),Je("copyResourcePath",NT),Je("listGodotClasses",qT),Je("switchSceneScript",LT),Je("getGodotPath",jT)),xn("godotFiles",["gdscript","gdscene","gdresource","gdshader"]),xn("sceneLikeFiles",["gdscript","gdscene"]),nn().then(async()=>{OT()})}async function OT(){let r=await nn();if(r===void 0)return;let e=`editorPath.godot${r[0]}`,t=gr(We(e),r[0]),n=t.godotPath;switch(t.status){case"SUCCESS":break;case"WRONG_VERSION":{let i=`The specified Godot executable, '${n}' is the wrong version. 
				The current project uses Godot v${r}, but the specified executable is Godot v${t.version}.
				Extension features will not work correctly unless this is fixed.`;Bn(i,e);break}case"INVALID_EXE":{let i=`The specified Godot executable, '${n}' is invalid. 
				Extension features will not work correctly unless this is fixed.`;Bn(i,e);break}}}function $T(){return new Promise((r,e)=>{vt.lsp.client.stop(),r()})}async function NT(r){r||(r=In.window.activeTextEditor.document.uri);let e=await Pa(r);In.env.clipboard.writeText(e)}async function qT(){await vt.docsProvider.list_native_classes()}async function LT(){let r=In.window.activeTextEditor.document.uri.fsPath;r.endsWith(".tscn")?r=r.replace(".tscn",".gd"):r.endsWith(".gd")&&(r=r.replace(".gd",".tscn"));let e=await Ia(r);e&&In.window.showTextDocument(e)}async function MT(){let r=await Zr(),e=await nn(),t=`editorPath.godot${e[0]}`,n=gr(We(t),e[0]),i=n.godotPath;switch(n.status){case"SUCCESS":{let s=`"${i}" --path "${r}" -e`;We("editor.verbose")&&(s+=" -v");let a=In.window.terminals.find(u=>u.name==="Godot Editor");a&&a.dispose();let o={name:"Godot Editor",iconPath:kn("resources/godot_icon.svg"),pty:new ym(s),isTransient:!0},c=In.window.createTerminal(o);We("editor.revealTerminal")&&c.show();break}case"WRONG_VERSION":{let s=`Cannot launch Godot editor: The current project uses Godot v${e}, but the specified Godot executable is version ${n.version}`;Bn(s,t);break}case"INVALID_EXE":{let s=`Cannot launch Godot editor: '${t}' value of '${i}' is not a valid Godot executable`;Bn(s,t);break}}}async function FT(){let r=Pm(),e=_0.readdirSync(r).filter(i=>i.endsWith(".tres")),t=await nn();for(let i of e)if(i.includes(t)){e.unshift(e.splice(e.indexOf(i),1)[0]);break}let n=[];for(let i of e){let s={label:i,description:vm.join(r,i)};n.push(s)}In.window.showQuickPick(n).then(async i=>{if(i===void 0)return;let s=vm.join(r,i.label),a=await In.workspace.openTextDocument(s);In.window.showTextDocument(a)})}async function jT(){let r=await nn();if(r===void 0)return;let e=`editorPath.godot${r[0]}`;return xl(We(e))}var ym=class{constructor(e){this.command=e}writeEmitter=new In.EventEmitter;onDidWrite=this.writeEmitter.event;closeEmitter=new In.EventEmitter;onDidClose=this.closeEmitter.event;open(e){let t=yi("GodotEditor",this.command,{shell:!0,detached:!0});this.writeEmitter.fire(`Starting Godot Editor process...\r
`),t.stdout.on("data",n=>{n.toString().trim()&&this.writeEmitter.fire(n+`\r
`)}),t.stderr.on("data",n=>{n.toString().trim()&&this.writeEmitter.fire(n+`\r
`)}),t.on("close",n=>{this.writeEmitter.fire(`Godot Editor stopped with exit code: ${n}\r
`)})}close(){Kr("GodotEditor")}};0&&(module.exports={activate,deactivate,globals});
//! I do not understand why this is necessary
//! if you don't touch this csharp object, it's not imported or something, idk
/*! Bundled license information:

prismjs/prism.js:
  (**
   * Prism: Lightweight, robust, elegant syntax highlighting
   *
   * @license MIT <https://opensource.org/licenses/MIT>
   * @author Lea Verou <https://lea.verou.me>
   * @namespace
   * @public
   *)
*/
